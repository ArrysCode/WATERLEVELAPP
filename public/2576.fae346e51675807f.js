"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2576],{2576:(M,p,l)=>{l.r(p),l.d(p,{Tab5PageModule:()=>y});var g=l(1368),h=l(4716),n=l(2112),b=l(9148),f=l(1528),o=l(4496),m=l(5359),C=l(4319);const x=(r,t)=>({"card-seleccionada":r,"card-no-seleccionada":t});function P(r,t){if(1&r){const s=o.KQA();o.I0R(0,"ion-card",3),o.qCj("click",function(){const i=o.usT(s).index,c=o.GaO();return o.CGJ(c.seleccionarCard(i))}),o.I0R(1,"ion-card-header"),o.OEk(2),o.C$Y(),o.I0R(3,"ion-card-content")(4,"div",4),o.wR5(5,"ion-icon",5),o.I0R(6,"h2"),o.OEk(7),o.C$Y()(),o.I0R(8,"ion-button",6),o.qCj("click",function(){const i=o.usT(s).$implicit,c=o.GaO();return o.CGJ(c.editarUsuario(i))}),o.wR5(9,"ion-icon",7),o.C$Y()()()}if(2&r){const s=t.$implicit,e=t.index,a=o.GaO();o.E7m("ngClass",o.IBC(3,x,e===a.cardSeleccionada,e!==a.cardSeleccionada)),o.yG2(2),o.oRS(" ",s.correo," "),o.yG2(5),o.oRS("Rol: ",s.rol,"")}}const T=[{path:"",component:(()=>{var r;class t{constructor(e,a,i){this.authService=e,this.alertController=a,this.firestore=i,this.usuarios=[],this.usuariosFiltrados=[]}ngOnInit(){this.authService.getUsuariosExceptoActual().subscribe(e=>{this.usuarios=e,console.log("Usuarios obtenidos:",this.usuarios)}),this.cardSeleccionada=-1}filtrarUsuarios(e){const a=e.target.value.toLowerCase();console.log("Texto de b\xfasqueda:",a),this.usuariosFiltrados=this.usuarios.filter(i=>{const c=i.correo.toLowerCase().includes(a),u=i.rol.toString().toLowerCase().includes(a),d=c||u;return d&&console.log("Usuario coincidente:",i),d})}seleccionarCard(e){this.cardSeleccionada=e,console.log("Datos del usuario seleccionado:",this.usuarios[e])}editarUsuario(e){var a=this;return(0,f.c)(function*(){var c;console.log("Usuario a editar:",e),yield(yield a.alertController.create({header:"Editar Usuario",subHeader:e.correo,message:`Rol actual: ${e.rol}`,inputs:[{name:"nuevoRol",type:"radio",label:"Admin",value:"admin",checked:"admin"===e.rol,handler:()=>{console.log("Opci\xf3n seleccionada: Admin")}},{name:"nuevoRol",type:"radio",label:"Usuario",value:"user",checked:"user"===e.rol,handler:()=>{console.log("Opci\xf3n seleccionada: Usuario")}}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:(c=(0,f.c)(function*(u){try{console.log("Data:",u);const d=u;yield a.actualizarUsuario(e.uid,d),yield(yield a.alertController.create({header:"\xc9xito",message:"Usuario actualizado correctamente.",buttons:["OK"]})).present()}catch(d){console.error("Error al actualizar usuario:",d)}}),function(d){return c.apply(this,arguments)})}]})).present()})()}actualizarUsuario(e,a){var i=this;return(0,f.c)(function*(){try{void 0!==a?yield i.firestore.collection("usuarios").doc(e).update({rol:a}):console.error("El nuevo rol es indefinido.")}catch(c){throw console.error("Error al actualizar usuario:",c),c}})()}}return(r=t).\u0275fac=function(e){return new(e||r)(o.GI1(m.o),o.GI1(n.iW),o.GI1(C.i4))},r.\u0275cmp=o.In1({type:r,selectors:[["app-tab5"]],decls:7,vars:1,consts:[[3,"ionInput"],[1,"ion-padding"],["class","custom-card",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"custom-card",3,"ngClass","click"],[1,"user-info"],["name","person-circle",1,"user-icon"],["fill","clear",1,"edit-button",3,"click"],["name","pencil",1,"edit-brush-icon"]],template:function(e,a){1&e&&(o.I0R(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o.OEk(3," Modificar Rol del Usuario "),o.C$Y()()(),o.I0R(4,"ion-searchbar",0),o.qCj("ionInput",function(c){return a.filtrarUsuarios(c)}),o.C$Y(),o.I0R(5,"ion-content",1),o.yuY(6,P,10,6,"ion-card",2),o.C$Y()),2&e&&(o.yG2(6),o.E7m("ngForOf",a.usuariosFiltrados))},dependencies:[g.QF,g.ay,n.sn,n.KC,n.Gg,n.YY,n._i,n.wB,n.Ko,n.KQ,n.tM,n.Md,n.qG],styles:['@charset "UTF-8";.custom-card[_ngcontent-%COMP%]{border-radius:15px;box-shadow:0 2px 4px #0000001a;margin-bottom:5px}.user-icon[_ngcontent-%COMP%]{font-size:30px;color:#e6a131;margin-bottom:5px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-button[_ngcontent-%COMP%]{margin-left:auto;color:#e6a131}.edit-brush-icon[_ngcontent-%COMP%]{border:2px solid;border-color:#e6a131;border-radius:50%;padding:5px}ion-card[_ngcontent-%COMP%]{margin:10px;border-radius:15px;box-shadow:0 4px 8px red;transition:transform .3s ease,border-color .3s ease}.card-seleccionada[_ngcontent-%COMP%]{border:3px solid #d9a326}.card-no-seleccionada[_ngcontent-%COMP%]{border:2px solid transparent}ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}ion-card[_ngcontent-%COMP%]:active{transform:translateY(0)}ion-card[_ngcontent-%COMP%]:focus{border-color:#d9a326}ion-card-header[_ngcontent-%COMP%]{background-color:#d9a326;border-bottom:1px solid #ccc;font-weight:700;color:#fff;padding:5px;font-size:20px}ion-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px;background-color:#ffffff14;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}ion-icon[_ngcontent-%COMP%]{margin-right:10px}']}),t})()}];let v=(()=>{var r;class t{}return(r=t).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.a4G({type:r}),r.\u0275inj=o.s3X({imports:[b.qQ.forChild(T),b.qQ]}),t})(),y=(()=>{var r;class t{}return(r=t).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.a4G({type:r}),r.\u0275inj=o.s3X({imports:[g.MD,h.y,n.wZ,v]}),t})()}}]);