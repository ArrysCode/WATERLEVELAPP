(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1590],{6400:(mn,st,N)=>{"use strict";N.d(st,{C_:()=>We,w8:()=>Ge});var l=N(1528);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var je=function(Le){return Le.Unimplemented="UNIMPLEMENTED",Le.Unavailable="UNAVAILABLE",Le}(je||{});class Qe extends Error{constructor(Ce,Ye,It){super(Ce),this.message=Ce,this.code=Ye,this.data=It}}const Ee=Le=>{var Ce,Ye,It,Wt,un;const nt=Le.CapacitorCustomPlatform||null,me=Le.Capacitor||{},he=me.Plugins=me.Plugins||{},ye=Le.CapacitorPlatforms,Je=(null===(Ce=null==ye?void 0:ye.currentPlatform)||void 0===Ce?void 0:Ce.getPlatform)||(()=>null!==nt?nt.name:(Le=>{var Ce,Ye;return null!=Le&&Le.androidBridge?"android":null!==(Ye=null===(Ce=null==Le?void 0:Le.webkit)||void 0===Ce?void 0:Ce.messageHandlers)&&void 0!==Ye&&Ye.bridge?"ios":"web"})(Le)),$t=(null===(Ye=null==ye?void 0:ye.currentPlatform)||void 0===Ye?void 0:Ye.isNativePlatform)||(()=>"web"!==Je()),dn=(null===(It=null==ye?void 0:ye.currentPlatform)||void 0===It?void 0:It.isPluginAvailable)||(kt=>{const vn=xt.get(kt);return!!(null!=vn&&vn.platforms.has(Je())||an(kt))}),an=(null===(Wt=null==ye?void 0:ye.currentPlatform)||void 0===Wt?void 0:Wt.getPluginHeader)||(kt=>{var vn;return null===(vn=me.PluginHeaders)||void 0===vn?void 0:vn.find(Ft=>Ft.name===kt)}),xt=new Map,Tt=(null===(un=null==ye?void 0:ye.currentPlatform)||void 0===un?void 0:un.registerPlugin)||((kt,vn={})=>{const Ft=xt.get(kt);if(Ft)return console.warn(`Capacitor plugin "${kt}" already registered. Cannot register plugins twice.`),Ft.proxy;const Qt=Je(),Sn=an(kt);let xn;const br=function(){var sr=(0,l.c)(function*(){return!xn&&Qt in vn?xn=xn="function"==typeof vn[Qt]?yield vn[Qt]():vn[Qt]:null!==nt&&!xn&&"web"in vn&&(xn=xn="function"==typeof vn.web?yield vn.web():vn.web),xn});return function(){return sr.apply(this,arguments)}}(),Cr=sr=>{let Et;const Xt=(...Yt)=>{const bt=br().then(yn=>{const hn=((sr,Et)=>{var Xt,Yt;if(!Sn){if(sr)return null===(Yt=sr[Et])||void 0===Yt?void 0:Yt.bind(sr);throw new Qe(`"${kt}" plugin is not implemented on ${Qt}`,je.Unimplemented)}{const bt=null==Sn?void 0:Sn.methods.find(yn=>Et===yn.name);if(bt)return"promise"===bt.rtype?yn=>me.nativePromise(kt,Et.toString(),yn):(yn,hn)=>me.nativeCallback(kt,Et.toString(),yn,hn);if(sr)return null===(Xt=sr[Et])||void 0===Xt?void 0:Xt.bind(sr)}})(yn,sr);if(hn){const nr=hn(...Yt);return Et=null==nr?void 0:nr.remove,nr}throw new Qe(`"${kt}.${sr}()" is not implemented on ${Qt}`,je.Unimplemented)});return"addListener"===sr&&(bt.remove=(0,l.c)(function*(){return Et()})),bt};return Xt.toString=()=>`${sr.toString()}() { [capacitor code] }`,Object.defineProperty(Xt,"name",{value:sr,writable:!1,configurable:!1}),Xt},Tn=Cr("addListener"),Wn=Cr("removeListener"),Sr=(sr,Et)=>{const Xt=Tn({eventName:sr},Et),Yt=function(){var yn=(0,l.c)(function*(){const hn=yield Xt;Wn({eventName:sr,callbackId:hn},Et)});return function(){return yn.apply(this,arguments)}}(),bt=new Promise(yn=>Xt.then(()=>yn({remove:Yt})));return bt.remove=(0,l.c)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Yt()}),bt},ri=new Proxy({},{get(sr,Et){switch(Et){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Sn?Sr:Tn;case"removeListener":return Wn;default:return Cr(Et)}}});return he[kt]=ri,xt.set(kt,{name:kt,proxy:ri,platforms:new Set([...Object.keys(vn),...Sn?[Qt]:[]])}),ri});return me.convertFileSrc||(me.convertFileSrc=kt=>kt),me.getPlatform=Je,me.handleError=kt=>Le.console.error(kt),me.isNativePlatform=$t,me.isPluginAvailable=dn,me.pluginMethodNoop=(kt,vn,Ft)=>Promise.reject(`${Ft} does not have an implementation of "${vn}".`),me.registerPlugin=Tt,me.Exception=Qe,me.DEBUG=!!me.DEBUG,me.isLoggingEnabled=!!me.isLoggingEnabled,me.platform=me.getPlatform(),me.isNative=me.isNativePlatform(),me},He=(Le=>Le.Capacitor=Ee(Le))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),We=He.registerPlugin;class Ge{constructor(Ce){this.listeners={},this.windowListeners={},Ce&&(console.warn(`Capacitor WebPlugin "${Ce.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=Ce)}addListener(Ce,Ye){var It=this;this.listeners[Ce]||(this.listeners[Ce]=[]),this.listeners[Ce].push(Ye);const un=this.windowListeners[Ce];un&&!un.registered&&this.addWindowListener(un);const nt=function(){var he=(0,l.c)(function*(){return It.removeListener(Ce,Ye)});return function(){return he.apply(this,arguments)}}(),me=Promise.resolve({remove:nt});return Object.defineProperty(me,"remove",{value:(he=(0,l.c)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield nt()}),function(){return he.apply(this,arguments)})}),me;var he}removeAllListeners(){var Ce=this;return(0,l.c)(function*(){Ce.listeners={};for(const Ye in Ce.windowListeners)Ce.removeWindowListener(Ce.windowListeners[Ye]);Ce.windowListeners={}})()}notifyListeners(Ce,Ye){const It=this.listeners[Ce];It&&It.forEach(Wt=>Wt(Ye))}hasListeners(Ce){return!!this.listeners[Ce].length}registerWindowListener(Ce,Ye){this.windowListeners[Ye]={registered:!1,windowEventName:Ce,pluginEventName:Ye,handler:It=>{this.notifyListeners(Ye,It)}}}unimplemented(Ce="not implemented"){return new He.Exception(Ce,je.Unimplemented)}unavailable(Ce="not available"){return new He.Exception(Ce,je.Unavailable)}removeListener(Ce,Ye){var It=this;return(0,l.c)(function*(){const Wt=It.listeners[Ce];if(!Wt)return;const un=Wt.indexOf(Ye);It.listeners[Ce].splice(un,1),It.listeners[Ce].length||It.removeWindowListener(It.windowListeners[Ce])})()}addWindowListener(Ce){window.addEventListener(Ce.windowEventName,Ce.handler),Ce.registered=!0}removeWindowListener(Ce){Ce&&(window.removeEventListener(Ce.windowEventName,Ce.handler),Ce.registered=!1)}}const $e=Le=>encodeURIComponent(Le).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),pt=Le=>Le.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ve extends Ge{getCookies(){return(0,l.c)(function*(){const Ce=document.cookie,Ye={};return Ce.split(";").forEach(It=>{if(It.length<=0)return;let[Wt,un]=It.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");Wt=pt(Wt).trim(),un=pt(un).trim(),Ye[Wt]=un}),Ye})()}setCookie(Ce){return(0,l.c)(function*(){try{const Ye=$e(Ce.key),It=$e(Ce.value),Wt=`; expires=${(Ce.expires||"").replace("expires=","")}`,un=(Ce.path||"/").replace("path=",""),nt=null!=Ce.url&&Ce.url.length>0?`domain=${Ce.url}`:"";document.cookie=`${Ye}=${It||""}${Wt}; path=${un}; ${nt};`}catch(Ye){return Promise.reject(Ye)}})()}deleteCookie(Ce){return(0,l.c)(function*(){try{document.cookie=`${Ce.key}=; Max-Age=0`}catch(Ye){return Promise.reject(Ye)}})()}clearCookies(){return(0,l.c)(function*(){try{const Ce=document.cookie.split(";")||[];for(const Ye of Ce)document.cookie=Ye.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(Ce){return Promise.reject(Ce)}})()}clearAllCookies(){var Ce=this;return(0,l.c)(function*(){try{yield Ce.clearCookies()}catch(Ye){return Promise.reject(Ye)}})()}}We("CapacitorCookies",{web:()=>new ve});const et=function(){var Le=(0,l.c)(function*(Ce){return new Promise((Ye,It)=>{const Wt=new FileReader;Wt.onload=()=>{const un=Wt.result;Ye(un.indexOf(",")>=0?un.split(",")[1]:un)},Wt.onerror=un=>It(un),Wt.readAsDataURL(Ce)})});return function(Ye){return Le.apply(this,arguments)}}();class se extends Ge{request(Ce){return(0,l.c)(function*(){const Ye=((Le,Ce={})=>{const Ye=Object.assign({method:Le.method||"GET",headers:Le.headers},Ce),Wt=((Le={})=>{const Ce=Object.keys(Le);return Object.keys(Le).map(Wt=>Wt.toLocaleLowerCase()).reduce((Wt,un,nt)=>(Wt[un]=Le[Ce[nt]],Wt),{})})(Le.headers)["content-type"]||"";if("string"==typeof Le.data)Ye.body=Le.data;else if(Wt.includes("application/x-www-form-urlencoded")){const un=new URLSearchParams;for(const[nt,me]of Object.entries(Le.data||{}))un.set(nt,me);Ye.body=un.toString()}else if(Wt.includes("multipart/form-data")||Le.data instanceof FormData){const un=new FormData;if(Le.data instanceof FormData)Le.data.forEach((me,he)=>{un.append(he,me)});else for(const me of Object.keys(Le.data))un.append(me,Le.data[me]);Ye.body=un;const nt=new Headers(Ye.headers);nt.delete("content-type"),Ye.headers=nt}else(Wt.includes("application/json")||"object"==typeof Le.data)&&(Ye.body=JSON.stringify(Le.data));return Ye})(Ce,Ce.webFetchExtra),It=((Le,Ce=!0)=>Le?Object.entries(Le).reduce((It,Wt)=>{const[un,nt]=Wt;let me,he;return Array.isArray(nt)?(he="",nt.forEach(ye=>{me=Ce?encodeURIComponent(ye):ye,he+=`${un}=${me}&`}),he.slice(0,-1)):(me=Ce?encodeURIComponent(nt):nt,he=`${un}=${me}`),`${It}&${he}`},"").substr(1):null)(Ce.params,Ce.shouldEncodeUrlParams),Wt=It?`${Ce.url}?${It}`:Ce.url,un=yield fetch(Wt,Ye),nt=un.headers.get("content-type")||"";let he,ye,{responseType:me="text"}=un.ok?Ce:{};switch(nt.includes("application/json")&&(me="json"),me){case"arraybuffer":case"blob":ye=yield un.blob(),he=yield et(ye);break;case"json":he=yield un.json();break;default:he=yield un.text()}const Fe={};return un.headers.forEach((Je,De)=>{Fe[De]=Je}),{data:he,headers:Fe,status:un.status,url:un.url}})()}get(Ce){var Ye=this;return(0,l.c)(function*(){return Ye.request(Object.assign(Object.assign({},Ce),{method:"GET"}))})()}post(Ce){var Ye=this;return(0,l.c)(function*(){return Ye.request(Object.assign(Object.assign({},Ce),{method:"POST"}))})()}put(Ce){var Ye=this;return(0,l.c)(function*(){return Ye.request(Object.assign(Object.assign({},Ce),{method:"PUT"}))})()}patch(Ce){var Ye=this;return(0,l.c)(function*(){return Ye.request(Object.assign(Object.assign({},Ce),{method:"PATCH"}))})()}delete(Ce){var Ye=this;return(0,l.c)(function*(){return Ye.request(Object.assign(Object.assign({},Ce),{method:"DELETE"}))})()}}We("CapacitorHttp",{web:()=>new se})},7136:(mn,st,N)=>{"use strict";N.d(st,{G:()=>Z});const Z=(0,N(6400).C_)("LocalNotifications",{web:()=>N.e(1208).then(N.bind(N,1208)).then(ee=>new ee.LocalNotificationsWeb)})},7144:(mn,st,N)=>{"use strict";N.d(st,{A3:()=>he,AL:()=>Ce,AV:()=>te,AX:()=>xt,Al:()=>ge,Cc:()=>Le,GI:()=>dn,IN:()=>Qt,J2:()=>yn,L0:()=>ft,O0:()=>Ee,OS:()=>nr,Su:()=>ae,Sz:()=>Xt,UR:()=>De,Uc:()=>K,Uj:()=>jr,Uv:()=>It,WW:()=>be,Wg:()=>Qe,Ww:()=>Ke,Y7:()=>Tt,Y9:()=>Z,YD:()=>at,Yd:()=>ve,Yj:()=>lt,aw:()=>mr,c9:()=>je,i:()=>Lt,iQ:()=>Yt,ik:()=>br,iw:()=>un,kF:()=>Cr,kH:()=>Ft,kx:()=>Je,my:()=>Wn,o5:()=>kt,o9:()=>et,qS:()=>Tn,qc:()=>hn,qk:()=>nt,sX:()=>Xe,t7:()=>vn,uH:()=>L,yW:()=>se,yy:()=>me});const l={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},K=function(ue,Ie){if(!ue)throw Z(Ie)},Z=function(ue){return new Error("Firebase Database ("+l.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ue)},ee=function(ue){const Ie=[];let Ue=0;for(let tt=0;tt<ue.length;tt++){let ut=ue.charCodeAt(tt);ut<128?Ie[Ue++]=ut:ut<2048?(Ie[Ue++]=ut>>6|192,Ie[Ue++]=63&ut|128):55296==(64512&ut)&&tt+1<ue.length&&56320==(64512&ue.charCodeAt(tt+1))?(ut=65536+((1023&ut)<<10)+(1023&ue.charCodeAt(++tt)),Ie[Ue++]=ut>>18|240,Ie[Ue++]=ut>>12&63|128,Ie[Ue++]=ut>>6&63|128,Ie[Ue++]=63&ut|128):(Ie[Ue++]=ut>>12|224,Ie[Ue++]=ut>>6&63|128,Ie[Ue++]=63&ut|128)}return Ie},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ue,Ie){if(!Array.isArray(ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ue=Ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,tt=[];for(let ut=0;ut<ue.length;ut+=3){const pn=ue[ut],$n=ut+1<ue.length,qn=$n?ue[ut+1]:0,Nr=ut+2<ue.length,Ar=Nr?ue[ut+2]:0;let Mr=(15&qn)<<2|Ar>>6,so=63&Ar;Nr||(so=64,$n||(Mr=64)),tt.push(Ue[pn>>2],Ue[(3&pn)<<4|qn>>4],Ue[Mr],Ue[so])}return tt.join("")},encodeString(ue,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?btoa(ue):this.encodeByteArray(ee(ue),Ie)},decodeString(ue,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?atob(ue):function(ue){const Ie=[];let Ue=0,tt=0;for(;Ue<ue.length;){const ut=ue[Ue++];if(ut<128)Ie[tt++]=String.fromCharCode(ut);else if(ut>191&&ut<224){const pn=ue[Ue++];Ie[tt++]=String.fromCharCode((31&ut)<<6|63&pn)}else if(ut>239&&ut<365){const Nr=((7&ut)<<18|(63&ue[Ue++])<<12|(63&ue[Ue++])<<6|63&ue[Ue++])-65536;Ie[tt++]=String.fromCharCode(55296+(Nr>>10)),Ie[tt++]=String.fromCharCode(56320+(1023&Nr))}else{const pn=ue[Ue++],$n=ue[Ue++];Ie[tt++]=String.fromCharCode((15&ut)<<12|(63&pn)<<6|63&$n)}}return Ie.join("")}(this.decodeStringToByteArray(ue,Ie))},decodeStringToByteArray(ue,Ie){this.init_();const Ue=Ie?this.charToByteMapWebSafe_:this.charToByteMap_,tt=[];for(let ut=0;ut<ue.length;){const pn=Ue[ue.charAt(ut++)],qn=ut<ue.length?Ue[ue.charAt(ut)]:0;++ut;const Ar=ut<ue.length?Ue[ue.charAt(ut)]:64;++ut;const bn=ut<ue.length?Ue[ue.charAt(ut)]:64;if(++ut,null==pn||null==qn||null==Ar||null==bn)throw new _e;tt.push(pn<<2|qn>>4),64!==Ar&&(tt.push(qn<<4&240|Ar>>2),64!==bn&&tt.push(Ar<<6&192|bn))}return tt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ue=0;ue<this.ENCODED_VALS.length;ue++)this.byteToCharMap_[ue]=this.ENCODED_VALS.charAt(ue),this.charToByteMap_[this.byteToCharMap_[ue]]=ue,this.byteToCharMapWebSafe_[ue]=this.ENCODED_VALS_WEBSAFE.charAt(ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ue]]=ue,ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ue)]=ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ue)]=ue)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const je=function(ue){const Ie=ee(ue);return ge.encodeByteArray(Ie,!0)},Qe=function(ue){return je(ue).replace(/\./g,"")},be=function(ue){try{return ge.decodeString(ue,!0)}catch(Ie){console.error("base64Decode failed: ",Ie)}return null};function Ee(ue){return Ke(void 0,ue)}function Ke(ue,Ie){if(!(Ie instanceof Object))return Ie;switch(Ie.constructor){case Date:return new Date(Ie.getTime());case Object:void 0===ue&&(ue={});break;case Array:ue=[];break;default:return Ie}for(const Ue in Ie)!Ie.hasOwnProperty(Ue)||!He(Ue)||(ue[Ue]=Ke(ue[Ue],Ie[Ue]));return ue}function He(ue){return"__proto__"!==ue}const Ve=()=>{try{return function We(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ue=process.env.__FIREBASE_DEFAULTS__;return ue?JSON.parse(ue):void 0})()||(()=>{if(typeof document>"u")return;let ue;try{ue=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ie=ue&&be(ue[1]);return Ie&&JSON.parse(Ie)})()}catch(ue){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ue}`)}},ve=()=>{var ue;return null===(ue=Ve())||void 0===ue?void 0:ue.config},Xe=ue=>{var Ie;return null===(Ie=Ve())||void 0===Ie?void 0:Ie[`_${ue}`]};class et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ie,Ue)=>{this.resolve=Ie,this.reject=Ue})}wrapCallback(Ie){return(Ue,tt)=>{Ue?this.reject(Ue):this.resolve(tt),"function"==typeof Ie&&(this.promise.catch(()=>{}),1===Ie.length?Ie(Ue):Ie(Ue,tt))}}}function at(ue,Ie){if(ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const tt=Ie||"demo-project",ut=ue.iat||0,pn=ue.sub||ue.user_id;if(!pn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $n=Object.assign({iss:`https://securetoken.google.com/${tt}`,aud:tt,iat:ut,exp:ut+3600,auth_time:ut,sub:pn,user_id:pn,firebase:{sign_in_provider:"custom",identities:{}}},ue);return[Qe(JSON.stringify({alg:"none",type:"JWT"})),Qe(JSON.stringify($n)),""].join(".")}function ae(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ae())}function se(){var ue;const Ie=null===(ue=Ve())||void 0===ue?void 0:ue.forceEnvironment;if("node"===Ie)return!0;if("browser"===Ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function L(){return"object"==typeof self&&self.self===self}function Le(){const ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ue&&void 0!==ue.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function It(){const ue=ae();return ue.indexOf("MSIE ")>=0||ue.indexOf("Trident/")>=0}function un(){return!0===l.NODE_CLIENT||!0===l.NODE_ADMIN}function nt(){return!se()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){try{return"object"==typeof indexedDB}catch{return!1}}function he(){return new Promise((ue,Ie)=>{try{let Ue=!0;const tt="validate-browser-context-for-indexeddb-analytics-module",ut=self.indexedDB.open(tt);ut.onsuccess=()=>{ut.result.close(),Ue||self.indexedDB.deleteDatabase(tt),ue(!0)},ut.onupgradeneeded=()=>{Ue=!1},ut.onerror=()=>{var pn;Ie((null===(pn=ut.error)||void 0===pn?void 0:pn.message)||"")}}catch(Ue){Ie(Ue)}})}class Je extends Error{constructor(Ie,Ue,tt){super(Ue),this.code=Ie,this.customData=tt,this.name="FirebaseError",Object.setPrototypeOf(this,Je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}}class De{constructor(Ie,Ue,tt){this.service=Ie,this.serviceName=Ue,this.errors=tt}create(Ie,...Ue){const tt=Ue[0]||{},ut=`${this.service}/${Ie}`,pn=this.errors[Ie],$n=pn?function $t(ue,Ie){return ue.replace(Jt,(Ue,tt)=>{const ut=Ie[tt];return null!=ut?String(ut):`<${tt}?>`})}(pn,tt):"Error";return new Je(ut,`${this.serviceName}: ${$n} (${ut}).`,tt)}}const Jt=/\{\$([^}]+)}/g;function dn(ue){return JSON.parse(ue)}function Lt(ue){return JSON.stringify(ue)}const an=function(ue){let Ie={},Ue={},tt={},ut="";try{const pn=ue.split(".");Ie=dn(be(pn[0])||""),Ue=dn(be(pn[1])||""),ut=pn[2],tt=Ue.d||{},delete Ue.d}catch{}return{header:Ie,claims:Ue,data:tt,signature:ut}},xt=function(ue){const Ue=an(ue).claims;return!!Ue&&"object"==typeof Ue&&Ue.hasOwnProperty("iat")},ft=function(ue){const Ie=an(ue).claims;return"object"==typeof Ie&&!0===Ie.admin};function Tt(ue,Ie){return Object.prototype.hasOwnProperty.call(ue,Ie)}function kt(ue,Ie){if(Object.prototype.hasOwnProperty.call(ue,Ie))return ue[Ie]}function vn(ue){for(const Ie in ue)if(Object.prototype.hasOwnProperty.call(ue,Ie))return!1;return!0}function Ft(ue,Ie,Ue){const tt={};for(const ut in ue)Object.prototype.hasOwnProperty.call(ue,ut)&&(tt[ut]=Ie.call(Ue,ue[ut],ut,ue));return tt}function Qt(ue,Ie){if(ue===Ie)return!0;const Ue=Object.keys(ue),tt=Object.keys(Ie);for(const ut of Ue){if(!tt.includes(ut))return!1;const pn=ue[ut],$n=Ie[ut];if(Sn(pn)&&Sn($n)){if(!Qt(pn,$n))return!1}else if(pn!==$n)return!1}for(const ut of tt)if(!Ue.includes(ut))return!1;return!0}function Sn(ue){return null!==ue&&"object"==typeof ue}function br(ue){const Ie=[];for(const[Ue,tt]of Object.entries(ue))Array.isArray(tt)?tt.forEach(ut=>{Ie.push(encodeURIComponent(Ue)+"="+encodeURIComponent(ut))}):Ie.push(encodeURIComponent(Ue)+"="+encodeURIComponent(tt));return Ie.length?"&"+Ie.join("&"):""}function mr(ue){const Ie={};return ue.replace(/^\?/,"").split("&").forEach(tt=>{if(tt){const[ut,pn]=tt.split("=");Ie[decodeURIComponent(ut)]=decodeURIComponent(pn)}}),Ie}function Cr(ue){const Ie=ue.indexOf("?");if(!Ie)return"";const Ue=ue.indexOf("#",Ie);return ue.substring(Ie,Ue>0?Ue:void 0)}class Tn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ie=1;Ie<this.blockSize;++Ie)this.pad_[Ie]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ie,Ue){Ue||(Ue=0);const tt=this.W_;if("string"==typeof Ie)for(let bn=0;bn<16;bn++)tt[bn]=Ie.charCodeAt(Ue)<<24|Ie.charCodeAt(Ue+1)<<16|Ie.charCodeAt(Ue+2)<<8|Ie.charCodeAt(Ue+3),Ue+=4;else for(let bn=0;bn<16;bn++)tt[bn]=Ie[Ue]<<24|Ie[Ue+1]<<16|Ie[Ue+2]<<8|Ie[Ue+3],Ue+=4;for(let bn=16;bn<80;bn++){const Mr=tt[bn-3]^tt[bn-8]^tt[bn-14]^tt[bn-16];tt[bn]=4294967295&(Mr<<1|Mr>>>31)}let Ar,Br,ut=this.chain_[0],pn=this.chain_[1],$n=this.chain_[2],qn=this.chain_[3],Nr=this.chain_[4];for(let bn=0;bn<80;bn++){bn<40?bn<20?(Ar=qn^pn&($n^qn),Br=1518500249):(Ar=pn^$n^qn,Br=1859775393):bn<60?(Ar=pn&$n|qn&(pn|$n),Br=2400959708):(Ar=pn^$n^qn,Br=3395469782);const Mr=(ut<<5|ut>>>27)+Ar+Nr+Br+tt[bn]&4294967295;Nr=qn,qn=$n,$n=4294967295&(pn<<30|pn>>>2),pn=ut,ut=Mr}this.chain_[0]=this.chain_[0]+ut&4294967295,this.chain_[1]=this.chain_[1]+pn&4294967295,this.chain_[2]=this.chain_[2]+$n&4294967295,this.chain_[3]=this.chain_[3]+qn&4294967295,this.chain_[4]=this.chain_[4]+Nr&4294967295}update(Ie,Ue){if(null==Ie)return;void 0===Ue&&(Ue=Ie.length);const tt=Ue-this.blockSize;let ut=0;const pn=this.buf_;let $n=this.inbuf_;for(;ut<Ue;){if(0===$n)for(;ut<=tt;)this.compress_(Ie,ut),ut+=this.blockSize;if("string"==typeof Ie){for(;ut<Ue;)if(pn[$n]=Ie.charCodeAt(ut),++$n,++ut,$n===this.blockSize){this.compress_(pn),$n=0;break}}else for(;ut<Ue;)if(pn[$n]=Ie[ut],++$n,++ut,$n===this.blockSize){this.compress_(pn),$n=0;break}}this.inbuf_=$n,this.total_+=Ue}digest(){const Ie=[];let Ue=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ut=this.blockSize-1;ut>=56;ut--)this.buf_[ut]=255&Ue,Ue/=256;this.compress_(this.buf_);let tt=0;for(let ut=0;ut<5;ut++)for(let pn=24;pn>=0;pn-=8)Ie[tt]=this.chain_[ut]>>pn&255,++tt;return Ie}}function Wn(ue,Ie){const Ue=new Sr(ue,Ie);return Ue.subscribe.bind(Ue)}class Sr{constructor(Ie,Ue){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ue,this.task.then(()=>{Ie(this)}).catch(tt=>{this.error(tt)})}next(Ie){this.forEachObserver(Ue=>{Ue.next(Ie)})}error(Ie){this.forEachObserver(Ue=>{Ue.error(Ie)}),this.close(Ie)}complete(){this.forEachObserver(Ie=>{Ie.complete()}),this.close()}subscribe(Ie,Ue,tt){let ut;if(void 0===Ie&&void 0===Ue&&void 0===tt)throw new Error("Missing Observer.");ut=function sr(ue,Ie){if("object"!=typeof ue||null===ue)return!1;for(const Ue of Ie)if(Ue in ue&&"function"==typeof ue[Ue])return!0;return!1}(Ie,["next","error","complete"])?Ie:{next:Ie,error:Ue,complete:tt},void 0===ut.next&&(ut.next=Et),void 0===ut.error&&(ut.error=Et),void 0===ut.complete&&(ut.complete=Et);const pn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ut.error(this.finalError):ut.complete()}catch{}}),this.observers.push(ut),pn}unsubscribeOne(Ie){void 0===this.observers||void 0===this.observers[Ie]||(delete this.observers[Ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ie){if(!this.finalized)for(let Ue=0;Ue<this.observers.length;Ue++)this.sendOne(Ue,Ie)}sendOne(Ie,Ue){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ie])try{Ue(this.observers[Ie])}catch(tt){typeof console<"u"&&console.error&&console.error(tt)}})}close(Ie){this.finalized||(this.finalized=!0,void 0!==Ie&&(this.finalError=Ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Et(){}const Xt=function(ue,Ie,Ue,tt){let ut;if(tt<Ie?ut="at least "+Ie:tt>Ue&&(ut=0===Ue?"none":"no more than "+Ue),ut)throw new Error(ue+" failed: Was called with "+tt+(1===tt?" argument.":" arguments.")+" Expects "+ut+".")};function Yt(ue,Ie){return`${ue} failed: ${Ie} argument `}function yn(ue,Ie,Ue,tt){if((!tt||Ue)&&"function"!=typeof Ue)throw new Error(Yt(ue,Ie)+"must be a valid function.")}function hn(ue,Ie,Ue,tt){if((!tt||Ue)&&("object"!=typeof Ue||null===Ue))throw new Error(Yt(ue,Ie)+"must be a valid context object.")}const nr=function(ue){const Ie=[];let Ue=0;for(let tt=0;tt<ue.length;tt++){let ut=ue.charCodeAt(tt);if(ut>=55296&&ut<=56319){const pn=ut-55296;tt++,K(tt<ue.length,"Surrogate pair missing trail surrogate."),ut=65536+(pn<<10)+(ue.charCodeAt(tt)-56320)}ut<128?Ie[Ue++]=ut:ut<2048?(Ie[Ue++]=ut>>6|192,Ie[Ue++]=63&ut|128):ut<65536?(Ie[Ue++]=ut>>12|224,Ie[Ue++]=ut>>6&63|128,Ie[Ue++]=63&ut|128):(Ie[Ue++]=ut>>18|240,Ie[Ue++]=ut>>12&63|128,Ie[Ue++]=ut>>6&63|128,Ie[Ue++]=63&ut|128)}return Ie},jr=function(ue){let Ie=0;for(let Ue=0;Ue<ue.length;Ue++){const tt=ue.charCodeAt(Ue);tt<128?Ie++:tt<2048?Ie+=2:tt>=55296&&tt<=56319?(Ie+=4,Ue++):Ie+=3}return Ie};function lt(ue){return ue&&ue._delegate?ue._delegate:ue}},9248:(mn,st,N)=>{"use strict";N.d(st,{c:()=>Z,r:()=>Ee});const Z=(ae,te)=>{ae.componentOnReady?ae.componentOnReady().then(se=>te(se)):Ee(()=>te(ae))},Ee=ae=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(ae):"function"==typeof requestAnimationFrame?requestAnimationFrame(ae):setTimeout(ae)},1896:(mn,st,N)=>{"use strict";N.d(st,{L:()=>l,a:()=>K,b:()=>Z,c:()=>ee,d:()=>Ne,g:()=>ae});const l="ionViewWillEnter",K="ionViewDidEnter",Z="ionViewWillLeave",ee="ionViewDidLeave",Ne="ionViewWillUnload",ae=te=>te.classList.contains("ion-page")?te:te.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||te},388:(mn,st,N)=>{"use strict";N.d(st,{c:()=>it});var l=N(4829),K=N(6384);let Z;const Ne=Ge=>Ge.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ge=Ge=>(void 0===Z&&(Z=void 0===Ge.style.animationName&&void 0!==Ge.style.webkitAnimationName?"-webkit-":""),Z),_e=(Ge,Ve,$e)=>{const pt=Ve.startsWith("animation")?ge(Ge):"";Ge.style.setProperty(pt+Ve,$e)},je=(Ge,Ve)=>{const $e=Ve.startsWith("animation")?ge(Ge):"";Ge.style.removeProperty($e+Ve)},Ee=[],Oe=(Ge=[],Ve)=>{if(void 0!==Ve){const $e=Array.isArray(Ve)?Ve:[Ve];return[...Ge,...$e]}return Ge},it=Ge=>{let Ve,$e,pt,ve,Xe,et,L,me,he,ye,Fe,Jt,dn,at=[],ae=[],te=[],se=!1,Le={},Ce=[],Ye=[],It={},Wt=0,un=!1,nt=!1,Je=!0,De=!1,$t=!0,Lt=!1;const an=Ge,Qn=[],jn=[],xt=[],ft=[],Tt=[],kt=[],vn=[],Ft=[],Qt=[],Sn=[],xn=[],br="function"==typeof AnimationEffect||void 0!==l.w&&"function"==typeof l.w.AnimationEffect,mr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&br,Tn=()=>xn,Et=(Ct,Y)=>{const ne=Y.findIndex(qe=>qe.c===Ct);ne>-1&&Y.splice(ne,1)},Yt=(Ct,Y)=>((null!=Y&&Y.oneTimeCallback?jn:Qn).push({c:Ct,o:Y}),dn),yn=()=>{if(mr)xn.forEach(Ct=>{Ct.cancel()}),xn.length=0;else{const Ct=ft.slice();(0,K.r)(()=>{Ct.forEach(Y=>{je(Y,"animation-name"),je(Y,"animation-duration"),je(Y,"animation-timing-function"),je(Y,"animation-iteration-count"),je(Y,"animation-delay"),je(Y,"animation-play-state"),je(Y,"animation-fill-mode"),je(Y,"animation-direction")})})}},hn=()=>{kt.forEach(Ct=>{null!=Ct&&Ct.parentNode&&Ct.parentNode.removeChild(Ct)}),kt.length=0},Ie=()=>void 0!==Xe?Xe:L?L.getFill():"both",Ue=()=>void 0!==he?he:void 0!==et?et:L?L.getDirection():"normal",tt=()=>un?"linear":void 0!==pt?pt:L?L.getEasing():"linear",ut=()=>nt?0:void 0!==ye?ye:void 0!==$e?$e:L?L.getDuration():0,pn=()=>void 0!==ve?ve:L?L.getIterations():1,$n=()=>void 0!==Fe?Fe:void 0!==Ve?Ve:L?L.getDelay():0,Kn=()=>{0!==Wt&&(Wt--,0===Wt&&((()=>{Me(),Qt.forEach(ct=>ct()),Sn.forEach(ct=>ct());const Ct=Je?1:0,Y=Ce,ne=Ye,qe=It;ft.forEach(ct=>{const _t=ct.classList;Y.forEach(Pt=>_t.add(Pt)),ne.forEach(Pt=>_t.remove(Pt));for(const Pt in qe)qe.hasOwnProperty(Pt)&&_e(ct,Pt,qe[Pt])}),ye=void 0,he=void 0,Fe=void 0,Qn.forEach(ct=>ct.c(Ct,dn)),jn.forEach(ct=>ct.c(Ct,dn)),jn.length=0,$t=!0,Je&&(De=!0),Je=!0})(),L&&L.animationFinish()))},Zn=(Ct=!0)=>{hn();const Y=(Ge=>(Ge.forEach(Ve=>{for(const $e in Ve)if(Ve.hasOwnProperty($e)){const pt=Ve[$e];if("easing"===$e)Ve["animation-timing-function"]=pt,delete Ve[$e];else{const ve=Ne($e);ve!==$e&&(Ve[ve]=pt,delete Ve[$e])}}}),Ge))(at);ft.forEach(ne=>{if(Y.length>0){const qe=((Ge=[])=>Ge.map(Ve=>{const $e=Ve.offset,pt=[];for(const ve in Ve)Ve.hasOwnProperty(ve)&&"offset"!==ve&&pt.push(`${ve}: ${Ve[ve]};`);return`${100*$e}% { ${pt.join(" ")} }`}).join(" "))(Y);Jt=void 0!==Ge?Ge:(Ge=>{let Ve=Ee.indexOf(Ge);return Ve<0&&(Ve=Ee.push(Ge)-1),`ion-animation-${Ve}`})(qe);const ct=((Ge,Ve,$e)=>{var pt;const ve=(Ge=>{const Ve=void 0!==Ge.getRootNode?Ge.getRootNode():Ge;return Ve.head||Ve})($e),Xe=ge($e),et=ve.querySelector("#"+Ge);if(et)return et;const at=(null!==(pt=$e.ownerDocument)&&void 0!==pt?pt:document).createElement("style");return at.id=Ge,at.textContent=`@${Xe}keyframes ${Ge} { ${Ve} } @${Xe}keyframes ${Ge}-alt { ${Ve} }`,ve.appendChild(at),at})(Jt,qe,ne);kt.push(ct),_e(ne,"animation-duration",`${ut()}ms`),_e(ne,"animation-timing-function",tt()),_e(ne,"animation-delay",`${$n()}ms`),_e(ne,"animation-fill-mode",Ie()),_e(ne,"animation-direction",Ue());const _t=pn()===1/0?"infinite":pn().toString();_e(ne,"animation-iteration-count",_t),_e(ne,"animation-play-state","paused"),Ct&&_e(ne,"animation-name",`${ct.id}-alt`),(0,K.r)(()=>{_e(ne,"animation-name",ct.id||null)})}})},Vr=(Ct=!0)=>{(()=>{vn.forEach(qe=>qe()),Ft.forEach(qe=>qe());const Ct=ae,Y=te,ne=Le;ft.forEach(qe=>{const ct=qe.classList;Ct.forEach(_t=>ct.add(_t)),Y.forEach(_t=>ct.remove(_t));for(const _t in ne)ne.hasOwnProperty(_t)&&_e(qe,_t,ne[_t])})})(),at.length>0&&(mr?(ft.forEach(Ct=>{const Y=Ct.animate(at,{id:an,delay:$n(),duration:ut(),easing:tt(),iterations:pn(),fill:Ie(),direction:Ue()});Y.pause(),xn.push(Y)}),xn.length>0&&(xn[0].onfinish=()=>{Kn()})):Zn(Ct)),se=!0},Gr=Ct=>{if(Ct=Math.min(Math.max(Ct,0),.9999),mr)xn.forEach(Y=>{Y.currentTime=Y.effect.getComputedTiming().delay+ut()*Ct,Y.pause()});else{const Y=`-${ut()*Ct}ms`;ft.forEach(ne=>{at.length>0&&(_e(ne,"animation-delay",Y),_e(ne,"animation-play-state","paused"))})}},go=Ct=>{xn.forEach(Y=>{Y.effect.updateTiming({delay:$n(),duration:ut(),easing:tt(),iterations:pn(),fill:Ie(),direction:Ue()})}),void 0!==Ct&&Gr(Ct)},ao=(Ct=!0,Y)=>{(0,K.r)(()=>{ft.forEach(ne=>{_e(ne,"animation-name",Jt||null),_e(ne,"animation-duration",`${ut()}ms`),_e(ne,"animation-timing-function",tt()),_e(ne,"animation-delay",void 0!==Y?`-${Y*ut()}ms`:`${$n()}ms`),_e(ne,"animation-fill-mode",Ie()||null),_e(ne,"animation-direction",Ue()||null);const qe=pn()===1/0?"infinite":pn().toString();_e(ne,"animation-iteration-count",qe),Ct&&_e(ne,"animation-name",`${Jt}-alt`),(0,K.r)(()=>{_e(ne,"animation-name",Jt||null)})})})},Hr=(Ct=!1,Y=!0,ne)=>(Ct&&Tt.forEach(qe=>{qe.update(Ct,Y,ne)}),mr?go(ne):ao(Y,ne),dn),Ir=()=>{se&&(mr?xn.forEach(Ct=>{Ct.pause()}):ft.forEach(Ct=>{_e(Ct,"animation-play-state","paused")}),Lt=!0)},Pe=()=>{me=void 0,Kn()},Me=()=>{me&&clearTimeout(me)},Dn=Ct=>new Promise(Y=>{null!=Ct&&Ct.sync&&(nt=!0,Yt(()=>nt=!1,{oneTimeCallback:!0})),se||Vr(),De&&(mr?(Gr(0),go()):ao(),De=!1),$t&&(Wt=Tt.length+1,$t=!1);const ne=()=>{Et(qe,jn),Y()},qe=()=>{Et(ne,xt),Y()};Yt(qe,{oneTimeCallback:!0}),((Ct,Y)=>{xt.push({c:Ct,o:{oneTimeCallback:!0}})})(ne),Tt.forEach(ct=>{ct.play()}),mr?(xn.forEach(Ct=>{Ct.play()}),(0===at.length||0===ft.length)&&Kn()):(()=>{if(Me(),(0,K.r)(()=>{ft.forEach(Ct=>{at.length>0&&_e(Ct,"animation-play-state","running")})}),0===at.length||0===ft.length)Kn();else{const Ct=$n()||0,Y=ut()||0,ne=pn()||1;isFinite(ne)&&(me=setTimeout(Pe,Ct+Y*ne+100)),((Ge,Ve)=>{let $e;const pt={passive:!0},Xe=et=>{Ge===et.target&&($e&&$e(),Me(),(0,K.r)(()=>{ft.forEach(Ct=>{je(Ct,"animation-duration"),je(Ct,"animation-delay"),je(Ct,"animation-play-state")}),(0,K.r)(Kn)}))};Ge&&(Ge.addEventListener("webkitAnimationEnd",Xe,pt),Ge.addEventListener("animationend",Xe,pt),$e=()=>{Ge.removeEventListener("webkitAnimationEnd",Xe,pt),Ge.removeEventListener("animationend",Xe,pt)})})(ft[0])}})(),Lt=!1}),Gn=(Ct,Y)=>{const ne=at[0];return void 0===ne||void 0!==ne.offset&&0!==ne.offset?at=[{offset:0,[Ct]:Y},...at]:ne[Ct]=Y,dn};return dn={parentAnimation:L,elements:ft,childAnimations:Tt,id:an,animationFinish:Kn,from:Gn,to:(Ct,Y)=>{const ne=at[at.length-1];return void 0===ne||void 0!==ne.offset&&1!==ne.offset?at=[...at,{offset:1,[Ct]:Y}]:ne[Ct]=Y,dn},fromTo:(Ct,Y,ne)=>Gn(Ct,Y).to(Ct,ne),parent:Ct=>(L=Ct,dn),play:Dn,pause:()=>(Tt.forEach(Ct=>{Ct.pause()}),Ir(),dn),stop:()=>{Tt.forEach(Ct=>{Ct.stop()}),se&&(yn(),se=!1),un=!1,nt=!1,$t=!0,he=void 0,ye=void 0,Fe=void 0,Wt=0,De=!1,Je=!0,Lt=!1,xt.forEach(Ct=>Ct.c(0,dn)),xt.length=0},destroy:Ct=>(Tt.forEach(Y=>{Y.destroy(Ct)}),(Ct=>{yn(),Ct&&hn()})(Ct),ft.length=0,Tt.length=0,at.length=0,Qn.length=0,jn.length=0,se=!1,$t=!0,dn),keyframes:Ct=>{const Y=at!==Ct;return at=Ct,Y&&(Ct=>{mr?Tn().forEach(Y=>{const ne=Y.effect;if(ne.setKeyframes)ne.setKeyframes(Ct);else{const qe=new KeyframeEffect(ne.target,Ct,ne.getTiming());Y.effect=qe}}):Zn()})(at),dn},addAnimation:Ct=>{if(null!=Ct)if(Array.isArray(Ct))for(const Y of Ct)Y.parent(dn),Tt.push(Y);else Ct.parent(dn),Tt.push(Ct);return dn},addElement:Ct=>{if(null!=Ct)if(1===Ct.nodeType)ft.push(Ct);else if(Ct.length>=0)for(let Y=0;Y<Ct.length;Y++)ft.push(Ct[Y]);else console.error("Invalid addElement value");return dn},update:Hr,fill:Ct=>(Xe=Ct,Hr(!0),dn),direction:Ct=>(et=Ct,Hr(!0),dn),iterations:Ct=>(ve=Ct,Hr(!0),dn),duration:Ct=>(!mr&&0===Ct&&(Ct=1),$e=Ct,Hr(!0),dn),easing:Ct=>(pt=Ct,Hr(!0),dn),delay:Ct=>(Ve=Ct,Hr(!0),dn),getWebAnimations:Tn,getKeyframes:()=>at,getFill:Ie,getDirection:Ue,getDelay:$n,getIterations:pn,getEasing:tt,getDuration:ut,afterAddRead:Ct=>(Qt.push(Ct),dn),afterAddWrite:Ct=>(Sn.push(Ct),dn),afterClearStyles:(Ct=[])=>{for(const Y of Ct)It[Y]="";return dn},afterStyles:(Ct={})=>(It=Ct,dn),afterRemoveClass:Ct=>(Ye=Oe(Ye,Ct),dn),afterAddClass:Ct=>(Ce=Oe(Ce,Ct),dn),beforeAddRead:Ct=>(vn.push(Ct),dn),beforeAddWrite:Ct=>(Ft.push(Ct),dn),beforeClearStyles:(Ct=[])=>{for(const Y of Ct)Le[Y]="";return dn},beforeStyles:(Ct={})=>(Le=Ct,dn),beforeRemoveClass:Ct=>(te=Oe(te,Ct),dn),beforeAddClass:Ct=>(ae=Oe(ae,Ct),dn),onFinish:Yt,isRunning:()=>0!==Wt&&!Lt,progressStart:(Ct=!1,Y)=>(Tt.forEach(ne=>{ne.progressStart(Ct,Y)}),Ir(),un=Ct,se||Vr(),Hr(!1,!0,Y),dn),progressStep:Ct=>(Tt.forEach(Y=>{Y.progressStep(Ct)}),Gr(Ct),dn),progressEnd:(Ct,Y,ne)=>(un=!1,Tt.forEach(qe=>{qe.progressEnd(Ct,Y,ne)}),void 0!==ne&&(ye=ne),De=!1,Je=!0,0===Ct?(he="reverse"===Ue()?"normal":"reverse","reverse"===he&&(Je=!1),mr?(Hr(),Gr(1-Y)):(Fe=(1-Y)*ut()*-1,Hr(!1,!1))):1===Ct&&(mr?(Hr(),Gr(Y)):(Fe=Y*ut()*-1,Hr(!1,!1))),void 0!==Ct&&!L&&Dn(),dn)}}},9637:(mn,st,N)=>{"use strict";N.d(st,{E:()=>be,a:()=>l,s:()=>je});const l=Ee=>{try{if(Ee instanceof _e)return Ee.value;if(!ee()||"string"!=typeof Ee||""===Ee)return Ee;if(Ee.includes("onload="))return"";const Ke=document.createDocumentFragment(),He=document.createElement("div");Ke.appendChild(He),He.innerHTML=Ee,ge.forEach(Ge=>{const Ve=Ke.querySelectorAll(Ge);for(let $e=Ve.length-1;$e>=0;$e--){const pt=Ve[$e];pt.parentNode?pt.parentNode.removeChild(pt):Ke.removeChild(pt);const ve=Z(pt);for(let Xe=0;Xe<ve.length;Xe++)K(ve[Xe])}});const We=Z(Ke);for(let Ge=0;Ge<We.length;Ge++)K(We[Ge]);const Oe=document.createElement("div");Oe.appendChild(Ke);const it=Oe.querySelector("div");return null!==it?it.innerHTML:Oe.innerHTML}catch(Ke){return console.error(Ke),""}},K=Ee=>{if(Ee.nodeType&&1!==Ee.nodeType)return;if(typeof NamedNodeMap<"u"&&!(Ee.attributes instanceof NamedNodeMap))return void Ee.remove();for(let He=Ee.attributes.length-1;He>=0;He--){const We=Ee.attributes.item(He),Oe=We.name;if(!Ne.includes(Oe.toLowerCase())){Ee.removeAttribute(Oe);continue}const it=We.value,Ge=Ee[Oe];(null!=it&&it.toLowerCase().includes("javascript:")||null!=Ge&&Ge.toLowerCase().includes("javascript:"))&&Ee.removeAttribute(Oe)}const Ke=Z(Ee);for(let He=0;He<Ke.length;He++)K(Ke[He])},Z=Ee=>null!=Ee.children?Ee.children:Ee.childNodes,ee=()=>{var Ee;const Ke=window,He=null===(Ee=null==Ke?void 0:Ke.Ionic)||void 0===Ee?void 0:Ee.config;return!He||(He.get?He.get("sanitizerEnabled",!0):!0===He.sanitizerEnabled||void 0===He.sanitizerEnabled)},Ne=["class","id","href","src","name","slot"],ge=["script","style","iframe","meta","link","object","embed"];class _e{constructor(Ke){this.value=Ke}}const je=Ee=>{const Ke=window,He=Ke.Ionic;if(!He||!He.config||"Object"===He.config.constructor.name)return Ke.Ionic=Ke.Ionic||{},Ke.Ionic.config=Object.assign(Object.assign({},Ke.Ionic.config),Ee),Ke.Ionic.config},be=!1},495:(mn,st,N)=>{"use strict";N.d(st,{C:()=>Ne,a:()=>Z,d:()=>ee});var l=N(1528),K=N(6384);const Z=function(){var ge=(0,l.c)(function*(_e,je,Qe,be,Ee,Ke){var He;if(_e)return _e.attachViewToDom(je,Qe,Ee,be);if(!(Ke||"string"==typeof Qe||Qe instanceof HTMLElement))throw new Error("framework delegate is missing");const We="string"==typeof Qe?null===(He=je.ownerDocument)||void 0===He?void 0:He.createElement(Qe):Qe;return be&&be.forEach(Oe=>We.classList.add(Oe)),Ee&&Object.assign(We,Ee),je.appendChild(We),yield new Promise(Oe=>(0,K.c)(We,Oe)),We});return function(je,Qe,be,Ee,Ke,He){return ge.apply(this,arguments)}}(),ee=(ge,_e)=>{if(_e){if(ge)return ge.removeViewFromDom(_e.parentElement,_e);_e.remove()}return Promise.resolve()},Ne=()=>{let ge,_e;return{attachViewToDom:function(){var be=(0,l.c)(function*(Ee,Ke,He={},We=[]){var Oe,it;let Ge;if(ge=Ee,Ke){const $e="string"==typeof Ke?null===(Oe=ge.ownerDocument)||void 0===Oe?void 0:Oe.createElement(Ke):Ke;We.forEach(pt=>$e.classList.add(pt)),Object.assign($e,He),ge.appendChild($e),Ge=$e,yield new Promise(pt=>(0,K.c)($e,pt))}else if(ge.children.length>0&&("ION-MODAL"===ge.tagName||"ION-POPOVER"===ge.tagName)&&!(Ge=ge.children[0]).classList.contains("ion-delegate-host")){const pt=null===(it=ge.ownerDocument)||void 0===it?void 0:it.createElement("div");pt.classList.add("ion-delegate-host"),We.forEach(ve=>pt.classList.add(ve)),pt.append(...ge.children),ge.appendChild(pt),Ge=pt}const Ve=document.querySelector("ion-app")||document.body;return _e=document.createComment("ionic teleport"),ge.parentNode.insertBefore(_e,ge),Ve.appendChild(ge),null!=Ge?Ge:ge});return function(Ke,He){return be.apply(this,arguments)}}(),removeViewFromDom:()=>(ge&&_e&&(_e.parentNode.insertBefore(ge,_e),_e.remove()),Promise.resolve())}}},6560:(mn,st,N)=>{"use strict";N.d(st,{G:()=>Ne});class K{constructor(_e,je,Qe,be,Ee){this.id=je,this.name=Qe,this.disableScroll=Ee,this.priority=1e6*be+je,this.ctrl=_e}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const _e=this.ctrl.capture(this.name,this.id,this.priority);return _e&&this.disableScroll&&this.ctrl.disableScroll(this.id),_e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Z{constructor(_e,je,Qe,be){this.id=je,this.disable=Qe,this.disableScroll=be,this.ctrl=_e}block(){if(this.ctrl){if(this.disable)for(const _e of this.disable)this.ctrl.disableGesture(_e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const _e of this.disable)this.ctrl.enableGesture(_e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ee="backdrop-no-scroll",Ne=new class l{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(_e){var je;return new K(this,this.newID(),_e.name,null!==(je=_e.priority)&&void 0!==je?je:0,!!_e.disableScroll)}createBlocker(_e={}){return new Z(this,this.newID(),_e.disable,!!_e.disableScroll)}start(_e,je,Qe){return this.canStart(_e)?(this.requestedStart.set(je,Qe),!0):(this.requestedStart.delete(je),!1)}capture(_e,je,Qe){if(!this.start(_e,je,Qe))return!1;const be=this.requestedStart;let Ee=-1e4;if(be.forEach(Ke=>{Ee=Math.max(Ee,Ke)}),Ee===Qe){this.capturedId=je,be.clear();const Ke=new CustomEvent("ionGestureCaptured",{detail:{gestureName:_e}});return document.dispatchEvent(Ke),!0}return be.delete(je),!1}release(_e){this.requestedStart.delete(_e),this.capturedId===_e&&(this.capturedId=void 0)}disableGesture(_e,je){let Qe=this.disabledGestures.get(_e);void 0===Qe&&(Qe=new Set,this.disabledGestures.set(_e,Qe)),Qe.add(je)}enableGesture(_e,je){const Qe=this.disabledGestures.get(_e);void 0!==Qe&&Qe.delete(je)}disableScroll(_e){this.disabledScroll.add(_e),1===this.disabledScroll.size&&document.body.classList.add(ee)}enableScroll(_e){this.disabledScroll.delete(_e),0===this.disabledScroll.size&&document.body.classList.remove(ee)}canStart(_e){return!(void 0!==this.capturedId||this.isDisabled(_e))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(_e){const je=this.disabledGestures.get(_e);return!!(je&&je.size>0)}newID(){return this.gestureId++,this.gestureId}}},2784:(mn,st,N)=>{"use strict";N.r(st),N.d(st,{MENU_BACK_BUTTON_PRIORITY:()=>Qe,OVERLAY_BACK_BUTTON_PRIORITY:()=>je,blockHardwareBackButton:()=>ge,shoudUseCloseWatcher:()=>Ne,startHardwareBackButton:()=>_e});var l=N(1528),K=N(4829),Z=N(8523);N(2992);const Ne=()=>Z.c.get("experimentalCloseWatcher",!1)&&void 0!==K.w&&"CloseWatcher"in K.w,ge=()=>{document.addEventListener("backbutton",()=>{})},_e=()=>{const be=document;let Ee=!1;const Ke=()=>{if(Ee)return;let He=0,We=[];const Oe=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ve,$e){We.push({priority:Ve,handler:$e,id:He++})}}});be.dispatchEvent(Oe);const it=function(){var Ve=(0,l.c)(function*($e){try{if(null!=$e&&$e.handler){const pt=$e.handler(Ge);null!=pt&&(yield pt)}}catch(pt){console.error(pt)}});return function(pt){return Ve.apply(this,arguments)}}(),Ge=()=>{if(We.length>0){let Ve={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};We.forEach($e=>{$e.priority>=Ve.priority&&(Ve=$e)}),Ee=!0,We=We.filter($e=>$e.id!==Ve.id),it(Ve).then(()=>Ee=!1)}};Ge()};if(Ne()){let He;const We=()=>{null==He||He.destroy(),He=new K.w.CloseWatcher,He.onclose=()=>{Ke(),We()}};We()}else be.addEventListener("backbutton",Ke)},je=100,Qe=99},6384:(mn,st,N)=>{"use strict";N.d(st,{a:()=>je,b:()=>Qe,c:()=>Z,d:()=>it,e:()=>Oe,f:()=>We,g:()=>be,h:()=>He,i:()=>_e,j:()=>Xe,k:()=>Ne,l:()=>Ge,m:()=>ee,n:()=>Ke,o:()=>Ve,p:()=>ve,q:()=>et,r:()=>Ee,s:()=>at,t:()=>l,u:()=>$e,v:()=>pt});const l=(ae,te=0)=>new Promise(se=>{K(ae,te,se)}),K=(ae,te=0,se)=>{let L,Le;const Ce={passive:!0},It=()=>{L&&L()},Wt=un=>{(void 0===un||ae===un.target)&&(It(),se(un))};return ae&&(ae.addEventListener("webkitTransitionEnd",Wt,Ce),ae.addEventListener("transitionend",Wt,Ce),Le=setTimeout(Wt,te+500),L=()=>{void 0!==Le&&(clearTimeout(Le),Le=void 0),ae.removeEventListener("webkitTransitionEnd",Wt,Ce),ae.removeEventListener("transitionend",Wt,Ce)}),It},Z=(ae,te)=>{ae.componentOnReady?ae.componentOnReady().then(se=>te(se)):Ee(()=>te(ae))},ee=ae=>void 0!==ae.componentOnReady,Ne=(ae,te=[])=>{const se={};return te.forEach(L=>{ae.hasAttribute(L)&&(null!==ae.getAttribute(L)&&(se[L]=ae.getAttribute(L)),ae.removeAttribute(L))}),se},ge=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],_e=(ae,te)=>{let se=ge;return te&&te.length>0&&(se=se.filter(L=>!te.includes(L))),Ne(ae,se)},je=(ae,te,se,L)=>{var Le;if(typeof window<"u"){const Ce=window,Ye=null===(Le=null==Ce?void 0:Ce.Ionic)||void 0===Le?void 0:Le.config;if(Ye){const It=Ye.get("_ael");if(It)return It(ae,te,se,L);if(Ye._ael)return Ye._ael(ae,te,se,L)}}return ae.addEventListener(te,se,L)},Qe=(ae,te,se,L)=>{var Le;if(typeof window<"u"){const Ce=window,Ye=null===(Le=null==Ce?void 0:Ce.Ionic)||void 0===Le?void 0:Le.config;if(Ye){const It=Ye.get("_rel");if(It)return It(ae,te,se,L);if(Ye._rel)return Ye._rel(ae,te,se,L)}}return ae.removeEventListener(te,se,L)},be=(ae,te=ae)=>ae.shadowRoot||te,Ee=ae=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(ae):"function"==typeof requestAnimationFrame?requestAnimationFrame(ae):setTimeout(ae),Ke=ae=>!!ae.shadowRoot&&!!ae.attachShadow,He=ae=>{const te=ae.closest("ion-item");return te?te.querySelector("ion-label"):null},We=ae=>{if(ae.focus(),ae.classList.contains("ion-focusable")){const te=ae.closest("ion-app");te&&te.setFocus([ae])}},Oe=(ae,te)=>{let se;const L=ae.getAttribute("aria-labelledby"),Le=ae.id;let Ce=null!==L&&""!==L.trim()?L:te+"-lbl",Ye=null!==L&&""!==L.trim()?document.getElementById(L):He(ae);return Ye?(null===L&&(Ye.id=Ce),se=Ye.textContent,Ye.setAttribute("aria-hidden","true")):""!==Le.trim()&&(Ye=document.querySelector(`label[for="${Le}"]`),Ye&&(""!==Ye.id?Ce=Ye.id:Ye.id=Ce=`${Le}-lbl`,se=Ye.textContent)),{label:Ye,labelId:Ce,labelText:se}},it=(ae,te,se,L,Le)=>{if(ae||Ke(te)){let Ce=te.querySelector("input.aux-input");Ce||(Ce=te.ownerDocument.createElement("input"),Ce.type="hidden",Ce.classList.add("aux-input"),te.appendChild(Ce)),Ce.disabled=Le,Ce.name=se,Ce.value=L||""}},Ge=(ae,te,se)=>Math.max(ae,Math.min(te,se)),Ve=(ae,te)=>{if(!ae){const se="ASSERT: "+te;throw console.error(se),new Error(se)}},$e=ae=>ae.timeStamp||Date.now(),pt=ae=>{if(ae){const te=ae.changedTouches;if(te&&te.length>0){const se=te[0];return{x:se.clientX,y:se.clientY}}if(void 0!==ae.pageX)return{x:ae.pageX,y:ae.pageY}}return{x:0,y:0}},ve=ae=>{const te="rtl"===document.dir;switch(ae){case"start":return te;case"end":return!te;default:throw new Error(`"${ae}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Xe=(ae,te)=>{const se=ae._original||ae;return{_original:ae,emit:et(se.emit.bind(se),te)}},et=(ae,te=0)=>{let se;return(...L)=>{clearTimeout(se),se=setTimeout(ae,te,...L)}},at=(ae,te)=>{if(null!=ae||(ae={}),null!=te||(te={}),ae===te)return!0;const se=Object.keys(ae);if(se.length!==Object.keys(te).length)return!1;for(const L of se)if(!(L in te)||ae[L]!==te[L])return!1;return!0}},2528:(mn,st,N)=>{"use strict";N.r(st),N.d(st,{GESTURE_CONTROLLER:()=>l.G,createGesture:()=>Qe});var l=N(6560);const K=(He,We,Oe,it)=>{const Ge=Z(He)?{capture:!!it.capture,passive:!!it.passive}:!!it.capture;let Ve,$e;return He.__zone_symbol__addEventListener?(Ve="__zone_symbol__addEventListener",$e="__zone_symbol__removeEventListener"):(Ve="addEventListener",$e="removeEventListener"),He[Ve](We,Oe,Ge),()=>{He[$e](We,Oe,Ge)}},Z=He=>{if(void 0===ee)try{const We=Object.defineProperty({},"passive",{get:()=>{ee=!0}});He.addEventListener("optsTest",()=>{},We)}catch{ee=!1}return!!ee};let ee;const _e=He=>He instanceof Document?He:He.ownerDocument,Qe=He=>{let We=!1,Oe=!1,it=!0,Ge=!1;const Ve=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},He),$e=Ve.canStart,pt=Ve.onWillStart,ve=Ve.onStart,Xe=Ve.onEnd,et=Ve.notCaptured,at=Ve.onMove,ae=Ve.threshold,te=Ve.passive,se=Ve.blurOnStart,L={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Le=((He,We,Oe)=>{const it=Oe*(Math.PI/180),Ge="x"===He,Ve=Math.cos(it),$e=We*We;let pt=0,ve=0,Xe=!1,et=0;return{start(at,ae){pt=at,ve=ae,et=0,Xe=!0},detect(at,ae){if(!Xe)return!1;const te=at-pt,se=ae-ve,L=te*te+se*se;if(L<$e)return!1;const Le=Math.sqrt(L),Ce=(Ge?te:se)/Le;return et=Ce>Ve?1:Ce<-Ve?-1:0,Xe=!1,!0},isGesture:()=>0!==et,getDirection:()=>et}})(Ve.direction,Ve.threshold,Ve.maxAngle),Ce=l.G.createGesture({name:He.gestureName,priority:He.gesturePriority,disableScroll:He.disableScroll}),Wt=()=>{We&&(Ge=!1,at&&at(L))},un=()=>!!Ce.capture()&&(We=!0,it=!1,L.startX=L.currentX,L.startY=L.currentY,L.startTime=L.currentTime,pt?pt(L).then(me):me(),!0),me=()=>{se&&(()=>{if(typeof document<"u"){const De=document.activeElement;null!=De&&De.blur&&De.blur()}})(),ve&&ve(L),it=!0},he=()=>{We=!1,Oe=!1,Ge=!1,it=!0,Ce.release()},ye=De=>{const $t=We,Jt=it;if(he(),Jt){if(be(L,De),$t)return void(Xe&&Xe(L));et&&et(L)}},Fe=((He,We,Oe,it,Ge)=>{let Ve,$e,pt,ve,Xe,et,at,ae=0;const te=nt=>{ae=Date.now()+2e3,We(nt)&&(!$e&&Oe&&($e=K(He,"touchmove",Oe,Ge)),pt||(pt=K(nt.target,"touchend",L,Ge)),ve||(ve=K(nt.target,"touchcancel",L,Ge)))},se=nt=>{ae>Date.now()||We(nt)&&(!et&&Oe&&(et=K(_e(He),"mousemove",Oe,Ge)),at||(at=K(_e(He),"mouseup",Le,Ge)))},L=nt=>{Ce(),it&&it(nt)},Le=nt=>{Ye(),it&&it(nt)},Ce=()=>{$e&&$e(),pt&&pt(),ve&&ve(),$e=pt=ve=void 0},Ye=()=>{et&&et(),at&&at(),et=at=void 0},It=()=>{Ce(),Ye()},Wt=(nt=!0)=>{nt?(Ve||(Ve=K(He,"touchstart",te,Ge)),Xe||(Xe=K(He,"mousedown",se,Ge))):(Ve&&Ve(),Xe&&Xe(),Ve=Xe=void 0,It())};return{enable:Wt,stop:It,destroy:()=>{Wt(!1),it=Oe=We=void 0}}})(Ve.el,De=>{const $t=Ke(De);return!(Oe||!it||(Ee(De,L),L.startX=L.currentX,L.startY=L.currentY,L.startTime=L.currentTime=$t,L.velocityX=L.velocityY=L.deltaX=L.deltaY=0,L.event=De,$e&&!1===$e(L))||(Ce.release(),!Ce.start()))&&(Oe=!0,0===ae?un():(Le.start(L.startX,L.startY),!0))},De=>{We?!Ge&&it&&(Ge=!0,be(L,De),requestAnimationFrame(Wt)):(be(L,De),Le.detect(L.currentX,L.currentY)&&(!Le.isGesture()||!un())&&Je())},ye,{capture:!1,passive:te}),Je=()=>{he(),Fe.stop(),et&&et(L)};return{enable(De=!0){De||(We&&ye(void 0),he()),Fe.enable(De)},destroy(){Ce.destroy(),Fe.destroy()}}},be=(He,We)=>{if(!We)return;const Oe=He.currentX,it=He.currentY,Ge=He.currentTime;Ee(We,He);const Ve=He.currentX,$e=He.currentY,ve=(He.currentTime=Ke(We))-Ge;if(ve>0&&ve<100){const et=($e-it)/ve;He.velocityX=(Ve-Oe)/ve*.7+.3*He.velocityX,He.velocityY=.7*et+.3*He.velocityY}He.deltaX=Ve-He.startX,He.deltaY=$e-He.startY,He.event=We},Ee=(He,We)=>{let Oe=0,it=0;if(He){const Ge=He.changedTouches;if(Ge&&Ge.length>0){const Ve=Ge[0];Oe=Ve.clientX,it=Ve.clientY}else void 0!==He.pageX&&(Oe=He.pageX,it=He.pageY)}We.currentX=Oe,We.currentY=it},Ke=He=>He.timeStamp||Date.now()},6256:(mn,st,N)=>{"use strict";N.d(st,{b:()=>ge,c:()=>_e,d:()=>je,e:()=>ae,g:()=>L,l:()=>et,s:()=>te,t:()=>Ee,w:()=>at});var l=N(1528),K=N(2992),Z=N(6384);const ge="ionViewWillLeave",_e="ionViewDidLeave",je="ionViewWillUnload",Ee=Le=>new Promise((Ce,Ye)=>{(0,K.w)(()=>{Ke(Le),He(Le).then(It=>{It.animation&&It.animation.destroy(),We(Le),Ce(It)},It=>{We(Le),Ye(It)})})}),Ke=Le=>{const Ce=Le.enteringEl,Ye=Le.leavingEl;se(Ce,Ye,Le.direction),Le.showGoBack?Ce.classList.add("can-go-back"):Ce.classList.remove("can-go-back"),te(Ce,!1),Ce.style.setProperty("pointer-events","none"),Ye&&(te(Ye,!1),Ye.style.setProperty("pointer-events","none"))},He=function(){var Le=(0,l.c)(function*(Ce){const Ye=yield Oe(Ce);return Ye&&K.B.isBrowser?it(Ye,Ce):Ge(Ce)});return function(Ye){return Le.apply(this,arguments)}}(),We=Le=>{const Ce=Le.enteringEl,Ye=Le.leavingEl;Ce.classList.remove("ion-page-invisible"),Ce.style.removeProperty("pointer-events"),void 0!==Ye&&(Ye.classList.remove("ion-page-invisible"),Ye.style.removeProperty("pointer-events"))},Oe=function(){var Le=(0,l.c)(function*(Ce){return Ce.leavingEl&&Ce.animated&&0!==Ce.duration?Ce.animationBuilder?Ce.animationBuilder:"ios"===Ce.mode?(yield Promise.resolve().then(N.bind(N,8512))).iosTransitionAnimation:(yield Promise.resolve().then(N.bind(N,6556))).mdTransitionAnimation:void 0});return function(Ye){return Le.apply(this,arguments)}}(),it=function(){var Le=(0,l.c)(function*(Ce,Ye){yield Ve(Ye,!0);const It=Ce(Ye.baseEl,Ye);ve(Ye.enteringEl,Ye.leavingEl);const Wt=yield pt(It,Ye);return Ye.progressCallback&&Ye.progressCallback(void 0),Wt&&Xe(Ye.enteringEl,Ye.leavingEl),{hasCompleted:Wt,animation:It}});return function(Ye,It){return Le.apply(this,arguments)}}(),Ge=function(){var Le=(0,l.c)(function*(Ce){const Ye=Ce.enteringEl,It=Ce.leavingEl;return yield Ve(Ce,!1),ve(Ye,It),Xe(Ye,It),{hasCompleted:!0}});return function(Ye){return Le.apply(this,arguments)}}(),Ve=function(){var Le=(0,l.c)(function*(Ce,Ye){(void 0!==Ce.deepWait?Ce.deepWait:Ye)&&(yield Promise.all([ae(Ce.enteringEl),ae(Ce.leavingEl)])),yield $e(Ce.viewIsReady,Ce.enteringEl)});return function(Ye,It){return Le.apply(this,arguments)}}(),$e=function(){var Le=(0,l.c)(function*(Ce,Ye){Ce&&(yield Ce(Ye))});return function(Ye,It){return Le.apply(this,arguments)}}(),pt=(Le,Ce)=>{const Ye=Ce.progressCallback,It=new Promise(Wt=>{Le.onFinish(un=>Wt(1===un))});return Ye?(Le.progressStart(!0),Ye(Le)):Le.play(),It},ve=(Le,Ce)=>{et(Ce,ge),et(Le,"ionViewWillEnter")},Xe=(Le,Ce)=>{et(Le,"ionViewDidEnter"),et(Ce,_e)},et=(Le,Ce)=>{if(Le){const Ye=new CustomEvent(Ce,{bubbles:!1,cancelable:!1});Le.dispatchEvent(Ye)}},at=()=>new Promise(Le=>(0,Z.r)(()=>(0,Z.r)(()=>Le()))),ae=function(){var Le=(0,l.c)(function*(Ce){const Ye=Ce;if(Ye){if(null!=Ye.componentOnReady){if(null!=(yield Ye.componentOnReady()))return}else if(null!=Ye.__registerHost)return void(yield new Promise(Wt=>(0,Z.r)(Wt)));yield Promise.all(Array.from(Ye.children).map(ae))}});return function(Ye){return Le.apply(this,arguments)}}(),te=(Le,Ce)=>{Ce?(Le.setAttribute("aria-hidden","true"),Le.classList.add("ion-page-hidden")):(Le.hidden=!1,Le.removeAttribute("aria-hidden"),Le.classList.remove("ion-page-hidden"))},se=(Le,Ce,Ye)=>{void 0!==Le&&(Le.style.zIndex="back"===Ye?"99":"101"),void 0!==Ce&&(Ce.style.zIndex="100")},L=Le=>Le.classList.contains("ion-page")?Le:Le.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Le},2992:(mn,st,N)=>{"use strict";N.d(st,{B:()=>Ke,H:()=>un,a:()=>qr,b:()=>Or,c:()=>Jt,d:()=>Qn,e:()=>gi,f:()=>an,g:()=>dn,h:()=>It,i:()=>Ie,j:()=>He,r:()=>Zn,w:()=>Ct});var l=N(1528);let ee,Ne,ge,_e=!1,je=!1,Qe=!1,be=!1,Ee=!1;const Ke={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},He=Y=>{const ne=new URL(Y,Ir.$resourcesUrl$);return ne.origin!==pi.location.origin?ne.href:ne.pathname},pt="s-id",ve="sty-id",at="slot-fb{display:contents}slot-fb[hidden]{display:none}",ae="http://www.w3.org/1999/xlink",te={},Ce=Y=>"object"==(Y=typeof Y)||"function"===Y;function Ye(Y){var ne,qe,ct;return null!==(ct=null===(qe=null===(ne=Y.head)||void 0===ne?void 0:ne.querySelector('meta[name="csp-nonce"]'))||void 0===qe?void 0:qe.getAttribute("content"))&&void 0!==ct?ct:void 0}const It=(Y,ne,...qe)=>{let ct=null,_t=null,Pt=null,Kt=!1,gn=!1;const tn=[],Nt=qt=>{for(let ln=0;ln<qt.length;ln++)ct=qt[ln],Array.isArray(ct)?Nt(ct):null!=ct&&"boolean"!=typeof ct&&((Kt="function"!=typeof Y&&!Ce(ct))&&(ct=String(ct)),Kt&&gn?tn[tn.length-1].$text$+=ct:tn.push(Kt?Wt(null,ct):ct),gn=Kt)};if(Nt(qe),ne){ne.key&&(_t=ne.key),ne.name&&(Pt=ne.name);{const qt=ne.className||ne.class;qt&&(ne.class="object"!=typeof qt?qt:Object.keys(qt).filter(ln=>qt[ln]).join(" "))}}if("function"==typeof Y)return Y(null===ne?{}:ne,tn,me);const on=Wt(Y,null);return on.$attrs$=ne,tn.length>0&&(on.$children$=tn),on.$key$=_t,on.$name$=Pt,on},Wt=(Y,ne)=>({$flags$:0,$tag$:Y,$text$:ne,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),un={},me={forEach:(Y,ne)=>Y.map(he).forEach(ne),map:(Y,ne)=>Y.map(he).map(ne).map(ye)},he=Y=>({vattrs:Y.$attrs$,vchildren:Y.$children$,vkey:Y.$key$,vname:Y.$name$,vtag:Y.$tag$,vtext:Y.$text$}),ye=Y=>{if("function"==typeof Y.vtag){const qe=Object.assign({},Y.vattrs);return Y.vkey&&(qe.key=Y.vkey),Y.vname&&(qe.name=Y.vname),It(Y.vtag,qe,...Y.vchildren||[])}const ne=Wt(Y.vtag,Y.vtext);return ne.$attrs$=Y.vattrs,ne.$children$=Y.vchildren,ne.$key$=Y.vkey,ne.$name$=Y.vname,ne},Je=(Y,ne,qe,ct,_t,Pt,Kt)=>{let gn,tn,Nt,on;if(1===Pt.nodeType){for(gn=Pt.getAttribute("c-id"),gn&&(tn=gn.split("."),(tn[0]===Kt||"0"===tn[0])&&(Nt={$flags$:0,$hostId$:tn[0],$nodeId$:tn[1],$depth$:tn[2],$index$:tn[3],$tag$:Pt.tagName.toLowerCase(),$elm$:Pt,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},ne.push(Nt),Pt.removeAttribute("c-id"),Y.$children$||(Y.$children$=[]),Y.$children$[Nt.$index$]=Nt,Y=Nt,ct&&"0"===Nt.$depth$&&(ct[Nt.$index$]=Nt.$elm$))),on=Pt.childNodes.length-1;on>=0;on--)Je(Y,ne,qe,ct,_t,Pt.childNodes[on],Kt);if(Pt.shadowRoot)for(on=Pt.shadowRoot.childNodes.length-1;on>=0;on--)Je(Y,ne,qe,ct,_t,Pt.shadowRoot.childNodes[on],Kt)}else if(8===Pt.nodeType)tn=Pt.nodeValue.split("."),(tn[1]===Kt||"0"===tn[1])&&(gn=tn[0],Nt={$flags$:0,$hostId$:tn[1],$nodeId$:tn[2],$depth$:tn[3],$index$:tn[4],$elm$:Pt,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===gn?(Nt.$elm$=Pt.nextSibling,Nt.$elm$&&3===Nt.$elm$.nodeType&&(Nt.$text$=Nt.$elm$.textContent,ne.push(Nt),Pt.remove(),Y.$children$||(Y.$children$=[]),Y.$children$[Nt.$index$]=Nt,ct&&"0"===Nt.$depth$&&(ct[Nt.$index$]=Nt.$elm$))):Nt.$hostId$===Kt&&("s"===gn?(Nt.$tag$="slot",Pt["s-sn"]=tn[5]?Nt.$name$=tn[5]:"",Pt["s-sr"]=!0,ct&&(Nt.$elm$=Kr.createElement(Nt.$tag$),Nt.$name$&&Nt.$elm$.setAttribute("name",Nt.$name$),Pt.parentNode.insertBefore(Nt.$elm$,Pt),Pt.remove(),"0"===Nt.$depth$&&(ct[Nt.$index$]=Nt.$elm$)),qe.push(Nt),Y.$children$||(Y.$children$=[]),Y.$children$[Nt.$index$]=Nt):"r"===gn&&(ct?Pt.remove():(_t["s-cr"]=Pt,Pt["s-cn"]=!0))));else if(Y&&"style"===Y.$tag$){const qt=Wt(null,Pt.textContent);qt.$elm$=Pt,qt.$index$="0",Y.$children$=[qt]}},De=(Y,ne)=>{if(1===Y.nodeType){let qe=0;for(;qe<Y.childNodes.length;qe++)De(Y.childNodes[qe],ne);if(Y.shadowRoot)for(qe=0;qe<Y.shadowRoot.childNodes.length;qe++)De(Y.shadowRoot.childNodes[qe],ne)}else if(8===Y.nodeType){const qe=Y.nodeValue.split(".");"o"===qe[0]&&(ne.set(qe[1]+"."+qe[2],Y),Y.nodeValue="",Y["s-en"]=qe[3])}},Jt=Y=>lo.push(Y),dn=Y=>Kn(Y).$modeName$,an=Y=>Kn(Y).$hostElement$,Qn=(Y,ne,qe)=>{const ct=an(Y);return{emit:_t=>jn(ct,ne,{bubbles:!!(4&qe),composed:!!(2&qe),cancelable:!!(1&qe),detail:_t})}},jn=(Y,ne,qe)=>{const ct=Ir.ce(ne,qe);return Y.dispatchEvent(ct),ct},xt=new WeakMap,ft=(Y,ne,qe)=>{let ct=Hr.get(Y);Te&&qe?(ct=ct||new CSSStyleSheet,"string"==typeof ct?ct=ne:ct.replaceSync(ne)):ct=ne,Hr.set(Y,ct)},Tt=(Y,ne,qe)=>{var ct;const _t=vn(ne,qe),Pt=Hr.get(_t);if(Y=11===Y.nodeType?Y:Kr,Pt)if("string"==typeof Pt){let gn,Kt=xt.get(Y=Y.head||Y);if(Kt||xt.set(Y,Kt=new Set),!Kt.has(_t)){if(Y.host&&(gn=Y.querySelector(`[${ve}="${_t}"]`)))gn.innerHTML=Pt;else{gn=Kr.createElement("style"),gn.innerHTML=Pt;const tn=null!==(ct=Ir.$nonce$)&&void 0!==ct?ct:Ye(Kr);null!=tn&&gn.setAttribute("nonce",tn),Y.insertBefore(gn,Y.querySelector("link"))}4&ne.$flags$&&(gn.innerHTML+=at),Kt&&Kt.add(_t)}}else Y.adoptedStyleSheets.includes(Pt)||(Y.adoptedStyleSheets=[...Y.adoptedStyleSheets,Pt]);return _t},vn=(Y,ne)=>"sc-"+(ne&&32&Y.$flags$?Y.$tagName$+"-"+ne:Y.$tagName$),Ft=Y=>Y.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Qt=(Y,ne,qe,ct,_t,Pt)=>{if(qe!==ct){let Kt=Vr(Y,ne),gn=ne.toLowerCase();if("class"===ne){const tn=Y.classList,Nt=xn(qe),on=xn(ct);tn.remove(...Nt.filter(qt=>qt&&!on.includes(qt))),tn.add(...on.filter(qt=>qt&&!Nt.includes(qt)))}else if("style"===ne){for(const tn in qe)(!ct||null==ct[tn])&&(tn.includes("-")?Y.style.removeProperty(tn):Y.style[tn]="");for(const tn in ct)(!qe||ct[tn]!==qe[tn])&&(tn.includes("-")?Y.style.setProperty(tn,ct[tn]):Y.style[tn]=ct[tn])}else if("key"!==ne)if("ref"===ne)ct&&ct(Y);else if(Kt||"o"!==ne[0]||"n"!==ne[1]){const tn=Ce(ct);if((Kt||tn&&null!==ct)&&!_t)try{if(Y.tagName.includes("-"))Y[ne]=ct;else{const on=null==ct?"":ct;"list"===ne?Kt=!1:(null==qe||Y[ne]!=on)&&(Y[ne]=on)}}catch{}let Nt=!1;gn!==(gn=gn.replace(/^xlink\:?/,""))&&(ne=gn,Nt=!0),null==ct||!1===ct?(!1!==ct||""===Y.getAttribute(ne))&&(Nt?Y.removeAttributeNS(ae,ne):Y.removeAttribute(ne)):(!Kt||4&Pt||_t)&&!tn&&(ct=!0===ct?"":ct,Nt?Y.setAttributeNS(ae,ne,ct):Y.setAttribute(ne,ct))}else if(ne="-"===ne[2]?ne.slice(3):Vr(pi,gn)?gn.slice(2):gn[2]+ne.slice(3),qe||ct){const tn=ne.endsWith(br);ne=ne.replace(mr,""),qe&&Ir.rel(Y,ne,qe,tn),ct&&Ir.ael(Y,ne,ct,tn)}}},Sn=/\s/,xn=Y=>Y?Y.split(Sn):[],br="Capture",mr=new RegExp(br+"$"),Cr=(Y,ne,qe,ct)=>{const _t=11===ne.$elm$.nodeType&&ne.$elm$.host?ne.$elm$.host:ne.$elm$,Pt=Y&&Y.$attrs$||te,Kt=ne.$attrs$||te;for(ct in Pt)ct in Kt||Qt(_t,ct,Pt[ct],void 0,qe,ne.$flags$);for(ct in Kt)Qt(_t,ct,Pt[ct],Kt[ct],qe,ne.$flags$)},Tn=(Y,ne,qe,ct)=>{const _t=ne.$children$[qe];let Kt,gn,tn,Pt=0;if(_e||(Qe=!0,"slot"===_t.$tag$&&(ee&&ct.classList.add(ee+"-s"),_t.$flags$|=_t.$children$?2:1)),null!==_t.$text$)Kt=_t.$elm$=Kr.createTextNode(_t.$text$);else if(1&_t.$flags$)Kt=_t.$elm$=Kr.createTextNode("");else{if(be||(be="svg"===_t.$tag$),Kt=_t.$elm$=Kr.createElementNS(be?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&_t.$flags$?"slot-fb":_t.$tag$),be&&"foreignObject"===_t.$tag$&&(be=!1),Cr(null,_t,be),(Y=>null!=Y)(ee)&&Kt["s-si"]!==ee&&Kt.classList.add(Kt["s-si"]=ee),_t.$children$)for(Pt=0;Pt<_t.$children$.length;++Pt)gn=Tn(Y,_t,Pt,Kt),gn&&Kt.appendChild(gn);"svg"===_t.$tag$?be=!1:"foreignObject"===Kt.tagName&&(be=!0)}return Kt["s-hn"]=ge,3&_t.$flags$&&(Kt["s-sr"]=!0,Kt["s-cr"]=Ne,Kt["s-sn"]=_t.$name$||"",tn=Y&&Y.$children$&&Y.$children$[qe],tn&&tn.$tag$===_t.$tag$&&Y.$elm$&&Wn(Y.$elm$,!1)),Kt},Wn=(Y,ne)=>{Ir.$flags$|=1;const qe=Y.childNodes;for(let ct=qe.length-1;ct>=0;ct--){const _t=qe[ct];_t["s-hn"]!==ge&&_t["s-ol"]&&(Yt(_t).insertBefore(_t,Xt(_t)),_t["s-ol"].remove(),_t["s-ol"]=void 0,_t["s-sh"]=void 0,Qe=!0),ne&&Wn(_t,ne)}Ir.$flags$&=-2},Sr=(Y,ne,qe,ct,_t,Pt)=>{let gn,Kt=Y["s-cr"]&&Y["s-cr"].parentNode||Y;for(Kt.shadowRoot&&Kt.tagName===ge&&(Kt=Kt.shadowRoot);_t<=Pt;++_t)ct[_t]&&(gn=Tn(null,qe,_t,Y),gn&&(ct[_t].$elm$=gn,Kt.insertBefore(gn,Xt(ne))))},ri=(Y,ne,qe)=>{for(let ct=ne;ct<=qe;++ct){const _t=Y[ct];if(_t){const Pt=_t.$elm$;po(_t),Pt&&(je=!0,Pt["s-ol"]?Pt["s-ol"].remove():Wn(Pt,!0),Pt.remove())}}},Et=(Y,ne,qe=!1)=>Y.$tag$===ne.$tag$&&("slot"===Y.$tag$?Y.$name$===ne.$name$:!!qe||Y.$key$===ne.$key$),Xt=Y=>Y&&Y["s-ol"]||Y,Yt=Y=>(Y["s-ol"]?Y["s-ol"]:Y).parentNode,bt=(Y,ne,qe=!1)=>{const ct=ne.$elm$=Y.$elm$,_t=Y.$children$,Pt=ne.$children$,Kt=ne.$tag$,gn=ne.$text$;let tn;null===gn?(be="svg"===Kt||"foreignObject"!==Kt&&be,"slot"===Kt&&!_e||Cr(Y,ne,be),null!==_t&&null!==Pt?((Y,ne,qe,ct,_t=!1)=>{let tr,A,Pt=0,Kt=0,gn=0,tn=0,Nt=ne.length-1,on=ne[0],qt=ne[Nt],ln=ct.length-1,En=ct[0],kr=ct[ln];for(;Pt<=Nt&&Kt<=ln;)if(null==on)on=ne[++Pt];else if(null==qt)qt=ne[--Nt];else if(null==En)En=ct[++Kt];else if(null==kr)kr=ct[--ln];else if(Et(on,En,_t))bt(on,En,_t),on=ne[++Pt],En=ct[++Kt];else if(Et(qt,kr,_t))bt(qt,kr,_t),qt=ne[--Nt],kr=ct[--ln];else if(Et(on,kr,_t))("slot"===on.$tag$||"slot"===kr.$tag$)&&Wn(on.$elm$.parentNode,!1),bt(on,kr,_t),Y.insertBefore(on.$elm$,qt.$elm$.nextSibling),on=ne[++Pt],kr=ct[--ln];else if(Et(qt,En,_t))("slot"===on.$tag$||"slot"===kr.$tag$)&&Wn(qt.$elm$.parentNode,!1),bt(qt,En,_t),Y.insertBefore(qt.$elm$,on.$elm$),qt=ne[--Nt],En=ct[++Kt];else{for(gn=-1,tn=Pt;tn<=Nt;++tn)if(ne[tn]&&null!==ne[tn].$key$&&ne[tn].$key$===En.$key$){gn=tn;break}gn>=0?(A=ne[gn],A.$tag$!==En.$tag$?tr=Tn(ne&&ne[Kt],qe,gn,Y):(bt(A,En,_t),ne[gn]=void 0,tr=A.$elm$),En=ct[++Kt]):(tr=Tn(ne&&ne[Kt],qe,Kt,Y),En=ct[++Kt]),tr&&Yt(on.$elm$).insertBefore(tr,Xt(on.$elm$))}Pt>Nt?Sr(Y,null==ct[ln+1]?null:ct[ln+1].$elm$,qe,ct,Kt,ln):Kt>ln&&ri(ne,Pt,Nt)})(ct,_t,ne,Pt,qe):null!==Pt?(null!==Y.$text$&&(ct.textContent=""),Sr(ct,null,ne,Pt,0,Pt.length-1)):null!==_t&&ri(_t,0,_t.length-1),be&&"svg"===Kt&&(be=!1)):(tn=ct["s-cr"])?tn.parentNode.textContent=gn:Y.$text$!==gn&&(ct.data=gn)},yn=Y=>{const ne=Y.childNodes;for(const qe of ne)if(1===qe.nodeType){if(qe["s-sr"]){const ct=qe["s-sn"];qe.hidden=!1;for(const _t of ne)if(_t!==qe)if(_t["s-hn"]!==qe["s-hn"]||""!==ct){if(1===_t.nodeType&&(ct===_t.getAttribute("slot")||ct===_t["s-sn"])){qe.hidden=!0;break}}else if(1===_t.nodeType||3===_t.nodeType&&""!==_t.textContent.trim()){qe.hidden=!0;break}}yn(qe)}},hn=[],nr=Y=>{let ne,qe,ct;for(const _t of Y.childNodes){if(_t["s-sr"]&&(ne=_t["s-cr"])&&ne.parentNode){qe=ne.parentNode.childNodes;const Pt=_t["s-sn"];for(ct=qe.length-1;ct>=0;ct--)if(ne=qe[ct],!ne["s-cn"]&&!ne["s-nr"]&&ne["s-hn"]!==_t["s-hn"])if(jr(ne,Pt)){let Kt=hn.find(gn=>gn.$nodeToRelocate$===ne);je=!0,ne["s-sn"]=ne["s-sn"]||Pt,Kt?(Kt.$nodeToRelocate$["s-sh"]=_t["s-hn"],Kt.$slotRefNode$=_t):(ne["s-sh"]=_t["s-hn"],hn.push({$slotRefNode$:_t,$nodeToRelocate$:ne})),ne["s-sr"]&&hn.map(gn=>{jr(gn.$nodeToRelocate$,ne["s-sn"])&&(Kt=hn.find(tn=>tn.$nodeToRelocate$===ne),Kt&&!gn.$slotRefNode$&&(gn.$slotRefNode$=Kt.$slotRefNode$))})}else hn.some(Kt=>Kt.$nodeToRelocate$===ne)||hn.push({$nodeToRelocate$:ne})}1===_t.nodeType&&nr(_t)}},jr=(Y,ne)=>1===Y.nodeType?null===Y.getAttribute("slot")&&""===ne||Y.getAttribute("slot")===ne:Y["s-sn"]===ne||""===ne,po=Y=>{Y.$attrs$&&Y.$attrs$.ref&&Y.$attrs$.ref(null),Y.$children$&&Y.$children$.map(po)},Rr=(Y,ne)=>{ne&&!Y.$onRenderResolve$&&ne["s-p"]&&ne["s-p"].push(new Promise(qe=>Y.$onRenderResolve$=qe))},Li=(Y,ne)=>{if(Y.$flags$|=16,!(4&Y.$flags$))return Rr(Y,Y.$ancestorComponent$),Ct(()=>Yi(Y,ne));Y.$flags$|=512},Yi=(Y,ne)=>{const ct=Y.$lazyInstance$;let _t;return ne&&(Y.$flags$|=256,Y.$queuedListeners$&&(Y.$queuedListeners$.map(([Pt,Kt])=>tt(ct,Pt,Kt)),Y.$queuedListeners$=void 0),_t=tt(ct,"componentWillLoad")),_t=St(_t,()=>tt(ct,"componentWillRender")),St(_t,()=>Rt(Y,ct,ne))},St=(Y,ne)=>dt(Y)?Y.then(ne):ne(),dt=Y=>Y instanceof Promise||Y&&Y.then&&"function"==typeof Y.then,Rt=function(){var Y=(0,l.c)(function*(ne,qe,ct){var _t;const Pt=ne.$hostElement$,gn=Pt["s-rc"];ct&&(Y=>{const ne=Y.$cmpMeta$,qe=Y.$hostElement$,ct=ne.$flags$,Pt=Tt(qe.shadowRoot?qe.shadowRoot:qe.getRootNode(),ne,Y.$modeName$);10&ct&&(qe["s-sc"]=Pt,qe.classList.add(Pt+"-h"),2&ct&&qe.classList.add(Pt+"-s"))})(ne);lt(ne,qe,Pt,ct),gn&&(gn.map(Nt=>Nt()),Pt["s-rc"]=void 0);{const Nt=null!==(_t=Pt["s-p"])&&void 0!==_t?_t:[],on=()=>ue(ne);0===Nt.length?on():(Promise.all(Nt).then(on),ne.$flags$|=4,Nt.length=0)}});return function(qe,ct,_t){return Y.apply(this,arguments)}}(),lt=(Y,ne,qe,ct)=>{try{ne=ne.render&&ne.render(),Y.$flags$&=-17,Y.$flags$|=2,((Y,ne,qe=!1)=>{var ct,_t,Pt,Kt;const gn=Y.$hostElement$,tn=Y.$cmpMeta$,Nt=Y.$vnode$||Wt(null,null),on=(Y=>Y&&Y.$tag$===un)(ne)?ne:It(null,null,ne);if(ge=gn.tagName,tn.$attrsToReflect$&&(on.$attrs$=on.$attrs$||{},tn.$attrsToReflect$.map(([qt,ln])=>on.$attrs$[ln]=gn[qt])),qe&&on.$attrs$)for(const qt of Object.keys(on.$attrs$))gn.hasAttribute(qt)&&!["key","ref","style","class"].includes(qt)&&(on.$attrs$[qt]=gn[qt]);if(on.$tag$=null,on.$flags$|=4,Y.$vnode$=on,on.$elm$=Nt.$elm$=gn.shadowRoot||gn,ee=gn["s-sc"],_e=0!=(1&tn.$flags$),Ne=gn["s-cr"],je=!1,bt(Nt,on,qe),Ir.$flags$|=1,Qe){nr(on.$elm$);for(const qt of hn){const ln=qt.$nodeToRelocate$;if(!ln["s-ol"]){const En=Kr.createTextNode("");En["s-nr"]=ln,ln.parentNode.insertBefore(ln["s-ol"]=En,ln)}}for(const qt of hn){const ln=qt.$nodeToRelocate$,En=qt.$slotRefNode$;if(En){const kr=En.parentNode;let tr=En.nextSibling;{let A=null===(ct=ln["s-ol"])||void 0===ct?void 0:ct.previousSibling;for(;A;){let fe=null!==(_t=A["s-nr"])&&void 0!==_t?_t:null;if(fe&&fe["s-sn"]===ln["s-sn"]&&kr===fe.parentNode&&(fe=fe.nextSibling,!fe||!fe["s-nr"])){tr=fe;break}A=A.previousSibling}}(!tr&&kr!==ln.parentNode||ln.nextSibling!==tr)&&ln!==tr&&(!ln["s-hn"]&&ln["s-ol"]&&(ln["s-hn"]=ln["s-ol"].parentNode.nodeName),kr.insertBefore(ln,tr),1===ln.nodeType&&(ln.hidden=null!==(Pt=ln["s-ih"])&&void 0!==Pt&&Pt))}else 1===ln.nodeType&&(qe&&(ln["s-ih"]=null!==(Kt=ln.hidden)&&void 0!==Kt&&Kt),ln.hidden=!0)}}je&&yn(on.$elm$),Ir.$flags$&=-2,hn.length=0,Ne=void 0})(Y,ne,ct)}catch(_t){Gr(_t,Y.$hostElement$)}return null},ue=Y=>{const qe=Y.$hostElement$,_t=Y.$lazyInstance$,Pt=Y.$ancestorComponent$;tt(_t,"componentDidRender"),64&Y.$flags$?tt(_t,"componentDidUpdate"):(Y.$flags$|=64,ut(qe),tt(_t,"componentDidLoad"),Y.$onReadyResolve$(qe),Pt||Ue()),Y.$onInstanceResolve$(qe),Y.$onRenderResolve$&&(Y.$onRenderResolve$(),Y.$onRenderResolve$=void 0),512&Y.$flags$&&Jn(()=>Li(Y,!1)),Y.$flags$&=-517},Ie=Y=>{{const ne=Kn(Y),qe=ne.$hostElement$.isConnected;return qe&&2==(18&ne.$flags$)&&Li(ne,!1),qe}},Ue=Y=>{ut(Kr.documentElement),Jn(()=>jn(pi,"appload",{detail:{namespace:"ionic"}}))},tt=(Y,ne,qe)=>{if(Y&&Y[ne])try{return Y[ne](qe)}catch(ct){Gr(ct)}},ut=Y=>Y.classList.add("hydrated"),qn=(Y,ne,qe)=>{var ct;const _t=Y.prototype;if(ne.$members$){Y.watchers&&(ne.$watchers$=Y.watchers);const Pt=Object.entries(ne.$members$);if(Pt.map(([Kt,[gn]])=>{31&gn||2&qe&&32&gn?Object.defineProperty(_t,Kt,{get(){return((Y,ne)=>Kn(this).$instanceValues$.get(ne))(0,Kt)},set(tn){((Y,ne,qe,ct)=>{const _t=Kn(Y),Pt=_t.$hostElement$,Kt=_t.$instanceValues$.get(ne),gn=_t.$flags$,tn=_t.$lazyInstance$;qe=((Y,ne)=>null==Y||Ce(Y)?Y:4&ne?"false"!==Y&&(""===Y||!!Y):2&ne?parseFloat(Y):1&ne?String(Y):Y)(qe,ct.$members$[ne][0]);const Nt=Number.isNaN(Kt)&&Number.isNaN(qe);if((!(8&gn)||void 0===Kt)&&qe!==Kt&&!Nt&&(_t.$instanceValues$.set(ne,qe),tn)){if(ct.$watchers$&&128&gn){const qt=ct.$watchers$[ne];qt&&qt.map(ln=>{try{tn[ln](qe,Kt,ne)}catch(En){Gr(En,Pt)}})}2==(18&gn)&&Li(_t,!1)}})(this,Kt,tn,ne)},configurable:!0,enumerable:!0}):1&qe&&64&gn&&Object.defineProperty(_t,Kt,{value(...tn){var Nt;const on=Kn(this);return null===(Nt=null==on?void 0:on.$onInstancePromise$)||void 0===Nt?void 0:Nt.then(()=>{var qt;return null===(qt=on.$lazyInstance$)||void 0===qt?void 0:qt[Kt](...tn)})}})}),1&qe){const Kt=new Map;_t.attributeChangedCallback=function(gn,tn,Nt){Ir.jmp(()=>{var on;const qt=Kt.get(gn);if(this.hasOwnProperty(qt))Nt=this[qt],delete this[qt];else{if(_t.hasOwnProperty(qt)&&"number"==typeof this[qt]&&this[qt]==Nt)return;if(null==qt){const ln=Kn(this),En=null==ln?void 0:ln.$flags$;if(En&&!(8&En)&&128&En&&Nt!==tn){const kr=ln.$lazyInstance$,tr=null===(on=ne.$watchers$)||void 0===on?void 0:on[gn];null==tr||tr.forEach(A=>{null!=kr[A]&&kr[A].call(kr,Nt,tn,gn)})}return}}this[qt]=(null!==Nt||"boolean"!=typeof this[qt])&&Nt})},Y.observedAttributes=Array.from(new Set([...Object.keys(null!==(ct=ne.$watchers$)&&void 0!==ct?ct:{}),...Pt.filter(([gn,tn])=>15&tn[0]).map(([gn,tn])=>{var Nt;const on=tn[1]||gn;return Kt.set(on,gn),512&tn[0]&&(null===(Nt=ne.$attrsToReflect$)||void 0===Nt||Nt.push([gn,on])),on})]))}}return Y},Nr=function(){var Y=(0,l.c)(function*(ne,qe,ct,_t){let Pt;if(!(32&qe.$flags$)){qe.$flags$|=32;{if(Pt=ao(ct),Pt.then){const Nt=()=>{};Pt=yield Pt,Nt()}Pt.isProxied||(ct.$watchers$=Pt.watchers,qn(Pt,ct,2),Pt.isProxied=!0);const tn=()=>{};qe.$flags$|=8;try{new Pt(qe)}catch(Nt){Gr(Nt)}qe.$flags$&=-9,qe.$flags$|=128,tn(),Ar(qe.$lazyInstance$)}if(Pt.style){let tn=Pt.style;"string"!=typeof tn&&(tn=tn[qe.$modeName$=(Y=>lo.map(ne=>ne(Y)).find(ne=>!!ne))(ne)]);const Nt=vn(ct,qe.$modeName$);if(!Hr.has(Nt)){const on=()=>{};ft(Nt,tn,!!(1&ct.$flags$)),on()}}}const Kt=qe.$ancestorComponent$,gn=()=>Li(qe,!0);Kt&&Kt["s-rc"]?Kt["s-rc"].push(gn):gn()});return function(qe,ct,_t,Pt){return Y.apply(this,arguments)}}(),Ar=Y=>{tt(Y,"connectedCallback")},bn=Y=>{const ne=Y["s-cr"]=Kr.createComment("");ne["s-cn"]=!0,Y.insertBefore(ne,Y.firstChild)},Mr=Y=>{tt(Y,"disconnectedCallback")},so=function(){var Y=(0,l.c)(function*(ne){if(!(1&Ir.$flags$)){const qe=Kn(ne);qe.$rmListeners$&&(qe.$rmListeners$.map(ct=>ct()),qe.$rmListeners$=void 0),null!=qe&&qe.$lazyInstance$?Mr(qe.$lazyInstance$):null!=qe&&qe.$onReadyPromise$&&qe.$onReadyPromise$.then(()=>Mr(qe.$lazyInstance$))}});return function(qe){return Y.apply(this,arguments)}}(),Or=(Y,ne={})=>{var qe;const _t=[],Pt=ne.exclude||[],Kt=pi.customElements,gn=Kr.head,tn=gn.querySelector("meta[charset]"),Nt=Kr.createElement("style"),on=[],qt=Kr.querySelectorAll(`[${ve}]`);let ln,En=!0,kr=0;for(Object.assign(Ir,ne),Ir.$resourcesUrl$=new URL(ne.resourcesUrl||"./",Kr.baseURI).href,Ir.$flags$|=2;kr<qt.length;kr++)ft(qt[kr].getAttribute(ve),Ft(qt[kr].innerHTML),!0);let tr=!1;if(Y.map(A=>{A[1].map(fe=>{var F;const le={$flags$:fe[0],$tagName$:fe[1],$members$:fe[2],$listeners$:fe[3]};4&le.$flags$&&(tr=!0),le.$members$=fe[2],le.$listeners$=fe[3],le.$attrsToReflect$=[],le.$watchers$=null!==(F=fe[4])&&void 0!==F?F:{};const Ae=le.$tagName$,Bt=class extends HTMLElement{constructor(rr){super(rr),$r(rr=this,le),1&le.$flags$&&rr.attachShadow({mode:"open",delegatesFocus:!!(16&le.$flags$)})}connectedCallback(){ln&&(clearTimeout(ln),ln=null),En?on.push(this):Ir.jmp(()=>(Y=>{if(!(1&Ir.$flags$)){const ne=Kn(Y),qe=ne.$cmpMeta$,ct=()=>{};if(1&ne.$flags$)hr(Y,ne,qe.$listeners$),null!=ne&&ne.$lazyInstance$?Ar(ne.$lazyInstance$):null!=ne&&ne.$onReadyPromise$&&ne.$onReadyPromise$.then(()=>Ar(ne.$lazyInstance$));else{let _t;if(ne.$flags$|=1,_t=Y.getAttribute(pt),_t){if(1&qe.$flags$){const Pt=Tt(Y.shadowRoot,qe,Y.getAttribute("s-mode"));Y.classList.remove(Pt+"-h",Pt+"-s")}((Y,ne,qe,ct)=>{const Pt=Y.shadowRoot,Kt=[],tn=Pt?[]:null,Nt=ct.$vnode$=Wt(ne,null);Ir.$orgLocNodes$||De(Kr.body,Ir.$orgLocNodes$=new Map),Y[pt]=qe,Y.removeAttribute(pt),Je(Nt,Kt,[],tn,Y,Y,qe),Kt.map(on=>{const qt=on.$hostId$+"."+on.$nodeId$,ln=Ir.$orgLocNodes$.get(qt),En=on.$elm$;ln&&Pe&&""===ln["s-en"]&&ln.parentNode.insertBefore(En,ln.nextSibling),Pt||(En["s-hn"]=ne,ln&&(En["s-ol"]=ln,En["s-ol"]["s-nr"]=En)),Ir.$orgLocNodes$.delete(qt)}),Pt&&tn.map(on=>{on&&Pt.appendChild(on)})})(Y,qe.$tagName$,_t,ne)}_t||12&qe.$flags$&&bn(Y);{let Pt=Y;for(;Pt=Pt.parentNode||Pt.host;)if(1===Pt.nodeType&&Pt.hasAttribute("s-id")&&Pt["s-p"]||Pt["s-p"]){Rr(ne,ne.$ancestorComponent$=Pt);break}}qe.$members$&&Object.entries(qe.$members$).map(([Pt,[Kt]])=>{if(31&Kt&&Y.hasOwnProperty(Pt)){const gn=Y[Pt];delete Y[Pt],Y[Pt]=gn}}),Nr(Y,ne,qe)}ct()}})(this))}disconnectedCallback(){Ir.jmp(()=>so(this))}componentOnReady(){return Kn(this).$onReadyPromise$}};le.$lazyBundleId$=A[0],!Pt.includes(Ae)&&!Kt.get(Ae)&&(_t.push(Ae),Kt.define(Ae,qn(Bt,le,1)))})}),_t.length>0&&(tr&&(Nt.innerHTML+=at),Nt.innerHTML+=_t+"{visibility:hidden}.hydrated{visibility:inherit}",Nt.innerHTML.length)){Nt.setAttribute("data-styles","");const A=null!==(qe=Ir.$nonce$)&&void 0!==qe?qe:Ye(Kr);null!=A&&Nt.setAttribute("nonce",A),gn.insertBefore(Nt,tn?tn.nextSibling:gn.firstChild)}En=!1,on.length?on.map(A=>A.connectedCallback()):Ir.jmp(()=>ln=setTimeout(Ue,30))},hr=(Y,ne,qe,ct)=>{qe&&qe.map(([_t,Pt,Kt])=>{const gn=vt(Y,_t),tn=yt(ne,Kt),Nt=Ht(_t);Ir.ael(gn,Pt,tn,Nt),(ne.$rmListeners$=ne.$rmListeners$||[]).push(()=>Ir.rel(gn,Pt,tn,Nt))})},yt=(Y,ne)=>qe=>{try{256&Y.$flags$?Y.$lazyInstance$[ne](qe):(Y.$queuedListeners$=Y.$queuedListeners$||[]).push([ne,qe])}catch(ct){Gr(ct)}},vt=(Y,ne)=>4&ne?Kr:8&ne?pi:16&ne?Kr.body:Y,Ht=Y=>Me?{passive:0!=(1&Y),capture:0!=(2&Y)}:0!=(2&Y),Xn=new WeakMap,Kn=Y=>Xn.get(Y),Zn=(Y,ne)=>Xn.set(ne.$lazyInstance$=Y,ne),$r=(Y,ne)=>{const qe={$flags$:0,$hostElement$:Y,$cmpMeta$:ne,$instanceValues$:new Map};return qe.$onInstancePromise$=new Promise(ct=>qe.$onInstanceResolve$=ct),qe.$onReadyPromise$=new Promise(ct=>qe.$onReadyResolve$=ct),Y["s-p"]=[],Y["s-rc"]=[],hr(Y,qe,ne.$listeners$),Xn.set(Y,qe)},Vr=(Y,ne)=>ne in Y,Gr=(Y,ne)=>(0,console.error)(Y,ne),go=new Map,ao=(Y,ne,qe)=>{const ct=Y.$tagName$.replace(/-/g,"_"),_t=Y.$lazyBundleId$,Pt=go.get(_t);return Pt?Pt[ct]:N(1480)(`./${_t}.entry.js`).then(Kt=>(go.set(_t,Kt),Kt[ct]),Gr)},Hr=new Map,lo=[],pi=typeof window<"u"?window:{},Kr=pi.document||{head:{}},Ir={$flags$:0,$resourcesUrl$:"",jmp:Y=>Y(),raf:Y=>requestAnimationFrame(Y),ael:(Y,ne,qe,ct)=>Y.addEventListener(ne,qe,ct),rel:(Y,ne,qe,ct)=>Y.removeEventListener(ne,qe,ct),ce:(Y,ne)=>new CustomEvent(Y,ne)},qr=Y=>{Object.assign(Ir,Y)},Pe=!0,Me=(()=>{let Y=!1;try{Kr.addEventListener("e",null,Object.defineProperty({},"passive",{get(){Y=!0}}))}catch{}return Y})(),Te=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),gt=[],jt=[],Dn=(Y,ne)=>qe=>{Y.push(qe),Ee||(Ee=!0,ne&&4&Ir.$flags$?Jn(Gn):Ir.raf(Gn))},An=Y=>{for(let ne=0;ne<Y.length;ne++)try{Y[ne](performance.now())}catch(qe){Gr(qe)}Y.length=0},Gn=()=>{An(gt),An(jt),(Ee=gt.length>0)&&Ir.raf(Gn)},Jn=Y=>Promise.resolve(void 0).then(Y),gi=Dn(gt,!1),Ct=Dn(jt,!0)},2032:(mn,st,N)=>{"use strict";N.d(st,{a:()=>K,b:()=>Z,p:()=>l});const l=(ee,...Ne)=>console.warn(`[Ionic Warning]: ${ee}`,...Ne),K=(ee,...Ne)=>console.error(`[Ionic Error]: ${ee}`,...Ne),Z=(ee,...Ne)=>console.error(`<${ee.tagName.toLowerCase()}> must be used inside ${Ne.join(" or ")}.`)},4829:(mn,st,N)=>{"use strict";N.d(st,{d:()=>K,w:()=>l});const l=typeof window<"u"?window:void 0,K=typeof document<"u"?document:void 0},3452:(mn,st,N)=>{"use strict";N.d(st,{m:()=>He});var l=N(1528),K=N(4829),Z=N(2784),ee=N(2032),Ne=N(6384),ge=N(8523),_e=N(388);const je=We=>(0,_e.c)().duration(We?400:300),Qe=We=>{let Oe,it;const Ge=We.width+8,Ve=(0,_e.c)(),$e=(0,_e.c)();We.isEndSide?(Oe=Ge+"px",it="0px"):(Oe=-Ge+"px",it="0px"),Ve.addElement(We.menuInnerEl).fromTo("transform",`translateX(${Oe})`,`translateX(${it})`);const ve="ios"===(0,ge.b)(We),Xe=ve?.2:.25;return $e.addElement(We.backdropEl).fromTo("opacity",.01,Xe),je(ve).addAnimation([Ve,$e])},be=We=>{let Oe,it;const Ge=(0,ge.b)(We),Ve=We.width;We.isEndSide?(Oe=-Ve+"px",it=Ve+"px"):(Oe=Ve+"px",it=-Ve+"px");const $e=(0,_e.c)().addElement(We.menuInnerEl).fromTo("transform",`translateX(${it})`,"translateX(0px)"),pt=(0,_e.c)().addElement(We.contentEl).fromTo("transform","translateX(0px)",`translateX(${Oe})`),ve=(0,_e.c)().addElement(We.backdropEl).fromTo("opacity",.01,.32);return je("ios"===Ge).addAnimation([$e,pt,ve])},Ee=We=>{const Oe=(0,ge.b)(We),it=We.width*(We.isEndSide?-1:1)+"px",Ge=(0,_e.c)().addElement(We.contentEl).fromTo("transform","translateX(0px)",`translateX(${it})`);return je("ios"===Oe).addAnimation(Ge)},He=(()=>{const We=new Map,Oe=[],it=function(){var he=(0,l.c)(function*(ye){const Fe=yield et(ye,!0);return!!Fe&&Fe.open()});return function(Fe){return he.apply(this,arguments)}}(),Ge=function(){var he=(0,l.c)(function*(ye){const Fe=yield void 0!==ye?et(ye,!0):at();return void 0!==Fe&&Fe.close()});return function(Fe){return he.apply(this,arguments)}}(),Ve=function(){var he=(0,l.c)(function*(ye){const Fe=yield et(ye,!0);return!!Fe&&Fe.toggle()});return function(Fe){return he.apply(this,arguments)}}(),$e=function(){var he=(0,l.c)(function*(ye,Fe){const Je=yield et(Fe);return Je&&(Je.disabled=!ye),Je});return function(Fe,Je){return he.apply(this,arguments)}}(),pt=function(){var he=(0,l.c)(function*(ye,Fe){const Je=yield et(Fe);return Je&&(Je.swipeGesture=ye),Je});return function(Fe,Je){return he.apply(this,arguments)}}(),ve=function(){var he=(0,l.c)(function*(ye){if(null!=ye){const Fe=yield et(ye);return void 0!==Fe&&Fe.isOpen()}return void 0!==(yield at())});return function(Fe){return he.apply(this,arguments)}}(),Xe=function(){var he=(0,l.c)(function*(ye){const Fe=yield et(ye);return!!Fe&&!Fe.disabled});return function(Fe){return he.apply(this,arguments)}}(),et=function(){var he=(0,l.c)(function*(ye,Fe=!1){if(yield me(),"start"===ye||"end"===ye){const De=Oe.filter(Jt=>Jt.side===ye&&!Jt.disabled);if(De.length>=1)return De.length>1&&Fe&&(0,ee.p)(`menuController queried for a menu on the "${ye}" side, but ${De.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,De.map(Jt=>Jt.el)),De[0].el;const $t=Oe.filter(Jt=>Jt.side===ye);if($t.length>=1)return $t.length>1&&Fe&&(0,ee.p)(`menuController queried for a menu on the "${ye}" side, but ${$t.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,$t.map(Jt=>Jt.el)),$t[0].el}else if(null!=ye)return nt(De=>De.menuId===ye);return nt(De=>!De.disabled)||(Oe.length>0?Oe[0].el:void 0)});return function(Fe){return he.apply(this,arguments)}}(),at=function(){var he=(0,l.c)(function*(){return yield me(),It()});return function(){return he.apply(this,arguments)}}(),ae=function(){var he=(0,l.c)(function*(){return yield me(),Wt()});return function(){return he.apply(this,arguments)}}(),te=function(){var he=(0,l.c)(function*(){return yield me(),un()});return function(){return he.apply(this,arguments)}}(),se=(he,ye)=>{We.set(he,ye)},Ce=function(){var he=(0,l.c)(function*(ye,Fe,Je){if(un())return!1;if(Fe){const De=yield at();De&&ye.el!==De&&(yield De.setOpen(!1,!1))}return ye._setOpen(Fe,Je)});return function(Fe,Je,De){return he.apply(this,arguments)}}(),It=()=>nt(he=>he._isOpen),Wt=()=>Oe.map(he=>he.el),un=()=>Oe.some(he=>he.isAnimating),nt=he=>{const ye=Oe.find(he);if(void 0!==ye)return ye.el},me=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(he=>new Promise(ye=>(0,Ne.c)(he,ye))));return se("reveal",Ee),se("push",be),se("overlay",Qe),null==K.d||K.d.addEventListener("ionBackButton",he=>{const ye=It();ye&&he.detail.register(Z.MENU_BACK_BUTTON_PRIORITY,()=>ye.close())}),{registerAnimation:se,get:et,getMenus:ae,getOpen:at,isEnabled:Xe,swipeGesture:pt,isAnimating:te,isOpen:ve,enable:$e,toggle:Ve,close:Ge,open:it,_getOpenSync:It,_createAnimation:(he,ye)=>{const Fe=We.get(he);if(!Fe)throw new Error("animation not registered");return Fe(ye)},_register:he=>{Oe.indexOf(he)<0&&Oe.push(he)},_unregister:he=>{const ye=Oe.indexOf(he);ye>-1&&Oe.splice(ye,1)},_setOpen:Ce}})()},8523:(mn,st,N)=>{"use strict";N.d(st,{a:()=>Ee,b:()=>Wt,c:()=>Z,i:()=>un});var l=N(2992);class K{constructor(){this.m=new Map}reset(me){this.m=new Map(Object.entries(me))}get(me,he){const ye=this.m.get(me);return void 0!==ye?ye:he}getBoolean(me,he=!1){const ye=this.m.get(me);return void 0===ye?he:"string"==typeof ye?"true"===ye:!!ye}getNumber(me,he){const ye=parseFloat(this.m.get(me));return isNaN(ye)?void 0!==he?he:NaN:ye}set(me,he){this.m.set(me,he)}}const Z=new K,Qe="ionic-persist-config",Ee=(nt,me)=>("string"==typeof nt&&(me=nt,nt=void 0),(nt=>Ke(nt))(nt).includes(me)),Ke=(nt=window)=>{if(typeof nt>"u")return[];nt.Ionic=nt.Ionic||{};let me=nt.Ionic.platforms;return null==me&&(me=nt.Ionic.platforms=He(nt),me.forEach(he=>nt.document.documentElement.classList.add(`plt-${he}`))),me},He=nt=>{const me=Z.get("platform");return Object.keys(Ye).filter(he=>{const ye=null==me?void 0:me[he];return"function"==typeof ye?ye(nt):Ye[he](nt)})},Oe=nt=>!!(Le(nt,/iPad/i)||Le(nt,/Macintosh/i)&&Xe(nt)),Ve=nt=>Le(nt,/android|sink/i),Xe=nt=>Ce(nt,"(any-pointer:coarse)"),at=nt=>ae(nt)||te(nt),ae=nt=>!!(nt.cordova||nt.phonegap||nt.PhoneGap),te=nt=>{const me=nt.Capacitor;return!(null==me||!me.isNative)},Le=(nt,me)=>me.test(nt.navigator.userAgent),Ce=(nt,me)=>{var he;return null===(he=nt.matchMedia)||void 0===he?void 0:he.call(nt,me).matches},Ye={ipad:Oe,iphone:nt=>Le(nt,/iPhone/i),ios:nt=>Le(nt,/iPhone|iPod/i)||Oe(nt),android:Ve,phablet:nt=>{const me=nt.innerWidth,he=nt.innerHeight,ye=Math.min(me,he),Fe=Math.max(me,he);return ye>390&&ye<520&&Fe>620&&Fe<800},tablet:nt=>{const me=nt.innerWidth,he=nt.innerHeight,ye=Math.min(me,he),Fe=Math.max(me,he);return Oe(nt)||(nt=>Ve(nt)&&!Le(nt,/mobile/i))(nt)||ye>460&&ye<820&&Fe>780&&Fe<1400},cordova:ae,capacitor:te,electron:nt=>Le(nt,/electron/i),pwa:nt=>{var me;return!!(null!==(me=nt.matchMedia)&&void 0!==me&&me.call(nt,"(display-mode: standalone)").matches||nt.navigator.standalone)},mobile:Xe,mobileweb:nt=>Xe(nt)&&!at(nt),desktop:nt=>!Xe(nt),hybrid:at};let It;const Wt=nt=>nt&&(0,l.g)(nt)||It,un=(nt={})=>{if(typeof window>"u")return;const me=window.document,he=window,ye=he.Ionic=he.Ionic||{},Fe={};nt._ael&&(Fe.ael=nt._ael),nt._rel&&(Fe.rel=nt._rel),nt._ce&&(Fe.ce=nt._ce),(0,l.a)(Fe);const Je=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(nt=>{try{const me=nt.sessionStorage.getItem(Qe);return null!==me?JSON.parse(me):{}}catch{return{}}})(he)),{persistConfig:!1}),ye.config),(nt=>{const me={};return nt.location.search.slice(1).split("&").map(he=>he.split("=")).map(([he,ye])=>[decodeURIComponent(he),decodeURIComponent(ye)]).filter(([he])=>((nt,me)=>nt.substr(0,me.length)===me)(he,"ionic:")).map(([he,ye])=>[he.slice(6),ye]).forEach(([he,ye])=>{me[he]=ye}),me})(he)),nt);Z.reset(Je),Z.getBoolean("persistConfig")&&((nt,me)=>{try{nt.sessionStorage.setItem(Qe,JSON.stringify(me))}catch{return}})(he,Je),Ke(he),ye.config=Z,ye.mode=It=Z.get("mode",me.documentElement.getAttribute("mode")||(Ee(he,"ios")?"ios":"md")),Z.set("mode",It),me.documentElement.setAttribute("mode",It),me.documentElement.classList.add(It),Z.getBoolean("_testing")&&Z.set("animated",!1);const De=Jt=>{var dn;return null===(dn=Jt.tagName)||void 0===dn?void 0:dn.startsWith("ION-")},$t=Jt=>["ios","md"].includes(Jt);(0,l.c)(Jt=>{for(;Jt;){const dn=Jt.mode||Jt.getAttribute("mode");if(dn){if($t(dn))return dn;De(Jt)&&console.warn('Invalid ionic mode: "'+dn+'", expected: "ios" or "md"')}Jt=Jt.parentElement}return It})}},8512:(mn,st,N)=>{"use strict";N.r(st),N.d(st,{iosTransitionAnimation:()=>He,shadow:()=>_e});var l=N(388),K=N(6256);N(4829),N(2992);const ge=Oe=>document.querySelector(`${Oe}.ion-cloned-element`),_e=Oe=>Oe.shadowRoot||Oe,je=Oe=>{const it="ION-TABS"===Oe.tagName?Oe:Oe.querySelector("ion-tabs"),Ge="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=it){const Ve=it.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ve?Ve.querySelector(Ge):null}return Oe.querySelector(Ge)},Qe=(Oe,it)=>{const Ge="ION-TABS"===Oe.tagName?Oe:Oe.querySelector("ion-tabs");let Ve=[];if(null!=Ge){const $e=Ge.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=$e&&(Ve=$e.querySelectorAll("ion-buttons"))}else Ve=Oe.querySelectorAll("ion-buttons");for(const $e of Ve){const pt=$e.closest("ion-header"),ve=pt&&!pt.classList.contains("header-collapse-condense-inactive"),Xe=$e.querySelector("ion-back-button"),et=$e.classList.contains("buttons-collapse");if(null!==Xe&&("start"===$e.slot||""===$e.slot)&&(et&&ve&&it||!et))return Xe}return null},Ee=(Oe,it,Ge,Ve,$e,pt,ve,Xe,et)=>{var at,ae;const te=it?`calc(100% - ${$e.right+4}px)`:$e.left-4+"px",se=it?"right":"left",L=it?"left":"right",Le=it?"right":"left",Ce=(null===(at=pt.textContent)||void 0===at?void 0:at.trim())===(null===(ae=Xe.textContent)||void 0===ae?void 0:ae.trim()),It=(et.height-We)/ve.height,Wt=Ce?`scale(${et.width/ve.width}, ${It})`:`scale(${It})`,un="scale(1)",me=_e(Ve).querySelector("ion-icon").getBoundingClientRect(),he=it?me.width/2-(me.right-$e.right)+"px":$e.left-me.width/2+"px",ye=it?`-${window.innerWidth-$e.right}px`:`${$e.left}px`,Fe=`${et.top}px`,Je=`${$e.top}px`,Jt=Ge?[{offset:0,transform:`translate3d(${ye}, ${Je}, 0)`},{offset:1,transform:`translate3d(${he}, ${Fe}, 0)`}]:[{offset:0,transform:`translate3d(${he}, ${Fe}, 0)`},{offset:1,transform:`translate3d(${ye}, ${Je}, 0)`}],an=Ge?[{offset:0,opacity:1,transform:un},{offset:1,opacity:0,transform:Wt}]:[{offset:0,opacity:0,transform:Wt},{offset:1,opacity:1,transform:un}],xt=Ge?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],ft=(0,l.c)(),Tt=(0,l.c)(),kt=(0,l.c)(),vn=ge("ion-back-button"),Ft=_e(vn).querySelector(".button-text"),Qt=_e(vn).querySelector("ion-icon");vn.text=Ve.text,vn.mode=Ve.mode,vn.icon=Ve.icon,vn.color=Ve.color,vn.disabled=Ve.disabled,vn.style.setProperty("display","block"),vn.style.setProperty("position","fixed"),Tt.addElement(Qt),ft.addElement(Ft),kt.addElement(vn),kt.beforeStyles({position:"absolute",top:"0px",[Le]:"0px"}).keyframes(Jt),ft.beforeStyles({"transform-origin":`${se} top`}).beforeAddWrite(()=>{Ve.style.setProperty("display","none"),vn.style.setProperty(se,te)}).afterAddWrite(()=>{Ve.style.setProperty("display",""),vn.style.setProperty("display","none"),vn.style.removeProperty(se)}).keyframes(an),Tt.beforeStyles({"transform-origin":`${L} center`}).keyframes(xt),Oe.addAnimation([ft,Tt,kt])},Ke=(Oe,it,Ge,Ve,$e,pt,ve,Xe)=>{var et,at;const ae=it?"right":"left",te=it?`calc(100% - ${$e.right}px)`:`${$e.left}px`,L=`${$e.top}px`,Ce=it?`-${window.innerWidth-Xe.right-8}px`:Xe.x-8+"px",It=Xe.y-2+"px",Wt=(null===(et=ve.textContent)||void 0===et?void 0:et.trim())===(null===(at=Ve.textContent)||void 0===at?void 0:at.trim()),nt=Xe.height/(pt.height-We),me="scale(1)",he=Wt?`scale(${Xe.width/pt.width}, ${nt})`:`scale(${nt})`,Je=Ge?[{offset:0,opacity:0,transform:`translate3d(${Ce}, ${It}, 0) ${he}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${L}, 0) ${me}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${L}, 0) ${me}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ce}, ${It}, 0) ${he}`}],De=ge("ion-title"),$t=(0,l.c)();De.innerText=Ve.innerText,De.size=Ve.size,De.color=Ve.color,$t.addElement(De),$t.beforeStyles({"transform-origin":`${ae} top`,height:`${$e.height}px`,display:"",position:"relative",[ae]:te}).beforeAddWrite(()=>{Ve.style.setProperty("opacity","0")}).afterAddWrite(()=>{Ve.style.setProperty("opacity",""),De.style.setProperty("display","none")}).keyframes(Je),Oe.addAnimation($t)},He=(Oe,it)=>{var Ge;try{const Ve="cubic-bezier(0.32,0.72,0,1)",$e="opacity",pt="transform",ve="0%",et="rtl"===Oe.ownerDocument.dir,at=et?"-99.5%":"99.5%",ae=et?"33%":"-33%",te=it.enteringEl,se=it.leavingEl,L="back"===it.direction,Le=te.querySelector(":scope > ion-content"),Ce=te.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ye=te.querySelectorAll(":scope > ion-header > ion-toolbar"),It=(0,l.c)(),Wt=(0,l.c)();if(It.addElement(te).duration((null!==(Ge=it.duration)&&void 0!==Ge?Ge:0)||540).easing(it.easing||Ve).fill("both").beforeRemoveClass("ion-page-invisible"),se&&null!=Oe){const he=(0,l.c)();he.addElement(Oe),It.addAnimation(he)}if(Le||0!==Ye.length||0!==Ce.length?(Wt.addElement(Le),Wt.addElement(Ce)):Wt.addElement(te.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),It.addAnimation(Wt),L?Wt.beforeClearStyles([$e]).fromTo("transform",`translateX(${ae})`,`translateX(${ve})`).fromTo($e,.8,1):Wt.beforeClearStyles([$e]).fromTo("transform",`translateX(${at})`,`translateX(${ve})`),Le){const he=_e(Le).querySelector(".transition-effect");if(he){const ye=he.querySelector(".transition-cover"),Fe=he.querySelector(".transition-shadow"),Je=(0,l.c)(),De=(0,l.c)(),$t=(0,l.c)();Je.addElement(he).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),De.addElement(ye).beforeClearStyles([$e]).fromTo($e,0,.1),$t.addElement(Fe).beforeClearStyles([$e]).fromTo($e,.03,.7),Je.addAnimation([De,$t]),Wt.addAnimation([Je])}}const un=te.querySelector("ion-header.header-collapse-condense"),{forward:nt,backward:me}=((Oe,it,Ge,Ve,$e)=>{const pt=Qe(Ve,Ge),ve=je($e),Xe=je(Ve),et=Qe($e,Ge),at=null!==pt&&null!==ve&&!Ge,ae=null!==Xe&&null!==et&&Ge;if(at){const te=ve.getBoundingClientRect(),se=pt.getBoundingClientRect(),L=_e(pt).querySelector(".button-text"),Le=L.getBoundingClientRect(),Ye=_e(ve).querySelector(".toolbar-title").getBoundingClientRect();Ke(Oe,it,Ge,ve,te,Ye,L,Le),Ee(Oe,it,Ge,pt,se,L,Le,ve,Ye)}else if(ae){const te=Xe.getBoundingClientRect(),se=et.getBoundingClientRect(),L=_e(et).querySelector(".button-text"),Le=L.getBoundingClientRect(),Ye=_e(Xe).querySelector(".toolbar-title").getBoundingClientRect();Ke(Oe,it,Ge,Xe,te,Ye,L,Le),Ee(Oe,it,Ge,et,se,L,Le,Xe,Ye)}return{forward:at,backward:ae}})(It,et,L,te,se);if(Ye.forEach(he=>{const ye=(0,l.c)();ye.addElement(he),It.addAnimation(ye);const Fe=(0,l.c)();Fe.addElement(he.querySelector("ion-title"));const Je=(0,l.c)(),De=Array.from(he.querySelectorAll("ion-buttons,[menuToggle]")),$t=he.closest("ion-header"),Jt=null==$t?void 0:$t.classList.contains("header-collapse-condense-inactive");let dn;dn=De.filter(L?xt=>{const ft=xt.classList.contains("buttons-collapse");return ft&&!Jt||!ft}:xt=>!xt.classList.contains("buttons-collapse")),Je.addElement(dn);const Lt=(0,l.c)();Lt.addElement(he.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const an=(0,l.c)();an.addElement(_e(he).querySelector(".toolbar-background"));const Qn=(0,l.c)(),jn=he.querySelector("ion-back-button");if(jn&&Qn.addElement(jn),ye.addAnimation([Fe,Je,Lt,an,Qn]),Je.fromTo($e,.01,1),Lt.fromTo($e,.01,1),L)Jt||Fe.fromTo("transform",`translateX(${ae})`,`translateX(${ve})`).fromTo($e,.01,1),Lt.fromTo("transform",`translateX(${ae})`,`translateX(${ve})`),Qn.fromTo($e,.01,1);else if(un||Fe.fromTo("transform",`translateX(${at})`,`translateX(${ve})`).fromTo($e,.01,1),Lt.fromTo("transform",`translateX(${at})`,`translateX(${ve})`),an.beforeClearStyles([$e,"transform"]),(null==$t?void 0:$t.translucent)?an.fromTo("transform",et?"translateX(-100%)":"translateX(100%)","translateX(0px)"):an.fromTo($e,.01,"var(--opacity)"),nt||Qn.fromTo($e,.01,1),jn&&!nt){const ft=(0,l.c)();ft.addElement(_e(jn).querySelector(".button-text")).fromTo("transform",et?"translateX(-100px)":"translateX(100px)","translateX(0px)"),ye.addAnimation(ft)}}),se){const he=(0,l.c)(),ye=se.querySelector(":scope > ion-content"),Fe=se.querySelectorAll(":scope > ion-header > ion-toolbar"),Je=se.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(ye||0!==Fe.length||0!==Je.length?(he.addElement(ye),he.addElement(Je)):he.addElement(se.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),It.addAnimation(he),L){he.beforeClearStyles([$e]).fromTo("transform",`translateX(${ve})`,et?"translateX(-100%)":"translateX(100%)");const De=(0,K.g)(se);It.afterAddWrite(()=>{"normal"===It.getDirection()&&De.style.setProperty("display","none")})}else he.fromTo("transform",`translateX(${ve})`,`translateX(${ae})`).fromTo($e,1,.8);if(ye){const De=_e(ye).querySelector(".transition-effect");if(De){const $t=De.querySelector(".transition-cover"),Jt=De.querySelector(".transition-shadow"),dn=(0,l.c)(),Lt=(0,l.c)(),an=(0,l.c)();dn.addElement(De).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Lt.addElement($t).beforeClearStyles([$e]).fromTo($e,.1,0),an.addElement(Jt).beforeClearStyles([$e]).fromTo($e,.7,.03),dn.addAnimation([Lt,an]),he.addAnimation([dn])}}Fe.forEach(De=>{const $t=(0,l.c)();$t.addElement(De);const Jt=(0,l.c)();Jt.addElement(De.querySelector("ion-title"));const dn=(0,l.c)(),Lt=De.querySelectorAll("ion-buttons,[menuToggle]"),an=De.closest("ion-header"),Qn=null==an?void 0:an.classList.contains("header-collapse-condense-inactive"),jn=Array.from(Lt).filter(Ft=>{const Qt=Ft.classList.contains("buttons-collapse");return Qt&&!Qn||!Qt});dn.addElement(jn);const xt=(0,l.c)(),ft=De.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");ft.length>0&&xt.addElement(ft);const Tt=(0,l.c)();Tt.addElement(_e(De).querySelector(".toolbar-background"));const kt=(0,l.c)(),vn=De.querySelector("ion-back-button");if(vn&&kt.addElement(vn),$t.addAnimation([Jt,dn,xt,kt,Tt]),It.addAnimation($t),kt.fromTo($e,.99,0),dn.fromTo($e,.99,0),xt.fromTo($e,.99,0),L){if(Qn||Jt.fromTo("transform",`translateX(${ve})`,et?"translateX(-100%)":"translateX(100%)").fromTo($e,.99,0),xt.fromTo("transform",`translateX(${ve})`,et?"translateX(-100%)":"translateX(100%)"),Tt.beforeClearStyles([$e,"transform"]),(null==an?void 0:an.translucent)?Tt.fromTo("transform","translateX(0px)",et?"translateX(-100%)":"translateX(100%)"):Tt.fromTo($e,"var(--opacity)",0),vn&&!me){const Qt=(0,l.c)();Qt.addElement(_e(vn).querySelector(".button-text")).fromTo("transform",`translateX(${ve})`,`translateX(${(et?-124:124)+"px"})`),$t.addAnimation(Qt)}}else Qn||Jt.fromTo("transform",`translateX(${ve})`,`translateX(${ae})`).fromTo($e,.99,0).afterClearStyles([pt,$e]),xt.fromTo("transform",`translateX(${ve})`,`translateX(${ae})`).afterClearStyles([pt,$e]),kt.afterClearStyles([$e]),Jt.afterClearStyles([$e]),dn.afterClearStyles([$e])})}return It}catch(Ve){throw Ve}},We=10},6556:(mn,st,N)=>{"use strict";N.r(st),N.d(st,{mdTransitionAnimation:()=>Ne});var l=N(388),K=N(6256);N(4829),N(2992);const Ne=(ge,_e)=>{var je,Qe,be;const He="back"===_e.direction,Oe=_e.leavingEl,it=(0,K.g)(_e.enteringEl),Ge=it.querySelector("ion-toolbar"),Ve=(0,l.c)();if(Ve.addElement(it).fill("both").beforeRemoveClass("ion-page-invisible"),He?Ve.duration((null!==(je=_e.duration)&&void 0!==je?je:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ve.duration((null!==(Qe=_e.duration)&&void 0!==Qe?Qe:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Ge){const $e=(0,l.c)();$e.addElement(Ge),Ve.addAnimation($e)}if(Oe&&He){Ve.duration((null!==(be=_e.duration)&&void 0!==be?be:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const $e=(0,l.c)();$e.addElement((0,K.g)(Oe)).onFinish(pt=>{1===pt&&$e.elements.length>0&&$e.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ve.addAnimation($e)}return Ve}},3816:(mn,st,N)=>{"use strict";N.d(st,{B:()=>dn,G:()=>Lt,O:()=>an,a:()=>Ke,b:()=>He,c:()=>Ge,d:()=>Qn,e:()=>jn,f:()=>un,g:()=>me,h:()=>Fe,i:()=>De,j:()=>$e,k:()=>pt,m:()=>Oe,n:()=>at,o:()=>It,s:()=>Jt});var l=N(1528),K=N(4829),Z=N(2784),ee=N(8523),Ne=N(495),ge=N(6384),_e=N(2032);let je=0,Qe=0;const be=new WeakMap,Ee=xt=>({create:ft=>ve(xt,ft),dismiss:(ft,Tt,kt)=>Le(document,ft,Tt,xt,kt),getTop:()=>(0,l.c)(function*(){return It(document,xt)})()}),Ke=Ee("ion-alert"),He=Ee("ion-action-sheet"),Oe=Ee("ion-modal"),Ge=Ee("ion-popover"),$e=xt=>{typeof document<"u"&&L(document);const ft=je++;xt.overlayIndex=ft},pt=xt=>(xt.hasAttribute("id")||(xt.id="ion-overlay-"+ ++Qe),xt.id),ve=(xt,ft)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(xt).then(()=>{const Tt=document.createElement(xt);return Tt.classList.add("overlay-hidden"),Object.assign(Tt,Object.assign(Object.assign({},ft),{hasController:!0})),he(document).appendChild(Tt),new Promise(kt=>(0,ge.c)(Tt,kt))}):Promise.resolve(),Xe='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',at=(xt,ft)=>{const Tt=xt.querySelector(Xe);te(Tt,ft)},ae=(xt,ft)=>{const Tt=Array.from(xt.querySelectorAll(Xe));te(Tt.length>0?Tt[Tt.length-1]:null,ft)},te=(xt,ft)=>{let Tt=xt;const kt=null==xt?void 0:xt.shadowRoot;kt&&(Tt=kt.querySelector(Xe)||xt),Tt?(0,ge.f)(Tt):ft.focus()},L=xt=>{0===je&&(je=1,xt.addEventListener("focus",ft=>{((xt,ft)=>{const Tt=It(ft,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),kt=xt.target;Tt&&kt&&!Tt.classList.contains("ion-disable-focus-trap")&&(Tt.shadowRoot?(()=>{if(Tt.contains(kt))Tt.lastFocus=kt;else if("ION-TOAST"===kt.tagName)te(Tt.lastFocus,Tt);else{const Qt=Tt.lastFocus;at(Tt,Tt),Qt===ft.activeElement&&ae(Tt,Tt),Tt.lastFocus=ft.activeElement}})():(()=>{if(Tt===kt)Tt.lastFocus=void 0;else if("ION-TOAST"===kt.tagName)te(Tt.lastFocus,Tt);else{const Qt=(0,ge.g)(Tt);if(!Qt.contains(kt))return;const Sn=Qt.querySelector(".ion-overlay-wrapper");if(!Sn)return;if(Sn.contains(kt)||kt===Qt.querySelector("ion-backdrop"))Tt.lastFocus=kt;else{const xn=Tt.lastFocus;at(Sn,Tt),xn===ft.activeElement&&ae(Sn,Tt),Tt.lastFocus=ft.activeElement}}})())})(ft,xt)},!0),xt.addEventListener("ionBackButton",ft=>{const Tt=It(xt);null!=Tt&&Tt.backdropDismiss&&ft.detail.register(Z.OVERLAY_BACK_BUTTON_PRIORITY,()=>{Tt.dismiss(void 0,dn)})}),(0,Z.shoudUseCloseWatcher)()||xt.addEventListener("keydown",ft=>{if("Escape"===ft.key){const Tt=It(xt);null!=Tt&&Tt.backdropDismiss&&Tt.dismiss(void 0,dn)}}))},Le=(xt,ft,Tt,kt,vn)=>{const Ft=It(xt,kt,vn);return Ft?Ft.dismiss(ft,Tt):Promise.reject("overlay does not exist")},Ye=(xt,ft)=>((xt,ft)=>(void 0===ft&&(ft="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(xt.querySelectorAll(ft)).filter(Tt=>Tt.overlayIndex>0)))(xt,ft).filter(Tt=>!(xt=>xt.classList.contains("overlay-hidden"))(Tt)),It=(xt,ft,Tt)=>{const kt=Ye(xt,ft);return void 0===Tt?kt[kt.length-1]:kt.find(vn=>vn.id===Tt)},Wt=(xt=!1)=>{const Tt=he(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Tt&&(xt?Tt.setAttribute("aria-hidden","true"):Tt.removeAttribute("aria-hidden"))},un=function(){var xt=(0,l.c)(function*(ft,Tt,kt,vn,Ft){var Qt,Sn;if(ft.presented)return;Wt(!0),void 0!==K.d&&Ye(K.d).forEach(Tn=>Tn.setAttribute("aria-hidden","true")),ft.presented=!0,ft.willPresent.emit(),null===(Qt=ft.willPresentShorthand)||void 0===Qt||Qt.emit();const xn=(0,ee.b)(ft),br=ft.enterAnimation?ft.enterAnimation:ee.c.get(Tt,"ios"===xn?kt:vn);(yield ye(ft,br,ft.el,Ft))&&(ft.didPresent.emit(),null===(Sn=ft.didPresentShorthand)||void 0===Sn||Sn.emit()),"ION-TOAST"!==ft.el.tagName&&nt(ft.el),ft.keyboardClose&&(null===document.activeElement||!ft.el.contains(document.activeElement))&&ft.el.focus(),ft.el.removeAttribute("aria-hidden")});return function(Tt,kt,vn,Ft,Qt){return xt.apply(this,arguments)}}(),nt=function(){var xt=(0,l.c)(function*(ft){let Tt=document.activeElement;if(!Tt)return;const kt=null==Tt?void 0:Tt.shadowRoot;kt&&(Tt=kt.querySelector(Xe)||Tt),yield ft.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&Tt.focus()});return function(Tt){return xt.apply(this,arguments)}}(),me=function(){var xt=(0,l.c)(function*(ft,Tt,kt,vn,Ft,Qt,Sn){var xn,br,mr;if(!ft.presented)return!1;void 0!==K.d&&1===Ye(K.d).length&&Wt(!1),ft.presented=!1;try{ft.el.style.setProperty("pointer-events","none"),ft.willDismiss.emit({data:Tt,role:kt}),null===(xn=ft.willDismissShorthand)||void 0===xn||xn.emit({data:Tt,role:kt});const Cr=(0,ee.b)(ft),Tn=ft.leaveAnimation?ft.leaveAnimation:ee.c.get(vn,"ios"===Cr?Ft:Qt);kt!==Lt&&(yield ye(ft,Tn,ft.el,Sn)),ft.didDismiss.emit({data:Tt,role:kt}),null===(br=ft.didDismissShorthand)||void 0===br||br.emit({data:Tt,role:kt}),(be.get(ft)||[]).forEach(Sr=>Sr.destroy()),be.delete(ft),ft.el.classList.add("overlay-hidden"),ft.el.style.removeProperty("pointer-events"),void 0!==ft.el.lastFocus&&(ft.el.lastFocus=void 0)}catch(Cr){console.error(Cr)}return ft.el.remove(),void 0!==K.d&&(null===(mr=It(K.d))||void 0===mr||mr.removeAttribute("aria-hidden")),!0});return function(Tt,kt,vn,Ft,Qt,Sn,xn){return xt.apply(this,arguments)}}(),he=xt=>xt.querySelector("ion-app")||xt.body,ye=function(){var xt=(0,l.c)(function*(ft,Tt,kt,vn){kt.classList.remove("overlay-hidden");const Qt=Tt(ft.el,vn);(!ft.animated||!ee.c.getBoolean("animated",!0))&&Qt.duration(0),ft.keyboardClose&&Qt.beforeAddWrite(()=>{const xn=kt.ownerDocument.activeElement;null!=xn&&xn.matches("input,ion-input, ion-textarea")&&xn.blur()});const Sn=be.get(ft)||[];return be.set(ft,[...Sn,Qt]),yield Qt.play(),!0});return function(Tt,kt,vn,Ft){return xt.apply(this,arguments)}}(),Fe=(xt,ft)=>{let Tt;const kt=new Promise(vn=>Tt=vn);return Je(xt,ft,vn=>{Tt(vn.detail)}),kt},Je=(xt,ft,Tt)=>{const kt=vn=>{(0,ge.b)(xt,ft,kt),Tt(vn)};(0,ge.a)(xt,ft,kt)},De=xt=>"cancel"===xt||xt===dn,$t=xt=>xt(),Jt=(xt,ft)=>{if("function"==typeof xt)return ee.c.get("_zoneGate",$t)(()=>{try{return xt(ft)}catch(kt){throw kt}})},dn="backdrop",Lt="gesture",an=39,Qn=xt=>{let Tt,ft=!1;const kt=(0,Ne.C)(),vn=(Sn=!1)=>{if(Tt&&!Sn)return{delegate:Tt,inline:ft};const{el:xn,hasController:br,delegate:mr}=xt;return ft=null!==xn.parentNode&&!br,Tt=ft?mr||kt:mr,{inline:ft,delegate:Tt}};return{attachViewToDom:function(){var Sn=(0,l.c)(function*(xn){const{delegate:br}=vn(!0);if(br)return yield br.attachViewToDom(xt.el,xn);const{hasController:mr}=xt;if(mr&&void 0!==xn)throw new Error("framework delegate is missing");return null});return function(br){return Sn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Sn}=vn();Sn&&void 0!==xt.el&&Sn.removeViewFromDom(xt.el.parentElement,xt.el)}}},jn=()=>{let xt;const ft=()=>{xt&&(xt(),xt=void 0)};return{addClickListener:(kt,vn)=>{ft();const Ft=void 0!==vn?document.getElementById(vn):null;Ft?xt=((Sn,xn)=>{const br=()=>{xn.present()};return Sn.addEventListener("click",br),()=>{Sn.removeEventListener("click",br)}})(Ft,kt):(0,_e.p)(`A trigger element with the ID "${vn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,kt)},removeClickListener:ft}}},5359:(mn,st,N)=>{"use strict";N.d(st,{o:()=>Ee});var l=N(1528),K=N(9252),ee=(N(864),N(4704)),Ne=N(7368),ge=N(4496),_e=N(7260),je=N(4319),Qe=N(2112),be=N(9148);let Ee=(()=>{var Ke;class He{constructor(Oe,it,Ge,Ve){this.afAuth=Oe,this.firestore=it,this.alertController=Ge,this.router=Ve,this.afAuth.setPersistence(K.c.auth.Auth.Persistence.LOCAL)}hasRequiredRole(Oe){return Oe.rol.includes("admin")}login(Oe,it){var Ge=this;return(0,l.c)(function*(){try{const Ve=yield Ge.afAuth.signInWithEmailAndPassword(Oe,it);if(Ve&&Ve.user){localStorage.setItem("user",JSON.stringify(Ve.user));const $e=Ve.user.uid,pt=yield Ge.getUserData($e);if(pt){console.log("Datos del usuario:",pt);const ve=Ge.hasRequiredRole(pt);console.log("\xbfEs administrador?",ve)}else console.error("No se encontraron datos del usuario.");return{user:Ve.user,userData:pt}}throw new Error("No se pudo iniciar sesi\xf3n.")}catch{return Ge.presentAlert("Error","Error al iniciar sesi\xf3n, correo o contrase\xf1a incorrectos"),null}})()}getUserData(Oe){var it=this;return(0,l.c)(function*(){try{const Ge=yield it.firestore.collection("usuarios").doc(Oe).get().toPromise();if(Ge&&Ge.exists){const Ve=Ge.data();return Ve.uid=Oe,Ve}return console.error("No se encontraron datos de usuario en Firestore."),null}catch(Ge){return console.error("Error al obtener los datos de usuario:",Ge),null}})()}getCurrentUser2(){return this.afAuth.authState}getUserRoles(Oe){return this.firestore.collection("usuarios").doc(Oe).valueChanges().pipe((0,ee.k)(it=>it?it.rol:[]))}getCurrentUser(){return(0,l.c)(function*(){const it=localStorage.getItem("user");return it?JSON.parse(it):null})()}signup(Oe,it){var Ge=this;return(0,l.c)(function*(){if(!Ge.validateEmail(Oe))return{success:!1,message:"Por favor, ingrese un correo electr\xf3nico v\xe1lido."};if(!it||it.length<6)return{success:!1,message:"La contrase\xf1a debe tener al menos 6 caracteres."};try{const Ve=yield Ge.afAuth.fetchSignInMethodsForEmail(Oe);if(Ve&&Ve.length>0)return{success:!1,message:"Ya existe un usuario registrado con este correo electr\xf3nico."};const $e=yield Ge.afAuth.createUserWithEmailAndPassword(Oe,it);if($e&&$e.user&&$e.user.uid)return yield Ge.createUserInFirestore($e.user.uid,Oe),yield Ge.showUserData(),{success:!0,message:"Usuario creado exitosamente"};throw new Error("No se pudo obtener la informaci\xf3n del usuario despu\xe9s del registro.")}catch(Ve){let $e="Error al registrar: "+Ve.message;return"auth/email-already-in-use"===Ve.code&&($e="Ya existe un usuario con estas credenciales. Por favor Inicie sesi\xf3n"),{success:!1,message:$e}}})()}createUserInFirestore(Oe,it){var Ge=this;return(0,l.c)(function*(){try{yield Ge.firestore.collection("usuarios").doc(Oe).set({correo:it,rol:["user"],uid:Oe})}catch(Ve){throw Ve}})()}showUserData(){var Oe=this;return(0,l.c)(function*(){try{const it=yield Oe.firestore.collection("usuarios").get().toPromise();it?it.forEach(Ge=>{const Ve=Ge.data();console.log("Correo:",Ve.correo,"Rol:",Ve.rol)}):console.log("No se encontraron usuarios.")}catch(it){console.error("Error al obtener los datos de usuarios:",it)}})()}logout(){var Oe=this;return(0,l.c)(function*(){try{yield Oe.afAuth.signOut(),localStorage.removeItem("user"),sessionStorage.clear(),Oe.router.navigate(["/login"])}catch(it){console.error("Error al cerrar sesi\xf3n:",it)}})()}presentAlert(Oe,it){var Ge=this;return(0,l.c)(function*(){yield(yield Ge.alertController.create({header:Oe,message:it,buttons:["OK"]})).present()})()}validateEmail(Oe){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(Oe)}getUsuariosExceptoActual(){return this.afAuth.authState.pipe((0,Ne.G)(Oe=>(console.log("Usuario actual:",Oe),Oe?this.firestore.collection("usuarios").valueChanges().pipe((0,ee.k)(it=>it.filter(Ge=>Ge.correo!==Oe.email))):[])))}}return(Ke=He).\u0275fac=function(Oe){return new(Oe||Ke)(ge.CoB(_e._o),ge.CoB(je.i4),ge.CoB(Qe.iW),ge.CoB(be.E5))},Ke.\u0275prov=ge.wxM({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),He})()},1536:(mn,st,N)=>{"use strict";var l=N(4476),K=N(4496),Z=N(9148),ee=N(304),Ne=N(2112);const ge=[{path:"",loadChildren:()=>N.e(1584).then(N.bind(N,1584)).then(Et=>Et.TabsPageModule)},{path:"tab1",loadChildren:()=>Promise.all([N.e(9312),N.e(9468)]).then(N.bind(N,9468)).then(Et=>Et.Tab1PageModule)},{path:"tab2",loadChildren:()=>Promise.all([N.e(9312),N.e(5504)]).then(N.bind(N,5504)).then(Et=>Et.Tab2PageModule)},{path:"tab3",loadChildren:()=>Promise.all([N.e(9312),N.e(108)]).then(N.bind(N,108)).then(Et=>Et.Tab3PageModule)},{path:"tab4",loadChildren:()=>N.e(8116).then(N.bind(N,8116)).then(Et=>Et.Tab4PageModule)},{path:"tab5",loadChildren:()=>N.e(2576).then(N.bind(N,2576)).then(Et=>Et.Tab5PageModule)}];let _e=(()=>{var Et;class Xt{}return(Et=Xt).\u0275fac=function(bt){return new(bt||Et)},Et.\u0275mod=K.a4G({type:Et}),Et.\u0275inj=K.s3X({imports:[Z.qQ.forRoot(ge,{preloadingStrategy:Z.eu}),Z.qQ]}),Xt})();var je=N(5359);let Qe=(()=>{var Et;class Xt{constructor(bt,yn){this.router=bt,this.authService=yn}ngOnInit(){this.authService.getCurrentUser().then(bt=>{this.router.navigate(bt?["/tabs/tab2"]:["/tabs/tab1"])}).catch(bt=>{console.error("Error al obtener el usuario actual:",bt)})}}return(Et=Xt).\u0275fac=function(bt){return new(bt||Et)(K.GI1(Z.E5),K.GI1(je.o))},Et.\u0275cmp=K.In1({type:Et,selectors:[["app-root"]],decls:2,vars:0,template:function(bt,yn){1&bt&&(K.I0R(0,"ion-app"),K.wR5(1,"ion-router-outlet"),K.C$Y())},dependencies:[Ne.qk,Ne.Cg]}),Xt})();const be_firebaseConfig={apiKey:"AIzaSyCSqfru4zjy1Ev_m-kLVimaO0LWnoE5lUQ",authDomain:"smna2024-7679a.firebaseapp.com",databaseURL:"https://smna2024-7679a-default-rtdb.firebaseio.com",projectId:"smna2024-7679a",storageBucket:"smna2024-7679a.appspot.com",messagingSenderId:"872315596040",appId:"1:872315596040:web:5a25529e8585dc170ad0bd",measurementId:"G-2V1TXMVWL3"};var Ee=N(6e3),Ke=N(5400),He=N(1528),We=N(7136);let Oe=(()=>{var Et;class Xt{constructor(bt){this.db=bt,this.waterLevel1=0,this.waterLevel2=0,this.waterLevel3=0,console.log("WaterLevelService initialized"),this.getMeasures1(),this.getMeasures2(),this.getMeasures3()}getMeasures1(){this.db.object("test1/float").valueChanges().subscribe(yn=>{null!==yn?(console.log("Medici\xf3n: ",yn),this.waterLevel1=Math.floor(this.calculateWaterLevel(yn)),console.log("Nivel de agua actualizado:",this.waterLevel1),this.checkAndSendNotification(this.waterLevel1,1)):console.log("El valor es nulo.")})}getMeasures2(){this.db.object("test2/float").valueChanges().subscribe(yn=>{null!==yn?(console.log("Medici\xf3n: ",yn),this.waterLevel2=Math.floor(this.calculateWaterLevel(yn)),console.log("Nivel de agua actualizado:",this.waterLevel2),this.checkAndSendNotification(this.waterLevel2,2)):console.log("El valor es nulo.")})}getMeasures3(){this.db.object("test3/float").valueChanges().subscribe(yn=>{null!==yn?(console.log("Medici\xf3n: ",yn),this.waterLevel3=Math.floor(this.calculateWaterLevel(yn)),console.log("Nivel de agua actualizado:",this.waterLevel3),this.checkAndSendNotification(this.waterLevel3,3)):console.log("El valor es nulo.")})}calculateWaterLevel(bt){let hn=(150-bt)/150*100;return hn<0&&(hn=0),hn>100&&(hn=100),hn}checkAndSendNotification(bt,yn){var hn=this;return(0,He.c)(function*(){bt>=80&&bt<90?yield hn.sendNotification(yn,"Nivel de agua alto en el tanque "+yn,"El nivel de agua est\xe1 por encima del 80%."):bt>=90&&(yield hn.sendNotification(yn,"\xa1Nivel de agua cr\xedtico! en el tanque "+yn,"El nivel de agua ha superado el 90%."))})()}sendNotification(bt,yn,hn){We.G.schedule({notifications:[{id:bt,title:yn,body:hn,allowWhileIdle:!0}]}).then(()=>{console.log("Notificaci\xf3n enviada con \xe9xito.")}).catch(jr=>{console.error("Error al enviar la notificaci\xf3n:",jr)})}}return(Et=Xt).\u0275fac=function(bt){return new(bt||Et)(K.CoB(Ke.qk))},Et.\u0275prov=K.wxM({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Xt})();var it=N(1368),Ge=N(1424),Ve=N(3800),$e=N(800),pt=N(2700),ve=N(7228),Xe=N(5657),et=N(3252),at=N(308);const ae=new et._(at.K);var se=N(3412),L=N(4704),Le=N(6684),Ce=N(7368),Ye=N(2376),It=N(8880),Wt=N(560),un=N(5448);const me={connector:()=>new Xe.E};function he(Et,Xt=me){const{connector:Yt}=Xt;return(0,un.i)((bt,yn)=>{const hn=Yt();(0,Wt.Uv)(Et(function nt(Et){return new et._(Xt=>Et.subscribe(Xt))}(hn))).subscribe(yn),yn.add(bt.subscribe(hn))})}var Je=N(3992),De=N(9212),$t=N(112),Jt=N(7773),Lt=N(320),an=N(7400);function Qn(Et,Xt){return Xt?Yt=>(0,ve.W)(Xt.pipe((0,Je.U)(1),function dn(){return(0,un.i)((Et,Xt)=>{Et.subscribe((0,Jt.e)(Xt,at.K))})}()),Yt.pipe(Qn(Et))):(0,an.O)((Yt,bt)=>(0,Wt.Uv)(Et(Yt,bt)).pipe((0,Je.U)(1),(0,Lt.e)(Yt)))}var jn=N(3048);const kt="Service workers are disabled or not supported by this browser";class Ft{constructor(Xt){if(this.serviceWorker=Xt,Xt){const bt=(0,$e.w)(Xt,"controllerchange").pipe((0,L.k)(()=>Xt.controller)),yn=(0,Ge.Q)(()=>(0,pt.of)(Xt.controller)),hn=(0,ve.W)(yn,bt);this.worker=hn.pipe((0,Le.I)(Rr=>!!Rr)),this.registration=this.worker.pipe((0,Ce.G)(()=>Xt.getRegistration()));const Xr=(0,$e.w)(Xt,"message").pipe((0,L.k)(Rr=>Rr.data)).pipe((0,Le.I)(Rr=>Rr&&Rr.type)).pipe(function Fe(Et){return Et?Xt=>he(Et)(Xt):Xt=>function ye(Et,Xt){const Yt=(0,It.m)(Et)?Et:()=>Et;return(0,It.m)(Xt)?he(Xt,{connector:Yt}):bt=>new Ye.C(bt,Yt)}(new Xe.E)(Xt)}());Xr.connect(),this.events=Xr}else this.worker=this.events=this.registration=function vn(Et){return(0,Ge.Q)(()=>(0,Ve.c)(new Error(Et)))}(kt)}postMessage(Xt,Yt){return this.worker.pipe((0,Je.U)(1),(0,De.y)(bt=>{bt.postMessage({action:Xt,...Yt})})).toPromise().then(()=>{})}postMessageWithOperation(Xt,Yt,bt){const yn=this.waitForOperationCompleted(bt),hn=this.postMessage(Xt,Yt);return Promise.all([hn,yn]).then(([,nr])=>nr)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(Xt){let Yt;return Yt="string"==typeof Xt?bt=>bt.type===Xt:bt=>Xt.includes(bt.type),this.events.pipe((0,Le.I)(Yt))}nextEventOfType(Xt){return this.eventsOfType(Xt).pipe((0,Je.U)(1))}waitForOperationCompleted(Xt){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,Le.I)(Yt=>Yt.nonce===Xt),(0,Je.U)(1),(0,L.k)(Yt=>{if(void 0!==Yt.result)return Yt.result;throw new Error(Yt.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Qt=(()=>{var Et;class Xt{get isEnabled(){return this.sw.isEnabled}constructor(bt){if(this.sw=bt,this.pushManager=null,this.subscriptionChanges=new Xe.E,!bt.isEnabled)return this.messages=ae,this.notificationClicks=ae,void(this.subscription=ae);this.messages=this.sw.eventsOfType("PUSH").pipe((0,L.k)(hn=>hn.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,L.k)(hn=>hn.data)),this.pushManager=this.sw.registration.pipe((0,L.k)(hn=>hn.pushManager));const yn=this.pushManager.pipe((0,Ce.G)(hn=>hn.getSubscription()));this.subscription=(0,se.U)(yn,this.subscriptionChanges)}requestSubscription(bt){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(kt));const yn={userVisibleOnly:!0};let hn=this.decodeBase64(bt.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),nr=new Uint8Array(new ArrayBuffer(hn.length));for(let jr=0;jr<hn.length;jr++)nr[jr]=hn.charCodeAt(jr);return yn.applicationServerKey=nr,this.pushManager.pipe((0,Ce.G)(jr=>jr.subscribe(yn)),(0,Je.U)(1)).toPromise().then(jr=>(this.subscriptionChanges.next(jr),jr))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Je.U)(1),(0,Ce.G)(yn=>{if(null===yn)throw new Error("Not subscribed to push notifications.");return yn.unsubscribe().then(hn=>{if(!hn)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(kt))}decodeBase64(bt){return atob(bt)}}return(Et=Xt).\u0275fac=function(bt){return new(bt||Et)(K.CoB(Ft))},Et.\u0275prov=K.wxM({token:Et,factory:Et.\u0275fac}),Xt})(),Sn=(()=>{var Et;class Xt{get isEnabled(){return this.sw.isEnabled}constructor(bt){if(this.sw=bt,!bt.isEnabled)return this.versionUpdates=ae,void(this.unrecoverable=ae);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(kt));const bt=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:bt},bt)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(kt));const bt=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:bt},bt)}}return(Et=Xt).\u0275fac=function(bt){return new(bt||Et)(K.CoB(Ft))},Et.\u0275prov=K.wxM({token:Et,factory:Et.\u0275fac}),Xt})();const xn=new K.UbH("");function br(Et,Xt,Yt,bt){return()=>{if(!(0,it.c0)(bt)||!("serviceWorker"in navigator)||!1===Yt.enabled)return;let yn;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof Yt.registrationStrategy)yn=Yt.registrationStrategy();else{const[nr,...jr]=(Yt.registrationStrategy||"registerWhenStable:30000").split(":");switch(nr){case"registerImmediately":yn=(0,pt.of)(null);break;case"registerWithDelay":yn=mr(+jr[0]||0);break;case"registerWhenStable":yn=jr[0]?(0,se.U)(Cr(Et),mr(+jr[0])):Cr(Et);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${Yt.registrationStrategy}`)}}Et.get(K.WW2).runOutsideAngular(()=>yn.pipe((0,Je.U)(1)).subscribe(()=>navigator.serviceWorker.register(Xt,{scope:Yt.scope}).catch(nr=>console.error("Service worker registration failed with:",nr))))}}function mr(Et){return(0,pt.of)(null).pipe(function Tt(Et,Xt=$t.M){const Yt=function ft(Et=0,Xt,Yt=$t.a){let bt=-1;return null!=Xt&&((0,jn.G)(Xt)?Yt=Xt:bt=Xt),new et._(yn=>{let hn=function xt(Et){return Et instanceof Date&&!isNaN(Et)}(Et)?+Et-Yt.now():Et;hn<0&&(hn=0);let nr=0;return Yt.schedule(function(){yn.closed||(yn.next(nr++),0<=bt?this.schedule(void 0,bt):yn.complete())},hn)})}(Et,Xt);return Qn(()=>Yt)}(Et))}function Cr(Et){return Et.get(K.Swk).isStable.pipe((0,Le.I)(Yt=>Yt))}function Tn(Et,Xt){return new Ft((0,it.c0)(Xt)&&!1!==Et.enabled?navigator.serviceWorker:void 0)}class Wn{}function Sr(Et,Xt={}){return(0,K.AFj)([Qt,Sn,{provide:xn,useValue:Et},{provide:Wn,useValue:Xt},{provide:Ft,useFactory:Tn,deps:[Wn,K.AHE]},{provide:K.kZF,useFactory:br,deps:[K.zZn,xn,Wn,K.AHE],multi:!0}])}let ri=(()=>{var Et;class Xt{static register(bt,yn={}){return{ngModule:Xt,providers:[Sr(bt,yn)]}}}return(Et=Xt).\u0275fac=function(bt){return new(bt||Et)},Et.\u0275mod=K.a4G({type:Et}),Et.\u0275inj=K.s3X({providers:[Qt,Sn]}),Xt})(),sr=(()=>{var Et;class Xt{}return(Et=Xt).\u0275fac=function(bt){return new(bt||Et)},Et.\u0275mod=K.a4G({type:Et,bootstrap:[Qe]}),Et.\u0275inj=K.s3X({providers:[{provide:Z.XE,useClass:ee.um},Oe],imports:[l.iE,Ne.wZ.forRoot(),_e,Ee.UN.initializeApp(be_firebaseConfig),Ke.iq,ri.register("ngsw-worker.js",{enabled:!(0,K.sPQ)(),registrationStrategy:"registerWhenStable:30000"})]}),Xt})();(0,K.agy)(),l.o_().bootstrapModule(sr).catch(Et=>console.log(Et))},6700:(mn,st,N)=>{"use strict";N.d(st,{g:()=>K});var l=N(5657);class K extends l.E{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const Ne=super._subscribe(ee);return!Ne.closed&&ee.next(this._value),Ne}getValue(){const{hasError:ee,thrownError:Ne,_value:ge}=this;if(ee)throw Ne;return this._throwIfClosed(),ge}next(ee){super.next(this._value=ee)}}},3252:(mn,st,N)=>{"use strict";N.d(st,{_:()=>je});var l=N(1760),K=N(6928),Z=N(472),ee=N(3928),Ne=N(4491),ge=N(8880),_e=N(2075);let je=(()=>{class Ke{constructor(We){We&&(this._subscribe=We)}lift(We){const Oe=new Ke;return Oe.source=this,Oe.operator=We,Oe}subscribe(We,Oe,it){const Ge=function Ee(Ke){return Ke&&Ke instanceof l.yR||function be(Ke){return Ke&&(0,ge.m)(Ke.next)&&(0,ge.m)(Ke.error)&&(0,ge.m)(Ke.complete)}(Ke)&&(0,K.GI)(Ke)}(We)?We:new l.ot(We,Oe,it);return(0,_e.c)(()=>{const{operator:Ve,source:$e}=this;Ge.add(Ve?Ve.call(Ge,$e):$e?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(We){try{return this._subscribe(We)}catch(Oe){We.error(Oe)}}forEach(We,Oe){return new(Oe=Qe(Oe))((it,Ge)=>{const Ve=new l.ot({next:$e=>{try{We($e)}catch(pt){Ge(pt),Ve.unsubscribe()}},error:Ge,complete:it});this.subscribe(Ve)})}_subscribe(We){var Oe;return null===(Oe=this.source)||void 0===Oe?void 0:Oe.subscribe(We)}[Z.a](){return this}pipe(...We){return(0,ee.Y)(We)(this)}toPromise(We){return new(We=Qe(We))((Oe,it)=>{let Ge;this.subscribe(Ve=>Ge=Ve,Ve=>it(Ve),()=>Oe(Ge))})}}return Ke.create=He=>new Ke(He),Ke})();function Qe(Ke){var He;return null!==(He=null!=Ke?Ke:Ne.config.Promise)&&void 0!==He?He:Promise}},5657:(mn,st,N)=>{"use strict";N.d(st,{E:()=>_e});var l=N(3252),K=N(6928);const ee=(0,N(4912).w)(Qe=>function(){Qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=N(1248),ge=N(2075);let _e=(()=>{class Qe extends l._{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ee){const Ke=new je(this,this);return Ke.operator=Ee,Ke}_throwIfClosed(){if(this.closed)throw new ee}next(Ee){(0,ge.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ke of this.currentObservers)Ke.next(Ee)}})}error(Ee){(0,ge.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ee;const{observers:Ke}=this;for(;Ke.length;)Ke.shift().error(Ee)}})}complete(){(0,ge.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ee}=this;for(;Ee.length;)Ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ee;return(null===(Ee=this.observers)||void 0===Ee?void 0:Ee.length)>0}_trySubscribe(Ee){return this._throwIfClosed(),super._trySubscribe(Ee)}_subscribe(Ee){return this._throwIfClosed(),this._checkFinalizedStatuses(Ee),this._innerSubscribe(Ee)}_innerSubscribe(Ee){const{hasError:Ke,isStopped:He,observers:We}=this;return Ke||He?K.au:(this.currentObservers=null,We.push(Ee),new K.wH(()=>{this.currentObservers=null,(0,Ne.k)(We,Ee)}))}_checkFinalizedStatuses(Ee){const{hasError:Ke,thrownError:He,isStopped:We}=this;Ke?Ee.error(He):We&&Ee.complete()}asObservable(){const Ee=new l._;return Ee.source=this,Ee}}return Qe.create=(be,Ee)=>new je(be,Ee),Qe})();class je extends _e{constructor(be,Ee){super(),this.destination=be,this.source=Ee}next(be){var Ee,Ke;null===(Ke=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.next)||void 0===Ke||Ke.call(Ee,be)}error(be){var Ee,Ke;null===(Ke=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.error)||void 0===Ke||Ke.call(Ee,be)}complete(){var be,Ee;null===(Ee=null===(be=this.destination)||void 0===be?void 0:be.complete)||void 0===Ee||Ee.call(be)}_subscribe(be){var Ee,Ke;return null!==(Ke=null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(be))&&void 0!==Ke?Ke:K.au}}},1760:(mn,st,N)=>{"use strict";N.d(st,{ot:()=>it,yR:()=>Ke});var l=N(8880),K=N(6928),Z=N(4491),ee=N(1984),Ne=N(308);const ge=Qe("C",void 0,void 0);function Qe(ve,Xe,et){return{kind:ve,value:Xe,error:et}}var be=N(3376),Ee=N(2075);class Ke extends K.wH{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,K.GI)(Xe)&&Xe.add(this)):this.destination=pt}static create(Xe,et,at){return new it(Xe,et,at)}next(Xe){this.isStopped?$e(function je(ve){return Qe("N",ve,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?$e(function _e(ve){return Qe("E",void 0,ve)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?$e(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function We(ve,Xe){return He.call(ve,Xe)}class Oe{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:et}=this;if(et.next)try{et.next(Xe)}catch(at){Ge(at)}}error(Xe){const{partialObserver:et}=this;if(et.error)try{et.error(Xe)}catch(at){Ge(at)}else Ge(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(et){Ge(et)}}}class it extends Ke{constructor(Xe,et,at){let ae;if(super(),(0,l.m)(Xe)||!Xe)ae={next:null!=Xe?Xe:void 0,error:null!=et?et:void 0,complete:null!=at?at:void 0};else{let te;this&&Z.config.useDeprecatedNextContext?(te=Object.create(Xe),te.unsubscribe=()=>this.unsubscribe(),ae={next:Xe.next&&We(Xe.next,te),error:Xe.error&&We(Xe.error,te),complete:Xe.complete&&We(Xe.complete,te)}):ae=Xe}this.destination=new Oe(ae)}}function Ge(ve){Z.config.useDeprecatedSynchronousErrorHandling?(0,Ee.q)(ve):(0,ee.U)(ve)}function $e(ve,Xe){const{onStoppedNotification:et}=Z.config;et&&be.u.setTimeout(()=>et(ve,Xe))}const pt={closed:!0,next:Ne.K,error:function Ve(ve){throw ve},complete:Ne.K}},6928:(mn,st,N)=>{"use strict";N.d(st,{au:()=>ge,wH:()=>Ne,GI:()=>_e});var l=N(8880);const Z=(0,N(4912).w)(Qe=>function(Ee){Qe(this),this.message=Ee?`${Ee.length} errors occurred during unsubscription:\n${Ee.map((Ke,He)=>`${He+1}) ${Ke.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ee});var ee=N(1248);class Ne{constructor(be){this.initialTeardown=be,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let be;if(!this.closed){this.closed=!0;const{_parentage:Ee}=this;if(Ee)if(this._parentage=null,Array.isArray(Ee))for(const We of Ee)We.remove(this);else Ee.remove(this);const{initialTeardown:Ke}=this;if((0,l.m)(Ke))try{Ke()}catch(We){be=We instanceof Z?We.errors:[We]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const We of He)try{je(We)}catch(Oe){be=null!=be?be:[],Oe instanceof Z?be=[...be,...Oe.errors]:be.push(Oe)}}if(be)throw new Z(be)}}add(be){var Ee;if(be&&be!==this)if(this.closed)je(be);else{if(be instanceof Ne){if(be.closed||be._hasParent(this))return;be._addParent(this)}(this._finalizers=null!==(Ee=this._finalizers)&&void 0!==Ee?Ee:[]).push(be)}}_hasParent(be){const{_parentage:Ee}=this;return Ee===be||Array.isArray(Ee)&&Ee.includes(be)}_addParent(be){const{_parentage:Ee}=this;this._parentage=Array.isArray(Ee)?(Ee.push(be),Ee):Ee?[Ee,be]:be}_removeParent(be){const{_parentage:Ee}=this;Ee===be?this._parentage=null:Array.isArray(Ee)&&(0,ee.k)(Ee,be)}remove(be){const{_finalizers:Ee}=this;Ee&&(0,ee.k)(Ee,be),be instanceof Ne&&be._removeParent(this)}}Ne.EMPTY=(()=>{const Qe=new Ne;return Qe.closed=!0,Qe})();const ge=Ne.EMPTY;function _e(Qe){return Qe instanceof Ne||Qe&&"closed"in Qe&&(0,l.m)(Qe.remove)&&(0,l.m)(Qe.add)&&(0,l.m)(Qe.unsubscribe)}function je(Qe){(0,l.m)(Qe)?Qe():Qe.unsubscribe()}},4491:(mn,st,N)=>{"use strict";N.d(st,{config:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2376:(mn,st,N)=>{"use strict";N.d(st,{C:()=>ge});var l=N(3252),K=N(6928),Z=N(8084),ee=N(7773),Ne=N(5448);class ge extends l._{constructor(je,Qe){super(),this.source=je,this.subjectFactory=Qe,this._subject=null,this._refCount=0,this._connection=null,(0,Ne.e)(je)&&(this.lift=je.lift)}_subscribe(je){return this.getSubject().subscribe(je)}getSubject(){const je=this._subject;return(!je||je.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:je}=this;this._subject=this._connection=null,null==je||je.unsubscribe()}connect(){let je=this._connection;if(!je){je=this._connection=new K.wH;const Qe=this.getSubject();je.add(this.source.subscribe((0,ee.e)(Qe,void 0,()=>{this._teardown(),Qe.complete()},be=>{this._teardown(),Qe.error(be)},()=>this._teardown()))),je.closed&&(this._connection=null,je=K.wH.EMPTY)}return je}refCount(){return(0,Z.O)()(this)}}},6040:(mn,st,N)=>{"use strict";N.d(st,{E:()=>be});var l=N(3252),K=N(4300),Z=N(9900),ee=N(528),Ne=N(4187),ge=N(6624),_e=N(7904),je=N(7773),Qe=N(9399);function be(...He){const We=(0,ge.e_)(He),Oe=(0,ge.yu)(He),{args:it,keys:Ge}=(0,K.Q)(He);if(0===it.length)return(0,Z.Q)([],We);const Ve=new l._(function Ee(He,We,Oe=ee.Z){return it=>{Ke(We,()=>{const{length:Ge}=He,Ve=new Array(Ge);let $e=Ge,pt=Ge;for(let ve=0;ve<Ge;ve++)Ke(We,()=>{const Xe=(0,Z.Q)(He[ve],We);let et=!1;Xe.subscribe((0,je.e)(it,at=>{Ve[ve]=at,et||(et=!0,pt--),pt||it.next(Oe(Ve.slice()))},()=>{--$e||it.complete()}))},it)},it)}}(it,We,Ge?$e=>(0,_e.q)(Ge,$e):ee.Z));return Oe?Ve.pipe((0,Ne.j)(Oe)):Ve}function Ke(He,We,Oe){He?(0,Qe._)(Oe,He,We):We()}},7228:(mn,st,N)=>{"use strict";N.d(st,{W:()=>Ne});var l=N(267),Z=N(6624),ee=N(9900);function Ne(...ge){return function K(){return(0,l.u)(1)}()((0,ee.Q)(ge,(0,Z.e_)(ge)))}},1424:(mn,st,N)=>{"use strict";N.d(st,{Q:()=>Z});var l=N(3252),K=N(560);function Z(ee){return new l._(Ne=>{(0,K.Uv)(ee()).subscribe(Ne)})}},8960:(mn,st,N)=>{"use strict";N.d(st,{k:()=>K});const K=new(N(3252)._)(Ne=>Ne.complete())},9900:(mn,st,N)=>{"use strict";N.d(st,{Q:()=>Xe});var l=N(560),K=N(3920),Z=N(2924),ge=N(3252),je=N(3835),Qe=N(8880),be=N(9399);function Ke(et,at){if(!et)throw new Error("Iterable cannot be null");return new ge._(ae=>{(0,be._)(ae,at,()=>{const te=et[Symbol.asyncIterator]();(0,be._)(ae,at,()=>{te.next().then(se=>{se.done?ae.complete():ae.next(se.value)})},0,!0)})})}var He=N(5099),We=N(5432),Oe=N(5428),it=N(1688),Ge=N(376),Ve=N(8272),$e=N(5832);function Xe(et,at){return at?function ve(et,at){if(null!=et){if((0,He.O)(et))return function ee(et,at){return(0,l.Uv)(et).pipe((0,Z.y)(at),(0,K.y)(at))}(et,at);if((0,Oe.G)(et))return function _e(et,at){return new ge._(ae=>{let te=0;return at.schedule(function(){te===et.length?ae.complete():(ae.next(et[te++]),ae.closed||this.schedule())})})}(et,at);if((0,We.u)(et))return function Ne(et,at){return(0,l.Uv)(et).pipe((0,Z.y)(at),(0,K.y)(at))}(et,at);if((0,Ge.E)(et))return Ke(et,at);if((0,it.i)(et))return function Ee(et,at){return new ge._(ae=>{let te;return(0,be._)(ae,at,()=>{te=et[je.w](),(0,be._)(ae,at,()=>{let se,L;try{({value:se,done:L}=te.next())}catch(Le){return void ae.error(Le)}L?ae.complete():ae.next(se)},0,!0)}),()=>(0,Qe.m)(null==te?void 0:te.return)&&te.return()})}(et,at);if((0,$e.K)(et))return function pt(et,at){return Ke((0,$e._)(et),at)}(et,at)}throw(0,Ve.W)(et)}(et,at):(0,l.Uv)(et)}},800:(mn,st,N)=>{"use strict";N.d(st,{w:()=>be});var l=N(560),K=N(3252),Z=N(7400),ee=N(5428),Ne=N(8880),ge=N(4187);const _e=["addListener","removeListener"],je=["addEventListener","removeEventListener"],Qe=["on","off"];function be(Oe,it,Ge,Ve){if((0,Ne.m)(Ge)&&(Ve=Ge,Ge=void 0),Ve)return be(Oe,it,Ge).pipe((0,ge.j)(Ve));const[$e,pt]=function We(Oe){return(0,Ne.m)(Oe.addEventListener)&&(0,Ne.m)(Oe.removeEventListener)}(Oe)?je.map(ve=>Xe=>Oe[ve](it,Xe,Ge)):function Ke(Oe){return(0,Ne.m)(Oe.addListener)&&(0,Ne.m)(Oe.removeListener)}(Oe)?_e.map(Ee(Oe,it)):function He(Oe){return(0,Ne.m)(Oe.on)&&(0,Ne.m)(Oe.off)}(Oe)?Qe.map(Ee(Oe,it)):[];if(!$e&&(0,ee.G)(Oe))return(0,Z.O)(ve=>be(ve,it,Ge))((0,l.Uv)(Oe));if(!$e)throw new TypeError("Invalid event target");return new K._(ve=>{const Xe=(...et)=>ve.next(1<et.length?et:et[0]);return $e(Xe),()=>pt(Xe)})}function Ee(Oe,it){return Ge=>Ve=>Oe[Ge](it,Ve)}},560:(mn,st,N)=>{"use strict";N.d(st,{Uv:()=>He});var l=N(1316),K=N(5428),Z=N(5432),ee=N(3252),Ne=N(5099),ge=N(376),_e=N(8272),je=N(1688),Qe=N(5832),be=N(8880),Ee=N(1984),Ke=N(472);function He(ve){if(ve instanceof ee._)return ve;if(null!=ve){if((0,Ne.O)(ve))return function We(ve){return new ee._(Xe=>{const et=ve[Ke.a]();if((0,be.m)(et.subscribe))return et.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ve);if((0,K.G)(ve))return function Oe(ve){return new ee._(Xe=>{for(let et=0;et<ve.length&&!Xe.closed;et++)Xe.next(ve[et]);Xe.complete()})}(ve);if((0,Z.u)(ve))return function it(ve){return new ee._(Xe=>{ve.then(et=>{Xe.closed||(Xe.next(et),Xe.complete())},et=>Xe.error(et)).then(null,Ee.U)})}(ve);if((0,ge.E)(ve))return Ve(ve);if((0,je.i)(ve))return function Ge(ve){return new ee._(Xe=>{for(const et of ve)if(Xe.next(et),Xe.closed)return;Xe.complete()})}(ve);if((0,Qe.K)(ve))return function $e(ve){return Ve((0,Qe._)(ve))}(ve)}throw(0,_e.W)(ve)}function Ve(ve){return new ee._(Xe=>{(function pt(ve,Xe){var et,at,ae,te;return(0,l.kH)(this,void 0,void 0,function*(){try{for(et=(0,l.mA)(ve);!(at=yield et.next()).done;)if(Xe.next(at.value),Xe.closed)return}catch(se){ae={error:se}}finally{try{at&&!at.done&&(te=et.return)&&(yield te.call(et))}finally{if(ae)throw ae.error}}Xe.complete()})})(ve,Xe).catch(et=>Xe.error(et))})}},3412:(mn,st,N)=>{"use strict";N.d(st,{U:()=>ge});var l=N(267),K=N(560),Z=N(8960),ee=N(6624),Ne=N(9900);function ge(..._e){const je=(0,ee.e_)(_e),Qe=(0,ee._8)(_e,1/0),be=_e;return be.length?1===be.length?(0,K.Uv)(be[0]):(0,l.u)(Qe)((0,Ne.Q)(be,je)):Z.k}},2700:(mn,st,N)=>{"use strict";N.d(st,{of:()=>Z});var l=N(6624),K=N(9900);function Z(...ee){const Ne=(0,l.e_)(ee);return(0,K.Q)(ee,Ne)}},3800:(mn,st,N)=>{"use strict";N.d(st,{c:()=>Z});var l=N(3252),K=N(8880);function Z(ee,Ne){const ge=(0,K.m)(ee)?ee:()=>ee,_e=je=>je.error(ge());return new l._(Ne?je=>Ne.schedule(_e,0,je):_e)}},7773:(mn,st,N)=>{"use strict";N.d(st,{e:()=>K});var l=N(1760);function K(ee,Ne,ge,_e,je){return new Z(ee,Ne,ge,_e,je)}class Z extends l.yR{constructor(Ne,ge,_e,je,Qe,be){super(Ne),this.onFinalize=Qe,this.shouldUnsubscribe=be,this._next=ge?function(Ee){try{ge(Ee)}catch(Ke){Ne.error(Ke)}}:super._next,this._error=je?function(Ee){try{je(Ee)}catch(Ke){Ne.error(Ke)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(Ee){Ne.error(Ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(Ne=this.onFinalize)||void 0===Ne||Ne.call(this))}}}},2156:(mn,st,N)=>{"use strict";N.d(st,{G:()=>Z});var l=N(5448),K=N(7773);function Z(ee){return(0,l.i)((Ne,ge)=>{let _e=!1;Ne.subscribe((0,K.e)(ge,je=>{_e=!0,ge.next(je)},()=>{_e||ge.next(ee),ge.complete()}))})}},4e3:(mn,st,N)=>{"use strict";N.d(st,{a:()=>ee});var l=N(528),K=N(5448),Z=N(7773);function ee(ge,_e=l.Z){return ge=null!=ge?ge:Ne,(0,K.i)((je,Qe)=>{let be,Ee=!0;je.subscribe((0,Z.e)(Qe,Ke=>{const He=_e(Ke);(Ee||!ge(be,He))&&(Ee=!1,be=He,Qe.next(Ke))}))})}function Ne(ge,_e){return ge===_e}},6684:(mn,st,N)=>{"use strict";N.d(st,{I:()=>Z});var l=N(5448),K=N(7773);function Z(ee,Ne){return(0,l.i)((ge,_e)=>{let je=0;ge.subscribe((0,K.e)(_e,Qe=>ee.call(Ne,Qe,je++)&&_e.next(Qe)))})}},5084:(mn,st,N)=>{"use strict";N.d(st,{K:()=>_e});var l=N(7696),K=N(6684),Z=N(3992),ee=N(2156),Ne=N(8124),ge=N(528);function _e(je,Qe){const be=arguments.length>=2;return Ee=>Ee.pipe(je?(0,K.I)((Ke,He)=>je(Ke,He,Ee)):ge.Z,(0,Z.U)(1),be?(0,ee.G)(Qe):(0,Ne._)(()=>new l.G))}},4704:(mn,st,N)=>{"use strict";N.d(st,{k:()=>Z});var l=N(5448),K=N(7773);function Z(ee,Ne){return(0,l.i)((ge,_e)=>{let je=0;ge.subscribe((0,K.e)(_e,Qe=>{_e.next(ee.call(Ne,Qe,je++))}))})}},320:(mn,st,N)=>{"use strict";N.d(st,{e:()=>K});var l=N(4704);function K(Z){return(0,l.k)(()=>Z)}},267:(mn,st,N)=>{"use strict";N.d(st,{u:()=>Z});var l=N(7400),K=N(528);function Z(ee=1/0){return(0,l.O)(K.Z,ee)}},7400:(mn,st,N)=>{"use strict";N.d(st,{O:()=>je});var l=N(4704),K=N(560),Z=N(5448),ee=N(9399),Ne=N(7773),_e=N(8880);function je(Qe,be,Ee=1/0){return(0,_e.m)(be)?je((Ke,He)=>(0,l.k)((We,Oe)=>be(Ke,We,He,Oe))((0,K.Uv)(Qe(Ke,He))),Ee):("number"==typeof be&&(Ee=be),(0,Z.i)((Ke,He)=>function ge(Qe,be,Ee,Ke,He,We,Oe,it){const Ge=[];let Ve=0,$e=0,pt=!1;const ve=()=>{pt&&!Ge.length&&!Ve&&be.complete()},Xe=at=>Ve<Ke?et(at):Ge.push(at),et=at=>{We&&be.next(at),Ve++;let ae=!1;(0,K.Uv)(Ee(at,$e++)).subscribe((0,Ne.e)(be,te=>{null==He||He(te),We?Xe(te):be.next(te)},()=>{ae=!0},void 0,()=>{if(ae)try{for(Ve--;Ge.length&&Ve<Ke;){const te=Ge.shift();Oe?(0,ee._)(be,Oe,()=>et(te)):et(te)}ve()}catch(te){be.error(te)}}))};return Qe.subscribe((0,Ne.e)(be,Xe,()=>{pt=!0,ve()})),()=>{null==it||it()}}(Ke,He,Qe,Ee)))}},3920:(mn,st,N)=>{"use strict";N.d(st,{y:()=>ee});var l=N(9399),K=N(5448),Z=N(7773);function ee(Ne,ge=0){return(0,K.i)((_e,je)=>{_e.subscribe((0,Z.e)(je,Qe=>(0,l._)(je,Ne,()=>je.next(Qe),ge),()=>(0,l._)(je,Ne,()=>je.complete(),ge),Qe=>(0,l._)(je,Ne,()=>je.error(Qe),ge)))})}},8084:(mn,st,N)=>{"use strict";N.d(st,{O:()=>Z});var l=N(5448),K=N(7773);function Z(){return(0,l.i)((ee,Ne)=>{let ge=null;ee._refCount++;const _e=(0,K.e)(Ne,void 0,void 0,void 0,()=>{if(!ee||ee._refCount<=0||0<--ee._refCount)return void(ge=null);const je=ee._connection,Qe=ge;ge=null,je&&(!Qe||je===Qe)&&je.unsubscribe(),Ne.unsubscribe()});ee.subscribe(_e),_e.closed||(ge=ee.connect())})}},208:(mn,st,N)=>{"use strict";N.d(st,{K:()=>ee});var l=N(5448),K=N(7773);function ee(Ne,ge){return(0,l.i)(function Z(Ne,ge,_e,je,Qe){return(be,Ee)=>{let Ke=_e,He=ge,We=0;be.subscribe((0,K.e)(Ee,Oe=>{const it=We++;He=Ke?Ne(He,Oe,it):(Ke=!0,Oe),je&&Ee.next(He)},Qe&&(()=>{Ke&&Ee.next(He),Ee.complete()})))}}(Ne,ge,arguments.length>=2,!0))}},7648:(mn,st,N)=>{"use strict";N.d(st,{o:()=>Ne});var l=N(560),K=N(5657),Z=N(1760),ee=N(5448);function Ne(_e={}){const{connector:je=(()=>new K.E),resetOnError:Qe=!0,resetOnComplete:be=!0,resetOnRefCountZero:Ee=!0}=_e;return Ke=>{let He,We,Oe,it=0,Ge=!1,Ve=!1;const $e=()=>{null==We||We.unsubscribe(),We=void 0},pt=()=>{$e(),He=Oe=void 0,Ge=Ve=!1},ve=()=>{const Xe=He;pt(),null==Xe||Xe.unsubscribe()};return(0,ee.i)((Xe,et)=>{it++,!Ve&&!Ge&&$e();const at=Oe=null!=Oe?Oe:je();et.add(()=>{it--,0===it&&!Ve&&!Ge&&(We=ge(ve,Ee))}),at.subscribe(et),!He&&it>0&&(He=new Z.ot({next:ae=>at.next(ae),error:ae=>{Ve=!0,$e(),We=ge(pt,Qe,ae),at.error(ae)},complete:()=>{Ge=!0,$e(),We=ge(pt,be),at.complete()}}),(0,l.Uv)(Xe).subscribe(He))})(Ke)}}function ge(_e,je,...Qe){if(!0===je)return void _e();if(!1===je)return;const be=new Z.ot({next:()=>{be.unsubscribe(),_e()}});return(0,l.Uv)(je(...Qe)).subscribe(be)}},5568:(mn,st,N)=>{"use strict";N.d(st,{W:()=>ee});var l=N(7228),K=N(6624),Z=N(5448);function ee(...Ne){const ge=(0,K.e_)(Ne);return(0,Z.i)((_e,je)=>{(ge?(0,l.W)(Ne,_e,ge):(0,l.W)(Ne,_e)).subscribe(je)})}},2924:(mn,st,N)=>{"use strict";N.d(st,{y:()=>K});var l=N(5448);function K(Z,ee=0){return(0,l.i)((Ne,ge)=>{ge.add(Z.schedule(()=>Ne.subscribe(ge),ee))})}},7368:(mn,st,N)=>{"use strict";N.d(st,{G:()=>ee});var l=N(560),K=N(5448),Z=N(7773);function ee(Ne,ge){return(0,K.i)((_e,je)=>{let Qe=null,be=0,Ee=!1;const Ke=()=>Ee&&!Qe&&je.complete();_e.subscribe((0,Z.e)(je,He=>{null==Qe||Qe.unsubscribe();let We=0;const Oe=be++;(0,l.Uv)(Ne(He,Oe)).subscribe(Qe=(0,Z.e)(je,it=>je.next(ge?ge(He,it,Oe,We++):it),()=>{Qe=null,Ke()}))},()=>{Ee=!0,Ke()}))})}},3992:(mn,st,N)=>{"use strict";N.d(st,{U:()=>ee});var l=N(8960),K=N(5448),Z=N(7773);function ee(Ne){return Ne<=0?()=>l.k:(0,K.i)((ge,_e)=>{let je=0;ge.subscribe((0,Z.e)(_e,Qe=>{++je<=Ne&&(_e.next(Qe),Ne<=je&&_e.complete())}))})}},9212:(mn,st,N)=>{"use strict";N.d(st,{y:()=>Ne});var l=N(8880),K=N(5448),Z=N(7773),ee=N(528);function Ne(ge,_e,je){const Qe=(0,l.m)(ge)||_e||je?{next:ge,error:_e,complete:je}:ge;return Qe?(0,K.i)((be,Ee)=>{var Ke;null===(Ke=Qe.subscribe)||void 0===Ke||Ke.call(Qe);let He=!0;be.subscribe((0,Z.e)(Ee,We=>{var Oe;null===(Oe=Qe.next)||void 0===Oe||Oe.call(Qe,We),Ee.next(We)},()=>{var We;He=!1,null===(We=Qe.complete)||void 0===We||We.call(Qe),Ee.complete()},We=>{var Oe;He=!1,null===(Oe=Qe.error)||void 0===Oe||Oe.call(Qe,We),Ee.error(We)},()=>{var We,Oe;He&&(null===(We=Qe.unsubscribe)||void 0===We||We.call(Qe)),null===(Oe=Qe.finalize)||void 0===Oe||Oe.call(Qe)}))}):ee.Z}},8124:(mn,st,N)=>{"use strict";N.d(st,{_:()=>ee});var l=N(7696),K=N(5448),Z=N(7773);function ee(ge=Ne){return(0,K.i)((_e,je)=>{let Qe=!1;_e.subscribe((0,Z.e)(je,be=>{Qe=!0,je.next(be)},()=>Qe?je.complete():je.error(ge())))})}function Ne(){return new l.G}},1364:(mn,st,N)=>{"use strict";N.d(st,{m:()=>Ne});var l=N(6928);class K extends l.wH{constructor(_e,je){super()}schedule(_e,je=0){return this}}const Z={setInterval(ge,_e,...je){const{delegate:Qe}=Z;return null!=Qe&&Qe.setInterval?Qe.setInterval(ge,_e,...je):setInterval(ge,_e,...je)},clearInterval(ge){const{delegate:_e}=Z;return((null==_e?void 0:_e.clearInterval)||clearInterval)(ge)},delegate:void 0};var ee=N(1248);class Ne extends K{constructor(_e,je){super(_e,je),this.scheduler=_e,this.work=je,this.pending=!1}schedule(_e,je=0){var Qe;if(this.closed)return this;this.state=_e;const be=this.id,Ee=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(Ee,be,je)),this.pending=!0,this.delay=je,this.id=null!==(Qe=this.id)&&void 0!==Qe?Qe:this.requestAsyncId(Ee,this.id,je),this}requestAsyncId(_e,je,Qe=0){return Z.setInterval(_e.flush.bind(_e,this),Qe)}recycleAsyncId(_e,je,Qe=0){if(null!=Qe&&this.delay===Qe&&!1===this.pending)return je;null!=je&&Z.clearInterval(je)}execute(_e,je){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Qe=this._execute(_e,je);if(Qe)return Qe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,je){let be,Qe=!1;try{this.work(_e)}catch(Ee){Qe=!0,be=Ee||new Error("Scheduled action threw falsy error")}if(Qe)return this.unsubscribe(),be}unsubscribe(){if(!this.closed){const{id:_e,scheduler:je}=this,{actions:Qe}=je;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.k)(Qe,this),null!=_e&&(this.id=this.recycleAsyncId(je,_e,null)),this.delay=null,super.unsubscribe()}}}},9816:(mn,st,N)=>{"use strict";N.d(st,{k:()=>Z});var l=N(5960);class K{constructor(Ne,ge=K.now){this.schedulerActionCtor=Ne,this.now=ge}schedule(Ne,ge=0,_e){return new this.schedulerActionCtor(this,Ne).schedule(_e,ge)}}K.now=l.K.now;class Z extends K{constructor(Ne,ge=K.now){super(Ne,ge),this.actions=[],this._active=!1}flush(Ne){const{actions:ge}=this;if(this._active)return void ge.push(Ne);let _e;this._active=!0;do{if(_e=Ne.execute(Ne.state,Ne.delay))break}while(Ne=ge.shift());if(this._active=!1,_e){for(;Ne=ge.shift();)Ne.unsubscribe();throw _e}}}},112:(mn,st,N)=>{"use strict";N.d(st,{M:()=>Z,a:()=>ee});var l=N(1364);const Z=new(N(9816).k)(l.m),ee=Z},5960:(mn,st,N)=>{"use strict";N.d(st,{K:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3376:(mn,st,N)=>{"use strict";N.d(st,{u:()=>l});const l={setTimeout(K,Z,...ee){const{delegate:Ne}=l;return null!=Ne&&Ne.setTimeout?Ne.setTimeout(K,Z,...ee):setTimeout(K,Z,...ee)},clearTimeout(K){const{delegate:Z}=l;return((null==Z?void 0:Z.clearTimeout)||clearTimeout)(K)},delegate:void 0}},3835:(mn,st,N)=>{"use strict";N.d(st,{w:()=>K});const K=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},472:(mn,st,N)=>{"use strict";N.d(st,{a:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7696:(mn,st,N)=>{"use strict";N.d(st,{G:()=>K});const K=(0,N(4912).w)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"})},6624:(mn,st,N)=>{"use strict";N.d(st,{_8:()=>ge,e_:()=>Ne,yu:()=>ee});var l=N(8880),K=N(3048);function Z(_e){return _e[_e.length-1]}function ee(_e){return(0,l.m)(Z(_e))?_e.pop():void 0}function Ne(_e){return(0,K.G)(Z(_e))?_e.pop():void 0}function ge(_e,je){return"number"==typeof Z(_e)?_e.pop():je}},4300:(mn,st,N)=>{"use strict";N.d(st,{Q:()=>Ne});const{isArray:l}=Array,{getPrototypeOf:K,prototype:Z,keys:ee}=Object;function Ne(_e){if(1===_e.length){const je=_e[0];if(l(je))return{args:je,keys:null};if(function ge(_e){return _e&&"object"==typeof _e&&K(_e)===Z}(je)){const Qe=ee(je);return{args:Qe.map(be=>je[be]),keys:Qe}}}return{args:_e,keys:null}}},1248:(mn,st,N)=>{"use strict";function l(K,Z){if(K){const ee=K.indexOf(Z);0<=ee&&K.splice(ee,1)}}N.d(st,{k:()=>l})},4912:(mn,st,N)=>{"use strict";function l(K){const ee=K(Ne=>{Error.call(Ne),Ne.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}N.d(st,{w:()=>l})},7904:(mn,st,N)=>{"use strict";function l(K,Z){return K.reduce((ee,Ne,ge)=>(ee[Ne]=Z[ge],ee),{})}N.d(st,{q:()=>l})},2075:(mn,st,N)=>{"use strict";N.d(st,{c:()=>Z,q:()=>ee});var l=N(4491);let K=null;function Z(Ne){if(l.config.useDeprecatedSynchronousErrorHandling){const ge=!K;if(ge&&(K={errorThrown:!1,error:null}),Ne(),ge){const{errorThrown:_e,error:je}=K;if(K=null,_e)throw je}}else Ne()}function ee(Ne){l.config.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=Ne)}},9399:(mn,st,N)=>{"use strict";function l(K,Z,ee,Ne=0,ge=!1){const _e=Z.schedule(function(){ee(),ge?K.add(this.schedule(null,Ne)):this.unsubscribe()},Ne);if(K.add(_e),!ge)return _e}N.d(st,{_:()=>l})},528:(mn,st,N)=>{"use strict";function l(K){return K}N.d(st,{Z:()=>l})},5428:(mn,st,N)=>{"use strict";N.d(st,{G:()=>l});const l=K=>K&&"number"==typeof K.length&&"function"!=typeof K},376:(mn,st,N)=>{"use strict";N.d(st,{E:()=>K});var l=N(8880);function K(Z){return Symbol.asyncIterator&&(0,l.m)(null==Z?void 0:Z[Symbol.asyncIterator])}},8880:(mn,st,N)=>{"use strict";function l(K){return"function"==typeof K}N.d(st,{m:()=>l})},5099:(mn,st,N)=>{"use strict";N.d(st,{O:()=>Z});var l=N(472),K=N(8880);function Z(ee){return(0,K.m)(ee[l.a])}},1688:(mn,st,N)=>{"use strict";N.d(st,{i:()=>Z});var l=N(3835),K=N(8880);function Z(ee){return(0,K.m)(null==ee?void 0:ee[l.w])}},5432:(mn,st,N)=>{"use strict";N.d(st,{u:()=>K});var l=N(8880);function K(Z){return(0,l.m)(null==Z?void 0:Z.then)}},5832:(mn,st,N)=>{"use strict";N.d(st,{K:()=>ee,_:()=>Z});var l=N(1316),K=N(8880);function Z(Ne){return(0,l.o7)(this,arguments,function*(){const _e=Ne.getReader();try{for(;;){const{value:je,done:Qe}=yield(0,l.U1)(_e.read());if(Qe)return yield(0,l.U1)(void 0);yield yield(0,l.U1)(je)}}finally{_e.releaseLock()}})}function ee(Ne){return(0,K.m)(null==Ne?void 0:Ne.getReader)}},3048:(mn,st,N)=>{"use strict";N.d(st,{G:()=>K});var l=N(8880);function K(Z){return Z&&(0,l.m)(Z.schedule)}},5448:(mn,st,N)=>{"use strict";N.d(st,{e:()=>K,i:()=>Z});var l=N(8880);function K(ee){return(0,l.m)(null==ee?void 0:ee.lift)}function Z(ee){return Ne=>{if(K(Ne))return Ne.lift(function(ge){try{return ee(ge,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},4187:(mn,st,N)=>{"use strict";N.d(st,{j:()=>ee});var l=N(4704);const{isArray:K}=Array;function ee(Ne){return(0,l.k)(ge=>function Z(Ne,ge){return K(ge)?Ne(...ge):Ne(ge)}(Ne,ge))}},308:(mn,st,N)=>{"use strict";function l(){}N.d(st,{K:()=>l})},3928:(mn,st,N)=>{"use strict";N.d(st,{W:()=>K,Y:()=>Z});var l=N(528);function K(...ee){return Z(ee)}function Z(ee){return 0===ee.length?l.Z:1===ee.length?ee[0]:function(ge){return ee.reduce((_e,je)=>je(_e),ge)}}},1984:(mn,st,N)=>{"use strict";N.d(st,{U:()=>Z});var l=N(4491),K=N(3376);function Z(ee){K.u.setTimeout(()=>{const{onUnhandledError:Ne}=l.config;if(!Ne)throw ee;Ne(ee)})}},8272:(mn,st,N)=>{"use strict";function l(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(st,{W:()=>l})},1480:(mn,st,N)=>{var l={"./ion-accordion_2.entry.js":[8956,9312,8956],"./ion-action-sheet.entry.js":[6736,9312,6736],"./ion-alert.entry.js":[1644,9312,1644],"./ion-app_8.entry.js":[3936,9312,3936],"./ion-avatar_3.entry.js":[9428,9428],"./ion-back-button.entry.js":[6932,9312,6932],"./ion-backdrop.entry.js":[8019,8019],"./ion-breadcrumb_2.entry.js":[7752,9312,7752],"./ion-button_2.entry.js":[9580,9580],"./ion-card_5.entry.js":[1048,1048],"./ion-checkbox.entry.js":[3752,9312,3752],"./ion-chip.entry.js":[1492,1492],"./ion-col_3.entry.js":[9584,9584],"./ion-datetime-button.entry.js":[7864,8832,7864],"./ion-datetime_3.entry.js":[8048,8832,9312,8048],"./ion-fab_3.entry.js":[1812,9312,1812],"./ion-img.entry.js":[3296,3296],"./ion-infinite-scroll_2.entry.js":[1488,9312,1488],"./ion-input.entry.js":[3500,9312,3500],"./ion-item-option_3.entry.js":[2448,9312,2448],"./ion-item_8.entry.js":[8772,9312,8772],"./ion-loading.entry.js":[2948,9312,2948],"./ion-menu_3.entry.js":[7676,9312,7676],"./ion-modal.entry.js":[6824,9312,6824],"./ion-nav_2.entry.js":[2372,9312,2372],"./ion-picker-column-internal.entry.js":[8232,9312,8232],"./ion-picker-internal.entry.js":[4656,4656],"./ion-popover.entry.js":[4168,9312,4168],"./ion-progress-bar.entry.js":[3264,3264],"./ion-radio_2.entry.js":[7176,9312,7176],"./ion-range.entry.js":[3180,9312,3180],"./ion-refresher_2.entry.js":[2e3,9312,2e3],"./ion-reorder_2.entry.js":[3604,9312,3604],"./ion-ripple-effect.entry.js":[3667,3667],"./ion-route_4.entry.js":[4284,4284],"./ion-searchbar.entry.js":[2580,9312,2580],"./ion-segment_2.entry.js":[7528,9312,7528],"./ion-select_3.entry.js":[4272,9312,4272],"./ion-spinner.entry.js":[1172,9312,1172],"./ion-split-pane.entry.js":[2624,2624],"./ion-tab-bar_2.entry.js":[1708,9312,1708],"./ion-tab_2.entry.js":[5956,5956],"./ion-text.entry.js":[5828,5828],"./ion-textarea.entry.js":[9440,9312,9440],"./ion-toast.entry.js":[9836,9312,9836],"./ion-toggle.entry.js":[2776,9312,2776]};function K(Z){if(!N.o(l,Z))return Promise.resolve().then(()=>{var ge=new Error("Cannot find module '"+Z+"'");throw ge.code="MODULE_NOT_FOUND",ge});var ee=l[Z],Ne=ee[0];return Promise.all(ee.slice(1).map(N.e)).then(()=>N(Ne))}K.keys=()=>Object.keys(l),K.id=1480,mn.exports=K},1368:(mn,st,N)=>{"use strict";N.d(st,{MD:()=>yi,MP:()=>Ge,OM:()=>eo,QF:()=>pi,Qd:()=>We,Sg:()=>ao,Ud:()=>_e,XV:()=>_t,YZ:()=>yo,_k:()=>ys,ay:()=>Pe,c0:()=>Ao,mQ:()=>Qe,mg:()=>Ne,oB:()=>Ve,uC:()=>it,u_:()=>Te,uf:()=>_r,ug:()=>ee,uy:()=>Z});var l=N(4496);let K=null;function Z(){return K}function ee(b){var G;null!==(G=K)&&void 0!==G||(K=b)}class Ne{}const _e=new l.UbH("");let je=(()=>{var b;class G{historyGo($){throw new Error("")}}return(b=G).\u0275fac=function($){return new($||b)},b.\u0275prov=l.wxM({token:b,factory:()=>(0,l.uUt)(be),providedIn:"platform"}),G})();const Qe=new l.UbH("");let be=(()=>{var b;class G extends je{constructor(){super(),this._doc=(0,l.uUt)(_e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState($){const pe=Z().getGlobalEventTarget(this._doc,"window");return pe.addEventListener("popstate",$,!1),()=>pe.removeEventListener("popstate",$)}onHashChange($){const pe=Z().getGlobalEventTarget(this._doc,"window");return pe.addEventListener("hashchange",$,!1),()=>pe.removeEventListener("hashchange",$)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname($){this._location.pathname=$}pushState($,pe,ze){this._history.pushState($,pe,ze)}replaceState($,pe,ze){this._history.replaceState($,pe,ze)}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return(b=G).\u0275fac=function($){return new($||b)},b.\u0275prov=l.wxM({token:b,factory:()=>new b,providedIn:"platform"}),G})();function Ee(b,G){if(0==b.length)return G;if(0==G.length)return b;let Re=0;return b.endsWith("/")&&Re++,G.startsWith("/")&&Re++,2==Re?b+G.substring(1):1==Re?b+G:b+"/"+G}function Ke(b){const G=b.match(/#|\?|$/),Re=G&&G.index||b.length;return b.slice(0,Re-("/"===b[Re-1]?1:0))+b.slice(Re)}function He(b){return b&&"?"!==b[0]?"?"+b:b}let We=(()=>{var b;class G{historyGo($){throw new Error("")}}return(b=G).\u0275fac=function($){return new($||b)},b.\u0275prov=l.wxM({token:b,factory:()=>(0,l.uUt)(it),providedIn:"root"}),G})();const Oe=new l.UbH("");let it=(()=>{var b;class G extends We{constructor($,pe){var ze,Ut,In;super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=null!==(ze=null!==(Ut=null!=pe?pe:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Ut?Ut:null===(In=(0,l.uUt)(_e).location)||void 0===In?void 0:In.origin)&&void 0!==ze?ze:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Ee(this._baseHref,$)}path($=!1){const pe=this._platformLocation.pathname+He(this._platformLocation.search),ze=this._platformLocation.hash;return ze&&$?`${pe}${ze}`:pe}pushState($,pe,ze,Ut){const In=this.prepareExternalUrl(ze+He(Ut));this._platformLocation.pushState($,pe,In)}replaceState($,pe,ze,Ut){const In=this.prepareExternalUrl(ze+He(Ut));this._platformLocation.replaceState($,pe,In)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var pe,ze;null===(pe=(ze=this._platformLocation).historyGo)||void 0===pe||pe.call(ze,$)}}return(b=G).\u0275fac=function($){return new($||b)(l.CoB(je),l.CoB(Oe,8))},b.\u0275prov=l.wxM({token:b,factory:b.\u0275fac,providedIn:"root"}),G})(),Ge=(()=>{var b;class G extends We{constructor($,pe){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=pe&&(this._baseHref=pe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){var pe;const ze=null!==(pe=this._platformLocation.hash)&&void 0!==pe?pe:"#";return ze.length>0?ze.substring(1):ze}prepareExternalUrl($){const pe=Ee(this._baseHref,$);return pe.length>0?"#"+pe:pe}pushState($,pe,ze,Ut){let In=this.prepareExternalUrl(ze+He(Ut));0==In.length&&(In=this._platformLocation.pathname),this._platformLocation.pushState($,pe,In)}replaceState($,pe,ze,Ut){let In=this.prepareExternalUrl(ze+He(Ut));0==In.length&&(In=this._platformLocation.pathname),this._platformLocation.replaceState($,pe,In)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var pe,ze;null===(pe=(ze=this._platformLocation).historyGo)||void 0===pe||pe.call(ze,$)}}return(b=G).\u0275fac=function($){return new($||b)(l.CoB(je),l.CoB(Oe,8))},b.\u0275prov=l.wxM({token:b,factory:b.\u0275fac}),G})(),Ve=(()=>{var b;class G{constructor($){this._subject=new l._w7,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const pe=this._locationStrategy.getBaseHref();this._basePath=function Xe(b){if(new RegExp("^(https?:)?//").test(b)){const[,Re]=b.split(/\/\/[^\/]+/);return Re}return b}(Ke(ve(pe))),this._locationStrategy.onPopState(ze=>{this._subject.emit({url:this.path(!0),pop:!0,state:ze.state,type:ze.type})})}ngOnDestroy(){var $;null===($=this._urlChangeSubscription)||void 0===$||$.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,pe=""){return this.path()==this.normalize($+He(pe))}normalize($){return G.stripTrailingSlash(function pt(b,G){if(!b||!G.startsWith(b))return G;const Re=G.substring(b.length);return""===Re||["/",";","?","#"].includes(Re[0])?Re:G}(this._basePath,ve($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,pe="",ze=null){this._locationStrategy.pushState(ze,"",$,pe),this._notifyUrlChangeListeners(this.prepareExternalUrl($+He(pe)),ze)}replaceState($,pe="",ze=null){this._locationStrategy.replaceState(ze,"",$,pe),this._notifyUrlChangeListeners(this.prepareExternalUrl($+He(pe)),ze)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){var pe,ze;null===(pe=(ze=this._locationStrategy).historyGo)||void 0===pe||pe.call(ze,$)}onUrlChange($){var pe;return this._urlChangeListeners.push($),null!==(pe=this._urlChangeSubscription)&&void 0!==pe||(this._urlChangeSubscription=this.subscribe(ze=>{this._notifyUrlChangeListeners(ze.url,ze.state)})),()=>{const ze=this._urlChangeListeners.indexOf($);var Ut;this._urlChangeListeners.splice(ze,1),0===this._urlChangeListeners.length&&(null===(Ut=this._urlChangeSubscription)||void 0===Ut||Ut.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",pe){this._urlChangeListeners.forEach(ze=>ze($,pe))}subscribe($,pe,ze){return this._subject.subscribe({next:$,error:pe,complete:ze})}}return(b=G).normalizeQueryParams=He,b.joinWithSlash=Ee,b.stripTrailingSlash=Ke,b.\u0275fac=function($){return new($||b)(l.CoB(We))},b.\u0275prov=l.wxM({token:b,factory:()=>function $e(){return new Ve((0,l.CoB)(We))}(),providedIn:"root"}),G})();function ve(b){return b.replace(/\/index.html$/,"")}function ao(b,G){G=encodeURIComponent(G);for(const Re of b.split(";")){const $=Re.indexOf("="),[pe,ze]=-1==$?[Re,""]:[Re.slice(0,$),Re.slice($+1)];if(pe.trim()===G)return decodeURIComponent(ze)}return null}const Hr=/\s+/,lo=[];let pi=(()=>{var b;class G{constructor($,pe){this._ngEl=$,this._renderer=pe,this.initialClasses=lo,this.stateMap=new Map}set klass($){this.initialClasses=null!=$?$.trim().split(Hr):lo}set ngClass($){this.rawClass="string"==typeof $?$.trim().split(Hr):$}ngDoCheck(){for(const pe of this.initialClasses)this._updateState(pe,!0);const $=this.rawClass;if(Array.isArray($)||$ instanceof Set)for(const pe of $)this._updateState(pe,!0);else if(null!=$)for(const pe of Object.keys($))this._updateState(pe,!!$[pe]);this._applyStateDiff()}_updateState($,pe){const ze=this.stateMap.get($);void 0!==ze?(ze.enabled!==pe&&(ze.changed=!0,ze.enabled=pe),ze.touched=!0):this.stateMap.set($,{enabled:pe,changed:!0,touched:!0})}_applyStateDiff(){for(const $ of this.stateMap){const pe=$[0],ze=$[1];ze.changed?(this._toggleClass(pe,ze.enabled),ze.changed=!1):ze.touched||(ze.enabled&&this._toggleClass(pe,!1),this.stateMap.delete(pe)),ze.touched=!1}}_toggleClass($,pe){($=$.trim()).length>0&&$.split(Hr).forEach(ze=>{pe?this._renderer.addClass(this._ngEl.nativeElement,ze):this._renderer.removeClass(this._ngEl.nativeElement,ze)})}}return(b=G).\u0275fac=function($){return new($||b)(l.GI1(l.GMv),l.GI1(l.q87))},b.\u0275dir=l.Sc5({type:b,selectors:[["","ngClass",""]],inputs:{klass:[l.Wk5.None,"class","klass"],ngClass:"ngClass"},standalone:!0}),G})();class qr{constructor(G,Re,$,pe){this.$implicit=G,this.ngForOf=Re,this.index=$,this.count=pe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pe=(()=>{var b;class G{set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}constructor($,pe,ze){this._viewContainer=$,this._template=pe,this._differs=ze,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const pe=this._viewContainer;$.forEachOperation((ze,Ut,In)=>{if(null==ze.previousIndex)pe.createEmbeddedView(this._template,new qr(ze.item,this._ngForOf,-1,-1),null===In?void 0:In);else if(null==In)pe.remove(null===Ut?void 0:Ut);else if(null!==Ut){const Pr=pe.get(Ut);pe.move(Pr,In),Me(Pr,ze)}});for(let ze=0,Ut=pe.length;ze<Ut;ze++){const Pr=pe.get(ze).context;Pr.index=ze,Pr.count=Ut,Pr.ngForOf=this._ngForOf}$.forEachIdentityChange(ze=>{Me(pe.get(ze.currentIndex),ze)})}static ngTemplateContextGuard($,pe){return!0}}return(b=G).\u0275fac=function($){return new($||b)(l.GI1(l.y8U),l.GI1(l.Yw2),l.GI1(l.Uj7))},b.\u0275dir=l.Sc5({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),G})();function Me(b,G){b.context.$implicit=G.item}let Te=(()=>{var b;class G{constructor($,pe){this._viewContainer=$,this._context=new gt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=pe}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){jt("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){jt("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,pe){return!0}}return(b=G).\u0275fac=function($){return new($||b)(l.GI1(l.y8U),l.GI1(l.Yw2))},b.\u0275dir=l.Sc5({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),G})();class gt{constructor(){this.$implicit=null,this.ngIf=null}}function jt(b,G){if(G&&!G.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,l.GEN)(G)}'.`)}let _t=(()=>{var b;class G{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if(this._shouldRecreateView($)){var pe;const ze=this._viewContainerRef;if(this._viewRef&&ze.remove(ze.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const Ut=this._createContextForwardProxy();this._viewRef=ze.createEmbeddedView(this.ngTemplateOutlet,Ut,{injector:null!==(pe=this.ngTemplateOutletInjector)&&void 0!==pe?pe:void 0})}}_shouldRecreateView($){return!!$.ngTemplateOutlet||!!$.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:($,pe,ze)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,pe,ze),get:($,pe,ze)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,pe,ze)}})}}return(b=G).\u0275fac=function($){return new($||b)(l.GI1(l.y8U))},b.\u0275dir=l.Sc5({type:b,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.SYr]}),G})(),yi=(()=>{var b;class G{}return(b=G).\u0275fac=function($){return new($||b)},b.\u0275mod=l.a4G({type:b}),b.\u0275inj=l.s3X({}),G})();const ys="browser",vo="server";function Ao(b){return b===ys}function _r(b){return b===vo}let yo=(()=>{var b;class G{}return(b=G).\u0275prov=(0,l.wxM)({token:b,providedIn:"root",factory:()=>Ao((0,l.uUt)(l.AHE))?new Qo((0,l.uUt)(_e),window):new pa}),G})();class Qo{constructor(G,Re){this.document=G,this.window=Re,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(G){this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){const Re=function Ii(b,G){const Re=b.getElementById(G)||b.getElementsByName(G)[0];if(Re)return Re;if("function"==typeof b.createTreeWalker&&b.body&&"function"==typeof b.body.attachShadow){const $=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let pe=$.currentNode;for(;pe;){const ze=pe.shadowRoot;if(ze){const Ut=ze.getElementById(G)||ze.querySelector(`[name="${G}"]`);if(Ut)return Ut}pe=$.nextNode()}}return null}(this.document,G);Re&&(this.scrollToElement(Re),Re.focus())}setHistoryScrollRestoration(G){this.window.history.scrollRestoration=G}scrollToElement(G){const Re=G.getBoundingClientRect(),$=Re.left+this.window.pageXOffset,pe=Re.top+this.window.pageYOffset,ze=this.offset();this.window.scrollTo($-ze[0],pe-ze[1])}}class pa{setOffset(G){}getScrollPosition(){return[0,0]}scrollToPosition(G){}scrollToAnchor(G){}setHistoryScrollRestoration(G){}}class eo{}},4496:(mn,st,N)=>{"use strict";N.d(st,{qid:()=>B0,QHP:()=>we,kZF:()=>IT,Ev2:()=>BM,Swk:()=>op,YND:()=>Ti,kD9:()=>o_,ESV:()=>EM,ayF:()=>RM,syz:()=>Pl,GMv:()=>ei,SIe:()=>Gs,eAe:()=>j,_w7:()=>Sr,_6O:()=>Yt,UbH:()=>J,zZn:()=>h,Uj7:()=>Gf,YNh:()=>Au,KYU:()=>tI,obV:()=>Bn,oF$:()=>wn,WW2:()=>Ho,T7N:()=>wc,AHE:()=>wt,crf:()=>fn,q87:()=>eE,O8F:()=>ny,yzm:()=>Ef,Qfh:()=>$c,Yw2:()=>th,G4X:()=>mM,eOv:()=>vT,j1C:()=>WR,a8Z:()=>dT,y8U:()=>_g,K6R:()=>Ar,I44:()=>Kf,cZD:()=>fP,kdu:()=>gP,SIz:()=>ki,Gk1:()=>kn,grM:()=>MT,agy:()=>kM,wd:()=>bs,uUt:()=>di,sPQ:()=>OM,_Ap:()=>ln,AFj:()=>Ua,m4O:()=>UM,o9M:()=>mP,SMS:()=>Ku,sRj:()=>sC,oPY:()=>hT,i4S:()=>zc,GUM:()=>Bg,g9Y:()=>Ws,OBp:()=>Ft,aS5:()=>mT,Mn9:()=>_T,iMv:()=>_0,G58:()=>Qt,y02:()=>Ew,IHs:()=>bn,K_M:()=>cu,Guz:()=>oh,w5$:()=>V0,gX2:()=>yT,auf:()=>el,GEN:()=>bt,eg9:()=>N_,Wk5:()=>Gr,QJr:()=>q,SYr:()=>Vl,M5G:()=>OD,UHJ:()=>kD,yG2:()=>$p,e48:()=>JE,eAK:()=>a0,szK:()=>cD,In1:()=>qe,Sc5:()=>gn,wxM:()=>Di,s3X:()=>Yl,a4G:()=>Pt,UTH:()=>tn,GI1:()=>ld,wR5:()=>f0,C_f:()=>m0,C$Y:()=>Hy,I0R:()=>Wy,KQA:()=>vw,otF:()=>ca,CoB:()=>Ji,gJ8:()=>Qc,KEo:()=>Im,qCj:()=>I0,Gqi:()=>hD,GaO:()=>Xw,_Xx:()=>Jw,kPM:()=>Zw,E7m:()=>r0,IBC:()=>WD,wto:()=>dD,CGJ:()=>zr,usT:()=>Na,YFg:()=>iv,m4B:()=>s0,yuY:()=>Cg,OEk:()=>CD,cNF:()=>w0,oRS:()=>Qy,kNx:()=>xD,iHE:()=>T0,OKB:()=>D0,CC$:()=>uD}),N(1528);let Z=null,Ne=1;const ge=Symbol("SIGNAL");function _e(t){const n=Z;return Z=t,n}function We(t){if((!at(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Ne)){if(!t.producerMustRecompute(t)&&!pt(t))return t.dirty=!1,void(t.lastCleanEpoch=Ne);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ne}}function pt(t){ae(t);for(let n=0;n<t.producerNode.length;n++){const o=t.producerNode[n],a=t.producerLastReadVersion[n];if(a!==o.version||(We(o),a!==o.version))return!0}return!1}function et(t,n){if(function te(t){var n,o;null!==(n=t.liveConsumerNode)&&void 0!==n||(t.liveConsumerNode=[]),null!==(o=t.liveConsumerIndexOfThis)&&void 0!==o||(t.liveConsumerIndexOfThis=[])}(t),ae(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)et(t.producerNode[a],t.producerIndexOfThis[a]);const o=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[o],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[o],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[n],u=t.liveConsumerNode[n];ae(u),u.producerIndexOfThis[a]=n}}function at(t){var n,o;return t.consumerIsAlwaysLive||(null!==(n=null==t||null===(o=t.liveConsumerNode)||void 0===o?void 0:o.length)&&void 0!==n?n:0)>0}function ae(t){var n,o,a;null!==(n=t.producerNode)&&void 0!==n||(t.producerNode=[]),null!==(o=t.producerIndexOfThis)&&void 0!==o||(t.producerIndexOfThis=[]),null!==(a=t.producerLastReadVersion)&&void 0!==a||(t.producerLastReadVersion=[])}let Wt=null;var jn=N(5657),xt=N(6928),ft=N(6700),Tt=N(4704);const vn="https://g.co/ng/security#xss";class Ft extends Error{constructor(n,o){super(Qt(n,o)),this.code=n}}function Qt(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}function Wn(t){return n=>{setTimeout(t,void 0,n)}}const Sr=class Tn extends jn.E{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,o,a){let u=n,p=o||(()=>null),I=a;if(n&&"object"==typeof n){var C,S,B;const re=n;u=null===(C=re.next)||void 0===C?void 0:C.bind(re),p=null===(S=re.error)||void 0===S?void 0:S.bind(re),I=null===(B=re.complete)||void 0===B?void 0:B.bind(re)}this.__isAsync&&(p=Wn(p),u&&(u=Wn(u)),I&&(I=Wn(I)));const Q=super.subscribe({next:u,error:p,complete:I});return n instanceof xt.wH&&n.add(Q),Q}};var Yt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Yt||{});function bt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const o=n.indexOf("\n");return-1===o?n:n.substring(0,o)}function yn(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}var Nr=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Nr||{}),Ar=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ar||{});function Br(t){return{toString:t}.toString()}const bn=globalThis,Or={},hr=[];function yt(t){for(let n in t)if(t[n]===yt)return n;throw Error("Could not find renamed property on target object.")}function vt(t,n){for(const o in n)n.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=n[o])}const Ht=yt({\u0275cmp:yt}),Mn=yt({\u0275dir:yt}),Xn=yt({\u0275pipe:yt}),Kn=yt({\u0275mod:yt}),Zn=yt({\u0275fac:yt}),$r=yt({__NG_ELEMENT_ID__:yt}),Vr=yt({__NG_ENV_ID__:yt});var Gr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Gr||{});function go(t,n,o){let a=t.length;for(;;){const u=t.indexOf(n,o);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const p=n.length;if(u+p===a||t.charCodeAt(u+p)<=32)return u}o=u+1}}function ao(t,n,o){let a=0;for(;a<o.length;){const u=o[a];if("number"==typeof u){if(0!==u)break;a++;const p=o[a++],I=o[a++],C=o[a++];t.setAttribute(n,I,C,p)}else{const p=u,I=o[++a];lo(p)?t.setProperty(n,p,I):t.setAttribute(n,p,I),a++}}return a}function Hr(t){return 3===t||4===t||6===t}function lo(t){return 64===t.charCodeAt(0)}function pi(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let o=-1;for(let a=0;a<n.length;a++){const u=n[a];"number"==typeof u?o=u:0===o||Kr(t,o,u,null,-1===o||2===o?n[++a]:null)}}return t}function Kr(t,n,o,a,u){let p=0,I=t.length;if(-1===n)I=-1;else for(;p<t.length;){const C=t[p++];if("number"==typeof C){if(C===n){I=-1;break}if(C>n){I=p-1;break}}}for(;p<t.length;){const C=t[p];if("number"==typeof C)break;if(C===o){if(null===a)return void(null!==u&&(t[p+1]=u));if(a===t[p+1])return void(t[p+2]=u)}p++,null!==a&&p++,null!==u&&p++}-1!==I&&(t.splice(I,0,n),p=I+1),t.splice(p++,0,o),null!==a&&t.splice(p++,0,a),null!==u&&t.splice(p++,0,u)}const Ir="ng-template";function qr(t,n,o){let a=0,u=!0;for(;a<t.length;){let p=t[a++];if("string"==typeof p&&u){const I=t[a++];if(o&&"class"===p&&-1!==go(I.toLowerCase(),n,0))return!0}else{if(1===p){for(;a<t.length&&"string"==typeof(p=t[a++]);)if(p.toLowerCase()===n)return!0;return!1}"number"==typeof p&&(u=!1)}}return!1}function Pe(t){return 4===t.type&&t.value!==Ir}function Me(t,n,o){return n===(4!==t.type||o?t.value:Ir)}function X(t,n,o){let a=4;const u=t.attrs||[],p=function An(t){for(let n=0;n<t.length;n++)if(Hr(t[n]))return n;return t.length}(u);let I=!1;for(let C=0;C<n.length;C++){const S=n[C];if("number"!=typeof S){if(!I)if(4&a){if(a=2|1&a,""!==S&&!Me(t,S,o)||""===S&&1===n.length){if(Te(a))return!1;I=!0}}else{const B=8&a?S:n[++C];if(8&a&&null!==t.attrs){if(!qr(t.attrs,B,o)){if(Te(a))return!1;I=!0}continue}const re=gt(8&a?"class":S,u,Pe(t),o);if(-1===re){if(Te(a))return!1;I=!0;continue}if(""!==B){let Be;Be=re>p?"":u[re+1].toLowerCase();const ot=8&a?Be:null;if(ot&&-1!==go(ot,B,0)||2&a&&B!==Be){if(Te(a))return!1;I=!0}}}}else{if(!I&&!Te(a)&&!Te(S))return!1;if(I&&Te(S))continue;I=!1,a=S|1&a}}return Te(a)||I}function Te(t){return 0==(1&t)}function gt(t,n,o,a){if(null===n)return-1;let u=0;if(a||!o){let p=!1;for(;u<n.length;){const I=n[u];if(I===t)return u;if(3===I||6===I)p=!0;else{if(1===I||2===I){let C=n[++u];for(;"string"==typeof C;)C=n[++u];continue}if(4===I)break;if(0===I){u+=4;continue}}u+=p?1:2}return-1}return function Gn(t,n){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const a=t[o];if("number"==typeof a)return-1;if(a===n)return o;o++}return-1}(n,t)}function jt(t,n,o=!1){for(let a=0;a<n.length;a++)if(X(t,n[a],o))return!0;return!1}function Jn(t,n){e:for(let o=0;o<n.length;o++){const a=n[o];if(t.length===a.length){for(let u=0;u<t.length;u++)if(t[u]!==a[u])continue e;return!0}}return!1}function gi(t,n){return t?":not("+n.trim()+")":n}function Ct(t){let n=t[0],o=1,a=2,u="",p=!1;for(;o<t.length;){let I=t[o];if("string"==typeof I)if(2&a){const C=t[++o];u+="["+I+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?u+="."+I:4&a&&(u+=" "+I);else""!==u&&!Te(I)&&(n+=gi(p,u),u=""),a=I,p=p||!Te(a);o++}return""!==u&&(n+=gi(p,u)),n}function qe(t){return Br(()=>{var n;const o=kr(t),a={...o,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Nr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:null!==(n=t.signals)&&void 0!==n&&n,data:t.data||{},encapsulation:t.encapsulation||Ar.Emulated,styles:t.styles||hr,_:null,schemas:t.schemas||null,tView:null,id:""};tr(a);const u=t.dependencies;return a.directiveDefs=A(u,!1),a.pipeDefs=A(u,!0),a.id=function F(t){let n=0;const o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const u of o)n=Math.imul(31,n)+u.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(a),a})}function ct(t){return Nt(t)||on(t)}function _t(t){return null!==t}function Pt(t){return Br(()=>({type:t.type,bootstrap:t.bootstrap||hr,declarations:t.declarations||hr,imports:t.imports||hr,exports:t.exports||hr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Kt(t,n){if(null==t)return Or;const o={};for(const u in t)if(t.hasOwnProperty(u)){const p=t[u];let I,C,S=Gr.None;var a;Array.isArray(p)?(S=p[0],I=p[1],C=null!==(a=p[2])&&void 0!==a?a:I):(I=p,C=p),n?(o[I]=S!==Gr.None?[u,S]:u,n[I]=C):o[I]=u}return o}function gn(t){return Br(()=>{const n=kr(t);return tr(n),n})}function tn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Nt(t){return t[Ht]||null}function on(t){return t[Mn]||null}function qt(t){return t[Xn]||null}function ln(t){const n=Nt(t)||on(t)||qt(t);return null!==n&&n.standalone}function En(t,n){const o=t[Kn]||null;if(!o&&!0===n)throw new Error(`Type ${bt(t)} does not have '\u0275mod' property.`);return o}function kr(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Or,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||hr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Kt(t.inputs,n),outputs:Kt(t.outputs),debugInfo:null}}function tr(t){var n;null===(n=t.features)||void 0===n||n.forEach(o=>o(t))}function A(t,n){if(!t)return null;const o=n?qt:ct;return()=>("function"==typeof t?t():t).map(a=>o(a)).filter(_t)}const le=0,Ae=1,Bt=2,rr=3,Si=4,ii=5,Zr=6,Yo=7,oi=8,Fi=9,co=10,Yn=11,is=12,vs=13,zs=14,yi=15,ys=16,vo=17,$i=18,Qi=19,Ao=20,_r=21,Lr=22,Ro=23,cr=25,yo=1,Ii=7,eo=9,uo=10;var os=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(os||{});function Ai(t){return Array.isArray(t)&&"object"==typeof t[yo]}function Vi(t){return Array.isArray(t)&&!0===t[yo]}function ga(t){return 0!=(4&t.flags)}function Lo(t){return t.componentOffset>-1}function Is(t){return 1==(1&t.flags)}function Ei(t){return!!t.template}function to(t){return 0!=(512&t[Bt])}let _i=!1;function Fr(t){for(;Array.isArray(t);)t=t[le];return t}function Fo(t,n){return Fr(n[t])}function Io(t,n){return Fr(n[t.index])}function qs(t,n){return t.data[n]}function Xi(t,n){const o=n[t];return Ai(o)?o:o[le]}function xa(t){return 128==(128&t[Bt])}function Ko(t,n){return null==n?null:t[n]}function Zo(t){t[vo]=0}function Fs(t){1024&t[Bt]||(t[Bt]|=1024,xa(t)&&_a(t))}function Jo(t){var n;return!!(9216&t[Bt]||null!==(n=t[Ro])&&void 0!==n&&n.dirty)}function gl(t){if(Jo(t))_a(t);else if(64&t[Bt])if(function zo(){return _i}())t[Bt]|=1024,_a(t);else{var n;null===(n=t[co].changeDetectionScheduler)||void 0===n||n.notify()}}function _a(t){var n;null===(n=t[co].changeDetectionScheduler)||void 0===n||n.notify();let o=Xs(t);for(;null!==o&&!(8192&o[Bt])&&(o[Bt]|=8192,xa(o));)o=Xs(o)}function Qa(t,n){if(256==(256&t[Bt]))throw new Ft(911,!1);null===t[_r]&&(t[_r]=[]),t[_r].push(n)}function Xs(t){const n=t[rr];return Vi(n)?n[rr]:n}const ur={lFrame:hi(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ya(){return ur.bindingsEnabled}function fs(){return null!==ur.skipHydrationRootTNode}function zt(){return ur.lFrame.lView}function vr(){return ur.lFrame.tView}function Na(t){return ur.lFrame.contextLView=t,t[oi]}function zr(t){return ur.lFrame.contextLView=null,t}function Ci(){let t=Ea();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ea(){return ur.lFrame.currentTNode}function Uo(t,n){const o=ur.lFrame;o.currentTNode=t,o.isParent=n}function _l(){return ur.lFrame.isParent}function si(){ur.lFrame.isParent=!1}function Bo(){return ur.lFrame.bindingIndex++}function $(t,n){const o=ur.lFrame;o.bindingIndex=o.bindingRootIndex=t,ze(n)}function ze(t){ur.lFrame.currentDirectiveIndex=t}function In(){return ur.lFrame.currentQueryIndex}function Pr(t){ur.lFrame.currentQueryIndex=t}function Yr(t){const n=t[Ae];return 2===n.type?n.declTNode:1===n.type?t[ii]:null}function Jr(t,n,o){if(o&Yt.SkipSelf){let u=n,p=t;for(;!(u=u.parent,null!==u||o&Yt.Host||(u=Yr(p),null===u||(p=p[zs],10&u.type))););if(null===u)return!1;n=u,t=p}const a=ur.lFrame=ai();return a.currentTNode=n,a.lView=t,!0}function Er(t){const n=ai(),o=t[Ae];ur.lFrame=n,n.currentTNode=o.firstChild,n.lView=t,n.tView=o,n.contextLView=t,n.bindingIndex=o.bindingStartIndex,n.inI18n=!1}function ai(){const t=ur.lFrame,n=null===t?null:t.child;return null===n?hi(t):n}function hi(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Zi(){const t=ur.lFrame;return ur.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Zs=Zi;function Mi(){const t=Zi();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function wi(){return ur.lFrame.selectedIndex}function mo(t){ur.lFrame.selectedIndex=t}function wr(){const t=ur.lFrame;return qs(t.tView,t.selectedIndex)}let er=!0;function vl(){return er}function Rn(t){er=t}function Ot(){return rn(Ci(),zt())}function rn(t,n){return new ei(Io(t,n))}let Oa,ei=(()=>{class n{constructor(a){this.nativeElement=a}}return n.__NG_ELEMENT_ID__=Ot,n})();function kc(t){return t instanceof ei?t.nativeElement:t}function dc(t,n){t.forEach(o=>Array.isArray(o)?dc(o,n):n(o))}function lu(t,n,o){n>=t.length?t.push(o):t.splice(n,0,o)}function Js(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function or(t,n,o){let a=ql(t,n);return a>=0?t[1|a]=o:(a=~a,function xu(t,n,o,a){let u=t.length;if(u==n)t.push(o,a);else if(1===u)t.push(a,t[0]),t[0]=o;else{for(u--,t.push(t[u-1],t[u]);u>n;)t[u]=t[u-2],u--;t[n]=o,t[n+1]=a}}(t,a,n,o)),a}function ji(t,n){const o=ql(t,n);if(o>=0)return t[1|o]}function ql(t,n){return function ir(t,n,o){let a=0,u=t.length>>o;for(;u!==a;){const p=a+(u-a>>1),I=t[p<<o];if(n===I)return p<<o;I>n?u=p:a=p+1}return~(u<<o)}(t,n,1)}function yl(){return this._results[Symbol.iterator]()}class ti{get changes(){var n;return null!==(n=this._changes)&&void 0!==n?n:this._changes=new Sr}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const o=ti.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=yl)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,o){return this._results.reduce(n,o)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,o){this.dirty=!1;const a=function Ts(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function ah(t,n,o){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++){let u=t[a],p=n[a];if(o&&(u=o(u),p=o(p)),p!==u)return!1}return!0}(this._results,a,o))&&(this._results=a,this.length=a.length,this.last=a[this.length-1],this.first=a[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){var n;this.dirty=!0,null===(n=this._onDirty)||void 0===n||n.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function El(t){return 128==(128&t.flags)}function el(t){Oa=t}function Di(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Yl(t){return{providers:t.providers||[],imports:t.imports||[]}}function Go(t){return Ou(t,P)||Ou(t,R)}function cu(t){return null!==Go(t)}function Ou(t,n){return t.hasOwnProperty(n)?t[n]:null}function w(t){return t&&(t.hasOwnProperty(M)||t.hasOwnProperty(U))?t[M]:null}const P=yt({\u0275prov:yt}),M=yt({\u0275inj:yt}),R=yt({ngInjectableDef:yt}),U=yt({ngInjectorDef:yt});class J{constructor(n,o){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Di({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const we=new J("",{providedIn:"root",factory:()=>mt}),mt="ng",fn=new J(""),wt=new J("",{providedIn:"platform",factory:()=>"unknown"}),Ti=new J("",{providedIn:"root",factory:()=>{var t;return(null===(t=function na(){if(void 0!==Oa)return Oa;if(typeof document<"u")return document;throw new Ft(210,!1)}().body)||void 0===t||null===(t=t.querySelector("[ngCspNonce]"))||void 0===t?void 0:t.getAttribute("ngCspNonce"))||null}}),ra=yt({__forward_ref__:yt});function bs(t){return t.__forward_ref__=bs,t.toString=function(){return bt(this())},t}function ar(t){return io(t)?t():t}function io(t){return"function"==typeof t&&t.hasOwnProperty(ra)&&t.__forward_ref__===bs}function du(t){return t&&!!t.\u0275providers}function Dr(t){return"string"==typeof t?t:null==t?"":String(t)}function gc(t,n){throw new Ft(-201,!1)}let Vc;function lh(){return Vc}function ps(t){const n=Vc;return Vc=t,n}function Lu(t,n,o){const a=Go(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Yt.Optional?null:void 0!==n?n:void gc()}const mc={},Dl="__NG_DI_FLAG__",fo="ngTempTokenPath",es=/\n/gm,Hi="__source";let ka;function li(t){const n=ka;return ka=t,n}function ch(t,n=Yt.Default){if(void 0===ka)throw new Ft(-203,!1);return null===ka?Lu(t,void 0,n):ka.get(t,n&Yt.Optional?null:void 0,n)}function Ji(t,n=Yt.Default){return(lh()||ch)(ar(t),n)}function di(t,n=Yt.Default){return Ji(t,Uu(n))}function Uu(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Po(t){const n=[];for(let o=0;o<t.length;o++){const a=ar(t[o]);if(Array.isArray(a)){if(0===a.length)throw new Ft(900,!1);let u,p=Yt.Default;for(let I=0;I<a.length;I++){const C=a[I],S=La(C);"number"==typeof S?-1===S?u=C.token:p|=S:u=C}n.push(Ji(u,p))}else n.push(Ji(a))}return n}function Tl(t,n){return t[Dl]=n,t.prototype[Dl]=n,t}function La(t){return t[Dl]}let pu=()=>null;function Sl(t,n,o=!1){return pu(t,n,o)}const Bs="__parameters__";function Ml(t,n,o){return Br(()=>{const a=function Ec(t){return function(...o){if(t){const a=t(...o);for(const u in a)this[u]=a[u]}}}(n);function u(...p){if(this instanceof u)return a.apply(this,p),this;const I=new u(...p);return C.annotation=I,C;function C(S,B,Q){const re=S.hasOwnProperty(Bs)?S[Bs]:Object.defineProperty(S,Bs,{value:[]})[Bs];for(;re.length<=Q;)re.push(null);return(re[Q]=re[Q]||[]).push(I),S}}return o&&(u.prototype=Object.create(o.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}const wc=Tl(Ml("Optional"),8),$c=Tl(Ml("SkipSelf"),4);function Va(t,n){return t.hasOwnProperty(Zn)?t[Zn]:null}const Pl=new J(""),ef=new J("",-1),Dc=new J("");class sa{get(n,o=mc){if(o===mc){const a=new Error(`NullInjectorError: No provider for ${bt(n)}!`);throw a.name="NullInjectorError",a}return o}}function Ua(t){return{\u0275providers:t}}function jc(...t){return{\u0275providers:Wc(0,t),\u0275fromNgModule:!0}}function Wc(t,...n){const o=[],a=new Set;let u;const p=I=>{o.push(I)};return dc(n,I=>{const C=I;Hc(C,p,[],a)&&(u||(u=[]),u.push(C))}),void 0!==u&&Wu(u,p),o}function Wu(t,n){for(let o=0;o<t.length;o++){const{ngModule:a,providers:u}=t[o];_u(u,p=>{n(p,a)})}}function Hc(t,n,o,a){if(!(t=ar(t)))return!1;let u=null,p=w(t);const I=!p&&Nt(t);if(p||I){if(I&&!I.standalone)return!1;u=t}else{const S=t.ngModule;if(p=w(S),!p)return!1;u=S}const C=a.has(u);if(I){if(C)return!1;if(a.add(u),I.dependencies){const S="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const B of S)Hc(B,n,o,a)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let B;a.add(u);try{dc(p.imports,Q=>{Hc(Q,n,o,a)&&(B||(B=[]),B.push(Q))})}finally{}void 0!==B&&Wu(B,n)}if(!C){const B=Va(u)||(()=>new u);n({provide:u,useFactory:B,deps:hr},u),n({provide:Dc,useValue:u,multi:!0},u),n({provide:Pl,useValue:()=>Ji(u),multi:!0},u)}const S=p.providers;if(null!=S&&!C){const B=t;_u(S,Q=>{n(Q,B)})}}}return u!==t&&void 0!==t.providers}function _u(t,n){for(let o of t)du(o)&&(o=o.\u0275providers),Array.isArray(o)?_u(o,n):n(o)}const qo=yt({provide:String,useValue:yt});function Jl(t){return null!==t&&"object"==typeof t&&qo in t}function xi(t){return"function"==typeof t}const zc=new J(""),ec={},aa={};let Sd;function $a(){return void 0===Sd&&(Sd=new sa),Sd}class Gs{}class Nl extends Gs{get destroyed(){return this._destroyed}constructor(n,o,a,u){super(),this.parent=o,this.source=a,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,la(n,I=>this.processProvider(I)),this.records.set(ef,wo(void 0,this)),u.has("environment")&&this.records.set(Gs,wo(void 0,this));const p=this.records.get(zc);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Dc,hr,Yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of n)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const o=li(this),a=ps(void 0);try{return n()}finally{li(o),ps(a)}}get(n,o=mc,a=Yt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Vr))return n[Vr](this);a=Uu(a);const p=li(this),I=ps(void 0);try{if(!(a&Yt.SkipSelf)){let S=this.records.get(n);if(void 0===S){const B=function zu(t){return"function"==typeof t||"object"==typeof t&&t instanceof J}(n)&&Go(n);S=B&&this.injectableDefInScope(B)?wo(Kc(n),ec):null,this.records.set(n,S)}if(null!=S)return this.hydrate(n,S)}return(a&Yt.Self?$a():this.parent).get(n,o=a&Yt.Optional&&o===mc?null:o)}catch(C){if("NullInjectorError"===C.name){if((C[fo]=C[fo]||[]).unshift(bt(n)),p)throw C;return function Co(t,n,o,a){const u=t[fo];throw n[Hi]&&u.unshift(n[Hi]),t.message=function Fa(t,n,o,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let u=bt(n);if(Array.isArray(n))u=n.map(bt).join(" -> ");else if("object"==typeof n){let p=[];for(let I in n)if(n.hasOwnProperty(I)){let C=n[I];p.push(I+":"+("string"==typeof C?JSON.stringify(C):bt(C)))}u=`{${p.join(", ")}}`}return`${o}${a?"("+a+")":""}[${u}]: ${t.replace(es,"\n  ")}`}("\n"+t.message,u,o,a),t.ngTokenPath=u,t[fo]=null,t}(C,n,"R3InjectorError",this.source)}throw C}finally{ps(I),li(p)}}resolveInjectorInitializers(){const n=li(this),o=ps(void 0);try{const u=this.get(Pl,hr,Yt.Self);for(const p of u)p()}finally{li(n),ps(o)}}toString(){const n=[],o=this.records;for(const a of o.keys())n.push(bt(a));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ft(205,!1)}processProvider(n){let o=xi(n=ar(n))?n:ar(n&&n.provide);const a=function Ol(t){return Jl(t)?wo(void 0,t.useValue):wo(Hu(t),ec)}(n);if(!xi(n)&&!0===n.multi){let u=this.records.get(o);u||(u=wo(void 0,ec,!0),u.factory=()=>Po(u.multi),this.records.set(o,u)),o=n,u.multi.push(n)}this.records.set(o,a)}hydrate(n,o){return o.value===ec&&(o.value=aa,o.value=o.factory()),"object"==typeof o.value&&o.value&&function kl(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(n){if(!n.providedIn)return!1;const o=ar(n.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(n){const o=this._onDestroyHooks.indexOf(n);-1!==o&&this._onDestroyHooks.splice(o,1)}}function Kc(t){const n=Go(t),o=null!==n?n.factory:Va(t);if(null!==o)return o;if(t instanceof J)throw new Ft(204,!1);if(t instanceof Function)return function tf(t){if(t.length>0)throw new Ft(204,!1);const o=function ku(t){return t&&(t[P]||t[R])||null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new Ft(204,!1)}function Hu(t,n,o){let a;if(xi(t)){const u=ar(t);return Va(u)||Kc(u)}if(Jl(t))a=()=>ar(t.useValue);else if(function xl(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Po(t.deps||[]));else if(function Ba(t){return!(!t||!t.useExisting)}(t))a=()=>Ji(ar(t.useExisting));else{const u=ar(t&&(t.useClass||t.provide));if(!function vu(t){return!!t.deps}(t))return Va(u)||Kc(u);a=()=>new u(...Po(t.deps))}return a}function wo(t,n,o=!1){return{factory:t,value:n,multi:o?[]:void 0}}function la(t,n){for(const o of t)Array.isArray(o)?la(o,n):o&&du(o)?la(o.\u0275providers,n):n(o)}function Ku(t,n){t instanceof Nl&&t.assertNotDestroyed();const a=li(t),u=ps(void 0);try{return n()}finally{li(a),ps(u)}}class Ga{constructor(n,o,a){this.previousValue=n,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Rd(t,n,o,a){null!==n?n.applyValueToInputSignal(n,a):t[o]=a}function Vl(){return Md}function Md(t){return t.type.prototype.ngOnChanges&&(t.setInput=Iu),mh}function mh(){const t=Pd(this),n=null==t?void 0:t.current;if(n){const o=t.previous;if(o===Or)t.previous=n;else for(let a in n)o[a]=n[a];t.current=null,this.ngOnChanges(n)}}function Iu(t,n,o,a,u){const p=this.declaredInputs[a],I=Pd(t)||function oo(t,n){return t[_h]=n}(t,{previous:Or,current:null}),C=I.current||(I.current={}),S=I.previous,B=S[p];C[p]=new Ga(B&&B.currentValue,o,S===Or),Rd(t,n,u,o)}Vl.ngInherit=!0;const _h="__ngSimpleChanges__";function Pd(t){return t[_h]||null}const ja=function(t,n,o){};function Ul(t,n){for(let B=n.directiveStart,Q=n.directiveEnd;B<Q;B++){const Be=t.data[B].type.prototype,{ngAfterContentInit:ot,ngAfterContentChecked:At,ngAfterViewInit:nn,ngAfterViewChecked:Cn,ngOnDestroy:Vn}=Be;var o,a,u,p,I,C,S;ot&&(null!==(o=t.contentHooks)&&void 0!==o?o:t.contentHooks=[]).push(-B,ot),At&&((null!==(a=t.contentHooks)&&void 0!==a?a:t.contentHooks=[]).push(B,At),(null!==(u=t.contentCheckHooks)&&void 0!==u?u:t.contentCheckHooks=[]).push(B,At)),nn&&(null!==(p=t.viewHooks)&&void 0!==p?p:t.viewHooks=[]).push(-B,nn),Cn&&((null!==(I=t.viewHooks)&&void 0!==I?I:t.viewHooks=[]).push(B,Cn),(null!==(C=t.viewCheckHooks)&&void 0!==C?C:t.viewCheckHooks=[]).push(B,Cn)),null!=Vn&&(null!==(S=t.destroyHooks)&&void 0!==S?S:t.destroyHooks=[]).push(B,Vn)}}function ms(t,n,o){ol(t,n,3,o)}function Wa(t,n,o,a){(3&t[Bt])===o&&ol(t,n,o,a)}function Bl(t,n){let o=t[Bt];(3&o)===n&&(o&=16383,o+=1,t[Bt]=o)}function ol(t,n,o,a){const p=null!=a?a:-1,I=n.length-1;let C=0;for(let S=void 0!==a?65535&t[vo]:0;S<I;S++)if("number"==typeof n[S+1]){if(C=n[S],null!=a&&C>=a)break}else n[S]<0&&(t[vo]+=65536),(C<p||-1==p)&&(Qu(t,o,n,S),t[vo]=(4294901760&t[vo])+S+2),S++}function Cu(t,n){ja(4,t,n);const o=_e(null);try{n.call(t)}finally{_e(o),ja(5,t,n)}}function Qu(t,n,o,a){const u=o[a]<0,p=o[a+1],C=t[u?-o[a]:o[a]];u?t[Bt]>>14<t[vo]>>16&&(3&t[Bt])===n&&(t[Bt]+=16384,Cu(C,p)):Cu(C,p)}const nc=-1;class Ha{constructor(n,o,a){this.factory=n,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Tr(t){return t!==nc}function rc(t){return 32767&t}function ic(t,n){let o=function Xu(t){return t>>16}(t),a=n;for(;o>0;)a=a[zs],o--;return a}let Da=!0;function bc(t){const n=Da;return Da=t,n}const Od=255,Zu=5;let Sc=0;const js={};function Ac(t,n){const o=E(t,n);if(-1!==o)return o;const a=n[Ae];a.firstCreatePass&&(t.injectorIndex=n.length,Ju(a.data,t),Ju(n,null),Ju(a.blueprint,null));const u=m(t,n),p=t.injectorIndex;if(Tr(u)){const I=rc(u),C=ic(u,n),S=C[Ae].data;for(let B=0;B<8;B++)n[p+B]=C[I+B]|S[I+B]}return n[p+8]=u,p}function Ju(t,n){t.push(0,0,0,0,0,0,0,0,n)}function E(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function m(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,a=null,u=n;for(;null!==u;){if(a=Du(u),null===a)return nc;if(o++,u=u[zs],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return nc}function _(t,n,o){!function Yc(t,n,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty($r)&&(a=o[$r]),null==a&&(a=o[$r]=Sc++);const u=a&Od;n.data[t+(u>>Zu)]|=1<<u}(t,n,o)}function W(t,n,o){if(o&Yt.Optional||void 0!==t)return t;gc()}function ie(t,n,o,a){if(o&Yt.Optional&&void 0===a&&(a=null),!(o&(Yt.Self|Yt.Host))){const u=t[Fi],p=ps(void 0);try{return u?u.get(n,a,o&Yt.Optional):Lu(n,a,o&Yt.Optional)}finally{ps(p)}}return W(a,0,o)}function rt(t,n,o,a=Yt.Default,u){if(null!==t){if(2048&n[Bt]&&!(a&Yt.Self)){const I=function kd(t,n,o,a,u){let p=t,I=n;for(;null!==p&&null!==I&&2048&I[Bt]&&!(512&I[Bt]);){const C=Dt(p,I,o,a|Yt.Self,js);if(C!==js)return C;let S=p.parent;if(!S){const B=I[Ao];if(B){const Q=B.get(o,js,a);if(Q!==js)return Q}S=Du(I),I=I[zs]}p=S}return u}(t,n,o,a,js);if(I!==js)return I}const p=Dt(t,n,o,a,js);if(p!==js)return p}return ie(n,o,a,u)}function Dt(t,n,o,a,u){const p=function Hn(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty($r)?t[$r]:void 0;return"number"==typeof n?n>=0?n&Od:Rc:n}(o);if("function"==typeof p){if(!Jr(n,t,a))return a&Yt.Host?W(u,0,a):ie(n,o,a,u);try{let I;if(I=p(a),null!=I||a&Yt.Optional)return I;gc()}finally{Zs()}}else if("number"==typeof p){let I=null,C=E(t,n),S=nc,B=a&Yt.Host?n[yi][ii]:null;for((-1===C||a&Yt.SkipSelf)&&(S=-1===C?m(t,n):n[C+8],S!==nc&&Ni(a,!1)?(I=n[Ae],C=rc(S),n=ic(S,n)):C=-1);-1!==C;){const Q=n[Ae];if(_o(p,C,Q.data)){const re=en(C,n,o,I,a,B);if(re!==js)return re}S=n[C+8],S!==nc&&Ni(a,n[Ae].data[C+8]===B)&&_o(p,C,n)?(I=Q,C=rc(S),n=ic(S,n)):C=-1}}return u}function en(t,n,o,a,u,p){const I=n[Ae],C=I.data[t+8],Q=On(C,I,o,null==a?Lo(C)&&Da:a!=I&&0!=(3&C.type),u&Yt.Host&&p===C);return null!==Q?Un(n,I,Q,C):js}function On(t,n,o,a,u){const p=t.providerIndexes,I=n.data,C=1048575&p,S=t.directiveStart,Q=p>>20,Be=u?C+Q:t.directiveEnd;for(let ot=a?C:C+Q;ot<Be;ot++){const At=I[ot];if(ot<S&&o===At||ot>=S&&At.type===o)return ot}if(u){const ot=I[S];if(ot&&Ei(ot)&&ot.type===o)return S}return null}function Un(t,n,o,a){let u=t[o];const p=n.data;if(function xd(t){return t instanceof Ha}(u)){const I=u;I.resolving&&function qh(t,n){throw n&&n.join(" > "),new Ft(-200,t)}(function ui(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Dr(t)}(p[o]));const C=bc(I.canSeeViewProviders);I.resolving=!0;const B=I.injectImpl?ps(I.injectImpl):null;Jr(t,a,Yt.Default);try{u=t[o]=I.factory(void 0,p,t,a),n.firstCreatePass&&o>=a.directiveStart&&function Eu(t,n,o){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:p}=n.type.prototype;if(a){var I,C;const re=Md(n);(null!==(I=o.preOrderHooks)&&void 0!==I?I:o.preOrderHooks=[]).push(t,re),(null!==(C=o.preOrderCheckHooks)&&void 0!==C?C:o.preOrderCheckHooks=[]).push(t,re)}var S,B,Q;u&&(null!==(S=o.preOrderHooks)&&void 0!==S?S:o.preOrderHooks=[]).push(0-t,u),p&&((null!==(B=o.preOrderHooks)&&void 0!==B?B:o.preOrderHooks=[]).push(t,p),(null!==(Q=o.preOrderCheckHooks)&&void 0!==Q?Q:o.preOrderCheckHooks=[]).push(t,p))}(o,p[o],n)}finally{null!==B&&ps(B),bc(C),I.resolving=!1,Zs()}}return u}function _o(t,n,o){return!!(o[n+(t>>Zu)]&1<<t)}function Ni(t,n){return!(t&Yt.Self||t&Yt.Host&&n)}class Do{constructor(n,o){this._tNode=n,this._lView=o}get(n,o,a){return rt(this._tNode,this._lView,n,Uu(a),o)}}function Rc(){return new Do(Ci(),zt())}function ca(t){return Br(()=>{const n=t.prototype.constructor,o=n[Zn]||Mc(n),a=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==a;){const p=u[Zn]||Mc(u);if(p&&p!==o)return p;u=Object.getPrototypeOf(u)}return p=>new p})}function Mc(t){return io(t)?()=>{const n=Mc(ar(t));return n&&n()}:Va(t)}function Du(t){const n=t[Ae],o=n.type;return 2===o?n.declTNode:1===o?t[ii]:null}function Qc(t){return function D(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const o=t.attrs;if(o){const a=o.length;let u=0;for(;u<a;){const p=o[u];if(Hr(p))break;if(0===p)u+=2;else if("number"==typeof p)for(u++;u<a&&"string"==typeof o[u];)u++;else{if(p===n)return o[u+1];u+=2}}}return null}(Ci(),t)}function g(t,n=null,o=null,a){const u=d(t,n,o,a);return u.resolveInjectorInitializers(),u}function d(t,n=null,o=null,a,u=new Set){const p=[o||hr,jc(t)];return a=a||("object"==typeof t?void 0:bt(t)),new Nl(p,n||$a(),a||null,u)}let h=(()=>{var t;class n{static create(a,u){if(Array.isArray(a))return g({name:""},u,a,"");{var p;const I=null!==(p=a.name)&&void 0!==p?p:"";return g({name:I},a.parent,a.providers,I)}}}return(t=n).THROW_IF_NOT_FOUND=mc,t.NULL=new sa,t.\u0275prov=Di({token:t,providedIn:"any",factory:()=>Ji(ef)}),t.__NG_ELEMENT_ID__=-1,n})();function O(t){return t.ngOriginalError}class j{constructor(){this._console=console}handleError(n){const o=this._findOriginalError(n);this._console.error("ERROR",n),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(n){let o=n&&O(n);for(;o&&O(o);)o=O(o);return o||null}}const de=new J("",{providedIn:"root",factory:()=>di(j).handleError.bind(void 0)}),Vt=new J("",{providedIn:"root",factory:()=>!1});let al;function zg(t){var n;return(null===(n=function $l(){if(void 0===al&&(al=null,bn.trustedTypes))try{al=bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return al}())||void 0===n?void 0:n.createScriptURL(t))||t}class Kg{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vn})`}}function nd(t){return t instanceof Kg?t.changingThisBreaksApplicationSecurity:t}function cf(t,n){const o=function uI(t){return t instanceof Kg&&t.getTypeName()||null}(t);if(null!=o&&o!==n){if("ResourceURL"===o&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${o} (see ${vn})`)}return o===n}const Z_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Eh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Eh||{});function Su(t){const n=ff();return n?n.sanitize(Eh.URL,t)||"":cf(t,"URL")?nd(t):function uf(t){return(t=String(t)).match(Z_)?t:"unsafe:"+t}(Dr(t))}function em(t){const n=ff();if(n)return zg(n.sanitize(Eh.RESOURCE_URL,t)||"");if(cf(t,"ResourceURL"))return zg(nd(t));throw new Ft(904,!1)}function iv(t,n,o){return function rv(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?em:Su}(n,o)(t)}function ff(){const t=zt();return t&&t[co].sanitizer}const ov=/^>|^->|<!--|-->|--!>|<!-$/g,yI=/(<|>)/g,sv="\u200b$1\u200b";const Ep=new Map;let EI=0;const im="__ngContext__";function xs(t,n){Ai(n)?(t[im]=n[Qi],function nm(t){Ep.set(t[Qi],t)}(n)):t[im]=n}function cl(t){return t instanceof Function?t():t}var Ef=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ef||{});let wh;function Cf(t,n){return wh(t,n)}function Dh(t,n,o,a,u){if(null!=a){let p,I=!1;Vi(a)?p=a:Ai(a)&&(I=!0,a=a[le]);const C=Fr(a);0===t&&null!==o?null==u?Th(n,o,C):Zc(n,o,C,u||null,!0):1===t&&null!==o?Zc(n,o,C,u||null,!0):2===t?function Sf(t,n,o){const a=bh(t,n);a&&function vv(t,n,o,a){t.removeChild(n,o,a)}(t,a,n,o)}(n,C,I):3===t&&n.destroyNode(C),null!=p&&function Ev(t,n,o,a,u){const p=o[Ii];p!==Fr(o)&&Dh(n,t,a,p,u);for(let C=uo;C<o.length;C++){const S=o[C];Up(S[Ae],S,t,n,a,p)}}(n,t,p,o,u)}}function xp(t,n){return t.createComment(function id(t){return t.replace(ov,n=>n.replace(yI,sv))}(n))}function Hd(t,n,o){return t.createElement(n,o)}function fm(t,n){Up(t,n,n[Yn],2,null,null)}function _v(t,n){const o=t[eo],a=o.indexOf(n);o.splice(a,1)}function zd(t,n){if(t.length<=uo)return;const o=uo+n,a=t[o];if(a){const u=a[ys];null!==u&&u!==t&&_v(u,a),n>0&&(t[o-1][Si]=a[Si]);const p=Js(t,uo+n);!function wf(t,n){fm(t,n),n[le]=null,n[ii]=null}(a[Ae],a);const I=p[$i];null!==I&&I.detachView(p[Ae]),a[rr]=null,a[Si]=null,a[Bt]&=-129}return a}function Np(t,n){if(!(256&n[Bt])){const o=n[Yn];o.destroyNode&&Up(t,n,o,3,null,null),function MI(t){let n=t[is];if(!n)return pm(t[Ae],t);for(;n;){let o=null;if(Ai(n))o=n[is];else{const a=n[uo];a&&(o=a)}if(!o){for(;n&&!n[Si]&&n!==t;)Ai(n)&&pm(n[Ae],n),n=n[rr];null===n&&(n=t),Ai(n)&&pm(n[Ae],n),o=n&&n[Si]}n=o}}(n)}}function pm(t,n){if(!(256&n[Bt])){n[Bt]&=-129,n[Bt]|=256,n[Ro]&&function ve(t){if(ae(t),at(t))for(let n=0;n<t.producerNode.length;n++)et(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(n[Ro]),function gm(t,n){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let a=0;a<o.length;a+=2){const u=n[o[a]];if(!(u instanceof Ha)){const p=o[a+1];if(Array.isArray(p))for(let I=0;I<p.length;I+=2){const C=u[p[I]],S=p[I+1];ja(4,C,S);try{S.call(C)}finally{ja(5,C,S)}}else{ja(4,u,p);try{p.call(u)}finally{ja(5,u,p)}}}}}(t,n),function Df(t,n){const o=t.cleanup,a=n[Yo];if(null!==o)for(let p=0;p<o.length-1;p+=2)if("string"==typeof o[p]){const I=o[p+3];I>=0?a[I]():a[-I].unsubscribe(),p+=2}else o[p].call(a[o[p+1]]);null!==a&&(n[Yo]=null);const u=n[_r];if(null!==u){n[_r]=null;for(let p=0;p<u.length;p++)(0,u[p])()}}(t,n),1===n[Ae].type&&n[Yn].destroy();const o=n[ys];if(null!==o&&Vi(n[rr])){o!==n[rr]&&_v(o,n);const a=n[$i];null!==a&&a.detachView(t)}!function wI(t){Ep.delete(t[Qi])}(n)}}function sd(t,n,o){return function Op(t,n,o){let a=n;for(;null!==a&&40&a.type;)a=(n=a).parent;if(null===a)return o[le];{const{componentOffset:u}=a;if(u>-1){const{encapsulation:p}=t.data[a.directiveStart+u];if(p===Ar.None||p===Ar.Emulated)return null}return Io(a,o)}}(t,n.parent,o)}function Zc(t,n,o,a,u){t.insertBefore(n,o,a,u)}function Th(t,n,o){t.appendChild(n,o)}function kp(t,n,o,a,u){null!==a?Zc(t,n,o,a,u):Th(t,n,o)}function bh(t,n){return t.parentNode(n)}function mm(t,n,o){return Lp(t,n,o)}let _m,Lp=function Iv(t,n,o){return 40&t.type?Io(t,o):null};function Vp(t,n,o,a){const u=sd(t,a,n),p=n[Yn],C=mm(a.parent||n[ii],a,n);if(null!=u)if(Array.isArray(o))for(let S=0;S<o.length;S++)kp(p,u,o[S],C,!1);else kp(p,u,o,C,!1);void 0!==_m&&_m(p,a,n,o,u)}function Kd(t,n){if(null!==n){const o=n.type;if(3&o)return Io(n,t);if(4&o)return bf(-1,t[n.index]);if(8&o){const a=n.child;if(null!==a)return Kd(t,a);{const u=t[n.index];return Vi(u)?bf(-1,u):Fr(u)}}if(32&o)return Cf(n,t)()||Fr(t[n.index]);{const a=Tf(t,n);return null!==a?Array.isArray(a)?a[0]:Kd(Xs(t[yi]),a):Kd(t,n.next)}}return null}function Tf(t,n){return null!==n?t[yi][ii].projection[n.projection]:null}function bf(t,n){const o=uo+t+1;if(o<n.length){const a=n[o],u=a[Ae].firstChild;if(null!==u)return Kd(a,u)}return n[Ii]}function Af(t,n,o,a,u,p,I){for(;null!=o;){const C=a[o.index],S=o.type;if(I&&0===n&&(C&&xs(Fr(C),a),o.flags|=2),32!=(32&o.flags))if(8&S)Af(t,n,o.child,a,u,p,!1),Dh(n,t,u,C,p);else if(32&S){const B=Cf(o,a);let Q;for(;Q=B();)Dh(n,t,u,Q,p);Dh(n,t,u,C,p)}else 16&S?vm(t,n,a,o,u,p):Dh(n,t,u,C,p);o=I?o.projectionNext:o.next}}function Up(t,n,o,a,u,p){Af(o,a,t.firstChild,n,u,p,!1)}function vm(t,n,o,a,u,p){const I=o[yi],S=I[ii].projection[a.projection];if(Array.isArray(S))for(let B=0;B<S.length;B++)Dh(n,t,u,S[B],p);else{let B=S;const Q=I[rr];El(a)&&(B.flags|=128),Af(t,n,B,Q,u,p,!0)}}function Cv(t,n,o){""===o?t.removeAttribute(n,"class"):t.setAttribute(n,"class",o)}function Bp(t,n,o){const{mergedAttrs:a,classes:u,styles:p}=o;null!==a&&ao(t,n,a),null!==u&&Cv(t,n,u),null!==p&&function ym(t,n,o){t.setAttribute(n,"style",o)}(t,n,p)}const Qr={};function $p(t=1){wv(vr(),zt(),wi()+t,!1)}function wv(t,n,o,a){if(!a)if(3==(3&n[Bt])){const p=t.preOrderCheckHooks;null!==p&&ms(n,p,o)}else{const p=t.preOrderHooks;null!==p&&Wa(n,p,0,o)}mo(o)}function ld(t,n=Yt.Default){const o=zt();return null===o?Ji(t,n):rt(Ci(),o,ar(t),n)}function Im(){throw new Error("invalid")}function Gp(t,n,o,a,u,p){const I=_e(null);try{let C=null;u&Gr.SignalBased&&(C=n[a][ge]),null!==C&&void 0!==C.transformFn&&(p=C.transformFn(p)),u&Gr.HasDecoratorInputTransform&&(p=t.inputTransforms[a].call(n,p)),null!==t.setInput?t.setInput(n,C,p,o,a):Rd(n,C,a,p)}finally{_e(I)}}function Sh(t,n,o,a,u,p,I,C,S,B,Q){const re=n.blueprint.slice();return re[le]=u,re[Bt]=204|a,(null!==B||t&&2048&t[Bt])&&(re[Bt]|=2048),Zo(re),re[rr]=re[zs]=t,re[oi]=o,re[co]=I||t&&t[co],re[Yn]=C||t&&t[Yn],re[Fi]=S||t&&t[Fi]||null,re[ii]=p,re[Qi]=function CI(){return EI++}(),re[Zr]=Q,re[Ao]=B,re[yi]=2==n.type?t[yi]:re,re}function Nc(t,n,o,a,u){let p=t.data[n];if(null===p)p=function Jc(t,n,o,a,u){const p=Ea(),I=_l(),S=t.data[n]=function Sm(t,n,o,a,u,p){let I=n?n.injectorIndex:-1,C=0;return fs()&&(C|=128),{type:o,index:a,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:u,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?p:p&&p.parent,o,n,a,u);return null===t.firstChild&&(t.firstChild=S),null!==p&&(I?null==p.child&&null!==S.parent&&(p.child=S):null===p.next&&(p.next=S,S.prev=p)),S}(t,n,o,a,u),function G(){return ur.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=o,p.value=a,p.attrs=u;const I=function Eo(){const t=ur.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();p.injectorIndex=null===I?-1:I.injectorIndex}return Uo(p,!0),p}function Yd(t,n,o,a){if(0===o)return-1;const u=n.length;for(let p=0;p<o;p++)n.push(a),t.blueprint.push(a),t.data.push(null);return u}function Qd(t,n,o,a,u){const p=wi(),I=2&a;try{mo(-1),I&&n.length>cr&&wv(t,n,cr,!1),ja(I?2:0,u),o(a,u)}finally{mo(p),ja(I?3:1,u)}}function cd(t,n,o){if(ga(n)){const a=_e(null);try{const p=n.directiveEnd;for(let I=n.directiveStart;I<p;I++){const C=t.data[I];C.contentQueries&&C.contentQueries(1,o[I],I)}}finally{_e(a)}}}function jp(t,n,o){ya()&&(function Pm(t,n,o,a){const u=o.directiveStart,p=o.directiveEnd;Lo(o)&&function BI(t,n,o){const a=Io(n,t),u=Dv(o);let I=16;o.signals?I=4096:o.onPush&&(I=64);const C=Ah(t,Sh(t,u,null,I,a,n,null,t[co].rendererFactory.createRenderer(a,o),null,null,null));t[n.index]=C}(n,o,t.data[u+o.componentOffset]),t.firstCreatePass||Ac(o,n),xs(a,n);const I=o.initialInputs;for(let C=u;C<p;C++){const S=t.data[C],B=Un(n,t,C,o);xs(B,n),null!==I&&Fm(0,C-u,B,S,0,I),Ei(S)&&(Xi(o.index,n)[oi]=Un(n,t,C,o))}}(t,n,o,Io(o,n)),64==(64&o.flags)&&Hp(t,n,o))}function ud(t,n,o=Io){const a=n.localNames;if(null!==a){let u=n.index+1;for(let p=0;p<a.length;p+=2){const I=a[p+1],C=-1===I?o(n,t):t[I];t[u++]=C}}}function Dv(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Cm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function Cm(t,n,o,a,u,p,I,C,S,B,Q){const re=cr+a,Be=re+u,ot=function wm(t,n){const o=[];for(let a=0;a<n;a++)o.push(a<t?null:Qr);return o}(re,Be),At="function"==typeof B?B():B;return ot[Ae]={type:t,blueprint:ot,template:o,queries:null,viewQuery:C,declTNode:n,data:ot.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:Be,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:S,consts:At,incompleteFirstPass:!1,ssrId:Q}}let Wp=()=>null;function Tv(t,n,o,a,u){for(let I in n){var p;if(!n.hasOwnProperty(I))continue;const C=n[I];if(void 0===C)continue;null!==(p=a)&&void 0!==p||(a={});let S,B=Gr.None;Array.isArray(C)?(S=C[0],B=C[1]):S=C;let Q=I;if(null!==u){if(!u.hasOwnProperty(I))continue;Q=u[I]}0===t?Am(a,o,Q,S,B):Am(a,o,Q,S)}return a}function Am(t,n,o,a,u){let p;t.hasOwnProperty(o)?(p=t[o]).push(n,a):p=t[o]=[n,a],void 0!==u&&p.push(u)}function Ka(t,n,o,a,u,p,I,C){const S=Io(n,o);let Q,B=n.inputs;!C&&null!=B&&(Q=B[a])?(Mf(t,o,Q,a,u),Lo(n)&&function Sv(t,n){const o=Xi(n,t);16&o[Bt]||(o[Bt]|=64)}(o,n.index)):3&n.type&&(a=function bv(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),u=null!=I?I(u,n.value||"",a):u,p.setProperty(S,a,u))}function Rm(t,n,o,a){if(ya()){const u=null===a?null:{"":-1},p=function xm(t,n){const o=t.directiveRegistry;let a=null,u=null;if(o)for(let I=0;I<o.length;I++){const C=o[I];if(jt(n,C.selectors,!1))if(a||(a=[]),Ei(C))if(null!==C.findHostDirectiveDefs){const S=[];u=u||new Map,C.findHostDirectiveDefs(C,S,u),a.unshift(...S,C),Nm(t,n,S.length)}else a.unshift(C),Nm(t,n,0);else{var p;u=u||new Map,null===(p=C.findHostDirectiveDefs)||void 0===p||p.call(C,C,a,u),a.push(C)}}return null===a?null:[a,u]}(t,o);let I,C;null===p?I=C=null:[I,C]=p,null!==I&&Rv(t,n,o,I,u,C),u&&function Om(t,n,o){if(n){const a=t.localNames=[];for(let u=0;u<n.length;u+=2){const p=o[n[u+1]];if(null==p)throw new Ft(-301,!1);a.push(n[u],p)}}}(o,a,u)}o.mergedAttrs=pi(o.mergedAttrs,o.attrs)}function Rv(t,n,o,a,u,p){for(let re=0;re<a.length;re++)_(Ac(o,n),t,a[re].type);!function km(t,n,o){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+o,t.providerIndexes=n}(o,t.data.length,a.length);for(let re=0;re<a.length;re++){const Be=a[re];Be.providersResolver&&Be.providersResolver(Be)}let I=!1,C=!1,S=Yd(t,n,a.length,null);for(let re=0;re<a.length;re++){const Be=a[re];o.mergedAttrs=pi(o.mergedAttrs,Be.hostAttrs),Pv(t,o,n,S,Be),Mv(S,Be,u),null!==Be.contentQueries&&(o.flags|=4),(null!==Be.hostBindings||null!==Be.hostAttrs||0!==Be.hostVars)&&(o.flags|=64);const ot=Be.type.prototype;var B,Q;!I&&(ot.ngOnChanges||ot.ngOnInit||ot.ngDoCheck)&&((null!==(B=t.preOrderHooks)&&void 0!==B?B:t.preOrderHooks=[]).push(o.index),I=!0),C||!ot.ngOnChanges&&!ot.ngDoCheck||((null!==(Q=t.preOrderCheckHooks)&&void 0!==Q?Q:t.preOrderCheckHooks=[]).push(o.index),C=!0),S++}!function FI(t,n,o){const u=n.directiveEnd,p=t.data,I=n.attrs,C=[];let S=null,B=null;for(let Q=n.directiveStart;Q<u;Q++){const re=p[Q],Be=o?o.get(re):null,At=Be?Be.outputs:null;S=Tv(0,re.inputs,Q,S,Be?Be.inputs:null),B=Tv(1,re.outputs,Q,B,At);const nn=null===S||null===I||Pe(n)?null:$I(S,Q,I);C.push(nn)}null!==S&&(S.hasOwnProperty("class")&&(n.flags|=8),S.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=C,n.inputs=S,n.outputs=B}(t,o,p)}function Hp(t,n,o){const a=o.directiveStart,u=o.directiveEnd,p=o.index,I=function pe(){return ur.lFrame.currentDirectiveIndex}();try{mo(p);for(let C=a;C<u;C++){const S=t.data[C],B=n[C];ze(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&UI(S,B)}}finally{mo(-1),ze(I)}}function UI(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Nm(t,n,o){var a;n.componentOffset=o,(null!==(a=t.components)&&void 0!==a?a:t.components=[]).push(n.index)}function Mv(t,n,o){if(o){if(n.exportAs)for(let a=0;a<n.exportAs.length;a++)o[n.exportAs[a]]=t;Ei(n)&&(o[""]=t)}}function Pv(t,n,o,a,u){t.data[a]=u;const p=u.factory||(u.factory=Va(u.type)),I=new Ha(p,Ei(u),ld);t.blueprint[a]=I,o[a]=I,function VI(t,n,o,a,u){const p=u.hostBindings;if(p){let I=t.hostBindingOpCodes;null===I&&(I=t.hostBindingOpCodes=[]);const C=~n.index;(function Mm(t){let n=t.length;for(;n>0;){const o=t[--n];if("number"==typeof o&&o<0)return o}return 0})(I)!=C&&I.push(C),I.push(o,a,p)}}(t,n,a,Yd(t,o,u.hostVars,Qr),u)}function sc(t,n,o,a,u,p){const I=Io(t,n);!function Lm(t,n,o,a,u,p,I){if(null==p)t.removeAttribute(n,u,o);else{const C=null==I?Dr(p):I(p,a||"",u);t.setAttribute(n,u,C,o)}}(n[Yn],I,p,t.value,o,a,u)}function Fm(t,n,o,a,u,p){const I=p[n];if(null!==I)for(let C=0;C<I.length;)Gp(a,o,I[C++],I[C++],I[C++],I[C++])}function $I(t,n,o){let a=null,u=0;for(;u<o.length;){const p=o[u];if(0!==p)if(5!==p){if("number"==typeof p)break;if(t.hasOwnProperty(p)){null===a&&(a=[]);const I=t[p];for(let C=0;C<I.length;C+=3)if(I[C]===n){a.push(p,I[C+1],I[C+2],o[u+1]);break}}u+=2}else u+=2;else u+=4}return a}function zp(t,n,o,a){return[t,!0,0,n,null,a,null,o,null,null]}function xv(t,n){const o=t.contentQueries;if(null!==o){const a=_e(null);try{for(let u=0;u<o.length;u+=2){const I=o[u+1];if(-1!==I){const C=t.data[I];Pr(o[u]),C.contentQueries(2,n[I],I)}}}finally{_e(a)}}}function Ah(t,n){return t[is]?t[vs][Si]=n:t[is]=n,t[vs]=n,n}function Rf(t,n,o){Pr(0);const a=_e(null);try{n(t,o)}finally{_e(a)}}function Xd(t){return t[Yo]||(t[Yo]=[])}function Vm(t){return t.cleanup||(t.cleanup=[])}function qp(t,n){const o=t[Fi],a=o?o.get(j,null):null;a&&a.handleError(n)}function Mf(t,n,o,a,u){for(let p=0;p<o.length;){const I=o[p++],C=o[p++],S=o[p++];Gp(t.data[I],n[I],a,C,S,u)}}function Um(t,n){const o=Xi(n,t),a=o[Ae];!function GI(t,n){for(let o=n.length;o<t.blueprint.length;o++)n.push(t.blueprint[o])}(a,o);const u=o[le];null!==u&&null===o[Zr]&&(o[Zr]=Sl(u,o[Fi])),Pf(a,o,o[oi])}function Pf(t,n,o){Er(n);try{var a;const u=t.viewQuery;null!==u&&Rf(1,u,o);const p=t.template;null!==p&&Qd(t,n,p,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),null===(a=n[$i])||void 0===a||a.finishViewCreation(t),t.staticContentQueries&&xv(t,n),t.staticViewQueries&&Rf(2,t.viewQuery,o);const I=t.components;null!==I&&function jI(t,n){for(let o=0;o<n.length;o++)Um(t,n[o])}(n,I)}catch(u){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),u}finally{n[Bt]&=-5,Mi()}}function Rh(t,n){return!n||null===n.firstChild||El(t)}function Zd(t,n,o,a=!0){const u=n[Ae];if(function PI(t,n,o,a){const u=uo+a,p=o.length;a>0&&(o[u-1][Si]=n),a<p-uo?(n[Si]=o[u],lu(o,uo+a,n)):(o.push(n),n[Si]=null),n[rr]=o;const I=n[ys];null!==I&&o!==I&&function xI(t,n){const o=t[eo];n[yi]!==n[rr][rr][yi]&&(t[Bt]|=os.HasTransplantedViews),null===o?t[eo]=[n]:o.push(n)}(I,n);const C=n[$i];null!==C&&C.insertView(t),gl(n),n[Bt]|=128}(u,n,t,o),a){const I=bf(o,t),C=n[Yn],S=bh(C,t[Ii]);null!==S&&function hm(t,n,o,a,u,p){a[le]=u,a[ii]=n,Up(t,a,o,1,u,p)}(u,t[ii],C,n,S,I)}const p=n[Zr];null!==p&&null!==p.firstChild&&(p.firstChild=null)}function Jd(t,n,o,a,u=!1){for(;null!==o;){const p=n[o.index];null!==p&&a.push(Fr(p)),Vi(p)&&Ov(p,a);const I=o.type;if(8&I)Jd(t,n,o.child,a);else if(32&I){const C=Cf(o,n);let S;for(;S=C();)a.push(S)}else if(16&I){const C=Tf(n,o);if(Array.isArray(C))a.push(...C);else{const S=Xs(n[yi]);Jd(S[Ae],S,C,a,!0)}}o=u?o.projectionNext:o.next}return a}function Ov(t,n){for(let o=uo;o<t.length;o++){const a=t[o],u=a[Ae].firstChild;null!==u&&Jd(a[Ae],a,u,n)}t[Ii]!==t[le]&&n.push(t[Ii])}let Qp=[];const WI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{_a(t.lView)},consumerOnSignalRead(){this.lView[Ro]=this}};function Fv(t){return Zp(t[is])}function Xp(t){return Zp(t[Si])}function Zp(t){for(;null!==t&&!Vi(t);)t=t[Si];return t}function eg(t,n=!0,o=0){const a=t[co],u=a.rendererFactory;var I;null===(I=u.begin)||void 0===I||I.call(u);try{!function Mh(t,n){Wm(t,n);let o=0;for(;Jo(t);){if(100===o)throw new Ft(103,!1);o++,Wm(t,1)}}(t,o)}catch(B){throw n&&qp(t,B),B}finally{var C,S;null===(C=u.end)||void 0===C||C.call(u),null===(S=a.inlineEffectRunner)||void 0===S||S.flush()}}function jm(t,n,o,a){var u;const p=n[Bt];if(256==(256&p))return;null===(u=n[co].inlineEffectRunner)||void 0===u||u.flush(),Er(n);let C=null,S=null;(function Vv(t){return 2!==t.type})(t)&&(S=function kv(t){var n;return null!==(n=t[Ro])&&void 0!==n?n:function $m(t){var n;const o=null!==(n=Qp.pop())&&void 0!==n?n:Object.create(WI);return o.lView=t,o}(t)}(n),C=function Ve(t){return t&&(t.nextProducerIndex=0),_e(t)}(S));try{Zo(n),function ds(t){return ur.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&Qd(t,n,o,2,a);const B=3==(3&p);if(B){const Be=t.preOrderCheckHooks;null!==Be&&ms(n,Be,null)}else{const Be=t.preOrderHooks;null!==Be&&Wa(n,Be,0,null),Bl(n,0)}if(function Uv(t){for(let n=Fv(t);null!==n;n=Xp(n)){if(!(n[Bt]&os.HasTransplantedViews))continue;const o=n[eo];for(let a=0;a<o.length;a++){Fs(o[a])}}}(n),eh(n,0),null!==t.contentQueries&&xv(t,n),B){const Be=t.contentCheckHooks;null!==Be&&ms(n,Be)}else{const Be=t.contentHooks;null!==Be&&Wa(n,Be,1),Bl(n,1)}!function Em(t,n){const o=t.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const u=o[a];if(u<0)mo(~u);else{const p=u,I=o[++a],C=o[++a];$(I,p),C(2,n[p])}}}finally{mo(-1)}}(t,n);const Q=t.components;null!==Q&&$v(n,Q,0);const re=t.viewQuery;if(null!==re&&Rf(2,re,a),B){const Be=t.viewCheckHooks;null!==Be&&ms(n,Be)}else{const Be=t.viewHooks;null!==Be&&Wa(n,Be,2),Bl(n,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[Lr]){for(const Be of n[Lr])Be();n[Lr]=null}n[Bt]&=-73}catch(B){throw _a(n),B}finally{null!==S&&(function $e(t,n){if(_e(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(at(t))for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)et(t.producerNode[o],t.producerIndexOfThis[o]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(S,C),function Lv(t){t.lView[Ro]!==t&&(t.lView=null,Qp.push(t))}(S)),Mi()}}function eh(t,n){for(let o=Fv(t);null!==o;o=Xp(o))for(let a=uo;a<o.length;a++)Bv(o[a],n)}function tg(t,n,o){Bv(Xi(n,t),o)}function Bv(t,n){xa(t)&&Wm(t,n)}function Wm(t,n){const a=t[Ae],u=t[Bt],p=t[Ro];let I=!!(0===n&&16&u);if(I||(I=!!(64&u&&0===n)),I||(I=!!(1024&u)),I||(I=!(null==p||!p.dirty||!pt(p))),p&&(p.dirty=!1),t[Bt]&=-9217,I)jm(a,t,a.template,t[oi]);else if(8192&u){eh(t,1);const C=a.components;null!==C&&$v(t,C,1)}}function $v(t,n,o){for(let a=0;a<n.length;a++)tg(t,n[a],o)}function Nf(t){var n;for(null===(n=t[co].changeDetectionScheduler)||void 0===n||n.notify();t;){t[Bt]|=64;const o=Xs(t);if(to(t)&&!o)return t;t=o}return null}class dd{get rootNodes(){const n=this._lView,o=n[Ae];return Jd(o,n,o.firstChild,[])}constructor(n,o,a=!0){this._lView=n,this._cdRefInjectingView=o,this.notifyErrorHandler=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[oi]}set context(n){this._lView[oi]=n}get destroyed(){return 256==(256&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[rr];if(Vi(n)){const o=n[8],a=o?o.indexOf(this):-1;a>-1&&(zd(n,a),Js(o,a))}this._attachedToViewContainer=!1}Np(this._lView[Ae],this._lView)}onDestroy(n){Qa(this._lView,n)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-129}reattach(){gl(this._lView),this._lView[Bt]|=128}detectChanges(){this._lView[Bt]|=1024,eg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ft(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,fm(this._lView[Ae],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ft(902,!1);this._appRef=n,gl(this._lView)}}let th=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gv,n})();const Hm=th,zm=class extends Hm{constructor(n,o,a){super(),this._declarationLView=n,this._declarationTContainer=o,this.elementRef=a}get ssrId(){var n;return(null===(n=this._declarationTContainer.tView)||void 0===n?void 0:n.ssrId)||null}createEmbeddedView(n,o){return this.createEmbeddedViewImpl(n,o)}createEmbeddedViewImpl(n,o,a){const u=function xf(t,n,o,a){var u,p;const I=n.tView,B=Sh(t,I,o,4096&t[Bt]?4096:16,null,n,null,null,null,null!==(u=null==a?void 0:a.injector)&&void 0!==u?u:null,null!==(p=null==a?void 0:a.dehydratedView)&&void 0!==p?p:null);B[ys]=t[n.index];const re=t[$i];return null!==re&&(B[$i]=re.createEmbeddedView(I)),Pf(I,B,o),B}(this._declarationLView,this._declarationTContainer,n,{injector:o,dehydratedView:a});return new dd(u)}};function Gv(){return Ph(Ci(),zt())}function Ph(t,n){return 4&t.type?new zm(n,t,rn(t,n)):null}class To{}class rC{}class ZI{}class JI{resolveComponentFactory(n){throw function rs(t){const n=Error(`No component factory found for ${bt(t)}.`);return n.ngComponent=t,n}(n)}}let $f=(()=>{class n{}return n.NULL=new JI,n})();class ny{}let eE=(()=>{class n{constructor(){this.destroyNode=null}}return n.__NG_ELEMENT_ID__=()=>function tE(){const t=zt(),o=Xi(Ci().index,t);return(Ai(o)?o:t)[Yn]}(),n})(),nE=(()=>{var t;class n{}return(t=n).\u0275prov=Di({token:t,providedIn:"root",factory:()=>null}),n})();const ry={};function nu(t){return function iy(t){return"function"==typeof t&&void 0!==t[ge]}(t)&&"function"==typeof t.set}function sC(t){const n=_e(null);try{return t()}finally{_e(n)}}function nh(t){return!!ag(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ag(t){return null!==t&&("function"==typeof t||"object"==typeof t)}class e_{constructor(){}supports(n){return nh(n)}create(n){return new aE(n)}}const lg=(t,n)=>n;class aE{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||lg}forEachItem(n){let o;for(o=this._itHead;null!==o;o=o._next)n(o)}forEachOperation(n){let o=this._itHead,a=this._removalsHead,u=0,p=null;for(;o||a;){const I=!a||o&&o.currentIndex<t_(a,u,p)?o:a,C=t_(I,u,p),S=I.currentIndex;if(I===a)u--,a=a._nextRemoved;else if(o=o._next,null==I.previousIndex)u++;else{p||(p=[]);const B=C-u,Q=S-u;if(B!=Q){for(let Be=0;Be<B;Be++){const ot=Be<p.length?p[Be]:p[Be]=0,At=ot+Be;Q<=At&&At<B&&(p[Be]=ot+1)}p[I.previousIndex]=Q-B}}C!==S&&n(I,C,S)}}forEachPreviousItem(n){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachMovedItem(n){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}forEachIdentityChange(n){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)n(o)}diff(n){if(null==n&&(n=[]),!nh(n))throw new Ft(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let u,p,I,o=this._itHead,a=!1;if(Array.isArray(n)){this.length=n.length;for(let C=0;C<this.length;C++)p=n[C],I=this._trackByFn(C,p),null!==o&&Object.is(o.trackById,I)?(a&&(o=this._verifyReinsertion(o,p,I,C)),Object.is(o.item,p)||this._addIdentityChange(o,p)):(o=this._mismatch(o,p,I,C),a=!0),o=o._next}else u=0,function sE(t,n){if(Array.isArray(t))for(let o=0;o<t.length;o++)n(t[o]);else{const o=t[Symbol.iterator]();let a;for(;!(a=o.next()).done;)n(a.value)}}(n,C=>{I=this._trackByFn(u,C),null!==o&&Object.is(o.trackById,I)?(a&&(o=this._verifyReinsertion(o,C,I,u)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,I,u),a=!0),o=o._next,u++}),this.length=u;return this._truncate(o),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,o,a,u){let p;return null===n?p=this._itTail:(p=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._reinsertAfter(n,p,u)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._moveAfter(n,p,u)):n=this._addAfter(new rh(o,a),p,u),n}_verifyReinsertion(n,o,a,u){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?n=this._reinsertAfter(p,n._prev,u):n.currentIndex!=u&&(n.currentIndex=u,this._addToMoves(n,u)),n}_truncate(n){for(;null!==n;){const o=n._next;this._addToRemovals(this._unlink(n)),n=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const u=n._prevRemoved,p=n._nextRemoved;return null===u?this._removalsHead=p:u._nextRemoved=p,null===p?this._removalsTail=u:p._prevRemoved=u,this._insertAfter(n,o,a),this._addToMoves(n,a),n}_moveAfter(n,o,a){return this._unlink(n),this._insertAfter(n,o,a),this._addToMoves(n,a),n}_addAfter(n,o,a){return this._insertAfter(n,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,o,a){const u=null===o?this._itHead:o._next;return n._next=u,n._prev=o,null===u?this._itTail=n:u._prev=n,null===o?this._itHead=n:o._next=n,null===this._linkedRecords&&(this._linkedRecords=new Vh),this._linkedRecords.put(n),n.currentIndex=a,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const o=n._prev,a=n._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,n}_addToMoves(n,o){return n.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vh),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,o){return n.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class rh{constructor(n,o){this.item=n,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cg{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,n))return a;return null}remove(n){const o=n._prevDup,a=n._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class Vh{constructor(){this.map=new Map}put(n){const o=n.trackById;let a=this.map.get(o);a||(a=new cg,this.map.set(o,a)),a.add(n)}get(n,o){const u=this.map.get(n);return u?u.get(n,o):null}remove(n){const o=n.trackById;return this.map.get(o).remove(n)&&this.map.delete(o),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function t_(t,n,o){const a=t.previousIndex;if(null===a)return a;let u=0;return o&&a<o.length&&(u=o[a]),a+n+u}class ug{constructor(){}supports(n){return n instanceof Map||ag(n)}create(){return new n_}}class n_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let o;for(o=this._mapHead;null!==o;o=o._next)n(o)}forEachPreviousItem(n){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)n(o)}forEachChangedItem(n){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}diff(n){if(n){if(!(n instanceof Map||ag(n)))throw new Ft(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(n,(a,u)=>{if(o&&o.key===u)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const p=this._getOrCreateRecordForKey(u,a);o=this._insertBeforeOrAppend(o,p)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,o){if(n){const a=n._prev;return o._next=n,o._prev=a,n._prev=o,a&&(a._next=o),n===this._mapHead&&(this._mapHead=o),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(n,o){if(this._records.has(n)){const u=this._records.get(n);this._maybeAddToChanges(u,o);const p=u._prev,I=u._next;return p&&(p._next=I),I&&(I._prev=p),u._next=null,u._prev=null,u}const a=new r_(n);return this._records.set(n,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,o){Object.is(o,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=o,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,o){n instanceof Map?n.forEach(o):Object.keys(n).forEach(a=>o(n[a],a))}}class r_{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dg(){return new Gf([new e_])}let Gf=(()=>{var t;class n{constructor(a){this.factories=a}static create(a,u){if(null!=u){const p=u.factories.slice();a=a.concat(p)}return new n(a)}static extend(a){return{provide:n,useFactory:u=>n.create(a,u||dg()),deps:[[n,new $c,new wc]]}}find(a){const u=this.factories.find(p=>p.supports(a));if(null!=u)return u;throw new Ft(901,!1)}}return(t=n).\u0275prov=Di({token:t,providedIn:"root",factory:dg}),n})();function i_(){return new Au([new ug])}let Au=(()=>{var t;class n{constructor(a){this.factories=a}static create(a,u){if(u){const p=u.factories.slice();a=a.concat(p)}return new n(a)}static extend(a){return{provide:n,useFactory:u=>n.create(a,u||i_()),deps:[[n,new $c,new wc]]}}find(a){const u=this.factories.find(p=>p.supports(a));if(u)return u;throw new Ft(901,!1)}}return(t=n).\u0275prov=Di({token:t,providedIn:"root",factory:i_}),n})(),o_=(()=>{class n{}return n.__NG_ELEMENT_ID__=s_,n})();function s_(t){return function jf(t,n,o){if(Lo(t)&&!o){const a=Xi(t.index,n);return new dd(a,a)}return 47&t.type?new dd(n[yi],n):null}(Ci(),zt(),16==(16&t))}let fd=(()=>{var t;class n{}return(t=n).__NG_ELEMENT_ID__=fg,t.__NG_ENV_ID__=o=>o,n})();class uE extends fd{constructor(n){super(),this._lView=n}onDestroy(n){return Qa(this._lView,n),()=>function Xa(t,n){if(null===t[_r])return;const o=t[_r].indexOf(n);-1!==o&&t[_r].splice(o,1)}(this._lView,n)}}function fg(){return new uE(zt())}const ih=new Set;function Uh(t){var n,o;ih.has(t)||(ih.add(t),null===(n=performance)||void 0===n||null===(o=n.mark)||void 0===o||o.call(n,"mark_feature_usage",{detail:{feature:t}}))}function fE(...t){}class Ho{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sr(!1),this.onMicrotaskEmpty=new Sr(!1),this.onStable=new Sr(!1),this.onError=new Sr(!1),typeof Zone>"u")throw new Ft(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&o,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function c_(){const t="function"==typeof bn.requestAnimationFrame;let n=bn[t?"requestAnimationFrame":"setTimeout"],o=bn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&o){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function gE(t){const n=()=>{!function pg(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,d_(t),t.isCheckStableRunning=!0,u_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),d_(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,u,p,I,C)=>{if(function cy(t){var n;return!(!Array.isArray(t)||1!==t.length)&&!0===(null===(n=t[0].data)||void 0===n?void 0:n.__ignore_ng_zone__)}(C))return o.invokeTask(u,p,I,C);try{return zf(t),o.invokeTask(u,p,I,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&n(),ay(t)}},onInvoke:(o,a,u,p,I,C,S)=>{try{return zf(t),o.invoke(u,p,I,C,S)}finally{t.shouldCoalesceRunChangeDetection&&n(),ay(t)}},onHasTask:(o,a,u,p)=>{o.hasTask(u,p),a===u&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,d_(t),u_(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(o,a,u,p)=>(o.handleError(u,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ho.isInAngularZone())throw new Ft(909,!1)}static assertNotInAngularZone(){if(Ho.isInAngularZone())throw new Ft(909,!1)}run(n,o,a){return this._inner.run(n,o,a)}runTask(n,o,a,u){const p=this._inner,I=p.scheduleEventTask("NgZoneEvent: "+u,n,pE,fE,fE);try{return p.runTask(I,o,a)}finally{p.cancelTask(I)}}runGuarded(n,o,a){return this._inner.runGuarded(n,o,a)}runOutsideAngular(n){return this._outer.run(n)}}const pE={};function u_(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function d_(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function zf(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ay(t){t._nesting--,u_(t)}class ly{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sr,this.onMicrotaskEmpty=new Sr,this.onStable=new Sr,this.onError=new Sr}run(n,o,a){return n.apply(o,a)}runGuarded(n,o,a){return n.apply(o,a)}runOutsideAngular(n){return n()}runTask(n,o,a,u){return n.apply(o,a)}}var gd=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(gd||{});const h_={destroy(){}};function Kf(t,n){var o,a,u;!n&&function il(t){if(!lh()&&!function bo(){return ka}())throw new Ft(-203,!1)}();const p=null!==(o=null==n?void 0:n.injector)&&void 0!==o?o:di(h);if(!function Xc(t){return"browser"===(null!=t?t:di(h)).get(wt)}(p))return h_;Uh("NgAfterNextRender");const I=p.get(gg),C=null!==(a=I.handler)&&void 0!==a?a:I.handler=new mE,S=null!==(u=null==n?void 0:n.phase)&&void 0!==u?u:gd.MixedReadWrite,B=()=>{C.unregister(re),Q()},Q=p.get(fd).onDestroy(B),re=new dy(p,S,()=>{B(),t()});return C.register(re),{destroy:B}}class dy{constructor(n,o,a){this.phase=o,this.callbackFn=a,this.zone=n.get(Ho),this.errorHandler=n.get(j,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(o){var n;null===(n=this.errorHandler)||void 0===n||n.handleError(o)}}}class mE{constructor(){this.executingCallbacks=!1,this.buckets={[gd.EarlyRead]:new Set,[gd.Write]:new Set,[gd.MixedReadWrite]:new Set,[gd.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const o of n)o.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let gg=(()=>{var t;class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var a;const u=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const p of u)p();null===(a=this.handler)||void 0===a||a.execute()}ngOnDestroy(){var a;null===(a=this.handler)||void 0===a||a.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(t=n).\u0275prov=Di({token:t,providedIn:"root",factory:()=>new t}),n})();function oh(t){return!!En(t)}function mg(t,n,o){let a=o?t.styles:null,u=o?t.classes:null,p=0;if(null!==n)for(let I=0;I<n.length;I++){const C=n[I];"number"==typeof C?p=C:1==p?u=yn(u,C):2==p&&(a=yn(a,C+": "+n[++I]+";"))}o?t.styles=a:t.stylesWithoutHost=a,o?t.classes=u:t.classesWithoutHost=u}class hy extends $f{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const o=Nt(n);return new Bh(o,this.ngModule)}}function fy(t){const n=[];for(const o in t){if(!t.hasOwnProperty(o))continue;const a=t[o];void 0!==a&&n.push({propName:Array.isArray(a)?a[0]:a,templateName:o})}return n}class py{constructor(n,o){this.injector=n,this.parentInjector=o}get(n,o,a){a=Uu(a);const u=this.injector.get(n,ry,a);return u!==ry||o===ry?u:this.parentInjector.get(n,o,a)}}class Bh extends ZI{get inputs(){const n=this.componentDef,o=n.inputTransforms,a=fy(n.inputs);if(null!==o)for(const u of a)o.hasOwnProperty(u.propName)&&(u.transform=o[u.propName]);return a}get outputs(){return fy(this.componentDef.outputs)}constructor(n,o){super(),this.componentDef=n,this.ngModule=o,this.componentType=n.type,this.selector=function Y(t){return t.map(Ct).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!o}create(n,o,a,u){var I;let C=(u=u||this.ngModule)instanceof Gs?u:null===(I=u)||void 0===I?void 0:I.injector;C&&null!==this.componentDef.getStandaloneInjector&&(C=this.componentDef.getStandaloneInjector(C)||C);const S=C?new py(n,C):n,B=S.get(ny,null);if(null===B)throw new Ft(407,!1);const ot={rendererFactory:B,sanitizer:S.get(nE,null),inlineEffectRunner:null,afterRenderEventManager:S.get(gg,null),changeDetectionScheduler:S.get(To,null)},At=B.createRenderer(null,this.componentDef),nn=this.componentDef.selectors[0][0]||"div",Cn=a?function Dm(t,n,o,a){const p=a.get(Vt,!1)||o===Ar.ShadowDom,I=t.selectRootElement(n,p);return function Tm(t){Wp(t)}(I),I}(At,a,this.componentDef.encapsulation,S):Hd(At,nn,function _E(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(nn));let Vn=512;this.componentDef.signals?Vn|=4096:this.componentDef.onPush||(Vn|=16);let cn=null;null!==Cn&&(cn=Sl(Cn,S,!0));const xr=Cm(0,null,null,1,0,null,null,null,null,null,null),ni=Sh(null,xr,null,Vn,null,null,ot,At,S,null,cn);let qi,fa;Er(ni);try{const Pu=this.componentDef;let Hg,Y0=null;Pu.findHostDirectiveDefs?(Hg=[],Y0=new Map,Pu.findHostDirectiveDefs(Pu,Hg,Y0),Hg.push(Pu)):Hg=[Pu];const _P=function yE(t,n){const o=t[Ae],a=cr;return t[a]=n,Nc(o,a,2,"#host",null)}(ni,Cn),vP=function gy(t,n,o,a,u,p,I){const C=u[Ae];!function IE(t,n,o,a){for(const u of t)n.mergedAttrs=pi(n.mergedAttrs,u.hostAttrs);null!==n.mergedAttrs&&(mg(n,n.mergedAttrs,!0),null!==o&&Bp(a,o,n))}(a,t,n,I);let S=null;null!==n&&(S=Sl(n,u[Fi]));const B=p.rendererFactory.createRenderer(n,o);let Q=16;o.signals?Q=4096:o.onPush&&(Q=64);const re=Sh(u,Dv(o),null,Q,u[t.index],t,p,B,null,null,S);return C.firstCreatePass&&Nm(C,t,a.length-1),Ah(u,re),u[t.index]=re}(_P,Cn,Pu,Hg,ni,ot,At);fa=qs(xr,cr),Cn&&function y_(t,n,o,a){if(a)ao(t,o,["ng-version","17.2.2"]);else{const{attrs:u,classes:p}=function ne(t){const n=[],o=[];let a=1,u=2;for(;a<t.length;){let p=t[a];if("string"==typeof p)2===u?""!==p&&n.push(p,t[++a]):8===u&&o.push(p);else{if(!Te(u))break;u=p}a++}return{attrs:n,classes:o}}(n.selectors[0]);u&&ao(t,o,u),p&&p.length>0&&Cv(t,o,p.join(" "))}}(At,Pu,Cn,a),void 0!==o&&function cC(t,n,o){const a=t.projection=[];for(let u=0;u<n.length;u++){const p=o[u];a.push(null!=p?Array.from(p):null)}}(fa,this.ngContentSelectors,o),qi=function $h(t,n,o,a,u,p){const I=Ci(),C=u[Ae],S=Io(I,u);Rv(C,u,I,o,null,a);for(let Q=0;Q<o.length;Q++)xs(Un(u,C,I.directiveStart+Q,I),u);Hp(C,u,I),S&&xs(S,u);const B=Un(u,C,I.directiveStart+I.componentOffset,I);if(t[oi]=u[oi]=B,null!==p)for(const Q of p)Q(B,n);return cd(C,I,u),B}(vP,Pu,Hg,Y0,ni,[EE]),Pf(xr,ni,null)}finally{Mi()}return new vE(this.componentType,qi,rn(fa,ni),ni,fa)}}class vE extends rC{constructor(n,o,a,u,p){super(),this.location=a,this._rootLView=u,this._tNode=p,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new dd(u,void 0,!1),this.componentType=n}setInput(n,o){const a=this._tNode.inputs;let u;if(null!==a&&(u=a[n])){var p;if(null!==(p=this.previousInputValues)&&void 0!==p||(this.previousInputValues=new Map),this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),o))return;const I=this._rootLView;Mf(I[Ae],I,u,n,o),this.previousInputValues.set(n,o),Nf(Xi(this._tNode.index,I))}}get injector(){return new Do(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function EE(){const t=Ci();Ul(zt()[Ae],t)}let _g=(()=>{class n{}return n.__NG_ELEMENT_ID__=CE,n})();function CE(){return TE(Ci(),zt())}const wE=_g,my=class extends wE{constructor(n,o,a){super(),this._lContainer=n,this._hostTNode=o,this._hostLView=a}get element(){return rn(this._hostTNode,this._hostLView)}get injector(){return new Do(this._hostTNode,this._hostLView)}get parentInjector(){const n=m(this._hostTNode,this._hostLView);if(Tr(n)){const o=ic(n,this._hostLView),a=rc(n);return new Do(o[Ae].data[a+8],o)}return new Do(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const o=DE(this._lContainer);return null!==o&&o[n]||null}get length(){return this._lContainer.length-uo}createEmbeddedView(n,o,a){let u,p;"number"==typeof a?u=a:null!=a&&(u=a.index,p=a.injector);const C=n.createEmbeddedViewImpl(o||{},p,null);return this.insertImpl(C,u,Rh(this._hostTNode,null)),C}createComponent(n,o,a,u,p){var I,S;const B=n&&!function Ll(t){return"function"==typeof t}(n);let Q;if(B)Q=o;else{const Vn=o||{};Q=Vn.index,a=Vn.injector,u=Vn.projectableNodes,p=Vn.environmentInjector||Vn.ngModuleRef}const re=B?n:new Bh(Nt(n)),Be=a||this.parentInjector;if(!p&&null==re.ngModule){const cn=(B?Be:this.parentInjector).get(Gs,null);cn&&(p=cn)}const ot=Nt(null!==(I=re.componentType)&&void 0!==I?I:{}),At=(null==ot?void 0:ot.id,null),nn=null!==(S=null==At?void 0:At.firstChild)&&void 0!==S?S:null,Cn=re.create(Be,u,nn,p);return this.insertImpl(Cn.hostView,Q,Rh(this._hostTNode,At)),Cn}insert(n,o){return this.insertImpl(n,o,!0)}insertImpl(n,o,a){const u=n._lView;if(function Cs(t){return Vi(t[rr])}(u)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const S=u[rr],B=new my(S,S[ii],S[rr]);B.detach(B.indexOf(n))}}const p=this._adjustIndex(o),I=this._lContainer;return Zd(I,u,p,a),n.attachToViewContainerRef(),lu(_y(I),p,n),n}move(n,o){return this.insert(n,o)}indexOf(n){const o=DE(this._lContainer);return null!==o?o.indexOf(n):-1}remove(n){const o=this._adjustIndex(n,-1),a=zd(this._lContainer,o);a&&(Js(_y(this._lContainer),o),Np(a[Ae],a))}detach(n){const o=this._adjustIndex(n,-1),a=zd(this._lContainer,o);return a&&null!=Js(_y(this._lContainer),o)?new dd(a):null}_adjustIndex(n,o=0){return null==n?this.length+o:n}};function DE(t){return t[8]}function _y(t){return t[8]||(t[8]=[])}function TE(t,n){let o;const a=n[t.index];return Vi(a)?o=a:(o=zp(a,n,null,t),n[t.index]=o,Ah(n,o)),vy(o,n,t,a),new my(o,t,n)}let vy=function bE(t,n,o,a){if(t[Ii])return;let u;u=8&o.type?Fr(a):function uC(t,n){const o=t[Yn],a=o.createComment(""),u=Io(n,t);return Zc(o,bh(o,u),a,function ad(t,n){return t.nextSibling(n)}(o,u),!1),a}(n,o),t[Ii]=u},I_=()=>!1;class E_{constructor(n){this.queryList=n,this.matches=null}clone(){return new E_(this.queryList)}setDirty(){this.queryList.setDirty()}}class C_{constructor(n=[]){this.queries=n}createEmbeddedView(n){const o=n.queries;if(null!==o){const a=null!==n.contentQueries?n.contentQueries[0]:o.length,u=[];for(let p=0;p<a;p++){const I=o.getByIndex(p);u.push(this.queries[I.indexInDeclarationView].clone())}return new C_(u)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let o=0;o<this.queries.length;o++)null!==Yf(n,o).matches&&this.queries[o].setDirty()}}class Ey{constructor(n,o,a=null){this.flags=o,this.read=a,this.predicate="string"==typeof n?function wy(t){return t.split(",").map(n=>n.trim())}(n):n}}class w_{constructor(n=[]){this.queries=n}elementStart(n,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(n,o)}elementEnd(n){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(n)}embeddedTView(n){let o=null;for(let a=0;a<this.length;a++){const u=null!==o?o.length:0,p=this.getByIndex(a).embeddedTView(n,u);p&&(p.indexInDeclarationView=a,null!==o?o.push(p):o=[p])}return null!==o?new w_(o):null}template(n,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(n,o)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class D_{constructor(n,o=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(n,o){this.isApplyingToNode(o)&&this.matchTNode(n,o)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,o){this.elementStart(n,o)}embeddedTView(n,o){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,o),new D_(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=n.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(n,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const p=a[u];this.matchTNodeWithReadOption(n,o,AE(o,p)),this.matchTNodeWithReadOption(n,o,On(o,n,p,!1,!1))}else a===th?4&o.type&&this.matchTNodeWithReadOption(n,o,-1):this.matchTNodeWithReadOption(n,o,On(o,n,a,!1,!1))}matchTNodeWithReadOption(n,o,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===ei||u===_g||u===th&&4&o.type)this.addMatch(o.index,-2);else{const p=On(o,n,u,!1,!1);null!==p&&this.addMatch(o.index,p)}else this.addMatch(o.index,a)}}addMatch(n,o){null===this.matches?this.matches=[n,o]:this.matches.push(n,o)}}function AE(t,n){const o=t.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===n)return o[a+1];return null}function dC(t,n,o,a){return-1===o?function RE(t,n){return 11&t.type?rn(t,n):4&t.type?Ph(t,n):null}(n,t):-2===o?function hC(t,n,o){return o===ei?rn(n,t):o===th?Ph(n,t):o===_g?TE(n,t):void 0}(t,n,a):Un(t,t[Ae],o,n)}function T_(t,n,o,a){const u=n[$i].queries[a];if(null===u.matches){const p=t.data,I=o.matches,C=[];for(let S=0;null!==I&&S<I.length;S+=2){const B=I[S];C.push(B<0?null:dC(n,p[B],I[S+1],o.metadata.read))}u.matches=C}return u.matches}function b_(t,n,o,a){const u=t.queries.getByIndex(o),p=u.matches;if(null!==p){const I=T_(t,n,u,o);for(let C=0;C<p.length;C+=2){const S=p[C];if(S>0)a.push(I[C/2]);else{const B=p[C+1],Q=n[-S];for(let re=uo;re<Q.length;re++){const Be=Q[re];Be[ys]===Be[rr]&&b_(Be[Ae],Be,B,a)}if(null!==Q[eo]){const re=Q[eo];for(let Be=0;Be<re.length;Be++){const ot=re[Be];b_(ot[Ae],ot,B,a)}}}}}return a}function ME(t,n,o){var a;const u=new ti(4==(4&o));return function bm(t,n,o,a){const u=Xd(n);u.push(o),t.firstCreatePass&&Vm(t).push(a,u.length-1)}(t,n,u,u.destroy),(null!==(a=n[$i])&&void 0!==a?a:n[$i]=new C_).queries.push(new E_(u))-1}function S_(t,n,o){null===t.queries&&(t.queries=new w_),t.queries.track(new D_(n,o))}function Yf(t,n){return t.queries.getByIndex(n)}function Qf(t,n){const o=t[Ae],a=Yf(o,n);return a.crossesNgTemplate?b_(o,t,n,[]):T_(o,t,a,n)}function N_(t){let n=function Oy(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const a=[t];for(;n;){let u;if(Ei(t))u=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ft(903,!1);u=n.\u0275dir}if(u){if(o){a.push(u);const I=t;I.inputs=Eg(t.inputs),I.inputTransforms=Eg(t.inputTransforms),I.declaredInputs=Eg(t.declaredInputs),I.outputs=Eg(t.outputs);const C=u.hostBindings;C&&EC(t,C);const S=u.viewQuery,B=u.contentQueries;if(S&&ky(t,S),B&&jE(t,B),$E(t,u),vt(t.outputs,u.outputs),Ei(u)&&u.data.animation){const Q=t.data;Q.animation=(Q.animation||[]).concat(u.data.animation)}}const p=u.features;if(p)for(let I=0;I<p.length;I++){const C=p[I];C&&C.ngInherit&&C(t),C===N_&&(o=!1)}}n=Object.getPrototypeOf(n)}!function GE(t){let n=0,o=null;for(let a=t.length-1;a>=0;a--){const u=t[a];u.hostVars=n+=u.hostVars,u.hostAttrs=pi(u.hostAttrs,o=pi(o,u.hostAttrs))}}(a)}function $E(t,n){for(const a in n.inputs){if(!n.inputs.hasOwnProperty(a)||t.inputs.hasOwnProperty(a))continue;const u=n.inputs[a];if(void 0!==u&&(t.inputs[a]=u,t.declaredInputs[a]=n.declaredInputs[a],null!==n.inputTransforms)){var o;const p=Array.isArray(u)?u[0]:u;if(!n.inputTransforms.hasOwnProperty(p))continue;null!==(o=t.inputTransforms)&&void 0!==o||(t.inputTransforms={}),t.inputTransforms[p]=n.inputTransforms[p]}}}function Eg(t){return t===Or?{}:t===hr?[]:t}function ky(t,n){const o=t.viewQuery;t.viewQuery=o?(a,u)=>{n(a,u),o(a,u)}:n}function jE(t,n){const o=t.contentQueries;t.contentQueries=o?(a,u,p)=>{n(a,u,p),o(a,u,p)}:n}function EC(t,n){const o=t.hostBindings;t.hostBindings=o?(a,u)=>{n(a,u),o(a,u)}:n}function q(t){const n=t.inputConfig,o={};for(const a in n)if(n.hasOwnProperty(a)){const u=n[a];Array.isArray(u)&&u[3]&&(o[a]=u[3])}t.inputTransforms=o}class wn{}class Bn{}function kn(t,n){return new Ur(t,null!=n?n:null,[])}class Ur extends wn{constructor(n,o,a){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hy(this);const u=En(n);this._bootstrapComponents=cl(u.bootstrap),this._r3Injector=d(n,o,[{provide:wn,useValue:this},{provide:$f,useValue:this.componentFactoryResolver},...a],bt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class gr extends Bn{constructor(n){super(),this.moduleType=n}create(n){return new Ur(this.moduleType,n,[])}}class Ki extends wn{constructor(n){super(),this.componentFactoryResolver=new hy(this),this.instance=null;const o=new Nl([...n.providers,{provide:wn,useValue:this},{provide:$f,useValue:this.componentFactoryResolver}],n.parent||$a(),n.debugName,new Set(["environment"]));this.injector=o,n.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function ki(t,n,o=null){return new Ki({providers:t,parent:n,debugName:o,runEnvironmentInitializers:!0}).injector}let Ws=(()=>{var t;class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ft.g(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function Os(t,n,o){return!Object.is(t[n],o)&&(t[n]=o,!0)}function Cg(t,n,o,a,u,p,I,C){const S=zt(),B=vr(),Q=t+cr,re=B.firstCreatePass?function rb(t,n,o,a,u,p,I,C,S){const B=n.consts,Q=Nc(n,t,4,I||null,Ko(B,C));Rm(n,o,Q,Ko(B,S)),Ul(n,Q);const re=Q.tView=Cm(2,Q,a,u,p,n.directiveRegistry,n.pipeRegistry,null,n.schemas,B,null);return null!==n.queries&&(n.queries.template(n,Q),re.queries=n.queries.embeddedTView(Q)),Q}(Q,B,S,n,o,a,u,p,I):B.data[Q];Uo(re,!1);const Be=CC(B,S,re,t);vl()&&Vp(B,S,Be,re),xs(Be,S);const ot=zp(Be,S,Be,re);return S[Q]=ot,Ah(S,ot),function yy(t,n,o){return I_(t,n,o)}(ot,re,S),Is(re)&&jp(B,S,re),null!=I&&ud(S,re,C),Cg}let CC=function wC(t,n,o,a){return Rn(!0),n[Yn].createComment("")};function JE(t,n,o,a){const u=zt();return Os(u,Bo(),n)&&(vr(),sc(wr(),u,t,n,o,a)),JE}function Gy(t,n){return t<<17|n<<2}function Wh(t){return t>>17&32767}function e0(t){return 2|t}function rp(t){return(131068&t)>>2}function t0(t,n){return-131069&t|n<<2}function n0(t){return 1|t}function ew(t,n,o,a){const u=t[o+1],p=null===n;let I=a?Wh(u):rp(u),C=!1;for(;0!==I&&(!1===C||p);){const B=t[I+1];$b(t[I],n)&&(C=!0,t[I+1]=a?n0(B):e0(B)),I=a?Wh(B):rp(B)}C&&(t[o+1]=a?e0(u):n0(u))}function $b(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&ql(t,n)>=0}function r0(t,n,o){const a=zt();return Os(a,Bo(),n)&&Ka(vr(),wr(),a,t,n,a[Yn],o,!1),r0}function o0(t,n,o,a,u){const I=u?"class":"style";Mf(t,o,n.inputs[I],I,a)}function s0(t,n,o){return Ru(t,n,o,!1),s0}function a0(t,n){return Ru(t,n,null,!0),a0}function Ru(t,n,o,a){const u=zt(),p=vr(),I=function b(t){const n=ur.lFrame,o=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,o}(2);p.firstUpdatePass&&function lw(t,n,o,a){const u=t.data;if(null===u[o+1]){const p=u[wi()],I=function aw(t,n){return n>=t.expandoStartIndex}(t,o);(function hw(t,n){return 0!=(t.flags&(n?8:16))})(p,a)&&null===n&&!I&&(n=!1),n=function Qb(t,n,o,a){const u=function Ut(t){const n=ur.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let p=a?n.residualClasses:n.residualStyles;if(null===u)0===(a?n.classBindings:n.styleBindings)&&(o=F_(o=l0(null,t,n,o,a),n.attrs,a),p=null);else{const I=n.directiveStylingLast;if(-1===I||t[I]!==u)if(o=l0(u,t,n,o,a),null===p){let S=function Xb(t,n,o){const a=o?n.classBindings:n.styleBindings;if(0!==rp(a))return t[Wh(a)]}(t,n,a);void 0!==S&&Array.isArray(S)&&(S=l0(null,t,n,S[1],a),S=F_(S,n.attrs,a),function Zb(t,n,o,a){t[Wh(o?n.classBindings:n.styleBindings)]=a}(t,n,a,S))}else p=function Jb(t,n,o){let a;const u=n.directiveEnd;for(let p=1+n.directiveStylingLast;p<u;p++)a=F_(a,t[p].hostAttrs,o);return F_(a,n.attrs,o)}(t,n,a)}return void 0!==p&&(a?n.residualClasses=p:n.residualStyles=p),o}(u,p,n,a),function Ub(t,n,o,a,u,p){let I=p?n.classBindings:n.styleBindings,C=Wh(I),S=rp(I);t[a]=o;let Q,B=!1;if(Array.isArray(o)?(Q=o[1],(null===Q||ql(o,Q)>0)&&(B=!0)):Q=o,u)if(0!==S){const Be=Wh(t[C+1]);t[a+1]=Gy(Be,C),0!==Be&&(t[Be+1]=t0(t[Be+1],a)),t[C+1]=function Fb(t,n){return 131071&t|n<<17}(t[C+1],a)}else t[a+1]=Gy(C,0),0!==C&&(t[C+1]=t0(t[C+1],a)),C=a;else t[a+1]=Gy(S,0),0===C?C=a:t[S+1]=t0(t[S+1],a),S=a;B&&(t[a+1]=e0(t[a+1])),ew(t,Q,a,!0),ew(t,Q,a,!1),function Bb(t,n,o,a,u){const p=u?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof n&&ql(p,n)>=0&&(o[a+1]=n0(o[a+1]))}(n,Q,t,a,p),I=Gy(C,S),p?n.classBindings=I:n.styleBindings=I}(u,p,n,o,I,a)}}(p,t,I,a),n!==Qr&&Os(u,I,n)&&function uw(t,n,o,a,u,p,I,C){if(!(3&n.type))return;const S=t.data,B=S[C+1],Q=function Vb(t){return 1==(1&t)}(B)?dw(S,n,o,u,rp(B),I):void 0;jy(Q)||(jy(p)||function Lb(t){return 2==(2&t)}(B)&&(p=dw(S,null,o,u,C,I)),function OI(t,n,o,a,u){if(n)u?t.addClass(o,a):t.removeClass(o,a);else{let p=-1===a.indexOf("-")?void 0:Ef.DashCase;null==u?t.removeStyle(o,a,p):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),p|=Ef.Important),t.setStyle(o,a,u,p))}}(a,I,Fo(wi(),o),u,p))}(p,p.data[wi()],u,u[Yn],t,u[I+1]=function rS(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=bt(nd(t)))),t}(n,o),a,I)}function l0(t,n,o,a,u){let p=null;const I=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<I&&(p=n[C],a=F_(a,p.hostAttrs,u),p!==t);)C++;return null!==t&&(o.directiveStylingLast=C),a}function F_(t,n,o){const a=o?1:2;let u=-1;if(null!==n)for(let p=0;p<n.length;p++){const I=n[p];"number"==typeof I?u=I:u===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),or(t,I,!!o||n[++p]))}return void 0===t?null:t}function dw(t,n,o,a,u,p){const I=null===n;let C;for(;u>0;){const S=t[u],B=Array.isArray(S),Q=B?S[1]:S,re=null===Q;let Be=o[u+1];Be===Qr&&(Be=re?hr:void 0);let ot=re?ji(Be,a):Q===a?Be:void 0;if(B&&!jy(ot)&&(ot=ji(S,a)),jy(ot)&&(C=ot,I))return C;const At=t[u+1];u=I?Wh(At):rp(At)}if(null!==n){let S=p?n.residualClasses:n.residualStyles;null!=S&&(C=ji(S,a))}return C}function jy(t){return void 0!==t}function Wy(t,n,o,a){const u=zt(),p=vr(),I=cr+t,C=u[Yn],S=p.firstCreatePass?function bS(t,n,o,a,u,p){const I=n.consts,S=Nc(n,t,2,a,Ko(I,u));return Rm(n,o,S,Ko(I,p)),null!==S.attrs&&mg(S,S.attrs,!1),null!==S.mergedAttrs&&mg(S,S.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,S),S}(I,p,u,n,o,a):p.data[I],B=mw(p,u,S,C,n,t);u[I]=B;const Q=Is(S);return Uo(S,!0),Bp(C,B,S),32!=(32&S.flags)&&vl()&&Vp(p,u,B,S),0===function va(){return ur.lFrame.elementDepthCount}()&&xs(B,u),function ml(){ur.lFrame.elementDepthCount++}(),Q&&(jp(p,u,S),cd(p,S,u)),null!==a&&ud(u,S),Wy}function Hy(){let t=Ci();_l()?si():(t=t.parent,Uo(t,!1));const n=t;(function Ia(t){return ur.skipHydrationRootTNode===t})(n)&&function ws(){ur.skipHydrationRootTNode=null}(),function Kl(){ur.lFrame.elementDepthCount--}();const o=vr();return o.firstCreatePass&&(Ul(o,t),ga(t)&&o.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Nd(t){return 0!=(8&t.flags)}(n)&&o0(o,n,zt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function rf(t){return 0!=(16&t.flags)}(n)&&o0(o,n,zt(),n.stylesWithoutHost,!1),Hy}function f0(t,n,o,a){return Wy(t,n,o,a),Hy(),f0}let mw=(t,n,o,a,u,p)=>(Rn(!0),Hd(a,u,function zn(){return ur.lFrame.currentNamespace}()));function p0(t,n,o){const a=zt(),u=vr(),p=t+cr,I=u.firstCreatePass?function RS(t,n,o,a,u){const p=n.consts,I=Ko(p,a),C=Nc(n,t,8,"ng-container",I);return null!==I&&mg(C,I,!0),Rm(n,o,C,Ko(p,u)),null!==n.queries&&n.queries.elementStart(n,C),C}(p,u,a,n,o):u.data[p];Uo(I,!0);const C=_w(u,a,I,t);return a[p]=C,vl()&&Vp(u,a,C,I),xs(C,a),Is(I)&&(jp(u,a,I),cd(u,I,a)),null!=o&&ud(a,I),p0}function g0(){let t=Ci();const n=vr();return _l()?si():(t=t.parent,Uo(t,!1)),n.firstCreatePass&&(Ul(n,t),ga(t)&&n.queries.elementEnd(t)),g0}function m0(t,n,o){return p0(t,n,o),g0(),m0}let _w=(t,n,o,a)=>(Rn(!0),xp(n[Yn],""));function vw(){return zt()}const ip=void 0;var NS=["en",[["a","p"],["AM","PM"],ip],[["AM","PM"],ip,ip],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ip,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ip,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ip,"{1} 'at' {0}",ip],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xS(t){const o=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let Ug={};function _0(t){const n=function OS(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=Cw(n);if(o)return o;const a=n.split("-")[0];if(o=Cw(a),o)return o;if("en"===a)return NS;throw new Ft(701,!1)}function Ew(t){return _0(t)[Bg.PluralCase]}function Cw(t){return t in Ug||(Ug[t]=bn.ng&&bn.ng.common&&bn.ng.common.locales&&bn.ng.common.locales[t]),Ug[t]}var Bg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Bg||{});const $g="en-US";let ww=$g;function I0(t,n,o,a){const u=zt(),p=vr(),I=Ci();return E0(p,u,u[Yn],I,t,n,a),I0}function E0(t,n,o,a,u,p,I){const C=Is(a),B=t.firstCreatePass&&Vm(t),Q=n[oi],re=Xd(n);let Be=!0;if(3&a.type||I){const nn=Io(a,n),Cn=I?I(nn):nn,Vn=re.length,cn=I?ni=>I(Fr(ni[a.index])):a.index;let xr=null;if(!I&&C&&(xr=function AA(t,n,o,a){const u=t.cleanup;if(null!=u)for(let p=0;p<u.length-1;p+=2){const I=u[p];if(I===o&&u[p+1]===a){const C=n[Yo],S=u[p+2];return C.length>S?C[S]:null}"string"==typeof I&&(p+=2)}return null}(t,n,u,a.index)),null!==xr)(xr.__ngLastListenerFn__||xr).__ngNextListenerFn__=p,xr.__ngLastListenerFn__=p,Be=!1;else{p=Qw(a,n,Q,p,!1);const ni=o.listen(Cn,u,p);re.push(p,ni),B&&B.push(u,cn,Vn,Vn+1)}}else p=Qw(a,n,Q,p,!1);const ot=a.outputs;let At;if(Be&&null!==ot&&(At=ot[u])){const nn=At.length;if(nn)for(let Cn=0;Cn<nn;Cn+=2){const qi=n[At[Cn]][At[Cn+1]].subscribe(p),fa=re.length;re.push(p,qi),B&&B.push(u,a.index,fa,"function"==typeof qi?fa+1:-(fa+1))}}}function Yw(t,n,o,a){try{return ja(6,n,o),!1!==o(a)}catch(u){return qp(t,u),!1}finally{ja(7,n,o)}}function Qw(t,n,o,a,u){return function p(I){if(I===Function)return a;Nf(t.componentOffset>-1?Xi(t.index,n):n);let S=Yw(n,o,a,I),B=p.__ngNextListenerFn__;for(;B;)S=Yw(n,o,B,I)&&S,B=B.__ngNextListenerFn__;return u&&!1===S&&I.preventDefault(),S}}function Xw(t=1){return function ho(t){return(ur.lFrame.contextLView=function Ya(t,n){for(;t>0;)n=n[zs],t--;return n}(t,ur.lFrame.contextLView))[oi]}(t)}function RA(t,n){let o=null;const a=function Dn(t){const n=t.attrs;if(null!=n){const o=n.indexOf(5);if(!(1&o))return n[o+1]}return null}(t);for(let u=0;u<n.length;u++){const p=n[u];if("*"!==p){if(null===a?jt(t,p,!0):Jn(a,p))return u}else o=u}return o}function Zw(t){const n=zt()[yi][ii];if(!n.projection){const a=n.projection=function Za(t,n){const o=[];for(let a=0;a<t;a++)o.push(n);return o}(t?t.length:1,null),u=a.slice();let p=n.child;for(;null!==p;){const I=t?RA(p,t):0;null!==I&&(u[I]?u[I].projectionNext=p:a[I]=p,u[I]=p),p=p.next}}}function Jw(t,n=0,o){const a=zt(),u=vr(),p=Nc(u,cr+t,16,null,o||null);null===p.projection&&(p.projection=n),si(),(!a[Zr]||fs())&&32!=(32&p.flags)&&function NI(t,n,o){vm(n[Yn],0,n,o,sd(t,o,n),mm(o.parent||n[ii],o,n))}(u,a,p)}function cD(t,n,o,a){!function xE(t,n,o,a){const u=vr();if(u.firstCreatePass){const p=Ci();S_(u,new Ey(n,o,a),p.index),function fC(t,n){const o=t.contentQueries||(t.contentQueries=[]);n!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,n)}(u,t),2==(2&o)&&(u.staticContentQueries=!0)}return ME(u,zt(),o)}(t,n,o,a)}function uD(t,n,o){!function PE(t,n,o){const a=vr();return a.firstCreatePass&&(S_(a,new Ey(t,n,o),-1),2==(2&n)&&(a.staticViewQueries=!0)),ME(a,zt(),n)}(t,n,o)}function dD(t){const n=zt(),o=vr(),a=In();Pr(a+1);const u=Yf(o,a);if(t.dirty&&function Qs(t){return 4==(4&t[Bt])}(n)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const p=Qf(n,a);t.reset(p,kc),t.notifyOnChanges()}return!0}return!1}function hD(){return function Cy(t,n){return t[$i].queries[n].queryList}(zt(),In())}function CD(t,n=""){const o=zt(),a=vr(),u=t+cr,p=a.firstCreatePass?Nc(a,u,1,n,null):a.data[u],I=wD(a,o,p,n,t);o[u]=I,vl()&&Vp(a,o,I,p),Uo(p,!1)}let wD=(t,n,o,a,u)=>(Rn(!0),function Ns(t,n){return t.createText(n)}(n[Yn],a));function w0(t){return Qy("",t,""),w0}function Qy(t,n,o){const a=zt(),u=function Mg(t,n,o,a){return Os(t,Bo(),o)?n+Dr(o)+a:Qr}(a,t,n,o);return u!==Qr&&function ua(t,n,o){const a=Fo(n,t);!function mv(t,n,o){t.setValue(n,o)}(t[Yn],a,o)}(a,wi(),u),Qy}function D0(t,n,o){nu(n)&&(n=n());const a=zt();return Os(a,Bo(),n)&&Ka(vr(),wr(),a,t,n,a[Yn],o,!1),D0}function xD(t,n){const o=nu(t);return o&&t.set(n),o}function T0(t,n){const o=zt(),a=vr(),u=Ci();return E0(a,o,o[Yn],u,t,n),T0}function b0(t,n,o,a,u){if(t=ar(t),Array.isArray(t))for(let p=0;p<t.length;p++)b0(t[p],n,o,a,u);else{const p=vr(),I=zt(),C=Ci();let S=xi(t)?t:ar(t.provide);const B=Hu(t),Q=1048575&C.providerIndexes,re=C.directiveStart,Be=C.providerIndexes>>20;if(xi(t)||!t.multi){const ot=new Ha(B,u,ld),At=A0(S,n,u?Q:Q+Be,re);-1===At?(_(Ac(C,I),p,S),S0(p,t,n.length),n.push(S),C.directiveStart++,C.directiveEnd++,u&&(C.providerIndexes+=1048576),o.push(ot),I.push(ot)):(o[At]=ot,I[At]=ot)}else{const ot=A0(S,n,Q+Be,re),At=A0(S,n,Q,Q+Be),Cn=At>=0&&o[At];if(u&&!Cn||!u&&!(ot>=0&&o[ot])){_(Ac(C,I),p,S);const Vn=function YA(t,n,o,a,u){const p=new Ha(t,o,ld);return p.multi=[],p.index=n,p.componentProviders=0,ND(p,u,a&&!o),p}(u?qA:KA,o.length,u,a,B);!u&&Cn&&(o[At].providerFactory=Vn),S0(p,t,n.length,0),n.push(S),C.directiveStart++,C.directiveEnd++,u&&(C.providerIndexes+=1048576),o.push(Vn),I.push(Vn)}else S0(p,t,ot>-1?ot:At,ND(o[u?At:ot],B,!u&&a));!u&&a&&Cn&&o[At].componentProviders++}}}function S0(t,n,o,a){const u=xi(n),p=function $s(t){return!!t.useClass}(n);if(u||p){const S=(p?ar(n.useClass):n).prototype.ngOnDestroy;if(S){const B=t.destroyHooks||(t.destroyHooks=[]);if(!u&&n.multi){const Q=B.indexOf(o);-1===Q?B.push(o,[a,S]):B[Q+1].push(a,S)}else B.push(o,S)}}}function ND(t,n,o){return o&&t.componentProviders++,t.multi.push(n)-1}function A0(t,n,o,a){for(let u=o;u<a;u++)if(n[u]===t)return u;return-1}function KA(t,n,o,a){return R0(this.multi,[])}function qA(t,n,o,a){const u=this.multi;let p;if(this.providerFactory){const I=this.providerFactory.componentProviders,C=Un(o,o[Ae],this.providerFactory.index,a);p=C.slice(0,I),R0(u,p);for(let S=I;S<C.length;S++)p.push(C[S])}else p=[],R0(u,p);return p}function R0(t,n){for(let o=0;o<t.length;o++)n.push((0,t[o])());return n}function OD(t,n=[]){return o=>{o.providersResolver=(a,u)=>function zA(t,n,o){const a=vr();if(a.firstCreatePass){const u=Ei(t);b0(o,a.data,a.blueprint,u,!0),b0(n,a.data,a.blueprint,u,!1)}}(a,u?u(t):t,n)}}let QA=(()=>{var t;class n{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const u=Wc(0,a.type),p=u.length>0?ki([u],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,p)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return(t=n).\u0275prov=Di({token:t,providedIn:"environment",factory:()=>new t(Ji(Gs))}),n})();function kD(t){Uh("NgStandalone"),t.getStandaloneInjector=n=>n.get(QA).getOrCreateStandaloneInjector(t)}function WD(t,n,o,a,u){return function zD(t,n,o,a,u,p,I){const C=n+o;return function tp(t,n,o,a){const u=Os(t,n,o);return Os(t,n+1,a)||u}(t,C,u,p)?function ru(t,n,o){return t[n]=o}(t,C+2,I?a.call(I,u,p):a(u,p)):function j_(t,n){const o=t[n];return o===Qr?void 0:o}(t,C+2)}(zt(),function Ui(){const t=ur.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}(),t,n,o,a,u)}class dT{constructor(n){this.full=n;const o=n.split(".");this.major=o[0],this.minor=o[1],this.patch=o.slice(2).join(".")}}const WR=new dT("17.2.2");let hT=(()=>{var t;class n{log(a){console.log(a)}warn(a){console.warn(a)}}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"platform"}),n})();const mT=new J(""),_T=new J("");let F0,mM=(()=>{var t;class n{constructor(a,u,p){this._ngZone=a,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,F0||(function _M(t){F0=t}(p),p.addToWindow(u)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ho.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb()}});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,p){let I=-1;u&&u>0&&(I=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==I),a()},u)),this._callbacks.push({doneCb:a,timeoutId:I,updateCb:p})}whenStable(a,u,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,u,p){return[]}}return(t=n).\u0275fac=function(a){return new(a||t)(Ji(Ho),Ji(vT),Ji(_T))},t.\u0275prov=Di({token:t,factory:t.\u0275fac}),n})(),vT=(()=>{var t;class n{constructor(){this._applications=new Map}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){var p,I;return null!==(p=null===(I=F0)||void 0===I?void 0:I.findTestabilityInTree(this,a,u))&&void 0!==p?p:null}}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"platform"}),n})();function V0(t){return!!t&&"function"==typeof t.then}function yT(t){return!!t&&"function"==typeof t.subscribe}const IT=new J("");let U0=(()=>{var t;class n{constructor(){var a;this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,p)=>{this.resolve=u,this.reject=p}),this.appInits=null!==(a=di(IT,{optional:!0}))&&void 0!==a?a:[]}runInitializers(){if(this.initialized)return;const a=[];for(const p of this.appInits){const I=p();if(V0(I))a.push(I);else if(yT(I)){const C=new Promise((S,B)=>{I.subscribe({complete:S,error:B})});a.push(C)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{u()}).catch(p=>{this.reject(p)}),0===a.length&&u(),this.initialized=!0}}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();const B0=new J("");function wT(t,n){return Array.isArray(n)?n.reduce(wT,t):{...t,...n}}let op=(()=>{var t;class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=di(de),this.afterRenderEffectManager=di(gg),this.componentTypes=[],this.components=[],this.isStable=di(Ws).hasPendingTasks.pipe((0,Tt.k)(a=>!a)),this._injector=di(Gs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,u){const p=a instanceof ZI;if(!this._injector.get(U0).done)throw!p&&ln(a),new Ft(405,!1);let C;C=p?a:this._injector.get($f).resolveComponentFactory(a),this.componentTypes.push(C.componentType);const S=function vM(t){return t.isBoundToModule}(C)?void 0:this._injector.get(wn),Q=C.create(h.NULL,[],u||C.selector,S),re=Q.location.nativeElement,Be=Q.injector.get(mT,null);return null==Be||Be.registerApplication(re),Q.onDestroy(()=>{this.detachView(Q.hostView),eI(this.components,Q),null==Be||Be.unregisterApplication(re)}),this._loadComponent(Q),Q}tick(){if(this._runningTick)throw new Ft(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let a=0;do{if(100===a)throw new Ft(103,!1);const u=0===a;for(let{_lView:p,notifyErrorHandler:I}of this._views)!u&&!DT(p)||this.detectChangesInView(p,I,u);this.afterRenderEffectManager.execute(),a++}while(this._views.some(({_lView:u})=>DT(u)))}detectChangesInView(a,u,p){let I;p?(I=0,a[Bt]|=1024):I=64&a[Bt]?0:1,eg(a,u,I)}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;eI(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const u=this._injector.get(B0,[]);[...this._bootstrapListeners,...u].forEach(p=>p(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>eI(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ft(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function eI(t,n){const o=t.indexOf(n);o>-1&&t.splice(o,1)}function DT(t){return Jo(t)}class IM{constructor(n,o){this.ngModuleFactory=n,this.componentFactories=o}}let EM=(()=>{var t;class n{compileModuleSync(a){return new gr(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),I=cl(En(a).declarations).reduce((C,S)=>{const B=Nt(S);return B&&C.push(new Bh(B)),C},[]);return new IM(u,I)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),DM=(()=>{var t;class n{constructor(){this.zone=di(Ho),this.applicationRef=di(op)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var a;null===(a=this._onMicrotaskEmptySubscription)||void 0===a||a.unsubscribe()}}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function TM(){const t=di(Ho),n=di(j);return o=>t.runOutsideAngular(()=>n.handleError(o))}let SM=(()=>{var t;class n{constructor(){this.subscription=new xt.wH,this.initialized=!1,this.zone=di(Ho),this.pendingTasks=di(Ws)}initialize(){if(this.initialized)return;this.initialized=!0;let a=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(a=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ho.assertNotInAngularZone(),queueMicrotask(()=>{null!==a&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(a),a=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var u;Ho.assertInAngularZone(),null!==(u=a)&&void 0!==u||(a=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();const tI=new J("",{providedIn:"root",factory:()=>di(tI,Yt.Optional|Yt.SkipSelf)||function AM(){return typeof $localize<"u"&&$localize.locale||$g}()}),RM=new J("",{providedIn:"root",factory:()=>"USD"}),$0=new J("");let AT=(()=>{var t;class n{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const p=function uy(t="zone.js",n){return"noop"===t?new ly:"zone.js"===t?new Ho(n):t}(null==u?void 0:u.ngZone,function ST(t){var n,o;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(n=null==t?void 0:t.eventCoalescing)&&void 0!==n&&n,shouldCoalesceRunChangeDetection:null!==(o=null==t?void 0:t.runCoalescing)&&void 0!==o&&o}}({eventCoalescing:null==u?void 0:u.ngZoneEventCoalescing,runCoalescing:null==u?void 0:u.ngZoneRunCoalescing}));return p.run(()=>{const I=function Wr(t,n,o){return new Ur(t,n,o)}(a.moduleType,this.injector,function bT(t){return[{provide:Ho,useFactory:t},{provide:Pl,multi:!0,useFactory:()=>{const n=di(DM,{optional:!0});return()=>n.initialize()}},{provide:Pl,multi:!0,useFactory:()=>{const n=di(SM);return()=>{n.initialize()}}},{provide:de,useFactory:TM}]}(()=>p)),C=I.injector.get(j,null);return p.runOutsideAngular(()=>{const S=p.onError.subscribe({next:B=>{C.handleError(B)}});I.onDestroy(()=>{eI(this._modules,I),S.unsubscribe()})}),function CT(t,n,o){try{const a=o();return V0(a)?a.catch(u=>{throw n.runOutsideAngular(()=>t.handleError(u)),u}):a}catch(a){throw n.runOutsideAngular(()=>t.handleError(a)),a}}(C,p,()=>{const S=I.injector.get(U0);return S.runInitializers(),S.donePromise.then(()=>(function Dw(t){"string"==typeof t&&(ww=t.toLowerCase().replace(/_/g,"-"))}(I.injector.get(tI,$g)||$g),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,u=[]){const p=wT({},u);return function wM(t,n,o){const a=new gr(o);return Promise.resolve(a)}(0,0,a).then(I=>this.bootstrapModuleFactory(I,p))}_moduleDoBootstrap(a){const u=a.injector.get(op);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(p=>u.bootstrap(p));else{if(!a.instance.ngDoBootstrap)throw new Ft(-403,!1);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ft(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const a=this._injector.get($0,null);a&&(a.forEach(u=>u()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=n).\u0275fac=function(a){return new(a||t)(Ji(h))},t.\u0275prov=Di({token:t,factory:t.\u0275fac,providedIn:"platform"}),n})(),Hh=null;const RT=new J("");function MT(t,n,o=[]){const a=`Platform: ${n}`,u=new J(a);return(p=[])=>{let I=G0();if(!I||I.injector.get(RT,!1)){const C=[...o,...p,{provide:u,useValue:!0}];t?t(C):function PM(t){if(Hh&&!Hh.get(RT,!1))throw new Ft(400,!1);(function ET(){!function nt(t){Wt=t}(()=>{throw new Ft(600,!1)})})(),Hh=t;const n=t.get(AT);(function xT(t){const n=t.get(fn,null);null==n||n.forEach(o=>o())})(t)}(function PT(t=[],n){return h.create({name:n,providers:[{provide:zc,useValue:"platform"},{provide:$0,useValue:new Set([()=>Hh=null])},...t]})}(C,a))}return function xM(t){const n=G0();if(!n)throw new Ft(401,!1);return n}()}}function G0(){var t,n;return null!==(t=null===(n=Hh)||void 0===n?void 0:n.get(AT))&&void 0!==t?t:null}function OM(){return!1}function kM(){}const UM=MT(null,"core",[]);let BM=(()=>{var t;class n{constructor(a){}}return(t=n).\u0275fac=function(a){return new(a||t)(Ji(op))},t.\u0275mod=Pt({type:t}),t.\u0275inj=Yl({}),n})();function fP(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function gP(t,n){const o=Nt(t),a=n.elementInjector||$a();return new Bh(o).create(a,n.projectableNodes,n.hostElement,n.environmentInjector)}function mP(t){const n=Nt(t);if(!n)return null;const o=new Bh(n);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},7260:(mn,st,N)=>{"use strict";N.d(st,{_o:()=>Wt,cd:()=>Le,Ev:()=>Ye,mq:()=>se,ox:()=>L,_8:()=>Ce,GW:()=>te,CU:()=>It});var l=N(4580),Z=(N(864),N(1368)),ee=N(4496),Ne=N(7900),ge=N(6e3),_e=N(5657),je=N(2700),Qe=N(3252),be=N(9900),Ee=N(3412),Ke=N(3920),He=N(7368),We=N(4704),Oe=N(5960);class it extends _e.E{constructor(me=1/0,he=1/0,ye=Oe.K){super(),this._bufferSize=me,this._windowTime=he,this._timestampProvider=ye,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=he===1/0,this._bufferSize=Math.max(1,me),this._windowTime=Math.max(1,he)}next(me){const{isStopped:he,_buffer:ye,_infiniteTimeWindow:Fe,_timestampProvider:Je,_windowTime:De}=this;he||(ye.push(me),!Fe&&ye.push(Je.now()+De)),this._trimBuffer(),super.next(me)}_subscribe(me){this._throwIfClosed(),this._trimBuffer();const he=this._innerSubscribe(me),{_infiniteTimeWindow:ye,_buffer:Fe}=this,Je=Fe.slice();for(let De=0;De<Je.length&&!me.closed;De+=ye?1:2)me.next(Je[De]);return this._checkFinalizedStatuses(me),he}_trimBuffer(){const{_bufferSize:me,_timestampProvider:he,_buffer:ye,_infiniteTimeWindow:Fe}=this,Je=(Fe?1:2)*me;if(me<1/0&&Je<ye.length&&ye.splice(0,ye.length-Je),!Fe){const De=he.now();let $t=0;for(let Jt=1;Jt<ye.length&&ye[Jt]<=De;Jt+=2)$t=Jt;$t&&ye.splice(0,$t+1)}}}var Ge=N(7648);function Ve(nt,me,he){let ye,Fe=!1;return nt&&"object"==typeof nt?({bufferSize:ye=1/0,windowTime:me=1/0,refCount:Fe=!1,scheduler:he}=nt):ye=null!=nt?nt:1/0,(0,Ge.o)({connector:()=>new it(ye,me,he),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Fe})}var $e=N(5084),pt=N(8880);function ve(nt,me){return(0,pt.m)(me)?(0,He.G)(()=>nt,me):(0,He.G)(()=>nt)}var Xe=N(2924),et=N(6684);N(9252);const te=new ee.UbH("angularfire2.auth.use-emulator"),se=new ee.UbH("angularfire2.auth.settings"),L=new ee.UbH("angularfire2.auth.tenant-id"),Le=new ee.UbH("angularfire2.auth.langugage-code"),Ce=new ee.UbH("angularfire2.auth.use-device-language"),Ye=new ee.UbH("angularfire.auth.persistence"),It=(nt,me,he,ye,Fe,Je,De,$t)=>(0,ge.PQ)(`${nt.name}.auth`,"AngularFireAuth",nt.name,()=>{const Jt=me.runOutsideAngular(()=>nt.auth());if(he&&Jt.useEmulator(...he),ye&&(Jt.tenantId=ye),Jt.languageCode=Fe,Je&&Jt.useDeviceLanguage(),De)for(const[dn,Lt]of Object.entries(De))Jt.settings[dn]=Lt;return $t&&Jt.setPersistence($t),Jt},[he,ye,Fe,Je,De,$t]);let Wt=(()=>{var nt;class me{constructor(ye,Fe,Je,De,$t,Jt,dn,Lt,an,Qn,jn,xt){(0,l.c)(this,"authState",void 0),(0,l.c)(this,"idToken",void 0),(0,l.c)(this,"user",void 0),(0,l.c)(this,"idTokenResult",void 0),(0,l.c)(this,"credential",void 0);const ft=new _e.E,Tt=(0,je.of)(void 0).pipe((0,Ke.y)($t.outsideAngular),(0,He.G)(()=>De.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,864)))),(0,We.k)(()=>(0,ge._G)(ye,De,Fe)),(0,We.k)(kt=>It(kt,De,Jt,Lt,an,Qn,dn,jn)),Ve({bufferSize:1,refCount:!1}));if((0,Z.uf)(Je))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,je.of)(null);else{Tt.pipe((0,$e.K)()).subscribe();const kt=Tt.pipe((0,He.G)(Qt=>Qt.getRedirectResult().then(Sn=>Sn,()=>null)),Ne.wH,Ve({bufferSize:1,refCount:!1})),vn=Tt.pipe((0,He.G)(Qt=>new Qe._(Sn=>({unsubscribe:De.runOutsideAngular(()=>Qt.onAuthStateChanged(xn=>Sn.next(xn),xn=>Sn.error(xn),()=>Sn.complete()))})))),Ft=Tt.pipe((0,He.G)(Qt=>new Qe._(Sn=>({unsubscribe:De.runOutsideAngular(()=>Qt.onIdTokenChanged(xn=>Sn.next(xn),xn=>Sn.error(xn),()=>Sn.complete()))}))));this.authState=kt.pipe(ve(vn),(0,Xe.y)($t.outsideAngular),(0,Ke.y)($t.insideAngular)),this.user=kt.pipe(ve(Ft),(0,Xe.y)($t.outsideAngular),(0,Ke.y)($t.insideAngular)),this.idToken=this.user.pipe((0,He.G)(Qt=>Qt?(0,be.Q)(Qt.getIdToken()):(0,je.of)(null))),this.idTokenResult=this.user.pipe((0,He.G)(Qt=>Qt?(0,be.Q)(Qt.getIdTokenResult()):(0,je.of)(null))),this.credential=(0,Ee.U)(kt,ft,this.authState.pipe((0,et.I)(Qt=>!Qt))).pipe((0,We.k)(Qt=>null!=Qt&&Qt.user?Qt:null),(0,Xe.y)($t.outsideAngular),(0,Ke.y)($t.insideAngular))}return(0,ge._w)(this,Tt,De,{spy:{apply:(kt,vn,Ft)=>{(kt.startsWith("signIn")||kt.startsWith("createUser"))&&Ft.then(Qt=>ft.next(Qt))}}})}}return nt=me,(0,l.c)(me,"\u0275fac",function(ye){return new(ye||nt)(ee.CoB(ge.E9),ee.CoB(ge.Ml,8),ee.CoB(ee.AHE),ee.CoB(ee.WW2),ee.CoB(Ne.u),ee.CoB(te,8),ee.CoB(se,8),ee.CoB(L,8),ee.CoB(Le,8),ee.CoB(Ce,8),ee.CoB(Ye,8),ee.CoB(Ne.gJ,8))}),(0,l.c)(me,"\u0275prov",ee.wxM({token:nt,factory:nt.\u0275fac,providedIn:"any"})),me})()},5400:(mn,st,N)=>{"use strict";N.d(st,{qk:()=>pp,iq:()=>Q_});var l=N(4580),K=N(4496),Z=N(7900),ee=N(6e3),Ne=N(7260),ge=N(4704),_e=N(7648),je=N(208),Qe=N(5448),be=N(7773),Ee=N(560),Ke=N(528),He=N(308),We=N(6624),Ge=N(7368),Ve=N(4e3),$e=N(112),pt=N(3252),ve=N(3412),Xe=N(2700),at=(N(864),N(8368)),ae=N(4920),te=N(1528),se=N(9360),L=N(7144),Le=N(5976);const Ce="@firebase/database";let It="";function Wt(g){It=g}class un{constructor(d){this.domStorage_=d,this.prefix_="firebase:"}set(d,h){null==h?this.domStorage_.removeItem(this.prefixedName_(d)):this.domStorage_.setItem(this.prefixedName_(d),(0,L.i)(h))}get(d){const h=this.domStorage_.getItem(this.prefixedName_(d));return null==h?null:(0,L.GI)(h)}remove(d){this.domStorage_.removeItem(this.prefixedName_(d))}prefixedName_(d){return this.prefix_+d}toString(){return this.domStorage_.toString()}}class nt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(d,h){null==h?delete this.cache_[d]:this.cache_[d]=h}get(d){return(0,L.Y7)(this.cache_,d)?this.cache_[d]:null}remove(d){delete this.cache_[d]}}const me=function(g){try{if(typeof window<"u"&&typeof window[g]<"u"){const d=window[g];return d.setItem("firebase:sentinel","cache"),d.removeItem("firebase:sentinel"),new un(d)}}catch{}return new nt},he=me("localStorage"),ye=me("sessionStorage"),Fe=new Le.YJ("@firebase/database"),Je=function(){let g=1;return function(){return g++}}(),De=function(g){const d=(0,L.OS)(g),h=new L.qS;h.update(d);const y=h.digest();return L.Al.encodeByteArray(y)},$t=function(...g){let d="";for(let h=0;h<g.length;h++){const y=g[h];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?d+=$t.apply(null,y):d+="object"==typeof y?(0,L.i)(y):y,d+=" "}return d};let Jt=null,dn=!0;const Lt=function(g,d){(0,L.Uc)(!d||!0===g||!1===g,"Can't turn on custom loggers persistently."),!0===g?(Fe.logLevel=Le.Ge.VERBOSE,Jt=Fe.log.bind(Fe),d&&ye.set("logging_enabled",!0)):"function"==typeof g?Jt=g:(Jt=null,ye.remove("logging_enabled"))},an=function(...g){if(!0===dn&&(dn=!1,null===Jt&&!0===ye.get("logging_enabled")&&Lt(!0)),Jt){const d=$t.apply(null,g);Jt(d)}},Qn=function(g){return function(...d){an(g,...d)}},jn=function(...g){const d="FIREBASE INTERNAL ERROR: "+$t(...g);Fe.error(d)},xt=function(...g){const d=`FIREBASE FATAL ERROR: ${$t(...g)}`;throw Fe.error(d),new Error(d)},ft=function(...g){const d="FIREBASE WARNING: "+$t(...g);Fe.warn(d)},kt=function(g){return"number"==typeof g&&(g!=g||g===Number.POSITIVE_INFINITY||g===Number.NEGATIVE_INFINITY)},Ft="[MIN_NAME]",Qt="[MAX_NAME]",Sn=function(g,d){if(g===d)return 0;if(g===Ft||d===Qt)return-1;if(d===Ft||g===Qt)return 1;{const h=bt(g),y=bt(d);return null!==h?null!==y?h-y==0?g.length-d.length:h-y:-1:null!==y?1:g<d?-1:1}},xn=function(g,d){return g===d?0:g<d?-1:1},br=function(g,d){if(d&&g in d)return d[g];throw new Error("Missing required key ("+g+") in object: "+(0,L.i)(d))},mr=function(g){if("object"!=typeof g||null===g)return(0,L.i)(g);const d=[];for(const y in g)d.push(y);d.sort();let h="{";for(let y=0;y<d.length;y++)0!==y&&(h+=","),h+=(0,L.i)(d[y]),h+=":",h+=mr(g[d[y]]);return h+="}",h},Cr=function(g,d){const h=g.length;if(h<=d)return[g];const y=[];for(let T=0;T<h;T+=d)y.push(g.substring(T,T+d>h?h:T+d));return y};function Tn(g,d){for(const h in g)g.hasOwnProperty(h)&&d(h,g[h])}const Wn=function(g){(0,L.Uc)(!kt(g),"Invalid JSON number");const y=1023;let T,O,j,de,xe;0===g?(O=0,j=0,T=1/g==-1/0?1:0):(T=g<0,(g=Math.abs(g))>=Math.pow(2,1-y)?(de=Math.min(Math.floor(Math.log(g)/Math.LN2),y),O=de+y,j=Math.round(g*Math.pow(2,52-de)-Math.pow(2,52))):(O=0,j=Math.round(g/Math.pow(2,-1074))));const Ze=[];for(xe=52;xe;xe-=1)Ze.push(j%2?1:0),j=Math.floor(j/2);for(xe=11;xe;xe-=1)Ze.push(O%2?1:0),O=Math.floor(O/2);Ze.push(T?1:0),Ze.reverse();const Vt=Ze.join("");let Gt="";for(xe=0;xe<64;xe+=8){let Zt=parseInt(Vt.substr(xe,8),2).toString(16);1===Zt.length&&(Zt="0"+Zt),Gt+=Zt}return Gt.toLowerCase()},Et=new RegExp("^-?(0*)\\d{1,10}$"),bt=function(g){if(Et.test(g)){const d=Number(g);if(d>=-2147483648&&d<=2147483647)return d}return null},yn=function(g){try{g()}catch(d){setTimeout(()=>{throw ft("Exception was thrown by user callback.",d.stack||""),d},Math.floor(0))}},nr=function(g,d){const h=setTimeout(g,d);return"number"==typeof h&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(h):"object"==typeof h&&h.unref&&h.unref(),h};class jr{constructor(d,h){this.appName_=d,this.appCheckProvider=h,this.appCheck=null==h?void 0:h.getImmediate({optional:!0}),this.appCheck||null==h||h.get().then(y=>this.appCheck=y)}getToken(d){return this.appCheck?this.appCheck.getToken(d):new Promise((h,y)=>{setTimeout(()=>{this.appCheck?this.getToken(d).then(h,y):h(null)},0)})}addTokenChangeListener(d){var h;null===(h=this.appCheckProvider)||void 0===h||h.get().then(y=>y.addTokenListener(d))}notifyForInvalidToken(){ft(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class po{constructor(d,h,y){this.appName_=d,this.firebaseOptions_=h,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(T=>this.auth_=T)}getToken(d){return this.auth_?this.auth_.getToken(d).catch(h=>h&&"auth/token-not-initialized"===h.code?(an("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(h)):new Promise((h,y)=>{setTimeout(()=>{this.auth_?this.getToken(d).then(h,y):h(null)},0)})}addTokenChangeListener(d){this.auth_?this.auth_.addAuthTokenListener(d):this.authProvider_.get().then(h=>h.addAuthTokenListener(d))}removeTokenChangeListener(d){this.authProvider_.get().then(h=>h.removeAuthTokenListener(d))}notifyForInvalidToken(){let d='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';d+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ft(d)}}let Xr=(()=>{class g{constructor(h){this.accessToken=h}getToken(h){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(h){h(this.accessToken)}removeTokenChangeListener(h){}notifyForInvalidToken(){}}return g.OWNER="owner",g})();const Rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ue="websocket",tt="long_polling";class ut{constructor(d,h,y,T,O=!1,j="",de=!1,xe=!1){this.secure=h,this.namespace=y,this.webSocketOnly=T,this.nodeAdmin=O,this.persistenceKey=j,this.includeNamespaceInQueryParams=de,this.isUsingEmulator=xe,this._host=d.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=he.get("host:"+d)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(d){d!==this.internalHost&&(this.internalHost=d,this.isCacheableHost()&&he.set("host:"+this._host,this.internalHost))}toString(){let d=this.toURLString();return this.persistenceKey&&(d+="<"+this.persistenceKey+">"),d}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function $n(g,d,h){let y;if((0,L.Uc)("string"==typeof d,"typeof type must == string"),(0,L.Uc)("object"==typeof h,"typeof params must == object"),d===Ue)y=(g.secure?"wss://":"ws://")+g.internalHost+"/.ws?";else{if(d!==tt)throw new Error("Unknown connection type: "+d);y=(g.secure?"https://":"http://")+g.internalHost+"/.lp?"}(function pn(g){return g.host!==g.internalHost||g.isCustomHost()||g.includeNamespaceInQueryParams})(g)&&(h.ns=g.namespace);const T=[];return Tn(h,(O,j)=>{T.push(O+"="+j)}),y+T.join("&")}class qn{constructor(){this.counters_={}}incrementCounter(d,h=1){(0,L.Y7)(this.counters_,d)||(this.counters_[d]=0),this.counters_[d]+=h}get(){return(0,L.O0)(this.counters_)}}const Nr={},Ar={};function Br(g){const d=g.toString();return Nr[d]||(Nr[d]=new qn),Nr[d]}class Mr{constructor(d){this.onMessage_=d,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(d,h){this.closeAfterResponse=d,this.onClose=h,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(d,h){for(this.pendingResponses[d]=h;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let T=0;T<y.length;++T)y[T]&&yn(()=>{this.onMessage_(y[T])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pi{constructor(d,h,y,T,O,j,de){this.connId=d,this.repoInfo=h,this.applicationId=y,this.appCheckToken=T,this.authToken=O,this.transportSessionId=j,this.lastSessionId=de,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qn(d),this.stats_=Br(h),this.urlFn=xe=>(this.appCheckToken&&(xe.ac=this.appCheckToken),$n(h,tt,xe))}open(d,h){this.curSegmentNum=0,this.onDisconnect_=h,this.myPacketOrderer=new Mr(d),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(g){if((0,L.iw)()||"complete"===document.readyState)g();else{let d=!1;const h=function(){document.body?d||(d=!0,g()):setTimeout(h,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",h,!1),window.addEventListener("load",h,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&h()}),window.attachEvent("onload",h))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kr((...O)=>{const[j,de,xe,Ze,Vt]=O;if(this.incrementIncomingBytes_(O),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===j)this.id=de,this.password=xe;else{if("close"!==j)throw new Error("Unrecognized command received: "+j);de?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(de,()=>{this.onClosed_()})):this.onClosed_()}},(...O)=>{const[j,de]=O;this.incrementIncomingBytes_(O),this.myPacketOrderer.handleResponse(j,de)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Rt.test(location.hostname)&&(y.r="f");const T=this.urlFn(y);this.log_("Connecting via long-poll to "+T),this.scriptTagHolder.addTag(T,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pi.forceAllow_=!0}static forceDisallow(){pi.forceDisallow_=!0}static isAvailable(){return!((0,L.iw)()||!pi.forceAllow_&&(pi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(d){const h=(0,L.i)(d);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);const y=(0,L.c9)(h),T=Cr(y,1840);for(let O=0;O<T.length;O++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,T.length,T[O]),this.curSegmentNum++}addDisconnectPingFrame(d,h){if((0,L.iw)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=d,y.pw=h,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(d){const h=(0,L.i)(d).length;this.bytesReceived+=h,this.stats_.incrementCounter("bytes_received",h)}}class Kr{constructor(d,h,y,T){if(this.onDisconnect=y,this.urlFn=T,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.iw)())this.commandCB=d,this.onMessageCB=h;else{this.uniqueCallbackIdentifier=Je(),window["pLPCommand"+this.uniqueCallbackIdentifier]=d,window["pRTLPCB"+this.uniqueCallbackIdentifier]=h,this.myIFrame=Kr.createIFrame_();let O="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(O='<script>document.domain="'+document.domain+'";<\/script>');const j="<html><body>"+O+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(j),this.myIFrame.doc.close()}catch(de){an("frame writing exception"),de.stack&&an(de.stack),an(de)}}}static createIFrame_(){const d=document.createElement("iframe");if(d.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(d);try{d.contentWindow.document||an("No IE domain setting required")}catch{const y=document.domain;d.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return d.contentDocument?d.doc=d.contentDocument:d.contentWindow?d.doc=d.contentWindow.document:d.document&&(d.doc=d.document),d}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const d=this.onDisconnect;d&&(this.onDisconnect=null,d())}startLongPoll(d,h){for(this.myID=d,this.myPW=h,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const d={};d.id=this.myID,d.pw=this.myPW,d.ser=this.currentSerial;let h=this.urlFn(d),y="",T=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const j=this.pendingSegs.shift();y=y+"&seg"+T+"="+j.seg+"&ts"+T+"="+j.ts+"&d"+T+"="+j.d,T++}return h+=y,this.addLongPollTag_(h,this.currentSerial),!0}return!1}enqueueSegment(d,h,y){this.pendingSegs.push({seg:d,ts:h,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(d,h){this.outstandingRequests.add(h);const y=()=>{this.outstandingRequests.delete(h),this.newRequest_()},T=setTimeout(y,Math.floor(25e3));this.addTag(d,()=>{clearTimeout(T),y()})}addTag(d,h){(0,L.iw)()?this.doNodeLongPoll(d,h):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=d,y.onload=y.onreadystatechange=function(){const T=y.readyState;(!T||"loaded"===T||"complete"===T)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),h())},y.onerror=()=>{an("Long-poll script failed to load: "+d),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch{}},Math.floor(1))}}let Pe=null;typeof MozWebSocket<"u"?Pe=MozWebSocket:typeof WebSocket<"u"&&(Pe=WebSocket);let Me=(()=>{class g{constructor(h,y,T,O,j,de,xe){this.connId=h,this.applicationId=T,this.appCheckToken=O,this.authToken=j,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qn(this.connId),this.stats_=Br(y),this.connURL=g.connectionURL_(y,de,xe,O,T),this.nodeAdmin=y.nodeAdmin}static connectionURL_(h,y,T,O,j){const de={v:"5"};return!(0,L.iw)()&&typeof location<"u"&&location.hostname&&Rt.test(location.hostname)&&(de.r="f"),y&&(de.s=y),T&&(de.ls=T),O&&(de.ac=O),j&&(de.p=j),$n(h,Ue,de)}open(h,y){this.onDisconnect=y,this.onMessage=h,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,he.set("previous_websocket_failure",!0);try{let T;if((0,L.iw)()){T={headers:{"User-Agent":`Firebase/5/${It}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(T.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(T.headers["X-Firebase-AppCheck"]=this.appCheckToken);const j=process.env,de=0===this.connURL.indexOf("wss://")?j.HTTPS_PROXY||j.https_proxy:j.HTTP_PROXY||j.http_proxy;de&&(T.proxy={origin:de})}this.mySock=new Pe(this.connURL,[],T)}catch(T){this.log_("Error instantiating WebSocket.");const O=T.message||T.data;return O&&this.log_(O),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=T=>{this.handleIncomingFrame(T)},this.mySock.onerror=T=>{this.log_("WebSocket error.  Closing connection.");const O=T.message||T.data;O&&this.log_(O),this.onClosed_()}}start(){}static forceDisallow(){g.forceDisallow_=!0}static isAvailable(){let h=!1;if(typeof navigator<"u"&&navigator.userAgent){const T=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);T&&T.length>1&&parseFloat(T[1])<4.4&&(h=!0)}return!h&&null!==Pe&&!g.forceDisallow_}static previouslyFailed(){return he.isInMemoryStorage||!0===he.get("previous_websocket_failure")}markConnectionHealthy(){he.remove("previous_websocket_failure")}appendFrame_(h){if(this.frames.push(h),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const T=(0,L.GI)(y);this.onMessage(T)}}handleNewFrameCount_(h){this.totalFrames=h,this.frames=[]}extractFrameCount_(h){if((0,L.Uc)(null===this.frames,"We already have a frame buffer"),h.length<=6){const y=Number(h);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),h}handleIncomingFrame(h){if(null===this.mySock)return;const y=h.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const T=this.extractFrameCount_(y);null!==T&&this.appendFrame_(T)}}send(h){this.resetKeepAlive();const y=(0,L.i)(h);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const T=Cr(y,16384);T.length>1&&this.sendString_(String(T.length));for(let O=0;O<T.length;O++)this.sendString_(T[O])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(h){try{this.mySock.send(h)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return g.responsesRequiredToBeHealthy=2,g.healthyTimeout=3e4,g})(),X=(()=>{class g{constructor(h){this.initTransports_(h)}static get ALL_TRANSPORTS(){return[pi,Me]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(h){const y=Me&&Me.isAvailable();let T=y&&!Me.previouslyFailed();if(h.webSocketOnly&&(y||ft("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),T=!0),T)this.transports_=[Me];else{const O=this.transports_=[];for(const j of g.ALL_TRANSPORTS)j&&j.isAvailable()&&O.push(j);g.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return g.globalTransportInitialized_=!1,g})();class Pt{constructor(d,h,y,T,O,j,de,xe,Ze,Vt){this.id=d,this.repoInfo_=h,this.applicationId_=y,this.appCheckToken_=T,this.authToken_=O,this.onMessage_=j,this.onReady_=de,this.onDisconnect_=xe,this.onKill_=Ze,this.lastSessionId=Vt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qn("c:"+this.id+":"),this.transportManager_=new X(h),this.log_("Connection created"),this.start_()}start_(){const d=this.transportManager_.initialTransport();this.conn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const h=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(h,y)},Math.floor(0));const T=d.healthyTimeout||0;T>0&&(this.healthyTimeout_=nr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(T)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(d){return h=>{d===this.conn_?this.onConnectionLost_(h):d===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(d){return h=>{2!==this.state_&&(d===this.rx_?this.onPrimaryMessageReceived_(h):d===this.secondaryConn_?this.onSecondaryMessageReceived_(h):this.log_("message on old connection"))}}sendRequest(d){this.sendData_({t:"d",d})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(d){if("t"in d){const h=d.t;"a"===h?this.upgradeIfSecondaryHealthy_():"r"===h?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===h&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(d){const h=br("t",d),y=br("d",d);if("c"===h)this.onSecondaryControl_(y);else{if("d"!==h)throw new Error("Unknown protocol layer: "+h);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(d){const h=br("t",d),y=br("d",d);"c"===h?this.onControl_(y):"d"===h&&this.onDataMessage_(y)}onDataMessage_(d){this.onPrimaryResponse_(),this.onMessage_(d)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(d){const h=br("t",d);if("d"in d){const y=d.d;if("h"===h){const T=Object.assign({},y);this.repoInfo_.isUsingEmulator&&(T.h=this.repoInfo_.host),this.onHandshake_(T)}else if("n"===h){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let T=0;T<this.pendingDataMessages.length;++T)this.onDataMessage_(this.pendingDataMessages[T]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===h?this.onConnectionShutdown_(y):"r"===h?this.onReset_(y):"e"===h?jn("Server Error: "+y):"o"===h?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jn("Unknown control packet command: "+h)}}onHandshake_(d){const h=d.ts,y=d.v,T=d.h;this.sessionId=d.s,this.repoInfo_.host=T,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,h),"5"!==y&&ft("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const d=this.transportManager_.upgradeTransport();d&&this.startUpgrade_(d)}startUpgrade_(d){this.secondaryConn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const h=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(h,y),nr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(d){this.log_("Reset packet received.  New host: "+d),this.repoInfo_.host=d,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(d,h){this.log_("Realtime connection established."),this.conn_=d,this.state_=1,this.onReady_&&(this.onReady_(h,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const d=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===d||this.rx_===d)&&this.close()}onConnectionLost_(d){this.conn_=null,d||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(he.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(d){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(d),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(d){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(d)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Kt{put(d,h,y,T){}merge(d,h,y,T){}refreshAuthToken(d){}refreshAppCheckToken(d){}onDisconnectPut(d,h,y){}onDisconnectMerge(d,h,y){}onDisconnectCancel(d,h){}reportStats(d){}}class gn{constructor(d){this.allowedEvents_=d,this.listeners_={},(0,L.Uc)(Array.isArray(d)&&d.length>0,"Requires a non-empty array")}trigger(d,...h){if(Array.isArray(this.listeners_[d])){const y=[...this.listeners_[d]];for(let T=0;T<y.length;T++)y[T].callback.apply(y[T].context,h)}}on(d,h,y){this.validateEventType_(d),this.listeners_[d]=this.listeners_[d]||[],this.listeners_[d].push({callback:h,context:y});const T=this.getInitialEvent(d);T&&h.apply(y,T)}off(d,h,y){this.validateEventType_(d);const T=this.listeners_[d]||[];for(let O=0;O<T.length;O++)if(T[O].callback===h&&(!y||y===T[O].context))return void T.splice(O,1)}validateEventType_(d){(0,L.Uc)(this.allowedEvents_.find(h=>h===d),"Unknown event: "+d)}}class tn extends gn{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.AV)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new tn}getInitialEvent(d){return(0,L.Uc)("online"===d,"Unknown event type: "+d),[this.online_]}currentlyOnline(){return this.online_}}class qt{constructor(d,h){if(void 0===h){this.pieces_=d.split("/");let y=0;for(let T=0;T<this.pieces_.length;T++)this.pieces_[T].length>0&&(this.pieces_[y]=this.pieces_[T],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=d,this.pieceNum_=h}toString(){let d="";for(let h=this.pieceNum_;h<this.pieces_.length;h++)""!==this.pieces_[h]&&(d+="/"+this.pieces_[h]);return d||"/"}}function ln(){return new qt("")}function En(g){return g.pieceNum_>=g.pieces_.length?null:g.pieces_[g.pieceNum_]}function kr(g){return g.pieces_.length-g.pieceNum_}function tr(g){let d=g.pieceNum_;return d<g.pieces_.length&&d++,new qt(g.pieces_,d)}function A(g){return g.pieceNum_<g.pieces_.length?g.pieces_[g.pieces_.length-1]:null}function F(g,d=0){return g.pieces_.slice(g.pieceNum_+d)}function le(g){if(g.pieceNum_>=g.pieces_.length)return null;const d=[];for(let h=g.pieceNum_;h<g.pieces_.length-1;h++)d.push(g.pieces_[h]);return new qt(d,0)}function Ae(g,d){const h=[];for(let y=g.pieceNum_;y<g.pieces_.length;y++)h.push(g.pieces_[y]);if(d instanceof qt)for(let y=d.pieceNum_;y<d.pieces_.length;y++)h.push(d.pieces_[y]);else{const y=d.split("/");for(let T=0;T<y.length;T++)y[T].length>0&&h.push(y[T])}return new qt(h,0)}function Bt(g){return g.pieceNum_>=g.pieces_.length}function rr(g,d){const h=En(g),y=En(d);if(null===h)return d;if(h===y)return rr(tr(g),tr(d));throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+g+")")}function Si(g,d){const h=F(g,0),y=F(d,0);for(let T=0;T<h.length&&T<y.length;T++){const O=Sn(h[T],y[T]);if(0!==O)return O}return h.length===y.length?0:h.length<y.length?-1:1}function ii(g,d){if(kr(g)!==kr(d))return!1;for(let h=g.pieceNum_,y=d.pieceNum_;h<=g.pieces_.length;h++,y++)if(g.pieces_[h]!==d.pieces_[y])return!1;return!0}function Zr(g,d){let h=g.pieceNum_,y=d.pieceNum_;if(kr(g)>kr(d))return!1;for(;h<g.pieces_.length;){if(g.pieces_[h]!==d.pieces_[y])return!1;++h,++y}return!0}class Yo{constructor(d,h){this.errorPrefix_=h,this.parts_=F(d,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,L.Uj)(this.parts_[y]);co(this)}}function co(g){if(g.byteLength_>768)throw new Error(g.errorPrefix_+"has a key path longer than 768 bytes ("+g.byteLength_+").");if(g.parts_.length>32)throw new Error(g.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Yn(g))}function Yn(g){return 0===g.parts_.length?"":"in property '"+g.parts_.join(".")+"'"}class is extends gn{constructor(){let d,h;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(h="visibilitychange",d="hidden"):typeof document.mozHidden<"u"?(h="mozvisibilitychange",d="mozHidden"):typeof document.msHidden<"u"?(h="msvisibilitychange",d="msHidden"):typeof document.webkitHidden<"u"&&(h="webkitvisibilitychange",d="webkitHidden")),this.visible_=!0,h&&document.addEventListener(h,()=>{const y=!document[d];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new is}getInitialEvent(d){return(0,L.Uc)("visible"===d,"Unknown event type: "+d),[this.visible_]}}const vs=1e3;let Ro,Ao=(()=>{class g extends Kt{constructor(h,y,T,O,j,de,xe,Ze){if(super(),this.repoInfo_=h,this.applicationId_=y,this.onDataUpdate_=T,this.onConnectStatus_=O,this.onServerInfoUpdate_=j,this.authTokenProvider_=de,this.appCheckTokenProvider_=xe,this.authOverride_=Ze,this.id=g.nextPersistentConnectionId_++,this.log_=Qn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ze&&!(0,L.iw)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");is.getInstance().on("visible",this.onVisible_,this),-1===h.host.indexOf("fblocal")&&tn.getInstance().on("online",this.onOnline_,this)}sendRequest(h,y,T){const O=++this.requestNumber_,j={r:O,a:h,b:y};this.log_((0,L.i)(j)),(0,L.Uc)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(j),T&&(this.requestCBHash_[O]=T)}get(h){this.initConnection_();const y=new L.o9,O={action:"g",request:{p:h._path.toString(),q:h._queryObject},onComplete:de=>{const xe=de.d;"ok"===de.s?y.resolve(xe):y.reject(xe)}};return this.outstandingGets_.push(O),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(h,y,T,O){this.initConnection_();const j=h._queryIdentifier,de=h._path.toString();this.log_("Listen called for "+de+" "+j),this.listens.has(de)||this.listens.set(de,new Map),(0,L.Uc)(h._queryParams.isDefault()||!h._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.Uc)(!this.listens.get(de).has(j),"listen() called twice for same path/queryId.");const xe={onComplete:O,hashFn:y,query:h,tag:T};this.listens.get(de).set(j,xe),this.connected_&&this.sendListen_(xe)}sendGet_(h){const y=this.outstandingGets_[h];this.sendRequest("g",y.request,T=>{delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(T)})}sendListen_(h){const y=h.query,T=y._path.toString(),O=y._queryIdentifier;this.log_("Listen on "+T+" for "+O);const j={p:T};h.tag&&(j.q=y._queryObject,j.t=h.tag),j.h=h.hashFn(),this.sendRequest("q",j,xe=>{const Ze=xe.d,Vt=xe.s;g.warnOnListenWarnings_(Ze,y),(this.listens.get(T)&&this.listens.get(T).get(O))===h&&(this.log_("listen response",xe),"ok"!==Vt&&this.removeListen_(T,O),h.onComplete&&h.onComplete(Vt,Ze))})}static warnOnListenWarnings_(h,y){if(h&&"object"==typeof h&&(0,L.Y7)(h,"w")){const T=(0,L.o5)(h,"w");if(Array.isArray(T)&&~T.indexOf("no_index")){const O='".indexOn": "'+y._queryParams.getIndex().toString()+'"',j=y._path.toString();ft(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${O} at ${j} to your security rules for better performance.`)}}}refreshAuthToken(h){this.authToken_=h,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(h)}reduceReconnectDelayIfAdminCredential_(h){(h&&40===h.length||(0,L.L0)(h))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(h){this.appCheckToken_=h,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const h=this.authToken_,y=(0,L.AX)(h)?"auth":"gauth",T={cred:h};null===this.authOverride_?T.noauth=!0:"object"==typeof this.authOverride_&&(T.authvar=this.authOverride_),this.sendRequest(y,T,O=>{const j=O.s,de=O.d||"error";this.authToken_===h&&("ok"===j?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(j,de))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},h=>{const y=h.s,T=h.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,T)})}unlisten(h,y){const T=h._path.toString(),O=h._queryIdentifier;this.log_("Unlisten called for "+T+" "+O),(0,L.Uc)(h._queryParams.isDefault()||!h._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(T,O)&&this.connected_&&this.sendUnlisten_(T,O,h._queryObject,y)}sendUnlisten_(h,y,T,O){this.log_("Unlisten on "+h+" for "+y);const j={p:h};O&&(j.q=T,j.t=O),this.sendRequest("n",j)}onDisconnectPut(h,y,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",h,y,T):this.onDisconnectRequestQueue_.push({pathString:h,action:"o",data:y,onComplete:T})}onDisconnectMerge(h,y,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",h,y,T):this.onDisconnectRequestQueue_.push({pathString:h,action:"om",data:y,onComplete:T})}onDisconnectCancel(h,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",h,null,y):this.onDisconnectRequestQueue_.push({pathString:h,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(h,y,T,O){const j={p:y,d:T};this.log_("onDisconnect "+h,j),this.sendRequest(h,j,de=>{O&&setTimeout(()=>{O(de.s,de.d)},Math.floor(0))})}put(h,y,T,O){this.putInternal("p",h,y,T,O)}merge(h,y,T,O){this.putInternal("m",h,y,T,O)}putInternal(h,y,T,O,j){this.initConnection_();const de={p:y,d:T};void 0!==j&&(de.h=j),this.outstandingPuts_.push({action:h,request:de,onComplete:O}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(h){const y=this.outstandingPuts_[h].action,T=this.outstandingPuts_[h].request,O=this.outstandingPuts_[h].onComplete;this.outstandingPuts_[h].queued=this.connected_,this.sendRequest(y,T,j=>{this.log_(y+" response",j),delete this.outstandingPuts_[h],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),O&&O(j.s,j.d)})}reportStats(h){if(this.connected_){const y={c:h};this.log_("reportStats",y),this.sendRequest("s",y,T=>{"ok"!==T.s&&this.log_("reportStats","Error sending stats: "+T.d)})}}onDataMessage_(h){if("r"in h){this.log_("from server: "+(0,L.i)(h));const y=h.r,T=this.requestCBHash_[y];T&&(delete this.requestCBHash_[y],T(h.b))}else{if("error"in h)throw"A server-side error has occurred: "+h.error;"a"in h&&this.onDataPush_(h.a,h.b)}}onDataPush_(h,y){this.log_("handleServerMessage",h,y),"d"===h?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===h?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===h?this.onListenRevoked_(y.p,y.q):"ac"===h?this.onAuthRevoked_(y.s,y.d):"apc"===h?this.onAppCheckRevoked_(y.s,y.d):"sd"===h?this.onSecurityDebugPacket_(y):jn("Unrecognized action received from server: "+(0,L.i)(h)+"\nAre you using the latest client?")}onReady_(h,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(h),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(h){(0,L.Uc)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(h))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(h){h&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)),this.visible_=h}onOnline_(h){h?(this.log_("Browser went online."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const h=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-h);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var h=this;return(0,te.c)(function*(){if(h.shouldReconnect_()){h.log_("Making a connection attempt"),h.lastConnectionAttemptTime_=(new Date).getTime(),h.lastConnectionEstablishedTime_=null;const y=h.onDataMessage_.bind(h),T=h.onReady_.bind(h),O=h.onRealtimeDisconnect_.bind(h),j=h.id+":"+g.nextConnectionId_++,de=h.lastSessionId;let xe=!1,Ze=null;const Vt=function(){Ze?Ze.close():(xe=!0,O())};h.realtime_={close:Vt,sendRequest:function(Fn){(0,L.Uc)(Ze,"sendRequest call when we're not connected not allowed."),Ze.sendRequest(Fn)}};const Zt=h.forceTokenRefresh_;h.forceTokenRefresh_=!1;try{const[Fn,lr]=yield Promise.all([h.authTokenProvider_.getToken(Zt),h.appCheckTokenProvider_.getToken(Zt)]);xe?an("getToken() completed but was canceled"):(an("getToken() completed. Creating connection."),h.authToken_=Fn&&Fn.accessToken,h.appCheckToken_=lr&&lr.token,Ze=new Pt(j,h.repoInfo_,h.applicationId_,h.appCheckToken_,h.authToken_,y,T,O,Oi=>{ft(Oi+" ("+h.repoInfo_.toString()+")"),h.interrupt("server_kill")},de))}catch(Fn){h.log_("Failed to get token: "+Fn),xe||(h.repoInfo_.nodeAdmin&&ft(Fn),Vt())}}})()}interrupt(h){an("Interrupting connection for reason: "+h),this.interruptReasons_[h]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(h){an("Resuming connection for reason: "+h),delete this.interruptReasons_[h],(0,L.t7)(this.interruptReasons_)&&(this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(h){const y=h-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let h=0;h<this.outstandingPuts_.length;h++){const y=this.outstandingPuts_[h];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[h],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(h,y){let T;T=y?y.map(j=>mr(j)).join("$"):"default";const O=this.removeListen_(h,T);O&&O.onComplete&&O.onComplete("permission_denied")}removeListen_(h,y){const T=new qt(h).toString();let O;if(this.listens.has(T)){const j=this.listens.get(T);O=j.get(y),j.delete(y),0===j.size&&this.listens.delete(T)}else O=void 0;return O}onAuthRevoked_(h,y){an("Auth token revoked: "+h+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===h||"permission_denied"===h)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(h,y){an("App check token revoked: "+h+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===h||"permission_denied"===h)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(h){this.securityDebugCallback_?this.securityDebugCallback_(h):"msg"in h&&console.log("FIREBASE: "+h.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const h of this.listens.values())for(const y of h.values())this.sendListen_(y);for(let h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){const h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(let h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)}sendConnectStats_(){const h={};let y="js";(0,L.iw)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),h["sdk."+y+"."+It.replace(/\./g,"-")]=1,(0,L.AV)()?h["framework.cordova"]=1:(0,L.AL)()&&(h["framework.reactnative"]=1),this.reportStats(h)}shouldReconnect_(){const h=tn.getInstance().currentlyOnline();return(0,L.t7)(this.interruptReasons_)&&h}}return g.nextPersistentConnectionId_=0,g.nextConnectionId_=0,g})();class _r{constructor(d,h){this.name=d,this.node=h}static Wrap(d,h){return new _r(d,h)}}class Lr{getCompare(){return this.compare.bind(this)}indexedValueChanged(d,h){const y=new _r(Ft,d),T=new _r(Ft,h);return 0!==this.compare(y,T)}minPost(){return _r.MIN}}class cr extends Lr{static get __EMPTY_NODE(){return Ro}static set __EMPTY_NODE(d){Ro=d}compare(d,h){return Sn(d.name,h.name)}isDefinedOn(d){throw(0,L.Y9)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(d,h){return!1}minPost(){return _r.MIN}maxPost(){return new _r(Qt,Ro)}makePost(d,h){return(0,L.Uc)("string"==typeof d,"KeyIndex indexValue must always be a string."),new _r(d,Ro)}toString(){return".key"}}const yo=new cr;class Qo{constructor(d,h,y,T,O=null){this.isReverse_=T,this.resultGenerator_=O,this.nodeStack_=[];let j=1;for(;!d.isEmpty();)if(j=h?y(d.key,h):1,T&&(j*=-1),j<0)d=this.isReverse_?d.left:d.right;else{if(0===j){this.nodeStack_.push(d);break}this.nodeStack_.push(d),d=this.isReverse_?d.right:d.left}}getNext(){if(0===this.nodeStack_.length)return null;let h,d=this.nodeStack_.pop();if(h=this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value},this.isReverse_)for(d=d.left;!d.isEmpty();)this.nodeStack_.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack_.push(d),d=d.left;return h}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const d=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value}}}let Ai,Ii=(()=>{class g{constructor(h,y,T,O,j){this.key=h,this.value=y,this.color=null!=T?T:g.RED,this.left=null!=O?O:eo.EMPTY_NODE,this.right=null!=j?j:eo.EMPTY_NODE}copy(h,y,T,O,j){return new g(null!=h?h:this.key,null!=y?y:this.value,null!=T?T:this.color,null!=O?O:this.left,null!=j?j:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(h){return this.left.inorderTraversal(h)||!!h(this.key,this.value)||this.right.inorderTraversal(h)}reverseTraversal(h){return this.right.reverseTraversal(h)||h(this.key,this.value)||this.left.reverseTraversal(h)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(h,y,T){let O=this;const j=T(h,O.key);return O=j<0?O.copy(null,null,null,O.left.insert(h,y,T),null):0===j?O.copy(null,y,null,null,null):O.copy(null,null,null,null,O.right.insert(h,y,T)),O.fixUp_()}removeMin_(){if(this.left.isEmpty())return eo.EMPTY_NODE;let h=this;return!h.left.isRed_()&&!h.left.left.isRed_()&&(h=h.moveRedLeft_()),h=h.copy(null,null,null,h.left.removeMin_(),null),h.fixUp_()}remove(h,y){let T,O;if(T=this,y(h,T.key)<0)!T.left.isEmpty()&&!T.left.isRed_()&&!T.left.left.isRed_()&&(T=T.moveRedLeft_()),T=T.copy(null,null,null,T.left.remove(h,y),null);else{if(T.left.isRed_()&&(T=T.rotateRight_()),!T.right.isEmpty()&&!T.right.isRed_()&&!T.right.left.isRed_()&&(T=T.moveRedRight_()),0===y(h,T.key)){if(T.right.isEmpty())return eo.EMPTY_NODE;O=T.right.min_(),T=T.copy(O.key,O.value,null,null,T.right.removeMin_())}T=T.copy(null,null,null,null,T.right.remove(h,y))}return T.fixUp_()}isRed_(){return this.color}fixUp_(){let h=this;return h.right.isRed_()&&!h.left.isRed_()&&(h=h.rotateLeft_()),h.left.isRed_()&&h.left.left.isRed_()&&(h=h.rotateRight_()),h.left.isRed_()&&h.right.isRed_()&&(h=h.colorFlip_()),h}moveRedLeft_(){let h=this.colorFlip_();return h.right.left.isRed_()&&(h=h.copy(null,null,null,null,h.right.rotateRight_()),h=h.rotateLeft_(),h=h.colorFlip_()),h}moveRedRight_(){let h=this.colorFlip_();return h.left.left.isRed_()&&(h=h.rotateRight_(),h=h.colorFlip_()),h}rotateLeft_(){const h=this.copy(null,null,g.RED,null,this.right.left);return this.right.copy(null,null,this.color,h,null)}rotateRight_(){const h=this.copy(null,null,g.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,h)}colorFlip_(){const h=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,h,y)}checkMaxDepth_(){const h=this.check_();return Math.pow(2,h)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const h=this.left.check_();if(h!==this.right.check_())throw new Error("Black depths differ");return h+(this.isRed_()?0:1)}}return g.RED=!0,g.BLACK=!1,g})();class eo{constructor(d,h=eo.EMPTY_NODE){this.comparator_=d,this.root_=h}insert(d,h){return new eo(this.comparator_,this.root_.insert(d,h,this.comparator_).copy(null,null,Ii.BLACK,null,null))}remove(d){return new eo(this.comparator_,this.root_.remove(d,this.comparator_).copy(null,null,Ii.BLACK,null,null))}get(d){let h,y=this.root_;for(;!y.isEmpty();){if(h=this.comparator_(d,y.key),0===h)return y.value;h<0?y=y.left:h>0&&(y=y.right)}return null}getPredecessorKey(d){let h,y=this.root_,T=null;for(;!y.isEmpty();){if(h=this.comparator_(d,y.key),0===h){if(y.left.isEmpty())return T?T.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}h<0?y=y.left:h>0&&(T=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(d){return this.root_.inorderTraversal(d)}reverseTraversal(d){return this.root_.reverseTraversal(d)}getIterator(d){return new Qo(this.root_,null,this.comparator_,!1,d)}getIteratorFrom(d,h){return new Qo(this.root_,d,this.comparator_,!1,h)}getReverseIteratorFrom(d,h){return new Qo(this.root_,d,this.comparator_,!0,h)}getReverseIterator(d){return new Qo(this.root_,null,this.comparator_,!0,d)}}function uo(g,d){return Sn(g.name,d.name)}function os(g,d){return Sn(g,d)}eo.EMPTY_NODE=new class pa{copy(d,h,y,T,O){return this}insert(d,h,y){return new Ii(d,h,null)}remove(d,h){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(d){return!1}reverseTraversal(d){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ga=function(g){return"number"==typeof g?"number:"+Wn(g):"string:"+g},Lo=function(g){if(g.isLeafNode()){const d=g.val();(0,L.Uc)("string"==typeof d||"number"==typeof d||"object"==typeof d&&(0,L.Y7)(d,".sv"),"Priority must be a string or number.")}else(0,L.Uc)(g===Ai||g.isEmpty(),"priority of unexpected type.");(0,L.Uc)(g===Ai||g.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Is,to,Ls,Ei=(()=>{class g{constructor(h,y=g.__childrenNodeConstructor.EMPTY_NODE){this.value_=h,this.priorityNode_=y,this.lazyHash_=null,(0,L.Uc)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Lo(this.priorityNode_)}static set __childrenNodeConstructor(h){Is=h}static get __childrenNodeConstructor(){return Is}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(h){return new g(this.value_,h)}getImmediateChild(h){return".priority"===h?this.priorityNode_:g.__childrenNodeConstructor.EMPTY_NODE}getChild(h){return Bt(h)?this:".priority"===En(h)?this.priorityNode_:g.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(h,y){return null}updateImmediateChild(h,y){return".priority"===h?this.updatePriority(y):y.isEmpty()&&".priority"!==h?this:g.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(h,y).updatePriority(this.priorityNode_)}updateChild(h,y){const T=En(h);return null===T?y:y.isEmpty()&&".priority"!==T?this:((0,L.Uc)(".priority"!==T||1===kr(h),".priority must be the last token in a path"),this.updateImmediateChild(T,g.__childrenNodeConstructor.EMPTY_NODE.updateChild(tr(h),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(h,y){return!1}val(h){return h&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let h="";this.priorityNode_.isEmpty()||(h+="priority:"+ga(this.priorityNode_.val())+":");const y=typeof this.value_;h+=y+":",h+="number"===y?Wn(this.value_):this.value_,this.lazyHash_=De(h)}return this.lazyHash_}getValue(){return this.value_}compareTo(h){return h===g.__childrenNodeConstructor.EMPTY_NODE?1:h instanceof g.__childrenNodeConstructor?-1:((0,L.Uc)(h.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(h))}compareToLeafNode_(h){const y=typeof h.value_,T=typeof this.value_,O=g.VALUE_TYPE_ORDER.indexOf(y),j=g.VALUE_TYPE_ORDER.indexOf(T);return(0,L.Uc)(O>=0,"Unknown leaf type: "+y),(0,L.Uc)(j>=0,"Unknown leaf type: "+T),O===j?"object"===T?0:this.value_<h.value_?-1:this.value_===h.value_?0:1:j-O}withIndex(){return this}isIndexed(){return!0}equals(h){return h===this||!!h.isLeafNode()&&(this.value_===h.value_&&this.priorityNode_.equals(h.priorityNode_))}}return g.VALUE_TYPE_ORDER=["object","boolean","number","string"],g})();const mi=new class fl extends Lr{compare(d,h){const y=d.node.getPriority(),T=h.node.getPriority(),O=y.compareTo(T);return 0===O?Sn(d.name,h.name):O}isDefinedOn(d){return!d.getPriority().isEmpty()}indexedValueChanged(d,h){return!d.getPriority().equals(h.getPriority())}minPost(){return _r.MIN}maxPost(){return new _r(Qt,new Ei("[PRIORITY-POST]",Ls))}makePost(d,h){const y=to(d);return new _r(h,new Ei("[PRIORITY-POST]",y))}toString(){return".priority"}},Aa=Math.log(2);class Es{constructor(d){this.count=parseInt(Math.log(d+1)/Aa,10),this.current_=this.count-1;const T=(O=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=d+1&T}nextBitIsOne(){const d=!(this.bits_&1<<this.current_);return this.current_--,d}}const Hl=function(g,d,h,y){g.sort(d);const T=function(xe,Ze){const Vt=Ze-xe;let Gt,Zt;if(0===Vt)return null;if(1===Vt)return Gt=g[xe],Zt=h?h(Gt):Gt,new Ii(Zt,Gt.node,Ii.BLACK,null,null);{const Fn=parseInt(Vt/2,10)+xe,lr=T(xe,Fn),Oi=T(Fn+1,Ze);return Gt=g[Fn],Zt=h?h(Gt):Gt,new Ii(Zt,Gt.node,Ii.BLACK,lr,Oi)}},de=function(xe){let Ze=null,Vt=null,Gt=g.length;const Zt=function(lr,Oi){const ns=Gt-lr,al=Gt;Gt-=lr;const $l=T(ns+1,al),oc=g[ns],Vd=h?h(oc):oc;Fn(new Ii(Vd,oc.node,Oi,null,$l))},Fn=function(lr){Ze?(Ze.left=lr,Ze=lr):(Vt=lr,Ze=lr)};for(let lr=0;lr<xe.count;++lr){const Oi=xe.nextBitIsOne(),ns=Math.pow(2,xe.count-(lr+1));Oi?Zt(ns,Ii.BLACK):(Zt(ns,Ii.BLACK),Zt(ns,Ii.RED))}return Vt}(new Es(g.length));return new eo(y||d,de)};let Ra;const as={};class Xo{constructor(d,h){this.indexes_=d,this.indexSet_=h}static get Default(){return(0,L.Uc)(as&&mi,"ChildrenNode.ts has not been loaded"),Ra=Ra||new Xo({".priority":as},{".priority":mi}),Ra}get(d){const h=(0,L.o5)(this.indexes_,d);if(!h)throw new Error("No index defined for "+d);return h instanceof eo?h:null}hasIndex(d){return(0,L.Y7)(this.indexSet_,d.toString())}addIndex(d,h){(0,L.Uc)(d!==yo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let T=!1;const O=h.getIterator(_r.Wrap);let de,j=O.getNext();for(;j;)T=T||d.isDefinedOn(j.node),y.push(j),j=O.getNext();de=T?Hl(y,d.getCompare()):as;const xe=d.toString(),Ze=Object.assign({},this.indexSet_);Ze[xe]=d;const Vt=Object.assign({},this.indexes_);return Vt[xe]=de,new Xo(Vt,Ze)}addToIndexes(d,h){const y=(0,L.kH)(this.indexes_,(T,O)=>{const j=(0,L.o5)(this.indexSet_,O);if((0,L.Uc)(j,"Missing index implementation for "+O),T===as){if(j.isDefinedOn(d.node)){const de=[],xe=h.getIterator(_r.Wrap);let Ze=xe.getNext();for(;Ze;)Ze.name!==d.name&&de.push(Ze),Ze=xe.getNext();return de.push(d),Hl(de,j.getCompare())}return as}{const de=h.get(d.name);let xe=T;return de&&(xe=xe.remove(new _r(d.name,de))),xe.insert(d,d.node)}});return new Xo(y,this.indexSet_)}removeFromIndexes(d,h){const y=(0,L.kH)(this.indexes_,T=>{if(T===as)return T;{const O=h.get(d.name);return O?T.remove(new _r(d.name,O)):T}});return new Xo(y,this.indexSet_)}}let Ma,dr=(()=>{class g{constructor(h,y,T){this.children_=h,this.priorityNode_=y,this.indexMap_=T,this.lazyHash_=null,this.priorityNode_&&Lo(this.priorityNode_),this.children_.isEmpty()&&(0,L.Uc)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ma||(Ma=new g(new eo(os),null,Xo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ma}updatePriority(h){return this.children_.isEmpty()?this:new g(this.children_,h,this.indexMap_)}getImmediateChild(h){if(".priority"===h)return this.getPriority();{const y=this.children_.get(h);return null===y?Ma:y}}getChild(h){const y=En(h);return null===y?this:this.getImmediateChild(y).getChild(tr(h))}hasChild(h){return null!==this.children_.get(h)}updateImmediateChild(h,y){if((0,L.Uc)(y,"We should always be passing snapshot nodes"),".priority"===h)return this.updatePriority(y);{const T=new _r(h,y);let O,j;y.isEmpty()?(O=this.children_.remove(h),j=this.indexMap_.removeFromIndexes(T,this.children_)):(O=this.children_.insert(h,y),j=this.indexMap_.addToIndexes(T,this.children_));const de=O.isEmpty()?Ma:this.priorityNode_;return new g(O,de,j)}}updateChild(h,y){const T=En(h);if(null===T)return y;{(0,L.Uc)(".priority"!==En(h)||1===kr(h),".priority must be the last token in a path");const O=this.getImmediateChild(T).updateChild(tr(h),y);return this.updateImmediateChild(T,O)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(h){if(this.isEmpty())return null;const y={};let T=0,O=0,j=!0;if(this.forEachChild(mi,(de,xe)=>{y[de]=xe.val(h),T++,j&&g.INTEGER_REGEXP_.test(de)?O=Math.max(O,Number(de)):j=!1}),!h&&j&&O<2*T){const de=[];for(const xe in y)de[xe]=y[xe];return de}return h&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let h="";this.getPriority().isEmpty()||(h+="priority:"+ga(this.getPriority().val())+":"),this.forEachChild(mi,(y,T)=>{const O=T.hash();""!==O&&(h+=":"+y+":"+O)}),this.lazyHash_=""===h?"":De(h)}return this.lazyHash_}getPredecessorChildName(h,y,T){const O=this.resolveIndex_(T);if(O){const j=O.getPredecessorKey(new _r(h,y));return j?j.name:null}return this.children_.getPredecessorKey(h)}getFirstChildName(h){const y=this.resolveIndex_(h);if(y){const T=y.minKey();return T&&T.name}return this.children_.minKey()}getFirstChild(h){const y=this.getFirstChildName(h);return y?new _r(y,this.children_.get(y)):null}getLastChildName(h){const y=this.resolveIndex_(h);if(y){const T=y.maxKey();return T&&T.name}return this.children_.maxKey()}getLastChild(h){const y=this.getLastChildName(h);return y?new _r(y,this.children_.get(y)):null}forEachChild(h,y){const T=this.resolveIndex_(h);return T?T.inorderTraversal(O=>y(O.name,O.node)):this.children_.inorderTraversal(y)}getIterator(h){return this.getIteratorFrom(h.minPost(),h)}getIteratorFrom(h,y){const T=this.resolveIndex_(y);if(T)return T.getIteratorFrom(h,O=>O);{const O=this.children_.getIteratorFrom(h.name,_r.Wrap);let j=O.peek();for(;null!=j&&y.compare(j,h)<0;)O.getNext(),j=O.peek();return O}}getReverseIterator(h){return this.getReverseIteratorFrom(h.maxPost(),h)}getReverseIteratorFrom(h,y){const T=this.resolveIndex_(y);if(T)return T.getReverseIteratorFrom(h,O=>O);{const O=this.children_.getReverseIteratorFrom(h.name,_r.Wrap);let j=O.peek();for(;null!=j&&y.compare(j,h)>0;)O.getNext(),j=O.peek();return O}}compareTo(h){return this.isEmpty()?h.isEmpty()?0:-1:h.isLeafNode()||h.isEmpty()?1:h===ls?-1:0}withIndex(h){if(h===yo||this.indexMap_.hasIndex(h))return this;{const y=this.indexMap_.addIndex(h,this.children_);return new g(this.children_,this.priorityNode_,y)}}isIndexed(h){return h===yo||this.indexMap_.hasIndex(h)}equals(h){if(h===this)return!0;if(h.isLeafNode())return!1;{const y=h;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const T=this.getIterator(mi),O=y.getIterator(mi);let j=T.getNext(),de=O.getNext();for(;j&&de;){if(j.name!==de.name||!j.node.equals(de.node))return!1;j=T.getNext(),de=O.getNext()}return null===j&&null===de}return!1}return!1}}resolveIndex_(h){return h===yo?null:this.indexMap_.get(h.toString())}}return g.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,g})();const ls=new class ma extends dr{constructor(){super(new eo(os),dr.EMPTY_NODE,Xo.Default)}compareTo(d){return d===this?0:1}equals(d){return d===this}getPriority(){return this}getImmediateChild(d){return dr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(_r,{MIN:{value:new _r(Ft,dr.EMPTY_NODE)},MAX:{value:new _r(Qt,ls)}}),cr.__EMPTY_NODE=dr.EMPTY_NODE,Ei.__childrenNodeConstructor=dr,function Vi(g){Ai=g}(ls),function hl(g){Ls=g}(ls);const qa=!0;function Ri(g,d=null){if(null===g)return dr.EMPTY_NODE;if("object"==typeof g&&".priority"in g&&(d=g[".priority"]),(0,L.Uc)(null===d||"string"==typeof d||"number"==typeof d||"object"==typeof d&&".sv"in d,"Invalid priority type found: "+typeof d),"object"==typeof g&&".value"in g&&null!==g[".value"]&&(g=g[".value"]),"object"!=typeof g||".sv"in g)return new Ei(g,Ri(d));if(g instanceof Array||!qa){let h=dr.EMPTY_NODE;return Tn(g,(y,T)=>{if((0,L.Y7)(g,y)&&"."!==y.substring(0,1)){const O=Ri(T);(O.isLeafNode()||!O.isEmpty())&&(h=h.updateImmediateChild(y,O))}}),h.updatePriority(Ri(d))}{const h=[];let y=!1;if(Tn(g,(j,de)=>{if("."!==j.substring(0,1)){const xe=Ri(de);xe.isEmpty()||(y=y||!xe.getPriority().isEmpty(),h.push(new _r(j,xe)))}}),0===h.length)return dr.EMPTY_NODE;const O=Hl(h,uo,j=>j.name,os);if(y){const j=Hl(h,mi.getCompare());return new dr(O,Ri(d),new Xo({".priority":j},{".priority":mi}))}return new dr(O,Ri(d),Xo.Default)}}!function ss(g){to=g}(Ri);class pl extends Lr{constructor(d){super(),this.indexPath_=d,(0,L.Uc)(!Bt(d)&&".priority"!==En(d),"Can't create PathIndex with empty path or .priority key")}extractChild(d){return d.getChild(this.indexPath_)}isDefinedOn(d){return!d.getChild(this.indexPath_).isEmpty()}compare(d,h){const y=this.extractChild(d.node),T=this.extractChild(h.node),O=y.compareTo(T);return 0===O?Sn(d.name,h.name):O}makePost(d,h){const y=Ri(d),T=dr.EMPTY_NODE.updateChild(this.indexPath_,y);return new _r(h,T)}maxPost(){const d=dr.EMPTY_NODE.updateChild(this.indexPath_,ls);return new _r(Qt,d)}toString(){return F(this.indexPath_,0).join("/")}}const z=new class Pa extends Lr{compare(d,h){const y=d.node.compareTo(h.node);return 0===y?Sn(d.name,h.name):y}isDefinedOn(d){return!0}indexedValueChanged(d,h){return!d.equals(h)}minPost(){return _r.MIN}maxPost(){return _r.MAX}makePost(d,h){const y=Ri(d);return new _r(h,y)}toString(){return".value"}};function V(g){return{type:"value",snapshotNode:g}}function ce(g,d){return{type:"child_added",snapshotNode:d,childName:g}}function H(g,d){return{type:"child_removed",snapshotNode:d,childName:g}}function Se(g,d,h){return{type:"child_changed",snapshotNode:d,childName:g,oldSnap:h}}class Pn{constructor(d){this.index_=d}updateChild(d,h,y,T,O,j){(0,L.Uc)(d.isIndexed(this.index_),"A node must be indexed if only a child is updated");const de=d.getImmediateChild(h);return de.getChild(T).equals(y.getChild(T))&&de.isEmpty()===y.isEmpty()||(null!=j&&(y.isEmpty()?d.hasChild(h)?j.trackChildChange(H(h,de)):(0,L.Uc)(d.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):de.isEmpty()?j.trackChildChange(ce(h,y)):j.trackChildChange(Se(h,y,de))),d.isLeafNode()&&y.isEmpty())?d:d.updateImmediateChild(h,y).withIndex(this.index_)}updateFullNode(d,h,y){return null!=y&&(d.isLeafNode()||d.forEachChild(mi,(T,O)=>{h.hasChild(T)||y.trackChildChange(H(T,O))}),h.isLeafNode()||h.forEachChild(mi,(T,O)=>{if(d.hasChild(T)){const j=d.getImmediateChild(T);j.equals(O)||y.trackChildChange(Se(T,O,j))}else y.trackChildChange(ce(T,O))})),h.withIndex(this.index_)}updatePriority(d,h){return d.isEmpty()?dr.EMPTY_NODE:d.updatePriority(h)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _i{constructor(d){this.indexedFilter_=new Pn(d.getIndex()),this.index_=d.getIndex(),this.startPost_=_i.getStartPost_(d),this.endPost_=_i.getEndPost_(d),this.startIsInclusive_=!d.startAfterSet_,this.endIsInclusive_=!d.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(d){const h=this.startIsInclusive_?this.index_.compare(this.getStartPost(),d)<=0:this.index_.compare(this.getStartPost(),d)<0,y=this.endIsInclusive_?this.index_.compare(d,this.getEndPost())<=0:this.index_.compare(d,this.getEndPost())<0;return h&&y}updateChild(d,h,y,T,O,j){return this.matches(new _r(h,y))||(y=dr.EMPTY_NODE),this.indexedFilter_.updateChild(d,h,y,T,O,j)}updateFullNode(d,h,y){h.isLeafNode()&&(h=dr.EMPTY_NODE);let T=h.withIndex(this.index_);T=T.updatePriority(dr.EMPTY_NODE);const O=this;return h.forEachChild(mi,(j,de)=>{O.matches(new _r(j,de))||(T=T.updateImmediateChild(j,dr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(d,T,y)}updatePriority(d,h){return d}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(d){if(d.hasStart()){const h=d.getIndexStartName();return d.getIndex().makePost(d.getIndexStartValue(),h)}return d.getIndex().minPost()}static getEndPost_(d){if(d.hasEnd()){const h=d.getIndexEndName();return d.getIndex().makePost(d.getIndexEndValue(),h)}return d.getIndex().maxPost()}}class zo{constructor(d){this.withinDirectionalStart=h=>this.reverse_?this.withinEndPost(h):this.withinStartPost(h),this.withinDirectionalEnd=h=>this.reverse_?this.withinStartPost(h):this.withinEndPost(h),this.withinStartPost=h=>{const y=this.index_.compare(this.rangedFilter_.getStartPost(),h);return this.startIsInclusive_?y<=0:y<0},this.withinEndPost=h=>{const y=this.index_.compare(h,this.rangedFilter_.getEndPost());return this.endIsInclusive_?y<=0:y<0},this.rangedFilter_=new _i(d),this.index_=d.getIndex(),this.limit_=d.getLimit(),this.reverse_=!d.isViewFromLeft(),this.startIsInclusive_=!d.startAfterSet_,this.endIsInclusive_=!d.endBeforeSet_}updateChild(d,h,y,T,O,j){return this.rangedFilter_.matches(new _r(h,y))||(y=dr.EMPTY_NODE),d.getImmediateChild(h).equals(y)?d:d.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(d,h,y,T,O,j):this.fullLimitUpdateChild_(d,h,y,O,j)}updateFullNode(d,h,y){let T;if(h.isLeafNode()||h.isEmpty())T=dr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<h.numChildren()&&h.isIndexed(this.index_)){let O;T=dr.EMPTY_NODE.withIndex(this.index_),O=this.reverse_?h.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):h.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let j=0;for(;O.hasNext()&&j<this.limit_;){const de=O.getNext();if(this.withinDirectionalStart(de)){if(!this.withinDirectionalEnd(de))break;T=T.updateImmediateChild(de.name,de.node),j++}}}else{let O;T=h.withIndex(this.index_),T=T.updatePriority(dr.EMPTY_NODE),O=this.reverse_?T.getReverseIterator(this.index_):T.getIterator(this.index_);let j=0;for(;O.hasNext();){const de=O.getNext();j<this.limit_&&this.withinDirectionalStart(de)&&this.withinDirectionalEnd(de)?j++:T=T.updateImmediateChild(de.name,dr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(d,T,y)}updatePriority(d,h){return d}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(d,h,y,T,O){let j;if(this.reverse_){const Gt=this.index_.getCompare();j=(Zt,Fn)=>Gt(Fn,Zt)}else j=this.index_.getCompare();const de=d;(0,L.Uc)(de.numChildren()===this.limit_,"");const xe=new _r(h,y),Ze=this.reverse_?de.getFirstChild(this.index_):de.getLastChild(this.index_),Vt=this.rangedFilter_.matches(xe);if(de.hasChild(h)){const Gt=de.getImmediateChild(h);let Zt=T.getChildAfterChild(this.index_,Ze,this.reverse_);for(;null!=Zt&&(Zt.name===h||de.hasChild(Zt.name));)Zt=T.getChildAfterChild(this.index_,Zt,this.reverse_);const Fn=null==Zt?1:j(Zt,xe);if(Vt&&!y.isEmpty()&&Fn>=0)return null!=O&&O.trackChildChange(Se(h,y,Gt)),de.updateImmediateChild(h,y);{null!=O&&O.trackChildChange(H(h,Gt));const Oi=de.updateImmediateChild(h,dr.EMPTY_NODE);return null!=Zt&&this.rangedFilter_.matches(Zt)?(null!=O&&O.trackChildChange(ce(Zt.name,Zt.node)),Oi.updateImmediateChild(Zt.name,Zt.node)):Oi}}return y.isEmpty()?d:Vt&&j(Ze,xe)>=0?(null!=O&&(O.trackChildChange(H(Ze.name,Ze.node)),O.trackChildChange(ce(h,y))),de.updateImmediateChild(h,y).updateImmediateChild(Ze.name,dr.EMPTY_NODE)):d}}class cs{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.Uc)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.Uc)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ft}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.Uc)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.Uc)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.Uc)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mi}copy(){const d=new cs;return d.limitSet_=this.limitSet_,d.limit_=this.limit_,d.startSet_=this.startSet_,d.startAfterSet_=this.startAfterSet_,d.indexStartValue_=this.indexStartValue_,d.startNameSet_=this.startNameSet_,d.indexStartName_=this.indexStartName_,d.endSet_=this.endSet_,d.endBeforeSet_=this.endBeforeSet_,d.indexEndValue_=this.indexEndValue_,d.endNameSet_=this.endNameSet_,d.indexEndName_=this.indexEndName_,d.index_=this.index_,d.viewFrom_=this.viewFrom_,d}}function Io(g,d,h){const y=g.copy();return y.startSet_=!0,void 0===d&&(d=null),y.indexStartValue_=d,null!=h?(y.startNameSet_=!0,y.indexStartName_=h):(y.startNameSet_=!1,y.indexStartName_=""),y}function qs(g,d,h){const y=g.copy();return y.endSet_=!0,void 0===d&&(d=null),y.indexEndValue_=d,void 0!==h?(y.endNameSet_=!0,y.indexEndName_=h):(y.endNameSet_=!1,y.indexEndName_=""),y}function Xi(g,d){const h=g.copy();return h.index_=d,h}function Qs(g){const d={};if(g.isDefault())return d;let h;if(g.index_===mi?h="$priority":g.index_===z?h="$value":g.index_===yo?h="$key":((0,L.Uc)(g.index_ instanceof pl,"Unrecognized index type!"),h=g.index_.toString()),d.orderBy=(0,L.i)(h),g.startSet_){const y=g.startAfterSet_?"startAfter":"startAt";d[y]=(0,L.i)(g.indexStartValue_),g.startNameSet_&&(d[y]+=","+(0,L.i)(g.indexStartName_))}if(g.endSet_){const y=g.endBeforeSet_?"endBefore":"endAt";d[y]=(0,L.i)(g.indexEndValue_),g.endNameSet_&&(d[y]+=","+(0,L.i)(g.indexEndName_))}return g.limitSet_&&(g.isViewFromLeft()?d.limitToFirst=g.limit_:d.limitToLast=g.limit_),d}function xa(g){const d={};if(g.startSet_&&(d.sp=g.indexStartValue_,g.startNameSet_&&(d.sn=g.indexStartName_),d.sin=!g.startAfterSet_),g.endSet_&&(d.ep=g.indexEndValue_,g.endNameSet_&&(d.en=g.indexEndName_),d.ein=!g.endBeforeSet_),g.limitSet_){d.l=g.limit_;let h=g.viewFrom_;""===h&&(h=g.isViewFromLeft()?"l":"r"),d.vf=h}return g.index_!==mi&&(d.i=g.index_.toString()),d}class Cs extends Kt{constructor(d,h,y,T){super(),this.repoInfo_=d,this.onDataUpdate_=h,this.authTokenProvider_=y,this.appCheckTokenProvider_=T,this.log_=Qn("p:rest:"),this.listens_={}}reportStats(d){throw new Error("Method not implemented.")}static getListenId_(d,h){return void 0!==h?"tag$"+h:((0,L.Uc)(d._queryParams.isDefault(),"should have a tag if it's not a default query."),d._path.toString())}listen(d,h,y,T){const O=d._path.toString();this.log_("Listen called for "+O+" "+d._queryIdentifier);const j=Cs.getListenId_(d,y),de={};this.listens_[j]=de;const xe=Qs(d._queryParams);this.restRequest_(O+".json",xe,(Ze,Vt)=>{let Gt=Vt;if(404===Ze&&(Gt=null,Ze=null),null===Ze&&this.onDataUpdate_(O,Gt,!1,y),(0,L.o5)(this.listens_,j)===de){let Zt;Zt=Ze?401===Ze?"permission_denied":"rest_error:"+Ze:"ok",T(Zt,null)}})}unlisten(d,h){const y=Cs.getListenId_(d,h);delete this.listens_[y]}get(d){const h=Qs(d._queryParams),y=d._path.toString(),T=new L.o9;return this.restRequest_(y+".json",h,(O,j)=>{let de=j;404===O&&(de=null,O=null),null===O?(this.onDataUpdate_(y,de,!1,null),T.resolve(de)):T.reject(new Error(de))}),T.promise}refreshAuthToken(d){}restRequest_(d,h={},y){return h.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([T,O])=>{T&&T.accessToken&&(h.auth=T.accessToken),O&&O.token&&(h.ac=O.token);const j=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+d+"?ns="+this.repoInfo_.namespace+(0,L.ik)(h);this.log_("Sending REST request for "+j);const de=new XMLHttpRequest;de.onreadystatechange=()=>{if(y&&4===de.readyState){this.log_("REST Response for "+j+" received. status:",de.status,"response:",de.responseText);let xe=null;if(de.status>=200&&de.status<300){try{xe=(0,L.GI)(de.responseText)}catch{ft("Failed to parse JSON response for "+j+": "+de.responseText)}y(null,xe)}else 401!==de.status&&404!==de.status&&ft("Got unsuccessful REST response for "+j+" Status: "+de.status),y(de.status);y=null}},de.open("GET",j,!0),de.send()})}}class Ko{constructor(){this.rootNode_=dr.EMPTY_NODE}getNode(d){return this.rootNode_.getChild(d)}updateSnapshot(d,h){this.rootNode_=this.rootNode_.updateChild(d,h)}}function Zo(){return{value:null,children:new Map}}function Fs(g,d,h){if(Bt(d))g.value=h,g.children.clear();else if(null!==g.value)g.value=g.value.updateChild(d,h);else{const y=En(d);g.children.has(y)||g.children.set(y,Zo()),Fs(g.children.get(y),d=tr(d),h)}}function Ya(g,d){if(Bt(d))return g.value=null,g.children.clear(),!0;if(null!==g.value){if(g.value.isLeafNode())return!1;{const h=g.value;return g.value=null,h.forEachChild(mi,(y,T)=>{Fs(g,new qt(y),T)}),Ya(g,d)}}if(g.children.size>0){const h=En(d);return d=tr(d),g.children.has(h)&&Ya(g.children.get(h),d)&&g.children.delete(h),0===g.children.size}return!0}function Jo(g,d,h){null!==g.value?h(d,g.value):function gl(g,d){g.children.forEach((h,y)=>{d(y,h)})}(g,(y,T)=>{Jo(T,new qt(d.toString()+"/"+y),h)})}class _a{constructor(d){this.collection_=d,this.last_=null}get(){const d=this.collection_.get(),h=Object.assign({},d);return this.last_&&Tn(this.last_,(y,T)=>{h[y]=h[y]-T}),this.last_=d,h}}class ur{constructor(d,h){this.server_=h,this.statsToReport_={},this.statsListener_=new _a(d);const y=1e4+2e4*Math.random();nr(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const d=this.statsListener_.get(),h={};let y=!1;Tn(d,(T,O)=>{O>0&&(0,L.Y7)(this.statsToReport_,T)&&(h[T]=O,y=!0)}),y&&this.server_.reportStats(h),nr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Vo=function(g){return g[g.OVERWRITE=0]="OVERWRITE",g[g.MERGE=1]="MERGE",g[g.ACK_USER_WRITE=2]="ACK_USER_WRITE",g[g.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",g}(Vo||{});function ml(g){return{fromUser:!1,fromServer:!0,queryId:g,tagged:!0}}class Kl{constructor(d,h,y){this.path=d,this.affectedTree=h,this.revert=y,this.type=Vo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(d){if(Bt(this.path)){if(null!=this.affectedTree.value)return(0,L.Uc)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const h=this.affectedTree.subtree(new qt(d));return new Kl(ln(),h,this.revert)}}return(0,L.Uc)(En(this.path)===d,"operationForChild called for unrelated child."),new Kl(tr(this.path),this.affectedTree,this.revert)}}class ya{constructor(d,h){this.source=d,this.path=h,this.type=Vo.LISTEN_COMPLETE}operationForChild(d){return Bt(this.path)?new ya(this.source,ln()):new ya(this.source,tr(this.path))}}class fs{constructor(d,h,y){this.source=d,this.path=h,this.snap=y,this.type=Vo.OVERWRITE}operationForChild(d){return Bt(this.path)?new fs(this.source,ln(),this.snap.getImmediateChild(d)):new fs(this.source,tr(this.path),this.snap)}}class Ia{constructor(d,h,y){this.source=d,this.path=h,this.children=y,this.type=Vo.MERGE}operationForChild(d){if(Bt(this.path)){const h=this.children.subtree(new qt(d));return h.isEmpty()?null:h.value?new fs(this.source,ln(),h.value):new Ia(this.source,ln(),h)}return(0,L.Uc)(En(this.path)===d,"Can't get a merge for a child not on the path of the operation"),new Ia(this.source,tr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class no{constructor(d,h,y){this.node_=d,this.fullyInitialized_=h,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(d){if(Bt(d))return this.isFullyInitialized()&&!this.filtered_;const h=En(d);return this.isCompleteForChild(h)}isCompleteForChild(d){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(d)}getNode(){return this.node_}}class uc{constructor(d){this.query_=d,this.index_=this.query_._queryParams.getIndex()}}function ws(g,d,h,y,T,O){const j=y.filter(de=>de.type===h);j.sort((de,xe)=>function vr(g,d,h){if(null==d.childName||null==h.childName)throw(0,L.Y9)("Should only compare child_ events.");const y=new _r(d.childName,d.snapshotNode),T=new _r(h.childName,h.snapshotNode);return g.index_.compare(y,T)}(g,de,xe)),j.forEach(de=>{const xe=function zt(g,d,h){return"value"===d.type||"child_removed"===d.type||(d.prevName=h.getPredecessorChildName(d.childName,d.snapshotNode,g.index_)),d}(g,de,O);T.forEach(Ze=>{Ze.respondsTo(de.type)&&d.push(Ze.createEvent(xe,g.query_))})})}function Na(g,d){return{eventCache:g,serverCache:d}}function zr(g,d,h,y){return Na(new no(d,h,y),g.serverCache)}function Ci(g,d,h,y){return Na(g.eventCache,new no(d,h,y))}function Ea(g){return g.eventCache.isFullyInitialized()?g.eventCache.getNode():null}function Eo(g){return g.serverCache.isFullyInitialized()?g.serverCache.getNode():null}let Uo;class si{constructor(d,h=(()=>(Uo||(Uo=new eo(xn)),Uo))()){this.value=d,this.children=h}static fromObject(d){let h=new si(null);return Tn(d,(y,T)=>{h=h.set(new qt(y),T)}),h}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(d,h){if(null!=this.value&&h(this.value))return{path:ln(),value:this.value};if(Bt(d))return null;{const y=En(d),T=this.children.get(y);if(null!==T){const O=T.findRootMostMatchingPathAndValue(tr(d),h);return null!=O?{path:Ae(new qt(y),O.path),value:O.value}:null}return null}}findRootMostValueAndPath(d){return this.findRootMostMatchingPathAndValue(d,()=>!0)}subtree(d){if(Bt(d))return this;{const h=En(d),y=this.children.get(h);return null!==y?y.subtree(tr(d)):new si(null)}}set(d,h){if(Bt(d))return new si(h,this.children);{const y=En(d),O=(this.children.get(y)||new si(null)).set(tr(d),h),j=this.children.insert(y,O);return new si(this.value,j)}}remove(d){if(Bt(d))return this.children.isEmpty()?new si(null):new si(null,this.children);{const h=En(d),y=this.children.get(h);if(y){const T=y.remove(tr(d));let O;return O=T.isEmpty()?this.children.remove(h):this.children.insert(h,T),null===this.value&&O.isEmpty()?new si(null):new si(this.value,O)}return this}}get(d){if(Bt(d))return this.value;{const h=En(d),y=this.children.get(h);return y?y.get(tr(d)):null}}setTree(d,h){if(Bt(d))return h;{const y=En(d),O=(this.children.get(y)||new si(null)).setTree(tr(d),h);let j;return j=O.isEmpty()?this.children.remove(y):this.children.insert(y,O),new si(this.value,j)}}fold(d){return this.fold_(ln(),d)}fold_(d,h){const y={};return this.children.inorderTraversal((T,O)=>{y[T]=O.fold_(Ae(d,T),h)}),h(d,this.value,y)}findOnPath(d,h){return this.findOnPath_(d,ln(),h)}findOnPath_(d,h,y){const T=!!this.value&&y(h,this.value);if(T)return T;if(Bt(d))return null;{const O=En(d),j=this.children.get(O);return j?j.findOnPath_(tr(d),Ae(h,O),y):null}}foreachOnPath(d,h){return this.foreachOnPath_(d,ln(),h)}foreachOnPath_(d,h,y){if(Bt(d))return this;{this.value&&y(h,this.value);const T=En(d),O=this.children.get(T);return O?O.foreachOnPath_(tr(d),Ae(h,T),y):new si(null)}}foreach(d){this.foreach_(ln(),d)}foreach_(d,h){this.children.inorderTraversal((y,T)=>{T.foreach_(Ae(d,y),h)}),this.value&&h(d,this.value)}foreachChild(d){this.children.inorderTraversal((h,y)=>{y.value&&d(h,y.value)})}}class Mo{constructor(d){this.writeTree_=d}static empty(){return new Mo(new si(null))}}function Ds(g,d,h){if(Bt(d))return new Mo(new si(h));{const y=g.writeTree_.findRootMostValueAndPath(d);if(null!=y){const T=y.path;let O=y.value;const j=rr(T,d);return O=O.updateChild(j,h),new Mo(g.writeTree_.set(T,O))}{const T=new si(h),O=g.writeTree_.setTree(d,T);return new Mo(O)}}}function us(g,d,h){let y=g;return Tn(h,(T,O)=>{y=Ds(y,Ae(d,T),O)}),y}function Ui(g,d){if(Bt(d))return Mo.empty();{const h=g.writeTree_.setTree(d,new si(null));return new Mo(h)}}function vi(g,d){return null!=ds(g,d)}function ds(g,d){const h=g.writeTree_.findRootMostValueAndPath(d);return null!=h?g.writeTree_.get(h.path).getChild(rr(h.path,d)):null}function Bo(g){const d=[],h=g.writeTree_.value;return null!=h?h.isLeafNode()||h.forEachChild(mi,(y,T)=>{d.push(new _r(y,T))}):g.writeTree_.children.inorderTraversal((y,T)=>{null!=T.value&&d.push(new _r(y,T.value))}),d}function b(g,d){if(Bt(d))return g;{const h=ds(g,d);return new Mo(null!=h?new si(h):g.writeTree_.subtree(d))}}function G(g){return g.writeTree_.isEmpty()}function Re(g,d){return $(ln(),g.writeTree_,d)}function $(g,d,h){if(null!=d.value)return h.updateChild(g,d.value);{let y=null;return d.children.inorderTraversal((T,O)=>{".priority"===T?((0,L.Uc)(null!==O.value,"Priority writes must always be leaf nodes"),y=O.value):h=$(Ae(g,T),O,h)}),!h.getChild(g).isEmpty()&&null!==y&&(h=h.updateChild(Ae(g,".priority"),y)),h}}function pe(g,d){return vl(d,g)}function Yr(g,d){if(g.snap)return Zr(g.path,d);for(const h in g.children)if(g.children.hasOwnProperty(h)&&Zr(Ae(g.path,h),d))return!0;return!1}function Er(g){return g.visible}function ai(g,d,h){let y=Mo.empty();for(let T=0;T<g.length;++T){const O=g[T];if(d(O)){const j=O.path;let de;if(O.snap)Zr(h,j)?(de=rr(h,j),y=Ds(y,de,O.snap)):Zr(j,h)&&(de=rr(j,h),y=Ds(y,ln(),O.snap.getChild(de)));else{if(!O.children)throw(0,L.Y9)("WriteRecord should have .snap or .children");if(Zr(h,j))de=rr(h,j),y=us(y,de,O.children);else if(Zr(j,h))if(de=rr(j,h),Bt(de))y=us(y,ln(),O.children);else{const xe=(0,L.o5)(O.children,En(de));if(xe){const Ze=xe.getChild(tr(de));y=Ds(y,ln(),Ze)}}}}}return y}function hi(g,d,h,y,T){if(y||T){const O=b(g.visibleWrites,d);return!T&&G(O)?h:T||null!=h||vi(O,ln())?Re(ai(g.allWrites,function(Ze){return(Ze.visible||T)&&(!y||!~y.indexOf(Ze.writeId))&&(Zr(Ze.path,d)||Zr(d,Ze.path))},d),h||dr.EMPTY_NODE):null}{const O=ds(g.visibleWrites,d);if(null!=O)return O;{const j=b(g.visibleWrites,d);return G(j)?h:null!=h||vi(j,ln())?Re(j,h||dr.EMPTY_NODE):null}}}function wr(g,d,h,y){return hi(g.writeTree,g.treePath,d,h,y)}function sn(g,d){return function Zi(g,d,h){let y=dr.EMPTY_NODE;const T=ds(g.visibleWrites,d);if(T)return T.isLeafNode()||T.forEachChild(mi,(O,j)=>{y=y.updateImmediateChild(O,j)}),y;if(h){const O=b(g.visibleWrites,d);return h.forEachChild(mi,(j,de)=>{const xe=Re(b(O,new qt(j)),de);y=y.updateImmediateChild(j,xe)}),Bo(O).forEach(j=>{y=y.updateImmediateChild(j.name,j.node)}),y}return Bo(b(g.visibleWrites,d)).forEach(j=>{y=y.updateImmediateChild(j.name,j.node)}),y}(g.writeTree,g.treePath,d)}function Gi(g,d,h,y){return function Zs(g,d,h,y,T){(0,L.Uc)(y||T,"Either existingEventSnap or existingServerSnap must exist");const O=Ae(d,h);if(vi(g.visibleWrites,O))return null;{const j=b(g.visibleWrites,O);return G(j)?T.getChild(h):Re(j,T.getChild(h))}}(g.writeTree,g.treePath,d,h,y)}function $o(g,d){return function ho(g,d){return ds(g.visibleWrites,d)}(g.writeTree,Ae(g.treePath,d))}function zn(g,d,h){return function Mi(g,d,h,y){const T=Ae(d,h),O=ds(g.visibleWrites,T);return null!=O?O:y.isCompleteForChild(h)?Re(b(g.visibleWrites,T),y.getNode().getImmediateChild(h)):null}(g.writeTree,g.treePath,d,h)}function er(g,d){return vl(Ae(g.treePath,d),g.writeTree)}function vl(g,d){return{treePath:g,writeTree:d}}class Rn{constructor(){this.changeMap=new Map}trackChildChange(d){const h=d.type,y=d.childName;(0,L.Uc)("child_added"===h||"child_changed"===h||"child_removed"===h,"Only child changes supported for tracking"),(0,L.Uc)(".priority"!==y,"Only non-priority child changes can be tracked.");const T=this.changeMap.get(y);if(T){const O=T.type;if("child_added"===h&&"child_removed"===O)this.changeMap.set(y,Se(y,d.snapshotNode,T.snapshotNode));else if("child_removed"===h&&"child_added"===O)this.changeMap.delete(y);else if("child_removed"===h&&"child_changed"===O)this.changeMap.set(y,H(y,T.oldSnap));else if("child_changed"===h&&"child_added"===O)this.changeMap.set(y,ce(y,d.snapshotNode));else{if("child_changed"!==h||"child_changed"!==O)throw(0,L.Y9)("Illegal combination of changes: "+d+" occurred after "+T);this.changeMap.set(y,Se(y,d.snapshotNode,T.oldSnap))}}else this.changeMap.set(y,d)}getChanges(){return Array.from(this.changeMap.values())}}const rn=new class Ot{getCompleteChild(d){return null}getChildAfterChild(d,h,y){return null}};class ei{constructor(d,h,y=null){this.writes_=d,this.viewCache_=h,this.optCompleteServerCache_=y}getCompleteChild(d){const h=this.viewCache_.eventCache;if(h.isCompleteForChild(d))return h.getNode().getImmediateChild(d);{const y=null!=this.optCompleteServerCache_?new no(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zn(this.writes_,d,y)}}getChildAfterChild(d,h,y){const T=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Eo(this.viewCache_),O=function au(g,d,h,y,T,O){return function wi(g,d,h,y,T,O,j){let de;const xe=b(g.visibleWrites,d),Ze=ds(xe,ln());if(null!=Ze)de=Ze;else{if(null==h)return[];de=Re(xe,h)}if(de=de.withIndex(j),de.isEmpty()||de.isLeafNode())return[];{const Vt=[],Gt=j.getCompare(),Zt=O?de.getReverseIteratorFrom(y,j):de.getIteratorFrom(y,j);let Fn=Zt.getNext();for(;Fn&&Vt.length<T;)0!==Gt(Fn,y)&&Vt.push(Fn),Fn=Zt.getNext();return Vt}}(g.writeTree,g.treePath,d,h,y,T,O)}(this.writes_,T,h,1,y,d);return 0===O.length?null:O[0]}}function lu(g,d,h,y,T,O){const j=d.eventCache;if(null!=$o(y,h))return d;{let de,xe;if(Bt(h))if((0,L.Uc)(d.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),d.serverCache.isFiltered()){const Ze=Eo(d),Gt=sn(y,Ze instanceof dr?Ze:dr.EMPTY_NODE);de=g.filter.updateFullNode(d.eventCache.getNode(),Gt,O)}else{const Ze=wr(y,Eo(d));de=g.filter.updateFullNode(d.eventCache.getNode(),Ze,O)}else{const Ze=En(h);if(".priority"===Ze){(0,L.Uc)(1===kr(h),"Can't have a priority with additional path components");const Vt=j.getNode();xe=d.serverCache.getNode();const Gt=Gi(y,h,Vt,xe);de=null!=Gt?g.filter.updatePriority(Vt,Gt):j.getNode()}else{const Vt=tr(h);let Gt;if(j.isCompleteForChild(Ze)){xe=d.serverCache.getNode();const Zt=Gi(y,h,j.getNode(),xe);Gt=null!=Zt?j.getNode().getImmediateChild(Ze).updateChild(Vt,Zt):j.getNode().getImmediateChild(Ze)}else Gt=zn(y,Ze,d.serverCache);de=null!=Gt?g.filter.updateChild(j.getNode(),Ze,Gt,Vt,T,O):j.getNode()}}return zr(d,de,j.isFullyInitialized()||Bt(h),g.filter.filtersNodes())}}function Js(g,d,h,y,T,O,j,de){const xe=d.serverCache;let Ze;const Vt=j?g.filter:g.filter.getIndexedFilter();if(Bt(h))Ze=Vt.updateFullNode(xe.getNode(),y,null);else if(Vt.filtersNodes()&&!xe.isFiltered()){const Fn=xe.getNode().updateChild(h,y);Ze=Vt.updateFullNode(xe.getNode(),Fn,null)}else{const Fn=En(h);if(!xe.isCompleteForPath(h)&&kr(h)>1)return d;const lr=tr(h),ns=xe.getNode().getImmediateChild(Fn).updateChild(lr,y);Ze=".priority"===Fn?Vt.updatePriority(xe.getNode(),ns):Vt.updateChild(xe.getNode(),Fn,ns,lr,rn,null)}const Gt=Ci(d,Ze,xe.isFullyInitialized()||Bt(h),Vt.filtersNodes());return lu(g,Gt,h,T,new ei(T,Gt,O),de)}function Za(g,d,h,y,T,O,j){const de=d.eventCache;let xe,Ze;const Vt=new ei(T,d,O);if(Bt(h))Ze=g.filter.updateFullNode(d.eventCache.getNode(),y,j),xe=zr(d,Ze,!0,g.filter.filtersNodes());else{const Gt=En(h);if(".priority"===Gt)Ze=g.filter.updatePriority(d.eventCache.getNode(),y),xe=zr(d,Ze,de.isFullyInitialized(),de.isFiltered());else{const Zt=tr(h),Fn=de.getNode().getImmediateChild(Gt);let lr;if(Bt(Zt))lr=y;else{const Oi=Vt.getCompleteChild(Gt);lr=null!=Oi?".priority"===A(Zt)&&Oi.getChild(le(Zt)).isEmpty()?Oi:Oi.updateChild(Zt,y):dr.EMPTY_NODE}xe=Fn.equals(lr)?d:zr(d,g.filter.updateChild(de.getNode(),Gt,lr,Zt,Vt,j),de.isFullyInitialized(),g.filter.filtersNodes())}}return xe}function ea(g,d){return g.eventCache.isCompleteForChild(d)}function xu(g,d,h){return h.foreach((y,T)=>{d=d.updateChild(y,T)}),d}function Ja(g,d,h,y,T,O,j,de){if(d.serverCache.getNode().isEmpty()&&!d.serverCache.isFullyInitialized())return d;let Ze,xe=d;Ze=Bt(h)?y:new si(null).setTree(h,y);const Vt=d.serverCache.getNode();return Ze.children.inorderTraversal((Gt,Zt)=>{if(Vt.hasChild(Gt)){const lr=xu(0,d.serverCache.getNode().getImmediateChild(Gt),Zt);xe=Js(g,xe,new qt(Gt),lr,T,O,j,de)}}),Ze.children.inorderTraversal((Gt,Zt)=>{const Fn=!d.serverCache.isCompleteForChild(Gt)&&null===Zt.value;if(!Vt.hasChild(Gt)&&!Fn){const Oi=xu(0,d.serverCache.getNode().getImmediateChild(Gt),Zt);xe=Js(g,xe,new qt(Gt),Oi,T,O,j,de)}}),xe}class ro{constructor(d,h){this.query_=d,this.eventRegistrations_=[];const y=this.query_._queryParams,T=new Pn(y.getIndex()),O=function Fr(g){return g.loadsAllData()?new Pn(g.getIndex()):g.hasLimit()?new zo(g):new _i(g)}(y);this.processor_=function kc(g){return{filter:g}}(O);const j=h.serverCache,de=h.eventCache,xe=T.updateFullNode(dr.EMPTY_NODE,j.getNode(),null),Ze=O.updateFullNode(dr.EMPTY_NODE,de.getNode(),null),Vt=new no(xe,j.isFullyInitialized(),T.filtersNodes()),Gt=new no(Ze,de.isFullyInitialized(),O.filtersNodes());this.viewCache_=Na(Gt,Vt),this.eventGenerator_=new uc(this.query_)}get query(){return this.query_}}function ti(g,d){const h=Eo(g.viewCache_);return h&&(g.query._queryParams.loadsAllData()||!Bt(d)&&!h.getImmediateChild(En(d)).isEmpty())?h.getChild(d):null}function Il(g){return 0===g.eventRegistrations_.length}function Nn(g,d,h){const y=[];if(h){(0,L.Uc)(null==d,"A cancel should cancel all event registrations.");const T=g.query._path;g.eventRegistrations_.forEach(O=>{const j=O.createCancelEvent(h,T);j&&y.push(j)})}if(d){let T=[];for(let O=0;O<g.eventRegistrations_.length;++O){const j=g.eventRegistrations_[O];if(j.matches(d)){if(d.hasAnyCallback()){T=T.concat(g.eventRegistrations_.slice(O+1));break}}else T.push(j)}g.eventRegistrations_=T}else g.eventRegistrations_=[];return y}function ta(g,d,h,y){d.type===Vo.MERGE&&null!==d.source.queryId&&((0,L.Uc)(Eo(g.viewCache_),"We should always have a full cache before handling merges"),(0,L.Uc)(Ea(g.viewCache_),"Missing event cache, even though we have a server cache"));const T=g.viewCache_,O=function Ts(g,d,h,y,T){const O=new Rn;let j,de;if(h.type===Vo.OVERWRITE){const Ze=h;Ze.source.fromUser?j=Za(g,d,Ze.path,Ze.snap,y,T,O):((0,L.Uc)(Ze.source.fromServer,"Unknown source."),de=Ze.source.tagged||d.serverCache.isFiltered()&&!Bt(Ze.path),j=Js(g,d,Ze.path,Ze.snap,y,T,de,O))}else if(h.type===Vo.MERGE){const Ze=h;Ze.source.fromUser?j=function zh(g,d,h,y,T,O,j){let de=d;return y.foreach((xe,Ze)=>{const Vt=Ae(h,xe);ea(d,En(Vt))&&(de=Za(g,de,Vt,Ze,T,O,j))}),y.foreach((xe,Ze)=>{const Vt=Ae(h,xe);ea(d,En(Vt))||(de=Za(g,de,Vt,Ze,T,O,j))}),de}(g,d,Ze.path,Ze.children,y,T,O):((0,L.Uc)(Ze.source.fromServer,"Unknown source."),de=Ze.source.tagged||d.serverCache.isFiltered(),j=Ja(g,d,Ze.path,Ze.children,y,T,de,O))}else if(h.type===Vo.ACK_USER_WRITE){const Ze=h;j=Ze.revert?function ql(g,d,h,y,T,O){let j;if(null!=$o(y,h))return d;{const de=new ei(y,d,T),xe=d.eventCache.getNode();let Ze;if(Bt(h)||".priority"===En(h)){let Vt;if(d.serverCache.isFullyInitialized())Vt=wr(y,Eo(d));else{const Gt=d.serverCache.getNode();(0,L.Uc)(Gt instanceof dr,"serverChildren would be complete if leaf node"),Vt=sn(y,Gt)}Ze=g.filter.updateFullNode(xe,Vt,O)}else{const Vt=En(h);let Gt=zn(y,Vt,d.serverCache);null==Gt&&d.serverCache.isCompleteForChild(Vt)&&(Gt=xe.getImmediateChild(Vt)),Ze=null!=Gt?g.filter.updateChild(xe,Vt,Gt,tr(h),de,O):d.eventCache.getNode().hasChild(Vt)?g.filter.updateChild(xe,Vt,dr.EMPTY_NODE,tr(h),de,O):xe,Ze.isEmpty()&&d.serverCache.isFullyInitialized()&&(j=wr(y,Eo(d)),j.isLeafNode()&&(Ze=g.filter.updateFullNode(Ze,j,O)))}return j=d.serverCache.isFullyInitialized()||null!=$o(y,ln()),zr(d,Ze,j,g.filter.filtersNodes())}}(g,d,Ze.path,y,T,O):function or(g,d,h,y,T,O,j){if(null!=$o(T,h))return d;const de=d.serverCache.isFiltered(),xe=d.serverCache;if(null!=y.value){if(Bt(h)&&xe.isFullyInitialized()||xe.isCompleteForPath(h))return Js(g,d,h,xe.getNode().getChild(h),T,O,de,j);if(Bt(h)){let Ze=new si(null);return xe.getNode().forEachChild(yo,(Vt,Gt)=>{Ze=Ze.set(new qt(Vt),Gt)}),Ja(g,d,h,Ze,T,O,de,j)}return d}{let Ze=new si(null);return y.foreach((Vt,Gt)=>{const Zt=Ae(h,Vt);xe.isCompleteForPath(Zt)&&(Ze=Ze.set(Vt,xe.getNode().getChild(Zt)))}),Ja(g,d,h,Ze,T,O,de,j)}}(g,d,Ze.path,Ze.affectedTree,y,T,O)}else{if(h.type!==Vo.LISTEN_COMPLETE)throw(0,L.Y9)("Unknown operation type: "+h.type);j=function ji(g,d,h,y,T){const O=d.serverCache;return lu(g,Ci(d,O.getNode(),O.isFullyInitialized()||Bt(h),O.isFiltered()),h,y,rn,T)}(g,d,h.path,y,O)}const xe=O.getChanges();return function dc(g,d,h){const y=d.eventCache;if(y.isFullyInitialized()){const T=y.getNode().isLeafNode()||y.getNode().isEmpty(),O=Ea(g);(h.length>0||!g.eventCache.isFullyInitialized()||T&&!y.getNode().equals(O)||!y.getNode().getPriority().equals(O.getPriority()))&&h.push(V(Ea(d)))}}(d,j,xe),{viewCache:j,changes:xe}}(g.processor_,T,d,h,y);return function ah(g,d){(0,L.Uc)(d.eventCache.getNode().isIndexed(g.filter.getIndex()),"Event snap not indexed"),(0,L.Uc)(d.serverCache.getNode().isIndexed(g.filter.getIndex()),"Server snap not indexed")}(g.processor_,O.viewCache),(0,L.Uc)(O.viewCache.serverCache.isFullyInitialized()||!T.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),g.viewCache_=O.viewCache,hs(g,O.changes,O.viewCache.eventCache.getNode(),null)}function hs(g,d,h,y){return function su(g,d,h,y){const T=[],O=[];return d.forEach(j=>{"child_changed"===j.type&&g.index_.indexedValueChanged(j.oldSnap,j.snapshotNode)&&O.push(function _n(g,d){return{type:"child_moved",snapshotNode:d,childName:g}}(j.childName,j.snapshotNode))}),ws(g,T,"child_removed",d,y,h),ws(g,T,"child_added",d,y,h),ws(g,T,"child_moved",O,y,h),ws(g,T,"child_changed",d,y,h),ws(g,T,"value",d,y,h),T}(g.eventGenerator_,d,h,y?[y]:g.eventRegistrations_)}let Oa,J;class el{constructor(){this.views=new Map}}function Yl(g,d,h,y){const T=d.source.queryId;if(null!==T){const O=g.views.get(T);return(0,L.Uc)(null!=O,"SyncTree gave us an op for an invalid query."),ta(O,d,h,y)}{let O=[];for(const j of g.views.values())O=O.concat(ta(j,d,h,y));return O}}function Go(g,d,h,y,T){const j=g.views.get(d._queryIdentifier);if(!j){let de=wr(h,T?y:null),xe=!1;de?xe=!0:y instanceof dr?(de=sn(h,y),xe=!1):(de=dr.EMPTY_NODE,xe=!1);const Ze=Na(new no(de,xe,!1),new no(y,T,!1));return new ro(d,Ze)}return j}function ku(g){const d=[];for(const h of g.views.values())h.query._queryParams.loadsAllData()||d.push(h);return d}function w(g,d){let h=null;for(const y of g.views.values())h=h||ti(y,d);return h}function P(g,d){return d._queryParams.loadsAllData()?U(g):g.views.get(d._queryIdentifier)}function M(g,d){return null!=P(g,d)}function R(g){return null!=U(g)}function U(g){for(const d of g.views.values())if(d.query._queryParams.loadsAllData())return d;return null}let fn=1;class wt{constructor(d){this.listenProvider_=d,this.syncPointTree_=new si(null),this.pendingWriteTree_=function mo(){return{visibleWrites:Mo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ln(g,d,h,y,T){return function ze(g,d,h,y,T){(0,L.Uc)(y>g.lastWriteId,"Stacking an older write on top of newer ones"),void 0===T&&(T=!0),g.allWrites.push({path:d,snap:h,writeId:y,visible:T}),T&&(g.visibleWrites=Ds(g.visibleWrites,d,h)),g.lastWriteId=y}(g.pendingWriteTree_,d,h,y,T),T?wl(g,new fs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,h)):[]}function Ti(g,d,h=!1){const y=function In(g,d){for(let h=0;h<g.allWrites.length;h++){const y=g.allWrites[h];if(y.writeId===d)return y}return null}(g.pendingWriteTree_,d);if(function Pr(g,d){const h=g.allWrites.findIndex(de=>de.writeId===d);(0,L.Uc)(h>=0,"removeWrite called with nonexistent writeId.");const y=g.allWrites[h];g.allWrites.splice(h,1);let T=y.visible,O=!1,j=g.allWrites.length-1;for(;T&&j>=0;){const de=g.allWrites[j];de.visible&&(j>=h&&Yr(de,y.path)?T=!1:Zr(y.path,de.path)&&(O=!0)),j--}return!!T&&(O?(function Jr(g){g.visibleWrites=ai(g.allWrites,Er,ln()),g.lastWriteId=g.allWrites.length>0?g.allWrites[g.allWrites.length-1].writeId:-1}(g),!0):(y.snap?g.visibleWrites=Ui(g.visibleWrites,y.path):Tn(y.children,xe=>{g.visibleWrites=Ui(g.visibleWrites,Ae(y.path,xe))}),!0))}(g.pendingWriteTree_,d)){let O=new si(null);return null!=y.snap?O=O.set(ln(),!0):Tn(y.children,j=>{O=O.set(new qt(j),!0)}),wl(g,new Kl(y.path,O,h))}return[]}function ci(g,d,h){return wl(g,new fs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,h))}function ar(g,d,h,y,T=!1){const O=d._path,j=g.syncPointTree_.get(O);let de=[];if(j&&("default"===d._queryIdentifier||M(j,d))){const xe=function Ou(g,d,h,y){const T=d._queryIdentifier,O=[];let j=[];const de=R(g);if("default"===T)for(const[xe,Ze]of g.views.entries())j=j.concat(Nn(Ze,h,y)),Il(Ze)&&(g.views.delete(xe),Ze.query._queryParams.loadsAllData()||O.push(Ze.query));else{const xe=g.views.get(T);xe&&(j=j.concat(Nn(xe,h,y)),Il(xe)&&(g.views.delete(T),xe.query._queryParams.loadsAllData()||O.push(xe.query)))}return de&&!R(g)&&O.push(new(function Di(){return(0,L.Uc)(Oa,"Reference.ts has not been loaded"),Oa}())(d._repo,d._path)),{removed:O,events:j}}(j,d,h,y);(function Nu(g){return 0===g.views.size})(j)&&(g.syncPointTree_=g.syncPointTree_.remove(O));const Ze=xe.removed;if(de=xe.events,!T){const Vt=-1!==Ze.findIndex(Zt=>Zt._queryParams.loadsAllData()),Gt=g.syncPointTree_.findOnPath(O,(Zt,Fn)=>R(Fn));if(Vt&&!Gt){const Zt=g.syncPointTree_.subtree(O);if(!Zt.isEmpty()){const Fn=function Fc(g){return g.fold((d,h,y)=>{if(h&&R(h))return[U(h)];{let T=[];return h&&(T=ku(h)),Tn(y,(O,j)=>{T=T.concat(j)}),T}})}(Zt);for(let lr=0;lr<Fn.length;++lr){const Oi=Fn[lr],ns=Oi.query,al=Dd(g,Oi);g.listenProvider_.startListening(pc(ns),fc(g,ns),al.hashFn,al.onComplete)}}}!Gt&&Ze.length>0&&!y&&(Vt?g.listenProvider_.stopListening(pc(d),null):Ze.forEach(Zt=>{const Fn=g.queryToTagMap.get(uu(Zt));g.listenProvider_.stopListening(pc(Zt),Fn)}))}!function qh(g,d){for(let h=0;h<d.length;++h){const y=d[h];if(!y._queryParams.loadsAllData()){const T=uu(y),O=g.queryToTagMap.get(T);g.queryToTagMap.delete(T),g.tagToQueryMap.delete(O)}}}(g,Ze)}return de}function io(g,d,h,y){const T=du(g,y);if(null!=T){const O=Dr(T),j=O.path,de=O.queryId,xe=rr(j,d);return ui(g,j,new fs(ml(de),xe,h))}return[]}function tl(g,d,h,y=!1){const T=d._path;let O=null,j=!1;g.syncPointTree_.foreachOnPath(T,(Zt,Fn)=>{const lr=rr(Zt,T);O=O||w(Fn,lr),j=j||R(Fn)});let xe,de=g.syncPointTree_.get(T);de?(j=j||R(de),O=O||w(de,ln())):(de=new el,g.syncPointTree_=g.syncPointTree_.set(T,de)),null!=O?xe=!0:(xe=!1,O=dr.EMPTY_NODE,g.syncPointTree_.subtree(T).foreachChild((Fn,lr)=>{const Oi=w(lr,ln());Oi&&(O=O.updateImmediateChild(Fn,Oi))}));const Ze=M(de,d);if(!Ze&&!d._queryParams.loadsAllData()){const Zt=uu(d);(0,L.Uc)(!g.queryToTagMap.has(Zt),"View does not exist, but we have a tag");const Fn=function ap(){return fn++}();g.queryToTagMap.set(Zt,Fn),g.tagToQueryMap.set(Fn,Zt)}let Gt=function cu(g,d,h,y,T,O){const j=Go(g,d,y,T,O);return g.views.has(d._queryIdentifier)||g.views.set(d._queryIdentifier,j),function Wi(g,d){g.eventRegistrations_.push(d)}(j,h),function El(g,d){const h=g.viewCache_.eventCache,y=[];return h.getNode().isLeafNode()||h.getNode().forEachChild(mi,(O,j)=>{y.push(ce(O,j))}),h.isFullyInitialized()&&y.push(V(h.getNode())),hs(g,y,h.getNode(),d)}(j,h)}(de,d,h,pe(g.pendingWriteTree_,T),O,xe);if(!Ze&&!j&&!y){const Zt=P(de,d);Gt=Gt.concat(function Yh(g,d,h){const y=d._path,T=fc(g,d),O=Dd(g,h),j=g.listenProvider_.startListening(pc(d),T,O.hashFn,O.onComplete),de=g.syncPointTree_.subtree(y);if(T)(0,L.Uc)(!R(de.value),"If we're adding a query, it shouldn't be shadowed");else{const xe=de.fold((Ze,Vt,Gt)=>{if(!Bt(Ze)&&Vt&&R(Vt))return[U(Vt).query];{let Zt=[];return Vt&&(Zt=Zt.concat(ku(Vt).map(Fn=>Fn.query))),Tn(Gt,(Fn,lr)=>{Zt=Zt.concat(lr)}),Zt}});for(let Ze=0;Ze<xe.length;++Ze){const Vt=xe[Ze];g.listenProvider_.stopListening(pc(Vt),fc(g,Vt))}}return j}(g,d,Zt))}return Gt}function jo(g,d,h){const T=g.pendingWriteTree_,O=g.syncPointTree_.findOnPath(d,(j,de)=>{const Ze=w(de,rr(j,d));if(Ze)return Ze});return hi(T,d,O,h,!0)}function wl(g,d){return hc(d,g.syncPointTree_,null,pe(g.pendingWriteTree_,ln()))}function hc(g,d,h,y){if(Bt(g.path))return Kh(g,d,h,y);{const T=d.get(ln());null==h&&null!=T&&(h=w(T,ln()));let O=[];const j=En(g.path),de=g.operationForChild(j),xe=d.children.get(j);if(xe&&de){const Ze=h?h.getImmediateChild(j):null,Vt=er(y,j);O=O.concat(hc(de,xe,Ze,Vt))}return T&&(O=O.concat(Yl(T,g,y,h))),O}}function Kh(g,d,h,y){const T=d.get(ln());null==h&&null!=T&&(h=w(T,ln()));let O=[];return d.children.inorderTraversal((j,de)=>{const xe=h?h.getImmediateChild(j):null,Ze=er(y,j),Vt=g.operationForChild(j);Vt&&(O=O.concat(Kh(Vt,de,xe,Ze)))}),T&&(O=O.concat(Yl(T,g,y,h))),O}function Dd(g,d){const h=d.query,y=fc(g,h);return{hashFn:()=>(function ir(g){return g.viewCache_.serverCache.getNode()}(d)||dr.EMPTY_NODE).hash(),onComplete:T=>{if("ok"===T)return y?function bs(g,d,h){const y=du(g,h);if(y){const T=Dr(y),O=T.path,j=T.queryId,de=rr(O,d);return ui(g,O,new ya(ml(j),de))}return[]}(g,h._path,y):function ra(g,d){return wl(g,new ya({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d))}(g,h._path);{const O=function sr(g,d){let h="Unknown Error";"too_big"===g?h="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===g?h="Client doesn't have permission to access the desired data.":"unavailable"===g&&(h="The service is unavailable");const y=new Error(g+" at "+d._path.toString()+": "+h);return y.code=g.toUpperCase(),y}(T,h);return ar(g,h,null,O)}}}}function fc(g,d){const h=uu(d);return g.queryToTagMap.get(h)}function uu(g){return g._path.toString()+"$"+g._queryIdentifier}function du(g,d){return g.tagToQueryMap.get(d)}function Dr(g){const d=g.indexOf("$");return(0,L.Uc)(-1!==d&&d<g.length-1,"Bad queryKey."),{queryId:g.substr(d+1),path:new qt(g.substr(0,d))}}function ui(g,d,h){const y=g.syncPointTree_.get(d);return(0,L.Uc)(y,"Missing sync point for query tag that we're tracking"),Yl(y,h,pe(g.pendingWriteTree_,d),null)}function pc(g){return g._queryParams.loadsAllData()&&!g._queryParams.isDefault()?new(function mt(){return(0,L.Uc)(J,"Reference.ts has not been loaded"),J}())(g._repo,g._path):g}class gc{constructor(d){this.node_=d}getImmediateChild(d){const h=this.node_.getImmediateChild(d);return new gc(h)}node(){return this.node_}}class Vc{constructor(d,h){this.syncTree_=d,this.path_=h}getImmediateChild(d){const h=Ae(this.path_,d);return new Vc(this.syncTree_,h)}node(){return jo(this.syncTree_,this.path_)}}const lh=function(g){return(g=g||{}).timestamp=g.timestamp||(new Date).getTime(),g},ps=function(g,d,h){return g&&"object"==typeof g?((0,L.Uc)(".sv"in g,"Unexpected leaf node or priority contents"),"string"==typeof g[".sv"]?Lu(g[".sv"],d,h):"object"==typeof g[".sv"]?Qh(g[".sv"],d):void(0,L.Uc)(!1,"Unexpected server value: "+JSON.stringify(g,null,2))):g},Lu=function(g,d,h){if("timestamp"===g)return h.timestamp;(0,L.Uc)(!1,"Unexpected server value: "+g)},Qh=function(g,d,h){g.hasOwnProperty("increment")||(0,L.Uc)(!1,"Unexpected server value: "+JSON.stringify(g,null,2));const y=g.increment;"number"!=typeof y&&(0,L.Uc)(!1,"Unexpected increment value: "+y);const T=d.node();if((0,L.Uc)(null!==T&&typeof T<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!T.isLeafNode())return y;const j=T.getValue();return"number"!=typeof j?y:j+y},Fu=function(g,d,h,y){return Dl(d,new Vc(h,g),y)},mc=function(g,d,h){return Dl(g,new gc(d),h)};function Dl(g,d,h){const y=g.getPriority().val(),T=ps(y,d.getImmediateChild(".priority"),h);let O;if(g.isLeafNode()){const j=g,de=ps(j.getValue(),d,h);return de!==j.getValue()||T!==j.getPriority().val()?new Ei(de,Ri(T)):g}{const j=g;return O=j,T!==j.getPriority().val()&&(O=O.updatePriority(new Ei(T))),j.forEachChild(mi,(de,xe)=>{const Ze=Dl(xe,d.getImmediateChild(de),h);Ze!==xe&&(O=O.updateImmediateChild(de,Ze))}),O}}class fo{constructor(d="",h=null,y={children:{},childCount:0}){this.name=d,this.parent=h,this.node=y}}function hu(g,d){let h=d instanceof qt?d:new qt(d),y=g,T=En(h);for(;null!==T;){const O=(0,L.o5)(y.node.children,T)||{children:{},childCount:0};y=new fo(T,y,O),h=tr(h),T=En(h)}return y}function es(g){return g.node.value}function Vu(g,d){g.node.value=d,ts(g)}function Hi(g){return g.node.childCount>0}function bo(g,d){Tn(g.node.children,(h,y)=>{d(new fo(h,g,y))})}function li(g,d,h,y){h&&!y&&d(g),bo(g,T=>{li(T,d,!0,y)}),h&&y&&d(g)}function Ji(g){return new qt(null===g.parent?g.name:Ji(g.parent)+"/"+g.name)}function ts(g){null!==g.parent&&function di(g,d,h){const y=function ka(g){return void 0===es(g)&&!Hi(g)}(h),T=(0,L.Y7)(g.node.children,d);y&&T?(delete g.node.children[d],g.node.childCount--,ts(g)):!y&&!T&&(g.node.children[d]=h.node,g.node.childCount++,ts(g))}(g.parent,g.name,g)}const Uu=/[\[\].#$\/\u0000-\u001F\u007F]/,Po=/[\[\].#$\u0000-\u001F\u007F]/,Tl=10485760,La=function(g){return"string"==typeof g&&0!==g.length&&!Uu.test(g)},Co=function(g){return"string"==typeof g&&0!==g.length&&!Po.test(g)},_c=function(g){return null===g||"string"==typeof g||"number"==typeof g&&!kt(g)||g&&"object"==typeof g&&(0,L.Y7)(g,".sv")},Ca=function(g,d,h,y){y&&void 0===d||Vs((0,L.iQ)(g,"value"),d,h)},Vs=function(g,d,h){const y=h instanceof qt?new Yo(h,g):h;if(void 0===d)throw new Error(g+"contains undefined "+Yn(y));if("function"==typeof d)throw new Error(g+"contains a function "+Yn(y)+" with contents = "+d.toString());if(kt(d))throw new Error(g+"contains "+d.toString()+" "+Yn(y));if("string"==typeof d&&d.length>Tl/3&&(0,L.Uj)(d)>Tl)throw new Error(g+"contains a string greater than "+Tl+" utf8 bytes "+Yn(y)+" ('"+d.substring(0,50)+"...')");if(d&&"object"==typeof d){let T=!1,O=!1;if(Tn(d,(j,de)=>{if(".value"===j)T=!0;else if(".priority"!==j&&".sv"!==j&&(O=!0,!La(j)))throw new Error(g+" contains an invalid key ("+j+") "+Yn(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function oi(g,d){g.parts_.length>0&&(g.byteLength_+=1),g.parts_.push(d),g.byteLength_+=(0,L.Uj)(d),co(g)})(y,j),Vs(g,de,y),function Fi(g){const d=g.parts_.pop();g.byteLength_-=(0,L.Uj)(d),g.parts_.length>0&&(g.byteLength_-=1)}(y)}),T&&O)throw new Error(g+' contains ".value" child '+Yn(y)+" in addition to actual children.")}},ia=function(g,d,h,y){if(y&&void 0===d)return;const T=(0,L.iQ)(g,"values");if(!d||"object"!=typeof d||Array.isArray(d))throw new Error(T+" must be an object containing the children to replace.");const O=[];Tn(d,(j,de)=>{const xe=new qt(j);if(Vs(T,de,Ae(h,xe)),".priority"===A(xe)&&!_c(de))throw new Error(T+"contains an invalid value for '"+xe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");O.push(xe)}),function(g,d){let h,y;for(h=0;h<d.length;h++){y=d[h];const O=F(y);for(let j=0;j<O.length;j++)if((".priority"!==O[j]||j!==O.length-1)&&!La(O[j]))throw new Error(g+"contains an invalid key ("+O[j]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}d.sort(Si);let T=null;for(h=0;h<d.length;h++){if(y=d[h],null!==T&&Zr(T,y))throw new Error(g+"contains a path "+T.toString()+" that is ancestor of another path "+y.toString());T=y}}(T,O)},Ss=function(g,d,h){if(!h||void 0!==d){if(kt(d))throw new Error((0,L.iQ)(g,"priority")+"is "+d.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_c(d))throw new Error((0,L.iQ)(g,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},As=function(g,d,h,y){if(!(y&&void 0===h||La(h)))throw new Error((0,L.iQ)(g,d)+'was an invalid key = "'+h+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gs=function(g,d,h,y){if(!(y&&void 0===h||Co(h)))throw new Error((0,L.iQ)(g,d)+'was an invalid path = "'+h+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Rs=function(g,d,h,y){h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),gs(g,d,h,y)},xo=function(g,d){if(".info"===En(d))throw new Error(g+" failed = Can't modify data under /.info/")},Us=function(g,d){const h=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!La(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==h.length&&!function(g){return g&&(g=g.replace(/^\/*\.info(\/|$)/,"/")),Co(g)}(h))throw new Error((0,L.iQ)(g,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ql{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wa(g,d){let h=null;for(let y=0;y<d.length;y++){const T=d[y],O=T.getPath();null!==h&&!ii(O,h.path)&&(g.eventLists_.push(h),h=null),null===h&&(h={events:[],path:O}),h.events.push(T)}h&&g.eventLists_.push(h)}function vc(g,d,h){wa(g,h),bl(g,y=>ii(y,d))}function No(g,d,h){wa(g,h),bl(g,y=>Zr(y,d)||Zr(d,y))}function bl(g,d){g.recursionDepth_++;let h=!0;for(let y=0;y<g.eventLists_.length;y++){const T=g.eventLists_[y];T&&(d(T.path)?(fu(g.eventLists_[y]),g.eventLists_[y]=null):h=!1)}h&&(g.eventLists_=[]),g.recursionDepth_--}function fu(g){for(let d=0;d<g.events.length;d++){const h=g.events[d];if(null!==h){g.events[d]=null;const y=h.getEventRunner();Jt&&an("event: "+h.toString()),yn(y)}}}const nl="repo_interrupt",uh=25;class pu{constructor(d,h,y,T){this.repoInfo_=d,this.forceRestClient_=h,this.authTokenProvider_=y,this.appCheckProvider_=T,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ql,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zo(),this.transactionQueueTree_=new fo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Uc(g){const h=g.infoData_.getNode(new qt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+h}function Sl(g){return lh({timestamp:Uc(g)})}function Td(g,d,h,y,T){g.dataUpdateCount++;const O=new qt(d);h=g.interceptServerDataCallback_?g.interceptServerDataCallback_(d,h):h;let j=[];if(T)if(y){const xe=(0,L.kH)(h,Ze=>Ri(Ze));j=function Cl(g,d,h,y){const T=du(g,y);if(T){const O=Dr(T),j=O.path,de=O.queryId,xe=rr(j,d),Ze=si.fromObject(h);return ui(g,j,new Ia(ml(de),xe,Ze))}return[]}(g.serverSyncTree_,O,xe,T)}else{const xe=Ri(h);j=io(g.serverSyncTree_,O,xe,T)}else if(y){const xe=(0,L.kH)(h,Ze=>Ri(Ze));j=function Bi(g,d,h){const y=si.fromObject(h);return wl(g,new Ia({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,y))}(g.serverSyncTree_,O,xe)}else{const xe=Ri(h);j=ci(g.serverSyncTree_,O,xe)}let de=O;j.length>0&&(de=Cc(g,O)),No(g.eventQueue_,de,j)}function gu(g,d){Al(g,"connected",d),!1===d&&function Zh(g){oa(g,"onDisconnectEvents");const d=Sl(g),h=Zo();Jo(g.onDisconnect_,ln(),(T,O)=>{const j=Fu(T,O,g.serverSyncTree_,d);Fs(h,T,j)});let y=[];Jo(h,ln(),(T,O)=>{y=y.concat(ci(g.serverSyncTree_,T,O));const j=Va(g,T);Cc(g,j)}),g.onDisconnect_=Zo(),No(g.eventQueue_,ln(),y)}(g)}function Al(g,d,h){const y=new qt("/.info/"+d),T=Ri(h);g.infoData_.updateSnapshot(y,T);const O=ci(g.infoSyncTree_,y,T);No(g.eventQueue_,y,O)}function Oo(g){return g.nextWriteId_++}function zi(g,d,h,y,T){oa(g,"set",{path:d.toString(),value:h,priority:y});const O=Sl(g),j=Ri(h,y),de=jo(g.serverSyncTree_,d),xe=mc(j,de,O),Ze=Oo(g),Vt=Ln(g.serverSyncTree_,d,xe,Ze,!0);wa(g.eventQueue_,Vt),g.server_.put(d.toString(),j.val(!0),(Zt,Fn)=>{const lr="ok"===Zt;lr||ft("set at "+d+" failed: "+Zt);const Oi=Ti(g.serverSyncTree_,Ze,!lr);No(g.eventQueue_,d,Oi),Bs(0,T,Zt,Fn)});const Gt=Va(g,d);Cc(g,Gt),No(g.eventQueue_,Gt,[])}function Bc(g,d,h){g.server_.onDisconnectCancel(d.toString(),(y,T)=>{"ok"===y&&Ya(g.onDisconnect_,d),Bs(0,h,y,T)})}function Xl(g,d,h,y){const T=Ri(h);g.server_.onDisconnectPut(d.toString(),T.val(!0),(O,j)=>{"ok"===O&&Fs(g.onDisconnect_,d,T),Bs(0,y,O,j)})}function Pi(g,d,h){let y;y=".info"===En(d._path)?ar(g.infoSyncTree_,d,h):ar(g.serverSyncTree_,d,h),vc(g.eventQueue_,d._path,y)}function Rl(g){g.persistentConnection_&&g.persistentConnection_.interrupt(nl)}function oa(g,...d){let h="";g.persistentConnection_&&(h=g.persistentConnection_.id+":"),an(h,...d)}function Bs(g,d,h,y){d&&yn(()=>{if("ok"===h)d(null);else{const T=(h||"error").toUpperCase();let O=T;y&&(O+=": "+y);const j=new Error(O);j.code=T,d(j)}})}function mu(g,d,h){return jo(g.serverSyncTree_,d,h)||dr.EMPTY_NODE}function Ec(g,d=g.transactionQueueTree_){if(d||Gc(g,d),es(d)){const h=bd(g,d);(0,L.Uc)(h.length>0,"Sending zero length transaction queue"),h.every(T=>0===T.status)&&function Ml(g,d,h){const y=h.map(Ze=>Ze.currentWriteId),T=mu(g,d,y);let O=T;const j=T.hash();for(let Ze=0;Ze<h.length;Ze++){const Vt=h[Ze];(0,L.Uc)(0===Vt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Vt.status=1,Vt.retryCount++;const Gt=rr(d,Vt.path);O=O.updateChild(Gt,Vt.currentOutputSnapshotRaw)}const de=O.val(!0),xe=d;g.server_.put(xe.toString(),de,Ze=>{oa(g,"transaction put response",{path:xe.toString(),status:Ze});let Vt=[];if("ok"===Ze){const Gt=[];for(let Zt=0;Zt<h.length;Zt++)h[Zt].status=2,Vt=Vt.concat(Ti(g.serverSyncTree_,h[Zt].currentWriteId)),h[Zt].onComplete&&Gt.push(()=>h[Zt].onComplete(null,!0,h[Zt].currentOutputSnapshotResolved)),h[Zt].unwatcher();Gc(g,hu(g.transactionQueueTree_,d)),Ec(g,g.transactionQueueTree_),No(g.eventQueue_,d,Vt);for(let Zt=0;Zt<Gt.length;Zt++)yn(Gt[Zt])}else{if("datastale"===Ze)for(let Gt=0;Gt<h.length;Gt++)h[Gt].status=3===h[Gt].status?4:0;else{ft("transaction at "+xe.toString()+" failed: "+Ze);for(let Gt=0;Gt<h.length;Gt++)h[Gt].status=4,h[Gt].abortReason=Ze}Cc(g,d)}},j)}(g,Ji(d),h)}else Hi(d)&&bo(d,h=>{Ec(g,h)})}function Cc(g,d){const h=wc(g,d),y=Ji(h);return function Jh(g,d,h){if(0===d.length)return;const y=[];let T=[];const j=d.filter(de=>0===de.status).map(de=>de.currentWriteId);for(let de=0;de<d.length;de++){const xe=d[de],Ze=rr(h,xe.path);let Gt,Vt=!1;if((0,L.Uc)(null!==Ze,"rerunTransactionsUnderNode_: relativePath should not be null."),4===xe.status)Vt=!0,Gt=xe.abortReason,T=T.concat(Ti(g.serverSyncTree_,xe.currentWriteId,!0));else if(0===xe.status)if(xe.retryCount>=uh)Vt=!0,Gt="maxretry",T=T.concat(Ti(g.serverSyncTree_,xe.currentWriteId,!0));else{const Zt=mu(g,xe.path,j);xe.currentInputSnapshot=Zt;const Fn=d[de].update(Zt.val());if(void 0!==Fn){Vs("transaction failed: Data returned ",Fn,xe.path);let lr=Ri(Fn);"object"==typeof Fn&&null!=Fn&&(0,L.Y7)(Fn,".priority")||(lr=lr.updatePriority(Zt.getPriority()));const ns=xe.currentWriteId,al=Sl(g),$l=mc(lr,Zt,al);xe.currentOutputSnapshotRaw=lr,xe.currentOutputSnapshotResolved=$l,xe.currentWriteId=Oo(g),j.splice(j.indexOf(ns),1),T=T.concat(Ln(g.serverSyncTree_,xe.path,$l,xe.currentWriteId,xe.applyLocally)),T=T.concat(Ti(g.serverSyncTree_,ns,!0))}else Vt=!0,Gt="nodata",T=T.concat(Ti(g.serverSyncTree_,xe.currentWriteId,!0))}No(g.eventQueue_,h,T),T=[],Vt&&(d[de].status=2,setTimeout(d[de].unwatcher,Math.floor(0)),d[de].onComplete&&y.push("nodata"===Gt?()=>d[de].onComplete(null,!1,d[de].currentInputSnapshot):()=>d[de].onComplete(new Error(Gt),!1,null)))}Gc(g,g.transactionQueueTree_);for(let de=0;de<y.length;de++)yn(y[de]);Ec(g,g.transactionQueueTree_)}(g,bd(g,h),y),y}function wc(g,d){let h,y=g.transactionQueueTree_;for(h=En(d);null!==h&&void 0===es(y);)y=hu(y,h),h=En(d=tr(d));return y}function bd(g,d){const h=[];return $c(g,d,h),h.sort((y,T)=>y.order-T.order),h}function $c(g,d,h){const y=es(d);if(y)for(let T=0;T<y.length;T++)h.push(y[T]);bo(d,T=>{$c(g,T,h)})}function Gc(g,d){const h=es(d);if(h){let y=0;for(let T=0;T<h.length;T++)2!==h[T].status&&(h[y]=h[T],y++);h.length=y,Vu(d,h.length>0?h:void 0)}bo(d,y=>{Gc(g,y)})}function Va(g,d){const h=Ji(wc(g,d)),y=hu(g.transactionQueueTree_,d);return function ch(g,d,h){let y=h?g:g.parent;for(;null!==y;){if(d(y))return!0;y=y.parent}}(y,T=>{Pl(g,T)}),Pl(g,y),li(y,T=>{Pl(g,T)}),h}function Pl(g,d){const h=es(d);if(h){const y=[];let T=[],O=-1;for(let j=0;j<h.length;j++)3===h[j].status||(1===h[j].status?((0,L.Uc)(O===j-1,"All SENT items should be at beginning of queue."),O=j,h[j].status=3,h[j].abortReason="set"):((0,L.Uc)(0===h[j].status,"Unexpected transaction status in abort"),h[j].unwatcher(),T=T.concat(Ti(g.serverSyncTree_,h[j].currentWriteId,!0)),h[j].onComplete&&y.push(h[j].onComplete.bind(null,new Error("set"),!1,null))));-1===O?Vu(d,void 0):h.length=O+1,No(g.eventQueue_,Ji(d),T);for(let j=0;j<y.length;j++)yn(y[j])}}const sa=function(g,d){const h=Ua(g),y=h.namespace;return"firebase.com"===h.domain&&xt(h.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==h.domain&&xt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),h.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ft("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ut(h.host,h.secure,y,"ws"===h.scheme||"wss"===h.scheme,d,"",y!==h.subdomain),path:new qt(h.pathString)}},Ua=function(g){let d="",h="",y="",T="",O="",j=!0,de="https",xe=443;if("string"==typeof g){let Ze=g.indexOf("//");Ze>=0&&(de=g.substring(0,Ze-1),g=g.substring(Ze+2));let Vt=g.indexOf("/");-1===Vt&&(Vt=g.length);let Gt=g.indexOf("?");-1===Gt&&(Gt=g.length),d=g.substring(0,Math.min(Vt,Gt)),Vt<Gt&&(T=function ef(g){let d="";const h=g.split("/");for(let y=0;y<h.length;y++)if(h[y].length>0){let T=h[y];try{T=decodeURIComponent(T.replace(/\+/g," "))}catch{}d+="/"+T}return d}(g.substring(Vt,Gt)));const Zt=function Dc(g){const d={};"?"===g.charAt(0)&&(g=g.substring(1));for(const h of g.split("&")){if(0===h.length)continue;const y=h.split("=");2===y.length?d[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):ft(`Invalid query segment '${h}' in query '${g}'`)}return d}(g.substring(Math.min(g.length,Gt)));Ze=d.indexOf(":"),Ze>=0?(j="https"===de||"wss"===de,xe=parseInt(d.substring(Ze+1),10)):Ze=d.length;const Fn=d.slice(0,Ze);if("localhost"===Fn.toLowerCase())h="localhost";else if(Fn.split(".").length<=2)h=Fn;else{const lr=d.indexOf(".");y=d.substring(0,lr).toLowerCase(),h=d.substring(lr+1),O=y}"ns"in Zt&&(O=Zt.ns)}return{host:d,port:xe,domain:h,subdomain:y,secure:j,scheme:de,pathString:T,namespace:O}},jc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wc=function(){let g=0;const d=[];return function(h){const y=h===g;let T;g=h;const O=new Array(8);for(T=7;T>=0;T--)O[T]=jc.charAt(h%64),h=Math.floor(h/64);(0,L.Uc)(0===h,"Cannot push at time == 0");let j=O.join("");if(y){for(T=11;T>=0&&63===d[T];T--)d[T]=0;d[T]++}else for(T=0;T<12;T++)d[T]=Math.floor(64*Math.random());for(T=0;T<12;T++)j+=jc.charAt(d[T]);return(0,L.Uc)(20===j.length,"nextPushId: Length should be 20."),j}}();class Wu{constructor(d,h,y,T){this.eventType=d,this.eventRegistration=h,this.snapshot=y,this.prevName=T}getPath(){const d=this.snapshot.ref;return"value"===this.eventType?d._path:d.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.i)(this.snapshot.exportVal())}}class Hc{constructor(d,h,y){this.eventRegistration=d,this.error=h,this.path=y}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class rl{constructor(d,h){this.snapshotCallback=d,this.cancelCallback=h}onValue(d,h){this.snapshotCallback.call(null,d,h)}onCancel(d){return(0,L.Uc)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,d)}get hasCancelCallback(){return!!this.cancelCallback}matches(d){return this.snapshotCallback===d.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===d.snapshotCallback.userCallback&&this.snapshotCallback.context===d.snapshotCallback.context}}class _u{constructor(d,h){this._repo=d,this._path=h}cancel(){const d=new L.o9;return Bc(this._repo,this._path,d.wrapCallback(()=>{})),d.promise}remove(){xo("OnDisconnect.remove",this._path);const d=new L.o9;return Xl(this._repo,this._path,null,d.wrapCallback(()=>{})),d.promise}set(d){xo("OnDisconnect.set",this._path),Ca("OnDisconnect.set",d,this._path,!1);const h=new L.o9;return Xl(this._repo,this._path,d,h.wrapCallback(()=>{})),h.promise}setWithPriority(d,h){xo("OnDisconnect.setWithPriority",this._path),Ca("OnDisconnect.setWithPriority",d,this._path,!1),Ss("OnDisconnect.setWithPriority",h,!1);const y=new L.o9;return function Gu(g,d,h,y,T){const O=Ri(h,y);g.server_.onDisconnectPut(d.toString(),O.val(!0),(j,de)=>{"ok"===j&&Fs(g.onDisconnect_,d,O),Bs(0,T,j,de)})}(this._repo,this._path,d,h,y.wrapCallback(()=>{})),y.promise}update(d){xo("OnDisconnect.update",this._path),ia("OnDisconnect.update",d,this._path,!1);const h=new L.o9;return function ju(g,d,h,y){if((0,L.t7)(h))return an("onDisconnect().update() called with empty data.  Don't do anything."),void Bs(0,y,"ok",void 0);g.server_.onDisconnectMerge(d.toString(),h,(T,O)=>{"ok"===T&&Tn(h,(j,de)=>{const xe=Ri(de);Fs(g.onDisconnect_,Ae(d,j),xe)}),Bs(0,y,T,O)})}(this._repo,this._path,d,h.wrapCallback(()=>{})),h.promise}}class qo{constructor(d,h,y,T){this._repo=d,this._path=h,this._queryParams=y,this._orderByCalled=T}get key(){return Bt(this._path)?null:A(this._path)}get ref(){return new xi(this._repo,this._path)}get _queryIdentifier(){const d=xa(this._queryParams),h=mr(d);return"{}"===h?"default":h}get _queryObject(){return xa(this._queryParams)}isEqual(d){if(!((d=(0,L.Yj)(d))instanceof qo))return!1;const h=this._repo===d._repo,y=ii(this._path,d._path);return h&&y&&this._queryIdentifier===d._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function fe(g){let d="";for(let h=g.pieceNum_;h<g.pieces_.length;h++)""!==g.pieces_[h]&&(d+="/"+encodeURIComponent(String(g.pieces_[h])));return d||"/"}(this._path)}}function Jl(g,d){if(!0===g._orderByCalled)throw new Error(d+": You can't combine multiple orderBy calls.")}function Ba(g){let d=null,h=null;if(g.hasStart()&&(d=g.getIndexStartValue()),g.hasEnd()&&(h=g.getIndexEndValue()),g.getIndex()===yo){const y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",T="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(g.hasStart()){if(g.getIndexStartName()!==Ft)throw new Error(y);if("string"!=typeof d)throw new Error(T)}if(g.hasEnd()){if(g.getIndexEndName()!==Qt)throw new Error(y);if("string"!=typeof h)throw new Error(T)}}else if(g.getIndex()===mi){if(null!=d&&!_c(d)||null!=h&&!_c(h))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.Uc)(g.getIndex()instanceof pl||g.getIndex()===z,"unknown index type."),null!=d&&"object"==typeof d||null!=h&&"object"==typeof h)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xl(g){if(g.hasStart()&&g.hasEnd()&&g.hasLimit()&&!g.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class xi extends qo{constructor(d,h){super(d,h,new cs,!1)}get parent(){const d=le(this._path);return null===d?null:new xi(this._repo,d)}get root(){let d=this;for(;null!==d.parent;)d=d.parent;return d}}class $s{constructor(d,h,y){this._node=d,this.ref=h,this._index=y}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(d){const h=new qt(d),y=aa(this.ref,d);return new $s(this._node.getChild(h),y,mi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(d){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(y,T)=>d(new $s(T,aa(this.ref,y),mi)))}hasChild(d){const h=new qt(d);return!this._node.getChild(h).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function zc(g,d){return(g=(0,L.Yj)(g))._checkNotDeleted("ref"),void 0!==d?aa(g._root,d):g._root}function ec(g,d){(g=(0,L.Yj)(g))._checkNotDeleted("refFromURL");const h=sa(d,g._repo.repoInfo_.nodeAdmin);Us("refFromURL",h);const y=h.repoInfo;return!g._repo.repoInfo_.isCustomHost()&&y.host!==g._repo.repoInfo_.host&&xt("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+g._repo.repoInfo_.host+")"),zc(g,h.path.toString())}function aa(g,d){return null===En((g=(0,L.Yj)(g))._path)?Rs("child","path",d,!1):gs("child","path",d,!1),new xi(g._repo,Ae(g._path,d))}function Nl(g,d){g=(0,L.Yj)(g),xo("set",g._path),Ca("set",d,g._path,!1);const h=new L.o9;return zi(g._repo,g._path,d,null,h.wrapCallback(()=>{})),h.promise}function Ol(g,d){ia("update",d,g._path,!1);const h=new L.o9;return function yc(g,d,h,y){oa(g,"update",{path:d.toString(),value:h});let T=!0;const O=Sl(g),j={};if(Tn(h,(de,xe)=>{T=!1,j[de]=Fu(Ae(d,de),Ri(xe),g.serverSyncTree_,O)}),T)an("update() called with empty data.  Don't do anything."),Bs(0,y,"ok",void 0);else{const de=Oo(g),xe=function yr(g,d,h,y){!function Ut(g,d,h,y){(0,L.Uc)(y>g.lastWriteId,"Stacking an older merge on top of newer ones"),g.allWrites.push({path:d,children:h,writeId:y,visible:!0}),g.visibleWrites=us(g.visibleWrites,d,h),g.lastWriteId=y}(g.pendingWriteTree_,d,h,y);const T=si.fromObject(h);return wl(g,new Ia({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,T))}(g.serverSyncTree_,d,j,de);wa(g.eventQueue_,xe),g.server_.merge(d.toString(),h,(Ze,Vt)=>{const Gt="ok"===Ze;Gt||ft("update at "+d+" failed: "+Ze);const Zt=Ti(g.serverSyncTree_,de,!Gt),Fn=Zt.length>0?Cc(g,d):d;No(g.eventQueue_,Fn,Zt),Bs(0,y,Ze,Vt)}),Tn(h,Ze=>{const Vt=Va(g,Ae(d,Ze));Cc(g,Vt)}),No(g.eventQueue_,d,[])}}(g._repo,g._path,d,h.wrapCallback(()=>{})),h.promise}function Hu(g){g=(0,L.Yj)(g);const d=new rl(()=>{}),h=new wo(d);return function $u(g,d,h){const y=function Lc(g,d){const h=d._path;let y=null;g.syncPointTree_.foreachOnPath(h,(Ze,Vt)=>{const Gt=rr(Ze,h);y=y||w(Vt,Gt)});let T=g.syncPointTree_.get(h);T?y=y||w(T,ln()):(T=new el,g.syncPointTree_=g.syncPointTree_.set(h,T));const O=null!=y,j=O?new no(y,!0,!1):null;return function yl(g){return Ea(g.viewCache_)}(Go(T,d,pe(g.pendingWriteTree_,d._path),O?j.getNode():dr.EMPTY_NODE,O))}(g.serverSyncTree_,d);return null!=y?Promise.resolve(y):g.server_.get(d).then(T=>{const O=Ri(T).withIndex(d._queryParams.getIndex());let j;if(tl(g.serverSyncTree_,d,h,!0),d._queryParams.loadsAllData())j=ci(g.serverSyncTree_,d._path,O);else{const de=fc(g.serverSyncTree_,d);j=io(g.serverSyncTree_,d._path,O,de)}return No(g.eventQueue_,d._path,j),ar(g.serverSyncTree_,d,h,null,!0),O},T=>(oa(g,"get for query "+(0,L.i)(d)+" failed: "+T),Promise.reject(new Error(T))))}(g._repo,g,h).then(y=>new $s(y,new xi(g._repo,g._path),g._queryParams.getIndex()))}class wo{constructor(d){this.callbackContext=d}respondsTo(d){return"value"===d}createEvent(d,h){const y=h._queryParams.getIndex();return new Wu("value",this,new $s(d.snapshotNode,new xi(h._repo,h._path),y))}getEventRunner(d){return"cancel"===d.getEventType()?()=>this.callbackContext.onCancel(d.error):()=>this.callbackContext.onValue(d.snapshot,null)}createCancelEvent(d,h){return this.callbackContext.hasCancelCallback?new Hc(this,d,h):null}matches(d){return d instanceof wo&&(!d.callbackContext||!this.callbackContext||d.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class vu{constructor(d,h){this.eventType=d,this.callbackContext=h}respondsTo(d){let h="children_added"===d?"child_added":d;return h="children_removed"===h?"child_removed":h,this.eventType===h}createCancelEvent(d,h){return this.callbackContext.hasCancelCallback?new Hc(this,d,h):null}createEvent(d,h){(0,L.Uc)(null!=d.childName,"Child events should have a childName.");const y=aa(new xi(h._repo,h._path),d.childName),T=h._queryParams.getIndex();return new Wu(d.type,this,new $s(d.snapshotNode,y,T),d.prevName)}getEventRunner(d){return"cancel"===d.getEventType()?()=>this.callbackContext.onCancel(d.error):()=>this.callbackContext.onValue(d.snapshot,d.prevName)}matches(d){return d instanceof vu&&this.eventType===d.eventType&&(!this.callbackContext||!d.callbackContext||this.callbackContext.matches(d.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function kl(g,d,h,y,T){let O;if("object"==typeof y&&(O=void 0,T=y),"function"==typeof y&&(O=y),T&&T.onlyOnce){const xe=h,Ze=(Vt,Gt)=>{Pi(g._repo,g,de),xe(Vt,Gt)};Ze.userCallback=h.userCallback,Ze.context=h.context,h=Ze}const j=new rl(h,O||void 0),de="value"===d?new wo(j):new vu(d,j);return function fi(g,d,h){let y;y=".info"===En(d._path)?tl(g.infoSyncTree_,d,h):tl(g.serverSyncTree_,d,h),vc(g.eventQueue_,d._path,y)}(g._repo,g,de),()=>Pi(g._repo,g,de)}function zu(g,d,h,y){return kl(g,"value",d,h,y)}function la(g,d,h,y){return kl(g,"child_added",d,h,y)}function Ku(g,d,h,y){return kl(g,"child_changed",d,h,y)}function il(g,d,h,y){return kl(g,"child_moved",d,h,y)}function Tc(g,d,h,y){return kl(g,"child_removed",d,h,y)}function hh(g,d,h){let y=null;const T=h?new rl(h):null;"value"===d?y=new wo(T):d&&(y=new vu(d,T)),Pi(g._repo,g,y)}class fr{}class So extends fr{constructor(d,h){super(),this._value=d,this._key=h,this.type="endAt"}_apply(d){Ca("endAt",this._value,d._path,!0);const h=qs(d._queryParams,this._value,this._key);if(xl(h),Ba(h),d._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qo(d._repo,d._path,h,d._orderByCalled)}}class fh extends fr{constructor(d,h){super(),this._value=d,this._key=h,this.type="endBefore"}_apply(d){Ca("endBefore",this._value,d._path,!1);const h=function Ys(g,d,h){let y;return y=qs(g,d,g.index_===yo||h?h:Ft),y.endBeforeSet_=!0,y}(d._queryParams,this._value,this._key);if(xl(h),Ba(h),d._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qo(d._repo,d._path,h,d._orderByCalled)}}class Ad extends fr{constructor(d,h){super(),this._value=d,this._key=h,this.type="startAt"}_apply(d){Ca("startAt",this._value,d._path,!0);const h=Io(d._queryParams,this._value,this._key);if(xl(h),Ba(h),d._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qo(d._repo,d._path,h,d._orderByCalled)}}class nf extends fr{constructor(d,h){super(),this._value=d,this._key=h,this.type="startAfter"}_apply(d){Ca("startAfter",this._value,d._path,!1);const h=function cc(g,d,h){let y;return y=Io(g,d,g.index_===yo||h?h:Qt),y.startAfterSet_=!0,y}(d._queryParams,this._value,this._key);if(xl(h),Ba(h),d._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qo(d._repo,d._path,h,d._orderByCalled)}}class gh extends fr{constructor(d){super(),this._limit=d,this.type="limitToFirst"}_apply(d){if(d._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qo(d._repo,d._path,function Ks(g,d){const h=g.copy();return h.limitSet_=!0,h.limit_=d,h.viewFrom_="l",h}(d._queryParams,this._limit),d._orderByCalled)}}class Fl extends fr{constructor(d){super(),this._limit=d,this.type="limitToLast"}_apply(d){if(d._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qo(d._repo,d._path,function Fo(g,d){const h=g.copy();return h.limitSet_=!0,h.limit_=d,h.viewFrom_="r",h}(d._queryParams,this._limit),d._orderByCalled)}}class Ga extends fr{constructor(d){super(),this._path=d,this.type="orderByChild"}_apply(d){Jl(d,"orderByChild");const h=new qt(this._path);if(Bt(h))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const y=new pl(h),T=Xi(d._queryParams,y);return Ba(T),new qo(d._repo,d._path,T,!0)}}class Vl extends fr{constructor(){super(...arguments),this.type="orderByKey"}_apply(d){Jl(d,"orderByKey");const h=Xi(d._queryParams,yo);return Ba(h),new qo(d._repo,d._path,h,!0)}}class mh extends fr{constructor(){super(...arguments),this.type="orderByPriority"}_apply(d){Jl(d,"orderByPriority");const h=Xi(d._queryParams,mi);return Ba(h),new qo(d._repo,d._path,h,!0)}}class _h extends fr{constructor(){super(...arguments),this.type="orderByValue"}_apply(d){Jl(d,"orderByValue");const h=Xi(d._queryParams,z);return Ba(h),new qo(d._repo,d._path,h,!0)}}class oo extends fr{constructor(d,h){super(),this._value=d,this._key=h,this.type="equalTo"}_apply(d){if(Ca("equalTo",this._value,d._path,!1),d._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(d._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new So(this._value,this._key)._apply(new Ad(this._value,this._key)._apply(d))}}function Ms(g,...d){let h=(0,L.Yj)(g);for(const y of d)h=y._apply(h);return h}(function na(g){(0,L.Uc)(!Oa,"__referenceConstructor has already been defined"),Oa=g})(xi),function we(g){(0,L.Uc)(!J,"__referenceConstructor has already been defined"),J=g}(xi);const Eu={};function Wa(g,d,h,y,T){let O=y||g.options.databaseURL;void 0===O&&(g.options.projectId||xt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),an("Using default host for project ",g.options.projectId),O=`${g.options.projectId}-default-rtdb.firebaseio.com`);let xe,Ze,j=sa(O,T),de=j.repoInfo;typeof process<"u"&&process.env&&(Ze=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ze?(xe=!0,O=`http://${Ze}?ns=${de.namespace}`,j=sa(O,T),de=j.repoInfo):xe=!j.repoInfo.secure;const Vt=T&&xe?new Xr(Xr.OWNER):new po(g.name,g.options,d);Us("Invalid Firebase Database URL",j),Bt(j.path)||xt("Database URL must point to the root of a Firebase Database (not including a child path).");const Gt=function ol(g,d,h,y){let T=Eu[d.name];T||(T={},Eu[d.name]=T);let O=T[g.toURLString()];return O&&xt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),O=new pu(g,false,h,y),T[g.toURLString()]=O,O}(de,g,Vt,new jr(g.name,h));return new Qu(Gt,g)}class Qu{constructor(d,h){this._repoInternal=d,this.app=h,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Bu(g,d,h){if(g.stats_=Br(g.repoInfo_),g.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)g.server_=new Cs(g.repoInfo_,(y,T,O,j)=>{Td(g,y,T,O,j)},g.authTokenProvider_,g.appCheckProvider_),setTimeout(()=>gu(g,!0),0);else{if(typeof h<"u"&&null!==h){if("object"!=typeof h)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.i)(h)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}g.persistentConnection_=new Ao(g.repoInfo_,d,(y,T,O,j)=>{Td(g,y,T,O,j)},y=>{gu(g,y)},y=>{!function dh(g,d){Tn(d,(h,y)=>{Al(g,h,y)})}(g,y)},g.authTokenProvider_,g.appCheckProvider_,h),g.server_=g.persistentConnection_}g.authTokenProvider_.addTokenChangeListener(y=>{g.server_.refreshAuthToken(y)}),g.appCheckProvider_.addTokenChangeListener(y=>{g.server_.refreshAppCheckToken(y.token)}),g.statsReporter_=function bn(g,d){const h=g.toString();return Ar[h]||(Ar[h]=d()),Ar[h]}(g.repoInfo_,()=>new ur(g.stats_,g.server_)),g.infoData_=new Ko,g.infoSyncTree_=new wt({startListening:(y,T,O,j)=>{let de=[];const xe=g.infoData_.getNode(y._path);return xe.isEmpty()||(de=ci(g.infoSyncTree_,y._path,xe),setTimeout(()=>{j("ok")},0)),de},stopListening:()=>{}}),Al(g,"connected",!1),g.serverSyncTree_=new wt({startListening:(y,T,O,j)=>(g.server_.listen(y,O,T,(de,xe)=>{const Ze=j(de,xe);No(g.eventQueue_,y._path,Ze)}),[]),stopListening:(y,T)=>{g.server_.unlisten(y,T)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xi(this._repo,ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Bl(g,d){const h=Eu[d];(!h||h[g.key]!==g)&&xt(`Database ${d}(${g.repoInfo_}) has already been deleted.`),Rl(g),delete h[g.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(d){null===this._rootInternal&&xt("Cannot call "+d+" on a deleted database.")}}function nc(){X.IS_TRANSPORT_INITIALIZED&&ft("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ha(){nc(),pi.forceDisallow()}function xd(){nc(),Me.forceDisallow(),pi.forceAllow()}function lp(g,d){Lt(g,d)}const Tr={".sv":"timestamp"};class ic{constructor(d,h){this.committed=d,this.snapshot=h}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ao.prototype.simpleListen=function(g,d){this.sendRequest("q",{p:g},d)},Ao.prototype.echo=function(g,d){this.sendRequest("echo",{d:g},d)},function Wo(g){Wt(se.SDK_VERSION),(0,se._registerComponent)(new ae.Yl("database",(d,{instanceIdentifier:h})=>Wa(d.getProvider("app").getImmediate(),d.getProvider("auth-internal"),d.getProvider("app-check-internal"),h),"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Ce,"1.0.3",g),(0,se.registerVersion)(Ce,"1.0.3","esm2017")}();const js=new Le.YJ("@firebase/database-compat"),Yc=function(g){js.warn("FIREBASE WARNING: "+g)};class E{constructor(d){this._delegate=d}cancel(d){(0,L.Sz)("OnDisconnect.cancel",0,1,arguments.length),(0,L.J2)("OnDisconnect.cancel","onComplete",d,!0);const h=this._delegate.cancel();return d&&h.then(()=>d(null),y=>d(y)),h}remove(d){(0,L.Sz)("OnDisconnect.remove",0,1,arguments.length),(0,L.J2)("OnDisconnect.remove","onComplete",d,!0);const h=this._delegate.remove();return d&&h.then(()=>d(null),y=>d(y)),h}set(d,h){(0,L.Sz)("OnDisconnect.set",1,2,arguments.length),(0,L.J2)("OnDisconnect.set","onComplete",h,!0);const y=this._delegate.set(d);return h&&y.then(()=>h(null),T=>h(T)),y}setWithPriority(d,h,y){(0,L.Sz)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.J2)("OnDisconnect.setWithPriority","onComplete",y,!0);const T=this._delegate.setWithPriority(d,h);return y&&T.then(()=>y(null),O=>y(O)),T}update(d,h){if((0,L.Sz)("OnDisconnect.update",1,2,arguments.length),Array.isArray(d)){const T={};for(let O=0;O<d.length;++O)T[""+O]=d[O];d=T,Yc("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.J2)("OnDisconnect.update","onComplete",h,!0);const y=this._delegate.update(d);return h&&y.then(()=>h(null),T=>h(T)),y}}class m{constructor(d,h){this.committed=d,this.snapshot=h}toJSON(){return(0,L.Sz)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class _{constructor(d,h){this._database=d,this._delegate=h}val(){return(0,L.Sz)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Sz)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Sz)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Sz)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(d){return(0,L.Sz)("DataSnapshot.child",0,1,arguments.length),d=String(d),gs("DataSnapshot.child","path",d,!1),new _(this._database,this._delegate.child(d))}hasChild(d){return(0,L.Sz)("DataSnapshot.hasChild",1,1,arguments.length),gs("DataSnapshot.hasChild","path",d,!1),this._delegate.hasChild(d)}getPriority(){return(0,L.Sz)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(d){return(0,L.Sz)("DataSnapshot.forEach",1,1,arguments.length),(0,L.J2)("DataSnapshot.forEach","action",d,!1),this._delegate.forEach(h=>d(new _(this._database,h)))}hasChildren(){return(0,L.Sz)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Sz)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Sz)("DataSnapshot.ref",0,0,arguments.length),new W(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class D{constructor(d,h){this.database=d,this._delegate=h}on(d,h,y,T){var O;(0,L.Sz)("Query.on",2,4,arguments.length),(0,L.J2)("Query.on","callback",h,!1);const j=D.getCancelAndContextArgs_("Query.on",y,T),de=(Ze,Vt)=>{h.call(j.context,new _(this.database,Ze),Vt)};de.userCallback=h,de.context=j.context;const xe=null===(O=j.cancel)||void 0===O?void 0:O.bind(j.context);switch(d){case"value":return zu(this._delegate,de,xe),h;case"child_added":return la(this._delegate,de,xe),h;case"child_removed":return Tc(this._delegate,de,xe),h;case"child_changed":return Ku(this._delegate,de,xe),h;case"child_moved":return il(this._delegate,de,xe),h;default:throw new Error((0,L.iQ)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(d,h,y){if((0,L.Sz)("Query.off",0,3,arguments.length),function(g,d,h){if(void 0!==d)switch(d){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.iQ)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,d),(0,L.J2)("Query.off","callback",h,!0),(0,L.qc)("Query.off","context",y,!0),h){const T=()=>{};T.userCallback=h,T.context=y,hh(this._delegate,d,T)}else hh(this._delegate,d)}get(){return Hu(this._delegate).then(d=>new _(this.database,d))}once(d,h,y,T){(0,L.Sz)("Query.once",1,4,arguments.length),(0,L.J2)("Query.once","callback",h,!0);const O=D.getCancelAndContextArgs_("Query.once",y,T),j=new L.o9,de=(Ze,Vt)=>{const Gt=new _(this.database,Ze);h&&h.call(O.context,Gt,Vt),j.resolve(Gt)};de.userCallback=h,de.context=O.context;const xe=Ze=>{O.cancel&&O.cancel.call(O.context,Ze),j.reject(Ze)};switch(d){case"value":zu(this._delegate,de,xe,{onlyOnce:!0});break;case"child_added":la(this._delegate,de,xe,{onlyOnce:!0});break;case"child_removed":Tc(this._delegate,de,xe,{onlyOnce:!0});break;case"child_changed":Ku(this._delegate,de,xe,{onlyOnce:!0});break;case"child_moved":il(this._delegate,de,xe,{onlyOnce:!0});break;default:throw new Error((0,L.iQ)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return j.promise}limitToFirst(d){return(0,L.Sz)("Query.limitToFirst",1,1,arguments.length),new D(this.database,Ms(this._delegate,function qc(g){if("number"!=typeof g||Math.floor(g)!==g||g<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new gh(g)}(d)))}limitToLast(d){return(0,L.Sz)("Query.limitToLast",1,1,arguments.length),new D(this.database,Ms(this._delegate,function yu(g){if("number"!=typeof g||Math.floor(g)!==g||g<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Fl(g)}(d)))}orderByChild(d){return(0,L.Sz)("Query.orderByChild",1,1,arguments.length),new D(this.database,Ms(this._delegate,function Rd(g){if("$key"===g)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===g)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===g)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gs("orderByChild","path",g,!1),new Ga(g)}(d)))}orderByKey(){return(0,L.Sz)("Query.orderByKey",0,0,arguments.length),new D(this.database,Ms(this._delegate,function Md(){return new Vl}()))}orderByPriority(){return(0,L.Sz)("Query.orderByPriority",0,0,arguments.length),new D(this.database,Ms(this._delegate,function Iu(){return new mh}()))}orderByValue(){return(0,L.Sz)("Query.orderByValue",0,0,arguments.length),new D(this.database,Ms(this._delegate,function Pd(){return new _h}()))}startAt(d=null,h){return(0,L.Sz)("Query.startAt",0,2,arguments.length),new D(this.database,Ms(this._delegate,function Yu(g=null,d){return As("startAt","key",d,!0),new Ad(g,d)}(d,h)))}startAfter(d=null,h){return(0,L.Sz)("Query.startAfter",0,2,arguments.length),new D(this.database,Ms(this._delegate,function ph(g,d){return As("startAfter","key",d,!0),new nf(g,d)}(d,h)))}endAt(d=null,h){return(0,L.Sz)("Query.endAt",0,2,arguments.length),new D(this.database,Ms(this._delegate,function qu(g,d){return As("endAt","key",d,!0),new So(g,d)}(d,h)))}endBefore(d=null,h){return(0,L.Sz)("Query.endBefore",0,2,arguments.length),new D(this.database,Ms(this._delegate,function Ll(g,d){return As("endBefore","key",d,!0),new fh(g,d)}(d,h)))}equalTo(d,h){return(0,L.Sz)("Query.equalTo",1,2,arguments.length),new D(this.database,Ms(this._delegate,function tc(g,d){return As("equalTo","key",d,!0),new oo(g,d)}(d,h)))}toString(){return(0,L.Sz)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Sz)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(d){if((0,L.Sz)("Query.isEqual",1,1,arguments.length),!(d instanceof D))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(d._delegate)}static getCancelAndContextArgs_(d,h,y){const T={cancel:void 0,context:void 0};if(h&&y)T.cancel=h,(0,L.J2)(d,"cancel",T.cancel,!0),T.context=y,(0,L.qc)(d,"context",T.context,!0);else if(h)if("object"==typeof h&&null!==h)T.context=h;else{if("function"!=typeof h)throw new Error((0,L.iQ)(d,"cancelOrContext")+" must either be a cancel callback or a context object.");T.cancel=h}return T}get ref(){return new W(this.database,new xi(this._delegate._repo,this._delegate._path))}}class W extends D{constructor(d,h){super(d,new qo(h._repo,h._path,new cs,!1)),this.database=d,this._delegate=h}getKey(){return(0,L.Sz)("Reference.key",0,0,arguments.length),this._delegate.key}child(d){return(0,L.Sz)("Reference.child",1,1,arguments.length),"number"==typeof d&&(d=String(d)),new W(this.database,aa(this._delegate,d))}getParent(){(0,L.Sz)("Reference.parent",0,0,arguments.length);const d=this._delegate.parent;return d?new W(this.database,d):null}getRoot(){return(0,L.Sz)("Reference.root",0,0,arguments.length),new W(this.database,this._delegate.root)}set(d,h){(0,L.Sz)("Reference.set",1,2,arguments.length),(0,L.J2)("Reference.set","onComplete",h,!0);const y=Nl(this._delegate,d);return h&&y.then(()=>h(null),T=>h(T)),y}update(d,h){if((0,L.Sz)("Reference.update",1,2,arguments.length),Array.isArray(d)){const T={};for(let O=0;O<d.length;++O)T[""+O]=d[O];d=T,Yc("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xo("Reference.update",this._delegate._path),(0,L.J2)("Reference.update","onComplete",h,!0);const y=Ol(this._delegate,d);return h&&y.then(()=>h(null),T=>h(T)),y}setWithPriority(d,h,y){(0,L.Sz)("Reference.setWithPriority",2,3,arguments.length),(0,L.J2)("Reference.setWithPriority","onComplete",y,!0);const T=function tf(g,d,h){if(xo("setWithPriority",g._path),Ca("setWithPriority",d,g._path,!1),Ss("setWithPriority",h,!1),".length"===g.key||".keys"===g.key)throw"setWithPriority failed: "+g.key+" is a read-only object.";const y=new L.o9;return zi(g._repo,g._path,d,h,y.wrapCallback(()=>{})),y.promise}(this._delegate,d,h);return y&&T.then(()=>y(null),O=>y(O)),T}remove(d){(0,L.Sz)("Reference.remove",0,1,arguments.length),(0,L.J2)("Reference.remove","onComplete",d,!0);const h=function Gs(g){return xo("remove",g._path),Nl(g,null)}(this._delegate);return d&&h.then(()=>d(null),y=>d(y)),h}transaction(d,h,y){(0,L.Sz)("Reference.transaction",1,3,arguments.length),(0,L.J2)("Reference.transaction","transactionUpdate",d,!1),(0,L.J2)("Reference.transaction","onComplete",h,!0),function(g,d,h,y){if(void 0!==h&&"boolean"!=typeof h)throw new Error((0,L.iQ)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,y);const T=function Da(g,d,h){var y;if(g=(0,L.Yj)(g),xo("Reference.transaction",g._path),".length"===g.key||".keys"===g.key)throw"Reference.transaction failed: "+g.key+" is a read-only object.";const T=null===(y=null==h?void 0:h.applyLocally)||void 0===y||y,O=new L.o9,de=zu(g,()=>{});return function Zl(g,d,h,y,T,O){oa(g,"transaction on "+d);const j={path:d,update:h,onComplete:y,status:null,order:Je(),applyLocally:O,retryCount:0,unwatcher:T,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},de=mu(g,d,void 0);j.currentInputSnapshot=de;const xe=j.update(de.val());if(void 0===xe)j.unwatcher(),j.currentOutputSnapshotRaw=null,j.currentOutputSnapshotResolved=null,j.onComplete&&j.onComplete(null,!1,j.currentInputSnapshot);else{Vs("transaction failed: Data returned ",xe,j.path),j.status=0;const Ze=hu(g.transactionQueueTree_,d),Vt=es(Ze)||[];let Gt;Vt.push(j),Vu(Ze,Vt),"object"==typeof xe&&null!==xe&&(0,L.Y7)(xe,".priority")?(Gt=(0,L.o5)(xe,".priority"),(0,L.Uc)(_c(Gt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Gt=(jo(g.serverSyncTree_,d)||dr.EMPTY_NODE).getPriority().val();const Zt=Sl(g),Fn=Ri(xe,Gt),lr=mc(Fn,de,Zt);j.currentOutputSnapshotRaw=Fn,j.currentOutputSnapshotResolved=lr,j.currentWriteId=Oo(g);const Oi=Ln(g.serverSyncTree_,d,lr,j.currentWriteId,j.applyLocally);No(g.eventQueue_,d,Oi),Ec(g,g.transactionQueueTree_)}}(g._repo,g._path,d,(xe,Ze,Vt)=>{let Gt=null;xe?O.reject(xe):(Gt=new $s(Vt,new xi(g._repo,g._path),mi),O.resolve(new ic(Ze,Gt)))},de,T),O.promise}(this._delegate,d,{applyLocally:y}).then(O=>new m(O.committed,new _(this.database,O.snapshot)));return h&&T.then(O=>h(null,O.committed,O.snapshot),O=>h(O,!1,null)),T}setPriority(d,h){(0,L.Sz)("Reference.setPriority",1,2,arguments.length),(0,L.J2)("Reference.setPriority","onComplete",h,!0);const y=function Kc(g,d){g=(0,L.Yj)(g),xo("setPriority",g._path),Ss("setPriority",d,!1);const h=new L.o9;return zi(g._repo,Ae(g._path,".priority"),d,null,h.wrapCallback(()=>{})),h.promise}(this._delegate,d);return h&&y.then(()=>h(null),T=>h(T)),y}push(d,h){(0,L.Sz)("Reference.push",0,2,arguments.length),(0,L.J2)("Reference.push","onComplete",h,!0);const y=function $a(g,d){g=(0,L.Yj)(g),xo("push",g._path),Ca("push",d,g._path,!0);const h=Uc(g._repo),y=Wc(h),T=aa(g,y),O=aa(g,y);let j;return j=null!=d?Nl(O,d).then(()=>O):Promise.resolve(O),T.then=j.then.bind(j),T.catch=j.then.bind(j,void 0),T}(this._delegate,d),T=y.then(j=>new W(this.database,j));h&&T.then(()=>h(null),j=>h(j));const O=new W(this.database,y);return O.then=T.then.bind(T),O.catch=T.catch.bind(T,void 0),O}onDisconnect(){return xo("Reference.onDisconnect",this._delegate._path),new E(new _u(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ie{constructor(d,h){this._delegate=d,this.app=h,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ha,forceLongPolling:xd}}useEmulator(d,h,y={}){!function wu(g,d,h,y={}){(g=(0,L.Yj)(g))._checkNotDeleted("useEmulator"),g._instanceStarted&&xt("Cannot call useEmulator() after instance has already been initialized.");const T=g._repoInternal;let O;if(T.repoInfo_.nodeAdmin)y.mockUserToken&&xt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),O=new Xr(Xr.OWNER);else if(y.mockUserToken){const j="string"==typeof y.mockUserToken?y.mockUserToken:(0,L.YD)(y.mockUserToken,g.app.options.projectId);O=new Xr(j)}!function ms(g,d,h,y){g.repoInfo_=new ut(`${d}:${h}`,!1,g.repoInfo_.namespace,g.repoInfo_.webSocketOnly,g.repoInfo_.nodeAdmin,g.repoInfo_.persistenceKey,g.repoInfo_.includeNamespaceInQueryParams,!0),y&&(g.authTokenProvider_=y)}(T,d,h,O)}(this._delegate,d,h,y)}ref(d){if((0,L.Sz)("database.ref",0,1,arguments.length),d instanceof W){const h=ec(this._delegate,d.toString());return new W(this,h)}{const h=zc(this._delegate,d);return new W(this,h)}}refFromURL(d){(0,L.Sz)("database.refFromURL",1,1,arguments.length);const y=ec(this._delegate,d);return new W(this,y)}goOffline(){return(0,L.Sz)("database.goOffline",0,0,arguments.length),function Nd(g){(g=(0,L.Yj)(g))._checkNotDeleted("goOffline"),Rl(g._repo)}(this._delegate)}goOnline(){return(0,L.Sz)("database.goOnline",0,0,arguments.length),function rf(g){(g=(0,L.Yj)(g))._checkNotDeleted("goOnline"),function Ic(g){g.persistentConnection_&&g.persistentConnection_.resume(nl)}(g._repo)}(this._delegate)}}ie.ServerValue={TIMESTAMP:function rc(){return Tr}(),increment:g=>function Xu(g){return{".sv":{increment:g}}}(g)};var Dt=Object.freeze({__proto__:null,initStandalone:function rt({app:g,url:d,version:h,customAuthImpl:y,customAppCheckImpl:T,namespace:O,nodeAdmin:j=!1}){Wt(h);const de=new ae.op("database-standalone"),xe=new ae.C_("auth-internal",de);let Ze;return xe.setComponent(new ae.Yl("auth-internal",()=>y,"PRIVATE")),T&&(Ze=new ae.C_("app-check-internal",de),Ze.setComponent(new ae.Yl("app-check-internal",()=>T,"PRIVATE"))),{instance:new ie(Wa(g,xe,Ze,d,j),g),namespace:O}}});const en=ie.ServerValue;!function On(g){g.INTERNAL.registerComponent(new ae.Yl("database-compat",(d,{instanceIdentifier:h})=>{const y=d.getProvider("app-compat").getImmediate(),T=d.getProvider("database").getImmediate({identifier:h});return new ie(T,y)},"PUBLIC").setServiceProps({Reference:W,Query:D,Database:ie,DataSnapshot:_,enableLogging:lp,INTERNAL:Dt,ServerValue:en}).setMultipleInstances(!0)),g.registerVersion("@firebase/database-compat","1.0.3")}(at.c);var Un=N(9252);function Hn(g,d,h="on",y=$e.M){return new pt._(T=>{let O=null;return O=g[h](d,(j,de)=>{y.schedule(()=>{T.next({snapshot:j,prevKey:de})}),"once"===h&&y.schedule(()=>T.complete())},j=>{y.schedule(()=>T.error(j))}),"on"===h?{unsubscribe(){null!=O&&g.off(d,O)}}:{unsubscribe(){}}}).pipe((0,ge.k)(T=>{const{snapshot:O,prevKey:j}=T;let de=null;return O.exists()&&(de=O.key),{type:d,payload:O,prevKey:j,key:de}}),(0,_e.o)())}function Ta(g){return null==g}function sl(g){return"function"==typeof g.set}function Do(g,d){return sl(d)?d:g.ref(d)}function Rc(g,d){if(function _o(g){return"string"==typeof g}(g))return d.stringCase();if(sl(g))return d.firebaseCase();if(function Ni(g){return"function"==typeof g.exportVal}(g))return d.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof g)}function ca(g){return(Ta(g)||0===g.length)&&(g=["child_added","child_removed","child_changed","child_moved"]),g}function Mc(g,d,h){const y=(d=ca(d)).map(T=>Hn(g,T,"on",h));return(0,ve.U)(...y)}function ed(g,d){return function(y,T){return Rc(y,{stringCase:()=>g.child(y)[d](T),firebaseCase:()=>y[d](T),snapshotCase:()=>y.ref[d](T)})}}function Ld(g){return function(h){return h?Rc(h,{stringCase:()=>g.child(h).remove(),firebaseCase:()=>h.remove(),snapshotCase:()=>h.ref.remove()}):g.remove()}}function bu(g,d){const h=g.length;for(let y=0;y<h;y++)if(g[y].payload.key===d)return y;return-1}function af(g,d){var h;const{payload:y,prevKey:T,key:O}=d,j=bu(g,O),de=function td(g,d){if(Ta(d))return 0;{const h=bu(g,d);return-1===h?g.length:h+1}}(g,T);switch(d.type){case"value":if(null!==(h=d.payload)&&void 0!==h&&h.exists()){let xe=null;d.payload.forEach(Ze=>{const Vt={payload:Ze,type:"value",prevKey:xe,key:Ze.key};return xe=Ze.key,g=[...g,Vt],!1})}return g;case"child_added":if(j>-1){const xe=g[j-1];((null==xe?void 0:xe.key)||null)!==T&&(g=g.filter(Ze=>Ze.payload.key!==y.key)).splice(de,0,d)}else{if(null==T)return[d,...g];(g=g.slice()).splice(de,0,d)}return g;case"child_removed":return g.filter(xe=>xe.payload.key!==y.key);case"child_changed":return g.map(xe=>xe.payload.key===O?d:xe);case"child_moved":if(j>-1){const xe=g.splice(j,1)[0];return(g=g.slice()).splice(de,0,xe),g}return g;default:return g}}function cp(g,d,h){return function Tu(g,d,h){return Hn(g,"value","once",h).pipe((0,Ge.G)(y=>{const T=[(0,Xe.of)(y)];return d.forEach(O=>T.push(Hn(g,O,"on",h))),(0,ve.U)(...T).pipe((0,je.K)(af,[]))}),(0,Ve.a)())}(g,d=ca(d),h)}function Fd(g,d){return function(){return Hn(g,"value","on",d)}}const hp=new K.UbH("angularfire2.realtimeDatabaseURL"),fp=new K.UbH("angularfire2.database.use-emulator");let pp=(()=>{var g;class d{constructor(y,T,O,j,de,xe,Ze,Vt,Gt,Zt,Fn,lr,Oi,ns,al){(0,l.c)(this,"schedulers",void 0),(0,l.c)(this,"database",void 0),this.schedulers=xe;const $l=Ze,oc=(0,ee._G)(y,de,T);Vt&&(0,Ne.CU)(oc,de,Gt,Fn,lr,Oi,Zt,ns),this.database=(0,ee.PQ)(`${oc.name}.database.${O}`,"AngularFireDatabase",oc.name,()=>{const Vd=de.runOutsideAngular(()=>oc.database(O||void 0));return $l&&Vd.useEmulator(...$l),Vd},[$l])}list(y,T){const O=this.schedulers.ngZone.runOutsideAngular(()=>Do(this.database,y));let j=O;return T&&(j=T(O)),function up(g,d){const h=d.schedulers.outsideAngular,y=d.schedulers.ngZone.run(()=>g.ref);return{query:g,update:ed(y,"update"),set:ed(y,"set"),push:T=>y.push(T),remove:Ld(y),snapshotChanges:T=>cp(g,T,h).pipe(Z.wH),stateChanges:T=>Mc(g,T,h).pipe(Z.wH),auditTrail:T=>function kd(g,d,h){return function Qc(g,d,h){return function Du(g,d){return Hn(g,"value","on",d).pipe((0,ge.k)(h=>{let y;return h.payload.forEach(T=>(y=T.key,!1)),{data:h,lastKeyToLoad:y}}))}(g,h).pipe(function Oe(...g){const d=(0,We.yu)(g);return(0,Qe.i)((h,y)=>{const T=g.length,O=new Array(T);let j=g.map(()=>!1),de=!1;for(let xe=0;xe<T;xe++)(0,Ee.Uv)(g[xe]).subscribe((0,be.e)(y,Ze=>{O[xe]=Ze,!de&&!j[xe]&&(j[xe]=!0,(de=j.every(Ke.Z))&&(j=null))},He.K));h.subscribe((0,be.e)(y,xe=>{if(de){const Ze=[xe,...O];y.next(d?d(...Ze):Ze)}}))})}(d),(0,ge.k)(([T,O])=>{const j=T.lastKeyToLoad,de=O.map(xe=>xe.key);return{actions:O,lastKeyToLoad:j,loadedKeys:de}}),function it(g){return(0,Qe.i)((d,h)=>{let y=!1,T=0;d.subscribe((0,be.e)(h,O=>(y||(y=!g(O,T++)))&&h.next(O)))})}(T=>-1===T.loadedKeys.indexOf(T.lastKeyToLoad)),(0,ge.k)(T=>T.actions))}(g,Mc(g,d).pipe((0,je.K)((T,O)=>[...T,O],[])),h)}(g,T,h).pipe(Z.wH),valueChanges:(T,O)=>cp(g,T,h).pipe((0,ge.k)(de=>de.map(xe=>O&&O.idField?{...xe.payload.val(),[O.idField]:xe.key}:xe.payload.val())),Z.wH)}}(j,this)}object(y){return function dp(g,d){return{query:g,snapshotChanges:()=>Fd(g,d.schedulers.outsideAngular)().pipe(Z.wH),update:h=>g.ref.update(h),set:h=>g.ref.set(h),remove:()=>g.ref.remove(),valueChanges:()=>Fd(g,d.schedulers.outsideAngular)().pipe(Z.wH,(0,ge.k)(y=>y.payload.exists()?y.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Do(this.database,y)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return g=d,(0,l.c)(d,"\u0275fac",function(y){return new(y||g)(K.CoB(ee.E9),K.CoB(ee.Ml,8),K.CoB(hp,8),K.CoB(K.AHE),K.CoB(K.WW2),K.CoB(Z.u),K.CoB(fp,8),K.CoB(Ne._o,8),K.CoB(Ne.GW,8),K.CoB(Ne.mq,8),K.CoB(Ne.ox,8),K.CoB(Ne.cd,8),K.CoB(Ne._8,8),K.CoB(Ne.Ev,8),K.CoB(Z.gJ,8))}),(0,l.c)(d,"\u0275prov",K.wxM({token:g,factory:g.\u0275fac,providedIn:"any"})),d})(),Q_=(()=>{var g;class d{constructor(){Un.c.registerVersion("angularfire",Z.j1.full,"rtdb-compat")}}return g=d,(0,l.c)(d,"\u0275fac",function(y){return new(y||g)}),(0,l.c)(d,"\u0275mod",K.a4G({type:g})),(0,l.c)(d,"\u0275inj",K.s3X({providers:[pp]})),d})()},4319:(mn,st,N)=>{"use strict";N.d(st,{i4:()=>jE});var l=N(4580),K=N(1368),Z=N(4496),ee=N(7900),Ne=N(6e3),ge=N(7260),_e=N(112),je=N(3252),Qe=N(9900),be=N(2700),Ee=N(5568),Ke=N(5448),He=N(7773);function We(){return(0,Ke.i)((i,e)=>{let r,s=!1;i.subscribe((0,He.e)(e,c=>{const f=r;r=c,s&&e.next([f,c]),s=!0}))})}var L,Oe=N(4704),it=N(208),Ge=N(4e3),Ve=N(6684),pt=(N(864),N(8368)),ve=N(1528),Xe=N(9360),et=N(4920),at=N(5976),ae=N(7144),te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},se={},Le=Le||{},Ce=te||self;function Ye(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function It(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var un="closure_uid_"+(1e9*Math.random()>>>0),nt=0;function me(i,e,r){return i.call.apply(i.bind,arguments)}function he(i,e,r){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function ye(i,e,r){return(ye=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?me:he).apply(null,arguments)}function Fe(i,e){var r=Array.prototype.slice.call(arguments,1);return function(){var s=r.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Je(i,e){function r(){}r.prototype=e.prototype,i.$=e.prototype,i.prototype=new r,i.prototype.constructor=i,i.ac=function(s,c,f){for(var v=Array(arguments.length-2),x=2;x<arguments.length;x++)v[x-2]=arguments[x];return e.prototype[c].apply(s,v)}}function De(){this.s=this.s,this.o=this.o}De.prototype.s=!1,De.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Wt(i){Object.prototype.hasOwnProperty.call(i,un)&&i[un]||(i[un]=++nt)}(this)},De.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===e)return r;return-1};function dn(i){const e=i.length;if(0<e){const r=Array(e);for(let s=0;s<e;s++)r[s]=i[s];return r}return[]}function Lt(i,e){for(let r=1;r<arguments.length;r++){const s=arguments[r];if(Ye(s)){const c=i.length||0,f=s.length||0;i.length=c+f;for(let v=0;v<f;v++)i[c+v]=s[v]}else i.push(s)}}function an(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}an.prototype.h=function(){this.defaultPrevented=!0};var Qn=function(){if(!Ce.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const r=()=>{};Ce.addEventListener("test",r,e),Ce.removeEventListener("test",r,e)}catch{}return i}();function jn(i){return/^[\s\xa0]*$/.test(i)}function xt(){var i=Ce.navigator;return i&&(i=i.userAgent)?i:""}function ft(i){return-1!=xt().indexOf(i)}function Tt(i){return Tt[" "](i),i}Tt[" "]=function(){};var Cr,i,vn=ft("Opera"),Ft=ft("Trident")||ft("MSIE"),Qt=ft("Edge"),Sn=Qt||Ft,xn=ft("Gecko")&&!(-1!=xt().toLowerCase().indexOf("webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),br=-1!=xt().toLowerCase().indexOf("webkit")&&!ft("Edge");function mr(){var i=Ce.document;return i?i.documentMode:void 0}e:{var Tn="",Wn=(i=xt(),xn?/rv:([^\);]+)(\)|;)/.exec(i):Qt?/Edge\/([\d\.]+)/.exec(i):Ft?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):br?/WebKit\/(\S+)/.exec(i):vn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Wn&&(Tn=Wn?Wn[1]:""),Ft){var Sr=mr();if(null!=Sr&&Sr>parseFloat(Tn)){Cr=String(Sr);break e}}Cr=Tn}var Et=Ce.document&&Ft&&(mr()||parseInt(Cr,10))||void 0;function Xt(i,e){if(an.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(xn){e:{try{Tt(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==r?e=i.fromElement:"mouseout"==r&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Yt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Xt.$.h.call(this)}}Je(Xt,an);var Yt={2:"touch",3:"pen",4:"mouse"};Xt.prototype.h=function(){Xt.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var bt="closure_listenable_"+(1e6*Math.random()|0),yn=0;function hn(i,e,r,s,c){this.listener=i,this.proxy=null,this.src=e,this.type=r,this.capture=!!s,this.la=c,this.key=++yn,this.fa=this.ia=!1}function nr(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function jr(i,e,r){for(const s in i)e.call(r,i[s],s,i)}function Xr(i){const e={};for(const r in i)e[r]=i[r];return e}const Rr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Li(i,e){let r,s;for(let c=1;c<arguments.length;c++){for(r in s=arguments[c],s)i[r]=s[r];for(let f=0;f<Rr.length;f++)r=Rr[f],Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}}function Yi(i){this.src=i,this.g={},this.h=0}function St(i,e){var r=e.type;if(r in i.g){var f,s=i.g[r],c=Jt(s,e);(f=0<=c)&&Array.prototype.splice.call(s,c,1),f&&(nr(e),0==i.g[r].length&&(delete i.g[r],i.h--))}}function dt(i,e,r,s){for(var c=0;c<i.length;++c){var f=i[c];if(!f.fa&&f.listener==e&&f.capture==!!r&&f.la==s)return c}return-1}Yi.prototype.add=function(i,e,r,s,c){var f=i.toString();(i=this.g[f])||(i=this.g[f]=[],this.h++);var v=dt(i,e,s,c);return-1<v?(e=i[v],r||(e.ia=!1)):((e=new hn(e,this.src,f,!!s,c)).ia=r,i.push(e)),e};var Rt="closure_lm_"+(1e6*Math.random()|0),lt={};function ue(i,e,r,s,c){if(s&&s.once)return tt(i,e,r,s,c);if(Array.isArray(e)){for(var f=0;f<e.length;f++)ue(i,e[f],r,s,c);return null}return r=Br(r),i&&i[bt]?i.O(e,r,It(s)?!!s.capture:!!s,c):Ie(i,e,r,!1,s,c)}function Ie(i,e,r,s,c,f){if(!e)throw Error("Invalid event type");var v=It(c)?!!c.capture:!!c,x=Nr(i);if(x||(i[Rt]=x=new Yi(i)),(r=x.add(e,r,s,v,f)).proxy)return r;if(s=function Ue(){const e=qn;return function i(r){return e.call(i.src,i.listener,r)}}(),r.proxy=s,s.src=i,s.listener=r,i.addEventListener)Qn||(c=v),void 0===c&&(c=!1),i.addEventListener(e.toString(),s,c);else if(i.attachEvent)i.attachEvent($n(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return r}function tt(i,e,r,s,c){if(Array.isArray(e)){for(var f=0;f<e.length;f++)tt(i,e[f],r,s,c);return null}return r=Br(r),i&&i[bt]?i.P(e,r,It(s)?!!s.capture:!!s,c):Ie(i,e,r,!0,s,c)}function ut(i,e,r,s,c){if(Array.isArray(e))for(var f=0;f<e.length;f++)ut(i,e[f],r,s,c);else s=It(s)?!!s.capture:!!s,r=Br(r),i&&i[bt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(r=dt(f=i.g[e],r,s,c))&&(nr(f[r]),Array.prototype.splice.call(f,r,1),0==f.length&&(delete i.g[e],i.h--))):i&&(i=Nr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=dt(e,r,s,c)),(r=-1<i?e[i]:null)&&pn(r))}function pn(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[bt])St(e.i,i);else{var r=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(r,s,i.capture):e.detachEvent?e.detachEvent($n(r),s):e.addListener&&e.removeListener&&e.removeListener(s),(r=Nr(e))?(St(r,i),0==r.h&&(r.src=null,e[Rt]=null)):nr(i)}}}function $n(i){return i in lt?lt[i]:lt[i]="on"+i}function qn(i,e){if(i.fa)i=!0;else{e=new Xt(e,this);var r=i.listener,s=i.la||i.src;i.ia&&pn(i),i=r.call(s,e)}return i}function Nr(i){return(i=i[Rt])instanceof Yi?i:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function Br(i){return"function"==typeof i?i:(i[Ar]||(i[Ar]=function(e){return i.handleEvent(e)}),i[Ar])}function bn(){De.call(this),this.i=new Yi(this),this.S=this,this.J=null}function Mr(i,e){var r,s=i.J;if(s)for(r=[];s;s=s.J)r.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new an(e,i);else if(e instanceof an)e.target=e.target||i;else{var c=e;Li(e=new an(s,i),c)}if(c=!0,r)for(var f=r.length-1;0<=f;f--){var v=e.g=r[f];c=so(v,s,!0,e)&&c}if(c=so(v=e.g=i,s,!0,e)&&c,c=so(v,s,!1,e)&&c,r)for(f=0;f<r.length;f++)c=so(v=e.g=r[f],s,!1,e)&&c}function so(i,e,r,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,f=0;f<e.length;++f){var v=e[f];if(v&&!v.fa&&v.capture==r){var x=v.listener,k=v.la||v.src;v.ia&&St(i.i,v),c=!1!==x.call(k,s)&&c}}return c&&!s.defaultPrevented}Je(bn,De),bn.prototype[bt]=!0,bn.prototype.removeEventListener=function(i,e,r,s){ut(this,i,e,r,s)},bn.prototype.N=function(){if(bn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var r=i.g[e],s=0;s<r.length;s++)nr(r[s]);delete i.g[e],i.h--}}this.J=null},bn.prototype.O=function(i,e,r,s){return this.i.add(String(i),e,!1,r,s)},bn.prototype.P=function(i,e,r,s){return this.i.add(String(i),e,!0,r,s)};var Or=Ce.JSON.stringify;function yt(){var i=Vr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ht=new class hr{constructor(e,r){this.i=e,this.j=r,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Mn,i=>i.reset());class Mn{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Xn(i){var e=1;i=i.split(":");const r=[];for(;0<e&&i.length;)r.push(i.shift()),e--;return i.length&&r.push(i.join(":")),r}function Kn(i){Ce.setTimeout(()=>{throw i},0)}let Zn,$r=!1,Vr=new class vt{constructor(){this.h=this.g=null}add(e,r){const s=Ht.get();s.set(e,r),this.h?this.h.next=s:this.g=s,this.h=s}},Gr=()=>{const i=Ce.Promise.resolve(void 0);Zn=()=>{i.then(go)}};var go=()=>{for(var i;i=yt();){try{i.h.call(i.g)}catch(r){Kn(r)}var e=Ht;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}$r=!1};function ao(i,e){bn.call(this),this.h=i||1,this.g=e||Ce,this.j=ye(this.qb,this),this.l=Date.now()}function Hr(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function lo(i,e,r){if("function"==typeof i)r&&(i=ye(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=ye(i.handleEvent,i)}return 2147483647<Number(e)?-1:Ce.setTimeout(i,e||0)}function pi(i){i.g=lo(()=>{i.g=null,i.i&&(i.i=!1,pi(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Je(ao,bn),(L=ao.prototype).ga=!1,L.T=null,L.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Mr(this,"tick"),this.ga&&(Hr(this),this.start()))}},L.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},L.N=function(){ao.$.N.call(this),Hr(this),delete this.g};class Kr extends De{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pi(this)}N(){super.N(),this.g&&(Ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(i){De.call(this),this.h=i,this.g={}}Je(Ir,De);var qr=[];function Pe(i,e,r,s){Array.isArray(r)||(r&&(qr[0]=r.toString()),r=qr);for(var c=0;c<r.length;c++){var f=ue(e,r[c],s||i.handleEvent,!1,i.h||i);if(!f)break;i.g[f.key]=f}}function Me(i){jr(i.g,function(e,r){this.g.hasOwnProperty(r)&&pn(e)},i),i.g={}}function X(){this.g=!0}function jt(i,e,r,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function An(i,e){if(!i.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var s=r[i];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var f=c[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var v=1;v<c.length;v++)c[v]=""}}}return Or(r)}catch{return e}}(i,r)+(s?" "+s:"")})}Ir.prototype.N=function(){Ir.$.N.call(this),Me(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},X.prototype.Ea=function(){this.g=!1},X.prototype.info=function(){};var Gn={},Jn=null;function gi(){return Jn=Jn||new bn}function Ct(i){an.call(this,Gn.Ta,i)}function Y(i){const e=gi();Mr(e,new Ct(e))}function ne(i,e){an.call(this,Gn.STAT_EVENT,i),this.stat=e}function qe(i){const e=gi();Mr(e,new ne(e,i))}function ct(i,e){an.call(this,Gn.Ua,i),this.size=e}function _t(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Ce.setTimeout(function(){i()},e)}Gn.Ta="serverreachability",Je(Ct,an),Gn.STAT_EVENT="statevent",Je(ne,an),Gn.Ua="timingevent",Je(ct,an);var Pt={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Kt={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function gn(){}function Nt(){}gn.prototype.h=null;var En,on={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qt(){an.call(this,"d")}function ln(){an.call(this,"c")}function kr(){}function tr(i,e,r,s){this.l=i,this.j=e,this.m=r,this.W=s||1,this.U=new Ir(this),this.P=fe,this.V=new ao(i=Sn?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new A}function A(){this.i=null,this.g="",this.h=!1}Je(qt,an),Je(ln,an),Je(kr,gn),kr.prototype.g=function(){return new XMLHttpRequest},kr.prototype.i=function(){return{}},En=new kr;var fe=45e3,F={},le={};function Ae(i,e,r){i.L=1,i.A=Ro($i(e)),i.u=r,i.S=!0,Bt(i,null)}function Bt(i,e){i.G=Date.now(),Zr(i),i.B=$i(i.A);var r=i.B,s=i.W;Array.isArray(s)||(s=[String(s)]),Is(r.i,"t",s),i.o=0,r=i.l.J,i.h=new A,i.g=ya(i.l,r?e:null,!i.u),0<i.O&&(i.M=new Kr(ye(i.Pa,i,i.g),i.O)),Pe(i.U,i.g,"readystatechange",i.nb),e=i.I?Xr(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),Y(),function Te(i,e,r,s,c,f){i.info(function(){if(i.g)if(f)for(var v="",x=f.split("&"),k=0;k<x.length;k++){var q=x[k].split("=");if(1<q.length){var oe=q[0];q=q[1];var ke=oe.split("_");v=2<=ke.length&&"type"==ke[1]?v+(oe+"=")+q+"&":v+(oe+"=redacted&")}}else v=null;else v=f;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+r+"\n"+v})}(i.j,i.v,i.B,i.m,i.W,i.u)}function rr(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function Si(i,e,r){let c,s=!0;for(;!i.J&&i.o<r.length;){if(c=ii(i,r),c==le){4==e&&(i.s=4,qe(14),s=!1),jt(i.j,i.m,null,"[Incomplete Response]");break}if(c==F){i.s=4,qe(15),jt(i.j,i.m,r,"[Invalid Chunk]"),s=!1;break}jt(i.j,i.m,c,null),Yn(i,c)}rr(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=r.length||i.h.h||(i.s=1,qe(16),s=!1),i.i=i.i&&s,s?0<r.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),Xa(e),e.M=!0,qe(11))):(jt(i.j,i.m,r,"[Invalid Chunked Response]"),co(i),Fi(i))}function ii(i,e){var r=i.o,s=e.indexOf("\n",r);return-1==s?le:(r=Number(e.substring(r,s)),isNaN(r)?F:(s+=1)+r>e.length?le:(e=e.slice(s,s+r),i.o=s+r,e))}function Zr(i){i.Y=Date.now()+i.P,Yo(i,i.P)}function Yo(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=_t(ye(i.lb,i),e)}function oi(i){i.C&&(Ce.clearTimeout(i.C),i.C=null)}function Fi(i){0==i.l.H||i.J||Vo(i.l,i)}function co(i){oi(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Hr(i.V),Me(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Yn(i,e){try{var r=i.l;if(0!=r.H&&(r.g==i||Aa(r.i,i)))if(!i.K&&Aa(r.i,i)&&3==r.H){try{var s=r.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0]){e:if(!r.u){if(r.g){if(!(r.g.G+3e3<i.G))break e;ur(r),Cs(r)}Qa(r),qe(18)}}else r.Fa=c[1],0<r.Fa-r.V&&37500>c[2]&&r.G&&0==r.A&&!r.v&&(r.v=_t(ye(r.ib,r),6e3));if(1>=mi(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else va(r,11)}else if((i.K||r.g==i)&&ur(r),!jn(e))for(c=r.Ja.g.parse(e),e=0;e<c.length;e++){let q=c[e];if(r.V=q[0],q=q[1],2==r.H)if("c"==q[0]){r.K=q[1],r.pa=q[2];const oe=q[3];null!=oe&&(r.ra=oe,r.l.info("VER="+r.ra));const ke=q[4];null!=ke&&(r.Ga=ke,r.l.info("SVER="+r.Ga));const ht=q[5];null!=ht&&"number"==typeof ht&&0<ht&&(r.L=s=1.5*ht,r.l.info("backChannelRequestTimeoutMs_="+s)),s=r;const Mt=i.g;if(Mt){const wn=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wn){var f=s.i;f.g||-1==wn.indexOf("spdy")&&-1==wn.indexOf("quic")&&-1==wn.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Es(f,f.h),f.h=null))}if(s.F){const Bn=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Bn&&(s.Da=Bn,Lr(s.I,s.F,Bn))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-i.G,r.l.info("Handshake RTT: "+r.S+"ms"));var v=i;if((s=r).wa=Kl(s,s.J?s.pa:null,s.Y),v.K){Hl(s.i,v);var x=v,k=s.L;k&&x.setTimeout(k),x.C&&(oi(x),Zr(x)),s.g=v}else _a(s);0<r.j.length&&Zo(r)}else"stop"!=q[0]&&"close"!=q[0]||va(r,7);else 3==r.H&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?va(r,7):xa(r):"noop"!=q[0]&&r.h&&r.h.Aa(q),r.A=0)}Y()}catch{}}function zs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ye(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var r=function vs(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Ye(i)||"string"==typeof i){var e=[];i=i.length;for(var r=0;r<i;r++)e.push(r);return e}e=[],r=0;for(const s in i)e[r++]=s;return e}}}(i),s=function is(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Ye(i)){for(var e=[],r=i.length,s=0;s<r;s++)e.push(i[s]);return e}for(s in e=[],r=0,i)e[r++]=i[s];return e}(i),c=s.length,f=0;f<c;f++)e.call(void 0,s[f],r&&r[f],i)}(L=tr.prototype).setTimeout=function(i){this.P=i},L.nb=function(i){i=i.target;const e=this.M;e&&3==Fo(i)?e.l():this.Pa(i)},L.Pa=function(i){try{if(i==this.g)e:{const oe=Fo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>oe)&&(3!=oe||Sn||this.g&&(this.h.h||this.g.ja()||Io(this.g)))){this.J||4!=oe||7==e||Y(),oi(this);var r=this.g.da();this.ca=r;t:if(rr(this)){var s=Io(this.g);i="";var c=s.length,f=4==Fo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){co(this),Fi(this);var v="";break t}this.h.i=new Ce.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:f&&e==c-1});s.length=0,this.h.g+=i,this.o=0,v=this.h.g}else v=this.g.ja();if(this.i=200==r,function gt(i,e,r,s,c,f,v){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+r+"\n"+f+" "+v})}(this.j,this.v,this.B,this.m,this.W,oe,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var x,k=this.g;if((x=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jn(x)){var q=x;break t}}q=null}if(!(r=q)){this.i=!1,this.s=3,qe(12),co(this),Fi(this);break e}jt(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yn(this,r)}this.S?(Si(this,oe,v),Sn&&this.i&&3==oe&&(Pe(this.U,this.V,"tick",this.mb),this.V.start())):(jt(this.j,this.m,v,null),Yn(this,v)),4==oe&&co(this),this.i&&!this.J&&(4==oe?Vo(this.l,this):(this.i=!1,Zr(this)))}else(function cc(i){const e={};i=(i.g&&2<=Fo(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(jn(i[s]))continue;var r=Xn(i[s]);const c=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();const f=e[c]||[];e[c]=f,f.push(r)}!function po(i,e){for(const r in i)e.call(void 0,i[r],r,i)}(e,function(s){return s.join(", ")})})(this.g),400==r&&0<v.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),co(this),Fi(this)}}}catch{}},L.mb=function(){if(this.g){var i=Fo(this.g),e=this.g.ja();this.o<e.length&&(oi(this),Si(this,i,e),this.i&&4!=i&&Zr(this))}},L.cancel=function(){this.J=!0,co(this)},L.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function Dn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Y(),qe(17)),co(this),this.s=2,Fi(this)):Yo(this,this.Y-i)};var yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vo(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof vo){this.h=i.h,Qi(this,i.j),this.s=i.s,this.g=i.g,Ao(this,i.m),this.l=i.l;var e=i.i,r=new Ai;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),_r(this,r),this.o=i.o}else i&&(e=String(i).match(yi))?(this.h=!1,Qi(this,e[1]||"",!0),this.s=cr(e[2]||""),this.g=cr(e[3]||"",!0),Ao(this,e[4]),this.l=cr(e[5]||"",!0),_r(this,e[6]||"",!0),this.o=cr(e[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}function $i(i){return new vo(i)}function Qi(i,e,r){i.j=r?cr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ao(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function _r(i,e,r){e instanceof Ai?(i.i=e,function to(i,e){e&&!i.j&&(Vi(i),i.i=null,i.g.forEach(function(r,s){var c=s.toLowerCase();s!=c&&(ga(this,s),Is(this,c,r))},i)),i.j=e}(i.i,i.h)):(r||(e=yo(e,uo)),i.i=new Ai(e,i.h))}function Lr(i,e,r){i.i.set(e,r)}function Ro(i){return Lr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function cr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function yo(i,e,r){return"string"==typeof i?(i=encodeURI(i).replace(e,Qo),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Qo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}vo.prototype.toString=function(){var i=[],e=this.j;e&&i.push(yo(e,Ii,!0),":");var r=this.g;return(r||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(yo(e,Ii,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&i.push("/"),i.push(yo(r,"/"==r.charAt(0)?eo:pa,!0))),(r=this.i.toString())&&i.push("?",r),(r=this.o)&&i.push("#",yo(r,os)),i.join("")};var Ii=/[#\/\?@]/g,pa=/[#\?:]/g,eo=/[#\?]/g,uo=/[#\?@]/g,os=/#/g;function Ai(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Vi(i){i.g||(i.g=new Map,i.h=0,i.i&&function ys(i,e){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var s=i[r].indexOf("="),c=null;if(0<=s){var f=i[r].substring(0,s);c=i[r].substring(s+1)}else f=i[r];e(f,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,r){i.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function ga(i,e){Vi(i),e=Ei(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Lo(i,e){return Vi(i),e=Ei(i,e),i.g.has(e)}function Is(i,e,r){ga(i,e),0<r.length&&(i.i=null,i.g.set(Ei(i,e),dn(r)),i.h+=r.length)}function Ei(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(L=Ai.prototype).add=function(i,e){Vi(this),this.i=null,i=Ei(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(e),this.h+=1,this},L.forEach=function(i,e){Vi(this),this.g.forEach(function(r,s){r.forEach(function(c){i.call(e,c,s,this)},this)},this)},L.ta=function(){Vi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let s=0;s<e.length;s++){const c=i[s];for(let f=0;f<c.length;f++)r.push(e[s])}return r},L.Z=function(i){Vi(this);let e=[];if("string"==typeof i)Lo(this,i)&&(e=e.concat(this.g.get(Ei(this,i))));else{i=Array.from(this.g.values());for(let r=0;r<i.length;r++)e=e.concat(i[r])}return e},L.set=function(i,e){return Vi(this),this.i=null,Lo(this,i=Ei(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},L.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},L.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var s=e[r];const f=encodeURIComponent(String(s)),v=this.Z(s);for(s=0;s<v.length;s++){var c=f;""!==v[s]&&(c+="="+encodeURIComponent(String(v[s]))),i.push(c)}}return this.i=i.join("&")};var Ls=class{constructor(i,e){this.g=i,this.map=e}};function ss(i){this.l=i||hl,i=Ce.PerformanceNavigationTiming?0<(i=Ce.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Ce.g&&Ce.g.Ka&&Ce.g.Ka()&&Ce.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hl=10;function fl(i){return!!i.h||!!i.g&&i.g.size>=i.j}function mi(i){return i.h?1:i.g?i.g.size:0}function Aa(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Es(i,e){i.g?i.g.add(e):i.h=e}function Hl(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ra(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const r of i.g.values())e=e.concat(r.F);return e}return dn(i.i)}ss.prototype.cancel=function(){if(this.i=Ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var as=class{stringify(i){return Ce.JSON.stringify(i,void 0)}parse(i){return Ce.JSON.parse(i,void 0)}};function Xo(){this.g=new as}function Ma(i,e,r){const s=r||"";try{zs(i,function(c,f){let v=c;It(c)&&(v=Or(c)),e.push(s+f+"="+encodeURIComponent(v))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function ma(i,e,r,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch{}}function ls(i){this.l=i.ec||null,this.j=i.ob||!1}function qa(i,e){bn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Ri,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Je(ls,gn),ls.prototype.g=function(){return new qa(this.l,this.j)},ls.prototype.i=function(i){return function(){return i}}({}),Je(qa,bn);var Ri=0;function pl(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Pa(i){i.readyState=4,i.l=null,i.j=null,i.A=null,z(i)}function z(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(L=qa.prototype).open=function(i,e){if(this.readyState!=Ri)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,z(this)},L.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Ce).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},L.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pa(this)),this.readyState=Ri},L.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,z(this)),this.g&&(this.readyState=3,z(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ce.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pl(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},L.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Pa(this):z(this),3==this.readyState&&pl(this)}},L.Za=function(i){this.g&&(this.response=this.responseText=i,Pa(this))},L.Ya=function(i){this.g&&(this.response=i,Pa(this))},L.ka=function(){this.g&&Pa(this)},L.setRequestHeader=function(i,e){this.v.append(i,e)},L.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},L.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var r=e.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=e.next();return i.join("\r\n")},Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var V=Ce.JSON.parse;function ce(i){bn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=H,this.L=this.M=!1}Je(ce,bn);var H="",Se=/^https?$/i,_n=["POST","PUT"];function _i(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,zo(i),Fr(i)}function zo(i){i.F||(i.F=!0,Mr(i,"complete"),Mr(i,"error"))}function cs(i){if(i.h&&typeof Le<"u"&&(!i.C[1]||4!=Fo(i)||2!=i.da()))if(i.v&&4==Fo(i))lo(i.La,0,i);else if(Mr(i,"readystatechange"),4==Fo(i)){i.h=!1;try{const v=i.da();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var s;if(s=0===v){var c=String(i.I).match(yi)[1]||null;!c&&Ce.self&&Ce.self.location&&(c=Ce.self.location.protocol.slice(0,-1)),s=!Se.test(c?c.toLowerCase():"")}r=s}if(r)Mr(i,"complete"),Mr(i,"success");else{i.m=6;try{var f=2<Fo(i)?i.g.statusText:""}catch{f=""}i.j=f+" ["+i.da()+"]",zo(i)}}finally{Fr(i)}}}function Fr(i,e){if(i.g){Ks(i);const r=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Mr(i,"ready");try{r.onreadystatechange=s}catch{}}}function Ks(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Ce.clearTimeout(i.A),i.A=null)}function Fo(i){return i.g?i.g.readyState:0}function Io(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case H:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(i){let e="";return jr(i,function(r,s){e+=s,e+=":",e+=r,e+="\r\n"}),e}function Ys(i,e,r){e:{for(s in r){var s=!1;break e}s=!0}s||(r=qs(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):Lr(i,e,r))}function Xi(i,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||e}function Qs(i){this.Ga=0,this.j=[],this.l=new X,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xi("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xi("baseRetryDelayMs",5e3,i),this.hb=Xi("retryDelaySeedMs",1e4,i),this.eb=Xi("forwardChannelMaxRetries",2,i),this.xa=Xi("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new ss(i&&i.concurrentRequestLimit),this.Ja=new Xo,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function xa(i){if(Ko(i),3==i.H){var e=i.W++,r=$i(i.I);if(Lr(r,"SID",i.K),Lr(r,"RID",e),Lr(r,"TYPE","terminate"),Jo(i,r),(e=new tr(i,i.l,e)).L=2,e.A=Ro($i(r)),r=!1,Ce.navigator&&Ce.navigator.sendBeacon)try{r=Ce.navigator.sendBeacon(e.A.toString(),"")}catch{}!r&&Ce.Image&&((new Image).src=e.A,r=!0),r||(e.g=ya(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Zr(e)}ml(i)}function Cs(i){i.g&&(Xa(i),i.g.cancel(),i.g=null)}function Ko(i){Cs(i),i.u&&(Ce.clearTimeout(i.u),i.u=null),ur(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Ce.clearTimeout(i.m),i.m=null)}function Zo(i){if(!fl(i.i)&&!i.m){i.m=!0;var e=i.Na;Zn||Gr(),$r||(Zn(),$r=!0),Vr.add(e,i),i.C=0}}function Ya(i,e){var r;r=e?e.m:i.W++;const s=$i(i.I);Lr(s,"SID",i.K),Lr(s,"RID",r),Lr(s,"AID",i.V),Jo(i,s),i.o&&i.s&&Ys(s,i.o,i.s),r=new tr(i,i.l,r,i.C+1),null===i.o&&(r.I=i.s),e&&(i.j=e.F.concat(i.j)),e=gl(i,r,1e3),r.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Es(i.i,r),Ae(r,s,e)}function Jo(i,e){i.na&&jr(i.na,function(r,s){Lr(e,s,r)}),i.h&&zs({},function(r,s){Lr(e,s,r)})}function gl(i,e,r){r=Math.min(i.j.length,r);var s=i.h?ye(i.h.Va,i.h,i):null;e:{var c=i.j;let f=-1;for(;;){const v=["count="+r];-1==f?0<r?(f=c[0].g,v.push("ofs="+f)):f=0:v.push("ofs="+f);let x=!0;for(let k=0;k<r;k++){let q=c[k].g;const oe=c[k].map;if(q-=f,0>q)f=Math.max(0,c[k].g-100),x=!1;else try{Ma(oe,v,"req"+q+"_")}catch{s&&s(oe)}}if(x){s=v.join("&");break e}}}return i=i.j.splice(0,r),e.F=i,s}function _a(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Zn||Gr(),$r||(Zn(),$r=!0),Vr.add(e,i),i.A=0}}function Qa(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=_t(ye(i.Ma,i),zl(i,i.A)),i.A++,0))}function Xa(i){null!=i.B&&(Ce.clearTimeout(i.B),i.B=null)}function Xs(i){i.g=new tr(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=$i(i.wa);Lr(e,"RID","rpc"),Lr(e,"SID",i.K),Lr(e,"AID",i.V),Lr(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Lr(e,"TO",i.qa),Lr(e,"TYPE","xmlhttp"),Jo(i,e),i.o&&i.s&&Ys(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var r=i.g;i=i.pa,r.L=1,r.A=Ro($i(e)),r.u=null,r.S=!0,Bt(r,i)}function ur(i){null!=i.v&&(Ce.clearTimeout(i.v),i.v=null)}function Vo(i,e){var r=null;if(i.g==e){ur(i),Xa(i),i.g=null;var s=2}else{if(!Aa(i.i,e))return;r=e.F,Hl(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){r=e.u?e.u.length:0,e=Date.now()-e.G;var c=i.C;Mr(s=gi(),new ct(s,r)),Zo(i)}else _a(i);else if(3==(c=e.s)||0==c&&0<e.ca||!(1==s&&function Fs(i,e){return!(mi(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=_t(ye(i.Na,i,e),zl(i,i.C)),i.C++,0)))}(i,e)||2==s&&Qa(i)))switch(r&&0<r.length&&(e=i.i,e.i=e.i.concat(r)),c){case 1:va(i,5);break;case 4:va(i,10);break;case 3:va(i,6);break;default:va(i,2)}}function zl(i,e){let r=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(r*=2),r*e}function va(i,e){if(i.l.info("Error code "+e),2==e){var r=null;i.h&&(r=null);var s=ye(i.pb,i);r||(r=new vo("//www.google.com/images/cleardot.gif"),Ce.location&&"http"==Ce.location.protocol||Qi(r,"https"),Ro(r)),function dr(i,e){const r=new X;if(Ce.Image){const s=new Image;s.onload=Fe(ma,r,s,"TestLoadImage: loaded",!0,e),s.onerror=Fe(ma,r,s,"TestLoadImage: error",!1,e),s.onabort=Fe(ma,r,s,"TestLoadImage: abort",!1,e),s.ontimeout=Fe(ma,r,s,"TestLoadImage: timeout",!1,e),Ce.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(r.toString(),s)}else qe(2);i.H=0,i.h&&i.h.za(e),ml(i),Ko(i)}function ml(i){if(i.H=0,i.ma=[],i.h){const e=Ra(i.i);(0!=e.length||0!=i.j.length)&&(Lt(i.ma,e),Lt(i.ma,i.j),i.i.i.length=0,dn(i.j),i.j.length=0),i.h.ya()}}function Kl(i,e,r){var s=r instanceof vo?$i(r):new vo(r);if(""!=s.g)e&&(s.g=e+"."+s.g),Ao(s,s.m);else{var c=Ce.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var f=new vo(null);s&&Qi(f,s),e&&(f.g=e),c&&Ao(f,c),r&&(f.l=r),s=f}return e=i.Da,(r=i.F)&&e&&Lr(s,r,e),Lr(s,"VER",i.ra),Jo(i,s),s}function ya(i,e,r){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ce(i.Ha&&!i.va?new ls({ob:r}):i.va)).Oa(i.J),e}function fs(){}function Ia(){if(Ft&&!(10<=Number(Et)))throw Error("Environmental error: no available transport.")}function no(i,e){bn.call(this),this.g=new Qs(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!jn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ws(this)}function uc(i){qt.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const r in e){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function su(){ln.call(this),this.status=1}function ws(i){this.g=i}function vr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Na(i,e,r){r||(r=0);var s=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)s[c]=e.charCodeAt(r++)|e.charCodeAt(r++)<<8|e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<24;else for(c=0;16>c;++c)s[c]=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;var f=i.g[3],v=(e=i.g[0])+(f^(r=i.g[1])&((c=i.g[2])^f))+s[0]+3614090360&4294967295;v=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=(r=(c=(f=(e=r+(v<<7&4294967295|v>>>25))+((v=f+(c^e&(r^c))+s[1]+3905402710&4294967295)<<12&4294967295|v>>>20))+((v=c+(r^f&(e^r))+s[2]+606105819&4294967295)<<17&4294967295|v>>>15))+((v=r+(e^c&(f^e))+s[3]+3250441966&4294967295)<<22&4294967295|v>>>10))+((v=e+(f^r&(c^f))+s[4]+4118548399&4294967295)<<7&4294967295|v>>>25))+((v=f+(c^e&(r^c))+s[5]+1200080426&4294967295)<<12&4294967295|v>>>20))+((v=c+(r^f&(e^r))+s[6]+2821735955&4294967295)<<17&4294967295|v>>>15))+((v=r+(e^c&(f^e))+s[7]+4249261313&4294967295)<<22&4294967295|v>>>10))+((v=e+(f^r&(c^f))+s[8]+1770035416&4294967295)<<7&4294967295|v>>>25))+((v=f+(c^e&(r^c))+s[9]+2336552879&4294967295)<<12&4294967295|v>>>20))+((v=c+(r^f&(e^r))+s[10]+4294925233&4294967295)<<17&4294967295|v>>>15))+((v=r+(e^c&(f^e))+s[11]+2304563134&4294967295)<<22&4294967295|v>>>10))+((v=e+(f^r&(c^f))+s[12]+1804603682&4294967295)<<7&4294967295|v>>>25))+((v=f+(c^e&(r^c))+s[13]+4254626195&4294967295)<<12&4294967295|v>>>20))+((v=c+(r^f&(e^r))+s[14]+2792965006&4294967295)<<17&4294967295|v>>>15))+((v=r+(e^c&(f^e))+s[15]+1236535329&4294967295)<<22&4294967295|v>>>10))+((v=e+(c^f&(r^c))+s[1]+4129170786&4294967295)<<5&4294967295|v>>>27))+((v=f+(r^c&(e^r))+s[6]+3225465664&4294967295)<<9&4294967295|v>>>23))+((v=c+(e^r&(f^e))+s[11]+643717713&4294967295)<<14&4294967295|v>>>18))+((v=r+(f^e&(c^f))+s[0]+3921069994&4294967295)<<20&4294967295|v>>>12))+((v=e+(c^f&(r^c))+s[5]+3593408605&4294967295)<<5&4294967295|v>>>27))+((v=f+(r^c&(e^r))+s[10]+38016083&4294967295)<<9&4294967295|v>>>23))+((v=c+(e^r&(f^e))+s[15]+3634488961&4294967295)<<14&4294967295|v>>>18))+((v=r+(f^e&(c^f))+s[4]+3889429448&4294967295)<<20&4294967295|v>>>12))+((v=e+(c^f&(r^c))+s[9]+568446438&4294967295)<<5&4294967295|v>>>27))+((v=f+(r^c&(e^r))+s[14]+3275163606&4294967295)<<9&4294967295|v>>>23))+((v=c+(e^r&(f^e))+s[3]+4107603335&4294967295)<<14&4294967295|v>>>18))+((v=r+(f^e&(c^f))+s[8]+1163531501&4294967295)<<20&4294967295|v>>>12))+((v=e+(c^f&(r^c))+s[13]+2850285829&4294967295)<<5&4294967295|v>>>27))+((v=f+(r^c&(e^r))+s[2]+4243563512&4294967295)<<9&4294967295|v>>>23))+((v=c+(e^r&(f^e))+s[7]+1735328473&4294967295)<<14&4294967295|v>>>18))+((v=r+(f^e&(c^f))+s[12]+2368359562&4294967295)<<20&4294967295|v>>>12))+((v=e+(r^c^f)+s[5]+4294588738&4294967295)<<4&4294967295|v>>>28))+((v=f+(e^r^c)+s[8]+2272392833&4294967295)<<11&4294967295|v>>>21))+((v=c+(f^e^r)+s[11]+1839030562&4294967295)<<16&4294967295|v>>>16))+((v=r+(c^f^e)+s[14]+4259657740&4294967295)<<23&4294967295|v>>>9))+((v=e+(r^c^f)+s[1]+2763975236&4294967295)<<4&4294967295|v>>>28))+((v=f+(e^r^c)+s[4]+1272893353&4294967295)<<11&4294967295|v>>>21))+((v=c+(f^e^r)+s[7]+4139469664&4294967295)<<16&4294967295|v>>>16))+((v=r+(c^f^e)+s[10]+3200236656&4294967295)<<23&4294967295|v>>>9))+((v=e+(r^c^f)+s[13]+681279174&4294967295)<<4&4294967295|v>>>28))+((v=f+(e^r^c)+s[0]+3936430074&4294967295)<<11&4294967295|v>>>21))+((v=c+(f^e^r)+s[3]+3572445317&4294967295)<<16&4294967295|v>>>16))+((v=r+(c^f^e)+s[6]+76029189&4294967295)<<23&4294967295|v>>>9))+((v=e+(r^c^f)+s[9]+3654602809&4294967295)<<4&4294967295|v>>>28))+((v=f+(e^r^c)+s[12]+3873151461&4294967295)<<11&4294967295|v>>>21))+((v=c+(f^e^r)+s[15]+530742520&4294967295)<<16&4294967295|v>>>16))+((v=r+(c^f^e)+s[2]+3299628645&4294967295)<<23&4294967295|v>>>9))+((v=e+(c^(r|~f))+s[0]+4096336452&4294967295)<<6&4294967295|v>>>26))+((v=f+(r^(e|~c))+s[7]+1126891415&4294967295)<<10&4294967295|v>>>22))+((v=c+(e^(f|~r))+s[14]+2878612391&4294967295)<<15&4294967295|v>>>17))+((v=r+(f^(c|~e))+s[5]+4237533241&4294967295)<<21&4294967295|v>>>11))+((v=e+(c^(r|~f))+s[12]+1700485571&4294967295)<<6&4294967295|v>>>26))+((v=f+(r^(e|~c))+s[3]+2399980690&4294967295)<<10&4294967295|v>>>22))+((v=c+(e^(f|~r))+s[10]+4293915773&4294967295)<<15&4294967295|v>>>17))+((v=r+(f^(c|~e))+s[1]+2240044497&4294967295)<<21&4294967295|v>>>11))+((v=e+(c^(r|~f))+s[8]+1873313359&4294967295)<<6&4294967295|v>>>26))+((v=f+(r^(e|~c))+s[15]+4264355552&4294967295)<<10&4294967295|v>>>22))+((v=c+(e^(f|~r))+s[6]+2734768916&4294967295)<<15&4294967295|v>>>17))+((v=r+(f^(c|~e))+s[13]+1309151649&4294967295)<<21&4294967295|v>>>11))+((f=(e=r+((v=e+(c^(r|~f))+s[4]+4149444226&4294967295)<<6&4294967295|v>>>26))+((v=f+(r^(e|~c))+s[11]+3174756917&4294967295)<<10&4294967295|v>>>22))^((c=f+((v=c+(e^(f|~r))+s[2]+718787259&4294967295)<<15&4294967295|v>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(c+(v<<21&4294967295|v>>>11))&4294967295,i.g[2]=i.g[2]+c&4294967295,i.g[3]=i.g[3]+f&4294967295}function zr(i,e){this.h=e;for(var r=[],s=!0,c=i.length-1;0<=c;c--){var f=0|i[c];s&&f==e||(r[c]=f,s=!1)}this.g=r}(L=ce.prototype).Oa=function(i){this.M=i},L.ha=function(i,e,r,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():En.g(),this.C=function tn(i){return i.h||(i.h=i.i())}(this.u?this.u:En),this.g.onreadystatechange=ye(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(f){return void _i(this,f)}if(i=r||"",r=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)r.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const f of s.keys())r.set(f,s.get(f))}s=Array.from(r.keys()).find(f=>"content-type"==f.toLowerCase()),c=Ce.FormData&&i instanceof Ce.FormData,!(0<=Jt(_n,e))||s||c||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,v]of r)this.g.setRequestHeader(f,v);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ks(this),0<this.B&&((this.L=function Pn(i){return Ft&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ye(this.ua,this)):this.A=lo(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(f){_i(this,f)}},L.ua=function(){typeof Le<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mr(this,"timeout"),this.abort(8))},L.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Mr(this,"complete"),Mr(this,"abort"),Fr(this))},L.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fr(this,!0)),ce.$.N.call(this)},L.La=function(){this.s||(this.G||this.v||this.l?cs(this):this.kb())},L.kb=function(){cs(this)},L.isActive=function(){return!!this.g},L.da=function(){try{return 2<Fo(this)?this.g.status:-1}catch{return-1}},L.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},L.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),V(e)}},L.Ia=function(){return this.m},L.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(L=Qs.prototype).ra=8,L.H=1,L.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const c=new tr(this,this.l,i);let f=this.s;if(this.U&&(f?(f=Xr(f),Li(f,this.U)):f=this.U),null!==this.o||this.O||(c.I=f,f=null),this.P)e:{for(var e=0,r=0;r<this.j.length;r++){var s=this.j[r];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=r;break e}if(4096===e||r===this.j.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=gl(this,c,e),Lr(r=$i(this.I),"RID",i),Lr(r,"CVER",22),this.F&&Lr(r,"X-HTTP-Session-Id",this.F),Jo(this,r),f&&(this.O?e="headers="+encodeURIComponent(String(qs(f)))+"&"+e:this.o&&Ys(r,this.o,f)),Es(this.i,c),this.bb&&Lr(r,"TYPE","init"),this.P?(Lr(r,"$req",e),Lr(r,"SID","null"),c.aa=!0,Ae(c,r,null)):Ae(c,r,e),this.H=2}}else 3==this.H&&(i?Ya(this,i):0==this.j.length||fl(this.i)||Ya(this))},L.Ma=function(){if(this.u=null,Xs(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=_t(ye(this.jb,this),i)}},L.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qe(10),Cs(this),Xs(this))},L.ib=function(){null!=this.v&&(this.v=null,Cs(this),Qa(this),qe(19))},L.pb=function(i){i?(this.l.info("Successfully pinged google.com"),qe(2)):(this.l.info("Failed to ping google.com"),qe(1))},L.isActive=function(){return!!this.h&&this.h.isActive(this)},(L=fs.prototype).Ba=function(){},L.Aa=function(){},L.za=function(){},L.ya=function(){},L.isActive=function(){return!0},L.Va=function(){},Ia.prototype.g=function(i,e){return new no(i,e)},Je(no,bn),no.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,r=this.h||void 0;qe(0),i.Y=e,i.na=r||{},i.G=i.aa,i.I=Kl(i,null,i.Y),Zo(i)},no.prototype.close=function(){xa(this.g)},no.prototype.u=function(i){var e=this.g;if("string"==typeof i){var r={};r.__data__=i,i=r}else this.v&&((r={}).__data__=Or(i),i=r);e.j.push(new Ls(e.fb++,i)),3==e.H&&Zo(e)},no.prototype.N=function(){this.g.h=null,delete this.j,xa(this.g),delete this.g,no.$.N.call(this)},Je(uc,qt),Je(su,ln),Je(ws,fs),ws.prototype.Ba=function(){Mr(this.g,"a")},ws.prototype.Aa=function(i){Mr(this.g,new uc(i))},ws.prototype.za=function(i){Mr(this.g,new su)},ws.prototype.ya=function(){Mr(this.g,"b")},Je(vr,function zt(){this.blockSize=-1}),vr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vr.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var r=e-this.blockSize,s=this.m,c=this.h,f=0;f<e;){if(0==c)for(;f<=r;)Na(this,i,f),f+=this.blockSize;if("string"==typeof i){for(;f<e;)if(s[c++]=i.charCodeAt(f++),c==this.blockSize){Na(this,s),c=0;break}}else for(;f<e;)if(s[c++]=i[f++],c==this.blockSize){Na(this,s),c=0;break}}this.h=c,this.i+=e},vr.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var r=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&r,r/=256;for(this.j(i),i=Array(16),e=r=0;4>e;++e)for(var s=0;32>s;s+=8)i[r++]=this.g[e]>>>s&255;return i};var Ci={};function Ea(i){return-128<=i&&128>i?function kt(i,e){var r=Ci;return Object.prototype.hasOwnProperty.call(r,i)?r[i]:r[i]=e(i)}(i,function(e){return new zr([0|e],0>e?-1:0)}):new zr([0|i],0>i?-1:0)}function Eo(i){if(isNaN(i)||!isFinite(i))return si;if(0>i)return vi(Eo(-i));for(var e=[],r=1,s=0;i>=r;s++)e[s]=i/r|0,r*=_l;return new zr(e,0)}var _l=4294967296,si=Ea(0),Mo=Ea(1),Ds=Ea(16777216);function us(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Ui(i){return-1==i.h}function vi(i){for(var e=i.g.length,r=[],s=0;s<e;s++)r[s]=~i.g[s];return new zr(r,~i.h).add(Mo)}function ds(i,e){return i.add(vi(e))}function Bo(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function b(i,e){this.g=i,this.h=e}function G(i,e){if(us(e))throw Error("division by zero");if(us(i))return new b(si,si);if(Ui(i))return e=G(vi(i),e),new b(vi(e.g),vi(e.h));if(Ui(e))return e=G(i,vi(e)),new b(vi(e.g),e.h);if(30<i.g.length){if(Ui(i)||Ui(e))throw Error("slowDivide_ only works with positive integers.");for(var r=Mo,s=e;0>=s.X(i);)r=Re(r),s=Re(s);var c=$(r,1),f=$(s,1);for(s=$(s,2),r=$(r,2);!us(s);){var v=f.add(s);0>=v.X(i)&&(c=c.add(r),f=v),s=$(s,1),r=$(r,1)}return e=ds(i,c.R(e)),new b(c,e)}for(c=si;0<=i.X(e);){for(r=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(r)/Math.LN2))?1:Math.pow(2,s-48),v=(f=Eo(r)).R(e);Ui(v)||0<v.X(i);)v=(f=Eo(r-=s)).R(e);us(f)&&(f=Mo),c=c.add(f),i=ds(i,v)}return new b(c,i)}function Re(i){for(var e=i.g.length+1,r=[],s=0;s<e;s++)r[s]=i.D(s)<<1|i.D(s-1)>>>31;return new zr(r,i.h)}function $(i,e){var r=e>>5;e%=32;for(var s=i.g.length-r,c=[],f=0;f<s;f++)c[f]=0<e?i.D(f+r)>>>e|i.D(f+r+1)<<32-e:i.D(f+r);return new zr(c,i.h)}(L=zr.prototype).ea=function(){if(Ui(this))return-vi(this).ea();for(var i=0,e=1,r=0;r<this.g.length;r++){var s=this.D(r);i+=(0<=s?s:_l+s)*e,e*=_l}return i},L.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(us(this))return"0";if(Ui(this))return"-"+vi(this).toString(i);for(var e=Eo(Math.pow(i,6)),r=this,s="";;){var c=G(r,e).g,f=((0<(r=ds(r,c.R(e))).g.length?r.g[0]:r.h)>>>0).toString(i);if(us(r=c))return f+s;for(;6>f.length;)f="0"+f;s=f+s}},L.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},L.X=function(i){return Ui(i=ds(this,i))?-1:us(i)?0:1},L.abs=function(){return Ui(this)?vi(this):this},L.add=function(i){for(var e=Math.max(this.g.length,i.g.length),r=[],s=0,c=0;c<=e;c++){var f=s+(65535&this.D(c))+(65535&i.D(c)),v=(f>>>16)+(this.D(c)>>>16)+(i.D(c)>>>16);s=v>>>16,r[c]=(v&=65535)<<16|(f&=65535)}return new zr(r,-2147483648&r[r.length-1]?-1:0)},L.R=function(i){if(us(this)||us(i))return si;if(Ui(this))return Ui(i)?vi(this).R(vi(i)):vi(vi(this).R(i));if(Ui(i))return vi(this.R(vi(i)));if(0>this.X(Ds)&&0>i.X(Ds))return Eo(this.ea()*i.ea());for(var e=this.g.length+i.g.length,r=[],s=0;s<2*e;s++)r[s]=0;for(s=0;s<this.g.length;s++)for(var c=0;c<i.g.length;c++){var f=this.D(s)>>>16,v=65535&this.D(s),x=i.D(c)>>>16,k=65535&i.D(c);r[2*s+2*c]+=v*k,Bo(r,2*s+2*c),r[2*s+2*c+1]+=f*k,Bo(r,2*s+2*c+1),r[2*s+2*c+1]+=v*x,Bo(r,2*s+2*c+1),r[2*s+2*c+2]+=f*x,Bo(r,2*s+2*c+2)}for(s=0;s<e;s++)r[s]=r[2*s+1]<<16|r[2*s];for(s=e;s<2*e;s++)r[s]=0;return new zr(r,0)},L.gb=function(i){return G(this,i).h},L.and=function(i){for(var e=Math.max(this.g.length,i.g.length),r=[],s=0;s<e;s++)r[s]=this.D(s)&i.D(s);return new zr(r,this.h&i.h)},L.or=function(i){for(var e=Math.max(this.g.length,i.g.length),r=[],s=0;s<e;s++)r[s]=this.D(s)|i.D(s);return new zr(r,this.h|i.h)},L.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),r=[],s=0;s<e;s++)r[s]=this.D(s)^i.D(s);return new zr(r,this.h^i.h)},Ia.prototype.createWebChannel=Ia.prototype.g,no.prototype.send=no.prototype.u,no.prototype.open=no.prototype.m,no.prototype.close=no.prototype.close,Pt.NO_ERROR=0,Pt.TIMEOUT=8,Pt.HTTP_ERROR=6,Kt.COMPLETE="complete",Nt.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",bn.prototype.listen=bn.prototype.O,ce.prototype.listenOnce=ce.prototype.P,ce.prototype.getLastError=ce.prototype.Sa,ce.prototype.getLastErrorCode=ce.prototype.Ia,ce.prototype.getStatus=ce.prototype.da,ce.prototype.getResponseJson=ce.prototype.Wa,ce.prototype.getResponseText=ce.prototype.ja,ce.prototype.send=ce.prototype.ha,ce.prototype.setWithCredentials=ce.prototype.Oa,vr.prototype.digest=vr.prototype.l,vr.prototype.reset=vr.prototype.reset,vr.prototype.update=vr.prototype.j,zr.prototype.add=zr.prototype.add,zr.prototype.multiply=zr.prototype.R,zr.prototype.modulo=zr.prototype.gb,zr.prototype.compare=zr.prototype.X,zr.prototype.toNumber=zr.prototype.ea,zr.prototype.toString=zr.prototype.toString,zr.prototype.getBits=zr.prototype.D,zr.fromNumber=Eo,zr.fromString=function Uo(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return vi(Uo(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Eo(Math.pow(e,8)),s=si,c=0;c<i.length;c+=8){var f=Math.min(8,i.length-c),v=parseInt(i.substring(c,c+f),e);8>f?(f=Eo(Math.pow(e,f)),s=s.R(f).add(Eo(v))):s=(s=s.R(r)).add(Eo(v))}return s};var pe=se.createWebChannelTransport=function(){return new Ia},ze=se.getStatEventTarget=function(){return gi()},Ut=se.ErrorCode=Pt,In=se.EventType=Kt,Pr=se.Event=Gn,Yr=se.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Er=(se.FetchXmlHttpFactory=ls,se.WebChannel=Nt),ai=se.XhrIo=ce,hi=se.Md5=vr,Zi=se.Integer=zr;const Zs="@firebase/firestore";class Mi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mi.UNAUTHENTICATED=new Mi(null),Mi.GOOGLE_CREDENTIALS=new Mi("google-credentials-uid"),Mi.FIRST_PARTY=new Mi("first-party-uid"),Mi.MOCK_USER=new Mi("mock-user");let ho="10.8.0";const wi=new at.YJ("@firebase/firestore");function mo(){return wi.logLevel}function sn(i,...e){if(wi.logLevel<=at.Ge.DEBUG){const r=e.map(au);wi.debug(`Firestore (${ho}): ${i}`,...r)}}function Gi(i,...e){if(wi.logLevel<=at.Ge.ERROR){const r=e.map(au);wi.error(`Firestore (${ho}): ${i}`,...r)}}function $o(i,...e){if(wi.logLevel<=at.Ge.WARN){const r=e.map(au);wi.warn(`Firestore (${ho}): ${i}`,...r)}}function au(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function zn(i="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+i;throw Gi(e),new Error(e)}function er(i,e){i||zn()}function Rn(i,e){return i}const Ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rn extends ae.kx{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ei{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class kc{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ah{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Mi.UNAUTHENTICATED))}shutdown(){}}class Ts{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class dc{constructor(e){this.t=e,this.currentUser=Mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;let c=this.i;const f=q=>this.i!==c?(c=this.i,r(q)):Promise.resolve();let v=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new ei,e.enqueueRetryable(()=>f(this.currentUser))};const x=()=>{const q=v;e.enqueueRetryable((0,ve.c)(function*(){yield q.promise,yield f(s.currentUser)}))},k=q=>{sn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(q=>k(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?k(q):(sn("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new ei)}},0),x()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(sn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(er("string"==typeof s.accessToken),new kc(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return er(null===e||"string"==typeof e),new Mi(e)}}class lu{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=Mi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Js{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new lu(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Za{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ea{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const s=f=>{null!=f.error&&sn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const v=f.token!==this.R;return this.R=f.token,sn("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?r(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>s(f))};const c=f=>{sn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?c(f):sn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(er("string"==typeof r.token),this.R=r.token,new Za(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function xu(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}class Ja{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const c=xu(40);for(let f=0;f<c.length;++f)s.length<20&&c[f]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c[f]%62))}return s}}function or(i,e){return i<e?-1:i>e?1:0}function ji(i,e,r){return i.length===e.length&&i.every((s,c)=>r(s,e[c]))}function ql(i){return i+"\0"}class ro{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new rn(Ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new rn(Ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new rn(Ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rn(Ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ro.fromMillis(Date.now())}static fromDate(e){return ro.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new ro(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?or(this.nanoseconds,e.nanoseconds):or(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ir{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ir(e)}static min(){return new ir(new ro(0,0))}static max(){return new ir(new ro(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yl{constructor(e,r,s){void 0===r?r=0:r>e.length&&zn(),void 0===s?s=e.length-r:s>e.length-r&&zn(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===yl.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof yl?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let c=0;c<s;c++){const f=e.get(c),v=r.get(c);if(f<v)return-1;if(f>v)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ti extends yl{construct(e,r,s){return new ti(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new rn(Ot.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(c=>c.length>0))}return new ti(r)}static emptyPath(){return new ti([])}}const Il=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wi extends yl{construct(e,r,s){return new Wi(e,r,s)}static isValidIdentifier(e){return Il.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wi(["__name__"])}static fromServerFormat(e){const r=[];let s="",c=0;const f=()=>{if(0===s.length)throw new rn(Ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let v=!1;for(;c<e.length;){const x=e[c];if("\\"===x){if(c+1===e.length)throw new rn(Ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const k=e[c+1];if("\\"!==k&&"."!==k&&"`"!==k)throw new rn(Ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=k,c+=2}else"`"===x?(v=!v,c++):"."!==x||v?(s+=x,c++):(f(),c++)}if(f(),v)throw new rn(Ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wi(r)}static emptyPath(){return new Wi([])}}class Nn{constructor(e){this.path=e}static fromPath(e){return new Nn(ti.fromString(e))}static fromName(e){return new Nn(ti.fromString(e).popFirst(5))}static empty(){return new Nn(ti.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ti.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return ti.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nn(new ti(e.slice()))}}class ta{constructor(e,r,s,c){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=c}}function El(i){return i.fields.find(e=>2===e.kind)}function hs(i){return i.fields.filter(e=>2!==e.kind)}ta.UNKNOWN_ID=-1;class el{constructor(e,r){this.fieldPath=e,this.kind=r}}class Di{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Di(0,Go.min())}}function Nu(i,e){const r=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,c=ir.fromTimestamp(1e9===s?new ro(r+1,0):new ro(r,s));return new Go(c,Nn.empty(),e)}function Yl(i){return new Go(i.readTime,i.key,-1)}class Go{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new Go(ir.min(),Nn.empty(),-1)}static max(){return new Go(ir.max(),Nn.empty(),-1)}}function cu(i,e){let r=i.readTime.compareTo(e.readTime);return 0!==r?r:(r=Nn.comparator(i.documentKey,e.documentKey),0!==r?r:or(i.largestBatchId,e.largestBatchId))}const Ou="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ku{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function w(i){return P.apply(this,arguments)}function P(){return P=(0,ve.c)(function*(i){if(i.code!==Ot.FAILED_PRECONDITION||i.message!==Ou)throw i;sn("LocalStore","Unexpectedly lost primary lease")}),P.apply(this,arguments)}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&zn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new M((s,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,c)},this.catchCallback=f=>{this.wrapFailure(r,f).next(s,c)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof M?r:M.resolve(r)}catch(r){return M.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):M.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):M.reject(r)}static resolve(e){return new M((r,s)=>{r(e)})}static reject(e){return new M((r,s)=>{s(e)})}static waitFor(e){return new M((r,s)=>{let c=0,f=0,v=!1;e.forEach(x=>{++c,x.next(()=>{++f,v&&f===c&&r()},k=>s(k))}),v=!0,f===c&&r()})}static or(e){let r=M.resolve(!1);for(const s of e)r=r.next(c=>c?M.resolve(c):s());return r}static forEach(e,r){const s=[];return e.forEach((c,f)=>{s.push(r.call(this,c,f))}),this.waitFor(s)}static mapArray(e,r){return new M((s,c)=>{const f=e.length,v=new Array(f);let x=0;for(let k=0;k<f;k++){const q=k;r(e[q]).next(oe=>{v[q]=oe,++x,x===f&&s(v)},oe=>c(oe))}})}static doWhile(e,r){return new M((s,c)=>{const f=()=>{!0===e()?r().next(()=>{f()},c):s()};f()})}}class R{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new ei,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new we(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const c=yr(s.target.error);this.V.reject(new we(e,c))}}static open(e,r,s,c){try{return new R(r,e.transaction(c,s))}catch(f){throw new we(r,f)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(sn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new fn(r)}}class U{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===U.S((0,ae.Su)())&&Gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return sn("SimpleDb","Removing database:",e),wt(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ae.yy)())return!1;if(U.C())return!0;const e=(0,ae.Su)(),r=U.S(e),s=0<r&&r<10,c=U.v(e),f=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||f)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(e){const r=e.match(/Android ([\d.]+)/i),s=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var r=this;return(0,ve.c)(function*(){return r.db||(sn("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,c)=>{const f=indexedDB.open(r.name,r.version);f.onsuccess=v=>{s(v.target.result)},f.onblocked=()=>{c(new we(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=v=>{const x=v.target.error;c("VersionError"===x.name?new rn(Ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new rn(Ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new we(e,x))},f.onupgradeneeded=v=>{sn("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',v.oldVersion),r.p.N(v.target.result,f.transaction,v.oldVersion,r.version).next(()=>{sn("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.B&&(r.db.onversionchange=s=>r.B(s)),r.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,c){var f=this;return(0,ve.c)(function*(){const v="readonly"===r;let x=0;for(;;){++x;try{f.db=yield f.O(e);const k=R.open(f.db,e,v?"readonly":"readwrite",s),q=c(k).next(oe=>(k.g(),oe)).catch(oe=>(k.abort(oe),M.reject(oe))).toPromise();return q.catch(()=>{}),yield k.m,q}catch(k){const q=k,oe="FirebaseError"!==q.name&&x<3;if(sn("SimpleDb","Transaction failed with error:",q.message,"Retrying:",oe),f.close(),!oe)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class J{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return wt(this.k.delete())}}class we extends rn{constructor(e,r){super(Ot.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function mt(i){return"IndexedDbTransactionError"===i.name}class fn{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?(sn("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):(sn("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),wt(s)}add(e){return sn("SimpleDb","ADD",this.store.name,e,e),wt(this.store.add(e))}get(e){return wt(this.store.get(e)).next(r=>(void 0===r&&(r=null),sn("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return sn("SimpleDb","DELETE",this.store.name,e),wt(this.store.delete(e))}count(){return sn("SimpleDb","COUNT",this.store.name),wt(this.store.count())}W(e,r){const s=this.options(e,r),c=s.index?this.store.index(s.index):this.store;if("function"==typeof c.getAll){const f=c.getAll(s.range);return new M((v,x)=>{f.onerror=k=>{x(k.target.error)},f.onsuccess=k=>{v(k.target.result)}})}{const f=this.cursor(s),v=[];return this.G(f,(x,k)=>{v.push(k)}).next(()=>v)}}j(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new M((c,f)=>{s.onerror=v=>{f(v.target.error)},s.onsuccess=v=>{c(v.target.result)}})}H(e,r){sn("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.J=!1;const c=this.cursor(s);return this.G(c,(f,v,x)=>x.delete())}Y(e,r){let s;r?s=e:(s={},r=e);const c=this.cursor(s);return this.G(c,r)}Z(e){const r=this.cursor({});return new M((s,c)=>{r.onerror=f=>{const v=yr(f.target.error);c(v)},r.onsuccess=f=>{const v=f.target.result;v?e(v.primaryKey,v.value).next(x=>{x?v.continue():s()}):s()}})}G(e,r){const s=[];return new M((c,f)=>{e.onerror=v=>{f(v.target.error)},e.onsuccess=v=>{const x=v.target.result;if(!x)return void c();const k=new J(x),q=r(x.primaryKey,x.value,k);if(q instanceof M){const oe=q.catch(ke=>(k.done(),M.reject(ke)));s.push(oe)}k.isDone?c():null===k.$?x.continue():x.continue(k.$)}}).next(()=>M.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.J?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function wt(i){return new M((e,r)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const c=yr(s.target.error);r(c)}})}let Ln=!1;function yr(i){const e=U.S((0,ae.Su)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const s=new rn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ln||(Ln=!0,setTimeout(()=>{throw s},0)),s}}return i}class Ti{constructor(e,r){this.asyncQueue=e,this.X=r,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var r=this;sn("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.c)(function*(){r.task=null;try{sn("IndexBackfiller",`Documents written: ${yield r.X.te()}`)}catch(s){mt(s)?sn("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield w(s)}yield r.ee(6e4)}))}}class ci{constructor(e,r){this.localStore=e,this.persistence=r}te(e=50){var r=this;return(0,ve.c)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>r.ne(s,e))})()}ne(e,r){const s=new Set;let c=r,f=!0;return M.doWhile(()=>!0===f&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!s.has(v))return sn("IndexBackfiller",`Processing collection: ${v}`),this.re(e,v,c).next(x=>{c-=x,s.add(v)});f=!1})).next(()=>r-c)}re(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(c=>this.localStore.localDocuments.getNextDocuments(e,r,c,s).next(f=>{const v=f.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ie(c,f)).next(x=>(sn("IndexBackfiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,r,x))).next(()=>v.size)}))}ie(e,r){let s=e;return r.changes.forEach((c,f)=>{const v=Yl(f);cu(v,s)>0&&(s=v)}),new Go(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let Bi=(()=>{class i{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=c=>this.se(c),this.oe=c=>s.writeSequenceNumber(c))}se(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.oe&&this.oe(r),r}}return i._e=-1,i})();function ra(i){return null==i}function bs(i){return 0===i&&1/i==-1/0}function ar(i){return"number"==typeof i&&Number.isInteger(i)&&!bs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function io(i){let e="";for(let r=0;r<i.length;r++)e.length>0&&(e=tl(e)),e=Cl(i.get(r),e);return tl(e)}function Cl(i,e){let r=e;const s=i.length;for(let c=0;c<s;c++){const f=i.charAt(c);switch(f){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=f}}return r}function tl(i){return i+"\x01\x01"}function jo(i){const e=i.length;if(er(e>=2),2===e)return er("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ti.emptyPath();const r=e-2,s=[];let c="";for(let f=0;f<e;){const v=i.indexOf("\x01",f);switch((v<0||v>r)&&zn(),i.charAt(v+1)){case"\x01":const x=i.substring(f,v);let k;0===c.length?k=x:(c+=x,k=c,c=""),s.push(k);break;case"\x10":c+=i.substring(f,v),c+="\0";break;case"\x11":c+=i.substring(f,v+1);break;default:zn()}f=v+2}return new ti(s)}const Lc=["userId","batchId"];function wl(i,e){return[i,io(e)]}function hc(i,e,r){return[i,io(e),r]}const Kh={},Dd=["prefixPath","collectionGroup","readTime","documentId"],fc=["prefixPath","collectionGroup","documentId"],uu=["collectionGroup","readTime","prefixPath","documentId"],du=["canonicalId","targetId"],Dr=["targetId","path"],ui=["path","targetId"],Fc=["collectionId","parent"],pc=["indexId","uid"],qh=["uid","sequenceNumber"],ap=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yh=["indexId","uid","orderedDocumentKey"],gc=["userId","collectionPath","documentId"],Vc=["userId","collectionPath","largestBatchId"],lh=["userId","collectionGroup","largestBatchId"],ps=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Lu=[...ps,"documentOverlays"],Qh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fu=Qh,mc=[...Fu,"indexConfiguration","indexState","indexEntries"];class Dl extends ku{constructor(e,r){super(),this.ae=e,this.currentSequenceNumber=r}}function fo(i,e){const r=Rn(i);return U.M(r.ae,e)}function hu(i){let e=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e++;return e}function es(i,e){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e(r,i[r])}function Vu(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Hi{constructor(e,r){this.comparator=e,this.root=r||bo.EMPTY}insert(e,r){return new Hi(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,bo.BLACK,null,null))}remove(e){return new Hi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bo.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return r+s.left.size;c<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ka(this.root,e,this.comparator,!0)}}class ka{constructor(e,r,s,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=r?s(e.key,r):1,r&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bo{constructor(e,r,s,c,f){this.key=e,this.value=r,this.color=null!=s?s:bo.RED,this.left=null!=c?c:bo.EMPTY,this.right=null!=f?f:bo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,c,f){return new bo(null!=e?e:this.key,null!=r?r:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=f?f:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let c=this;const f=s(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,r,s),null):0===f?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(e,r,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return bo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,c=this;if(r(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,r),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===r(e,c.key)){if(c.right.isEmpty())return bo.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,r))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zn();const e=this.left.check();if(e!==this.right.check())throw zn();return e+(this.isRed()?0:1)}}bo.EMPTY=null,bo.RED=!0,bo.BLACK=!1,bo.EMPTY=new class{constructor(){this.size=0}get key(){throw zn()}get value(){throw zn()}get color(){throw zn()}get left(){throw zn()}get right(){throw zn()}copy(e,r,s,c,f){return this}insert(e,r,s){return new bo(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class li{constructor(e){this.comparator=e,this.data=new Hi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;r(c.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ch(this.data.getIterator())}getIteratorFrom(e){return new ch(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const c=r.getNext().key,f=s.getNext().key;if(0!==this.comparator(c,f))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new li(this.comparator);return r.data=e,r}}class ch{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ji(i){return i.hasNext()?i.getNext():void 0}class ts{constructor(e){this.fields=e,e.sort(Wi.comparator)}static empty(){return new ts([])}unionWith(e){let r=new li(Wi.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new ts(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class di extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Po{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new di("Invalid base64 string: "+f):f}}(e);return new Po(r)}static fromUint8Array(e){const r=function(c){let f="";for(let v=0;v<c.length;++v)f+=String.fromCharCode(c[v]);return f}(e);return new Po(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let c=0;c<r.length;c++)s[c]=r.charCodeAt(c);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return or(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Po.EMPTY_BYTE_STRING=new Po("");const Tl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(i){if(er(!!i),"string"==typeof i){let e=0;const r=Tl.exec(i);if(er(!!r),r[1]){let c=r[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Co(i.seconds),nanos:Co(i.nanos)}}function Co(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Fa(i){return"string"==typeof i?Po.fromBase64String(i):Po.fromUint8Array(i)}function _c(i){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ca(i){const e=i.mapValue.fields.__previous_value__;return _c(e)?Ca(e):e}function Vs(i){const e=La(i.mapValue.fields.__local_write_time__.timestampValue);return new ro(e.seconds,e.nanos)}class Xh{constructor(e,r,s,c,f,v,x,k,q){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=c,this.ssl=f,this.forceLongPolling=v,this.autoDetectLongPolling=x,this.longPollingOptions=k,this.useFetchStreams=q}}class ia{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ia("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ia&&e.projectId===this.projectId&&e.database===this.database}}const Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},As={nullValue:"NULL_VALUE"};function gs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_c(i)?4:Sl(i)?9007199254740991:10:zn()}function Rs(i,e){if(i===e)return!0;const r=gs(i);if(r!==gs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Vs(i).isEqual(Vs(e));case 3:return function(c,f){if("string"==typeof c.timestampValue&&"string"==typeof f.timestampValue&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const v=La(c.timestampValue),x=La(f.timestampValue);return v.seconds===x.seconds&&v.nanos===x.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return f=e,Fa(i.bytesValue).isEqual(Fa(f.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(c,f){return Co(c.geoPointValue.latitude)===Co(f.geoPointValue.latitude)&&Co(c.geoPointValue.longitude)===Co(f.geoPointValue.longitude)}(i,e);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return Co(c.integerValue)===Co(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const v=Co(c.doubleValue),x=Co(f.doubleValue);return v===x?bs(v)===bs(x):isNaN(v)&&isNaN(x)}return!1}(i,e);case 9:return ji(i.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:return function(c,f){const v=c.mapValue.fields||{},x=f.mapValue.fields||{};if(hu(v)!==hu(x))return!1;for(const k in v)if(v.hasOwnProperty(k)&&(void 0===x[k]||!Rs(v[k],x[k])))return!1;return!0}(i,e);default:return zn()}var f}function xo(i,e){return void 0!==(i.values||[]).find(r=>Rs(r,e))}function Us(i,e){if(i===e)return 0;const r=gs(i),s=gs(e);if(r!==s)return or(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return or(i.booleanValue,e.booleanValue);case 2:return function(f,v){const x=Co(f.integerValue||f.doubleValue),k=Co(v.integerValue||v.doubleValue);return x<k?-1:x>k?1:x===k?0:isNaN(x)?isNaN(k)?0:-1:1}(i,e);case 3:return Ql(i.timestampValue,e.timestampValue);case 4:return Ql(Vs(i),Vs(e));case 5:return or(i.stringValue,e.stringValue);case 6:return function(f,v){const x=Fa(f),k=Fa(v);return x.compareTo(k)}(i.bytesValue,e.bytesValue);case 7:return function(f,v){const x=f.split("/"),k=v.split("/");for(let q=0;q<x.length&&q<k.length;q++){const oe=or(x[q],k[q]);if(0!==oe)return oe}return or(x.length,k.length)}(i.referenceValue,e.referenceValue);case 8:return function(f,v){const x=or(Co(f.latitude),Co(v.latitude));return 0!==x?x:or(Co(f.longitude),Co(v.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(f,v){const x=f.values||[],k=v.values||[];for(let q=0;q<x.length&&q<k.length;++q){const oe=Us(x[q],k[q]);if(oe)return oe}return or(x.length,k.length)}(i.arrayValue,e.arrayValue);case 10:return function(f,v){if(f===Ss.mapValue&&v===Ss.mapValue)return 0;if(f===Ss.mapValue)return 1;if(v===Ss.mapValue)return-1;const x=f.fields||{},k=Object.keys(x),q=v.fields||{},oe=Object.keys(q);k.sort(),oe.sort();for(let ke=0;ke<k.length&&ke<oe.length;++ke){const ht=or(k[ke],oe[ke]);if(0!==ht)return ht;const Mt=Us(x[k[ke]],q[oe[ke]]);if(0!==Mt)return Mt}return or(k.length,oe.length)}(i.mapValue,e.mapValue);default:throw zn()}}function Ql(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return or(i,e);const r=La(i),s=La(e),c=or(r.seconds,s.seconds);return 0!==c?c:or(r.nanos,s.nanos)}function wa(i){return vc(i)}function vc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(r){const s=La(r);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Fa(i.bytesValue).toBase64():"referenceValue"in i?Nn.fromName(i.referenceValue).toString():"geoPointValue"in i?function(r){return`geo(${r.latitude},${r.longitude})`}(i.geoPointValue):"arrayValue"in i?function(r){let s="[",c=!0;for(const f of r.values||[])c?c=!1:s+=",",s+=vc(f);return s+"]"}(i.arrayValue):"mapValue"in i?function(r){const s=Object.keys(r.fields||{}).sort();let c="{",f=!0;for(const v of s)f?f=!1:c+=",",c+=`${v}:${vc(r.fields[v])}`;return c+"}"}(i.mapValue):zn()}function bl(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function fu(i){return!!i&&"integerValue"in i}function nl(i){return!!i&&"arrayValue"in i}function uh(i){return!!i&&"nullValue"in i}function pu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Bu(i){return!!i&&"mapValue"in i}function Uc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return es(i.mapValue.fields,(r,s)=>e.mapValue.fields[r]=Uc(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Uc(i.arrayValue.values[r]);return e}return Object.assign({},i)}function Sl(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Td(i){return"nullValue"in i?As:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?bl(ia.empty(),Nn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:zn()}function gu(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?bl(ia.empty(),Nn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ss:zn()}function dh(i,e){const r=Us(i.value,e.value);return 0!==r?r:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Al(i,e){const r=Us(i.value,e.value);return 0!==r?r:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Oo{constructor(e){this.value=e}static empty(){return new Oo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Bu(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uc(r)}setAll(e){let r=Wi.emptyPath(),s={},c=[];e.forEach((v,x)=>{if(!r.isImmediateParentOf(x)){const k=this.getFieldsMap(r);this.applyChanges(k,s,c),s={},c=[],r=x.popLast()}v?s[x.lastSegment()]=Uc(v):c.push(x.lastSegment())});const f=this.getFieldsMap(r);this.applyChanges(f,s,c)}delete(e){const r=this.field(e.popLast());Bu(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=r.mapValue.fields[e.get(s)];Bu(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=c),r=c}return r.mapValue.fields}applyChanges(e,r,s){es(r,(c,f)=>e[c]=f);for(const c of s)delete e[c]}clone(){return new Oo(Uc(this.value))}}function $u(i){const e=[];return es(i.fields,(r,s)=>{const c=new Wi([r]);if(Bu(s)){const f=$u(s.mapValue).fields;if(0===f.length)e.push(c);else for(const v of f)e.push(c.child(v))}else e.push(c)}),new ts(e)}class zi{constructor(e,r,s,c,f,v,x){this.key=e,this.documentType=r,this.version=s,this.readTime=c,this.createTime=f,this.data=v,this.documentState=x}static newInvalidDocument(e){return new zi(e,0,ir.min(),ir.min(),ir.min(),Oo.empty(),0)}static newFoundDocument(e,r,s,c){return new zi(e,1,r,ir.min(),s,c,0)}static newNoDocument(e,r){return new zi(e,2,r,ir.min(),ir.min(),Oo.empty(),0)}static newUnknownDocument(e,r){return new zi(e,3,r,ir.min(),ir.min(),Oo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ir.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ir.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yc{constructor(e,r){this.position=e,this.inclusive=r}}function Zh(i,e,r){let s=0;for(let c=0;c<i.position.length;c++){const f=e[c],v=i.position[c];if(s=f.field.isKeyField()?Nn.comparator(Nn.fromName(v.referenceValue),r.key):Us(v,r.data.field(f.field)),"desc"===f.dir&&(s*=-1),0!==s)break}return s}function Bc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Rs(i.position[r],e.position[r]))return!1;return!0}class Xl{constructor(e,r="asc"){this.field=e,this.dir=r}}function Gu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ju{}class fi extends ju{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new Cc(e,r,s):"array-contains"===r?new $c(e,s):"in"===r?new Gc(e,s):"not-in"===r?new Va(e,s):"array-contains-any"===r?new Pl(e,s):new fi(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new Jh(e,s):new wc(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(Us(r,this.value)):null!==r&&gs(this.value)===gs(r)&&this.matchesComparison(Us(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pi extends ju{constructor(e,r){super(),this.filters=e,this.op=r,this.ue=null}static create(e,r){return new Pi(e,r)}matches(e){return Rl(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Rl(i){return"and"===i.op}function Ic(i){return"or"===i.op}function oa(i){return Bs(i)&&Rl(i)}function Bs(i){for(const e of i.filters)if(e instanceof Pi)return!1;return!0}function Zl(i){if(i instanceof fi)return i.field.canonicalString()+i.op.toString()+wa(i.value);if(oa(i))return i.filters.map(e=>Zl(e)).join(",");{const e=i.filters.map(r=>Zl(r)).join(",");return`${i.op}(${e})`}}function mu(i,e){return i instanceof fi?(s=i,(c=e)instanceof fi&&s.op===c.op&&s.field.isEqual(c.field)&&Rs(s.value,c.value)):i instanceof Pi?function(s,c){return c instanceof Pi&&s.op===c.op&&s.filters.length===c.filters.length&&s.filters.reduce((f,v,x)=>f&&mu(v,c.filters[x]),!0)}(i,e):void zn();var s,c}function Ec(i,e){const r=i.filters.concat(e);return Pi.create(r,i.op)}function Ml(i){return i instanceof fi?`${(r=i).field.canonicalString()} ${r.op} ${wa(r.value)}`:i instanceof Pi?function(r){return r.op.toString()+" {"+r.getFilters().map(Ml).join(" ,")+"}"}(i):"Filter";var r}class Cc extends fi{constructor(e,r,s){super(e,r,s),this.key=Nn.fromName(s.referenceValue)}matches(e){const r=Nn.comparator(e.key,this.key);return this.matchesComparison(r)}}class Jh extends fi{constructor(e,r){super(e,"in",r),this.keys=bd(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class wc extends fi{constructor(e,r){super(e,"not-in",r),this.keys=bd(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function bd(i,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>Nn.fromName(s.referenceValue))}class $c extends fi{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return nl(r)&&xo(r.arrayValue,this.value)}}class Gc extends fi{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&xo(this.value.arrayValue,r)}}class Va extends fi{constructor(e,r){super(e,"not-in",r)}matches(e){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!xo(this.value.arrayValue,r)}}class Pl extends fi{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!nl(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>xo(this.value.arrayValue,s))}}class ef{constructor(e,r=null,s=[],c=[],f=null,v=null,x=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=c,this.limit=f,this.startAt=v,this.endAt=x,this.ce=null}}function Dc(i,e=null,r=[],s=[],c=null,f=null,v=null){return new ef(i,e,r,s,c,f,v)}function sa(i){const e=Rn(i);if(null===e.ce){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>Zl(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(f=s).field.canonicalString()+f.dir;var f}).join(","),ra(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>wa(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>wa(s)).join(",")),e.ce=r}return e.ce}function Ua(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<i.orderBy.length;r++)if(!Gu(i.orderBy[r],e.orderBy[r]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let r=0;r<i.filters.length;r++)if(!mu(i.filters[r],e.filters[r]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Bc(i.startAt,e.startAt)&&Bc(i.endAt,e.endAt)}function jc(i){return Nn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Wc(i,e){return i.filters.filter(r=>r instanceof fi&&r.field.isEqual(e))}function Wu(i,e,r){let s=As,c=!0;for(const f of Wc(i,e)){let v=As,x=!0;switch(f.op){case"<":case"<=":v=Td(f.value);break;case"==":case"in":case">=":v=f.value;break;case">":v=f.value,x=!1;break;case"!=":case"not-in":v=As}dh({value:s,inclusive:c},{value:v,inclusive:x})<0&&(s=v,c=x)}if(null!==r)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const v=r.position[f];dh({value:s,inclusive:c},{value:v,inclusive:r.inclusive})<0&&(s=v,c=r.inclusive);break}return{value:s,inclusive:c}}function Hc(i,e,r){let s=Ss,c=!0;for(const f of Wc(i,e)){let v=Ss,x=!0;switch(f.op){case">=":case">":v=gu(f.value),x=!1;break;case"==":case"in":case"<=":v=f.value;break;case"<":v=f.value,x=!1;break;case"!=":case"not-in":v=Ss}Al({value:s,inclusive:c},{value:v,inclusive:x})>0&&(s=v,c=x)}if(null!==r)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const v=r.position[f];Al({value:s,inclusive:c},{value:v,inclusive:r.inclusive})>0&&(s=v,c=r.inclusive);break}return{value:s,inclusive:c}}class rl{constructor(e,r=null,s=[],c=[],f=null,v="F",x=null,k=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=c,this.limit=f,this.limitType=v,this.startAt=x,this.endAt=k,this.le=null,this.he=null,this.Pe=null}}function _u(i,e,r,s,c,f,v,x){return new rl(i,e,r,s,c,f,v,x)}function qo(i){return new rl(i)}function Jl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ba(i){return null!==i.collectionGroup}function xl(i){const e=Rn(i);if(null===e.le){e.le=[];const r=new Set;for(const f of e.explicitOrderBy)e.le.push(f),r.add(f.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(v){let x=new li(Wi.comparator);return v.filters.forEach(k=>{k.getFlattenedFilters().forEach(q=>{q.isInequality()&&(x=x.add(q.field))})}),x})(e).forEach(f=>{r.has(f.canonicalString())||f.isKeyField()||e.le.push(new Xl(f,s))}),r.has(Wi.keyField().canonicalString())||e.le.push(new Xl(Wi.keyField(),s))}return e.le}function xi(i){const e=Rn(i);return e.he||(e.he=function $s(i,e){if("F"===i.limitType)return Dc(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(c=>new Xl(c.field,"desc"===c.dir?"asc":"desc"));const r=i.endAt?new yc(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new yc(i.startAt.position,i.startAt.inclusive):null;return Dc(i.path,i.collectionGroup,e,i.filters,i.limit,r,s)}}(e,xl(i))),e.he}function zc(i,e){const r=i.filters.concat([e]);return new rl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),r,i.limit,i.limitType,i.startAt,i.endAt)}function ec(i,e,r){return new rl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,r,i.startAt,i.endAt)}function aa(i,e){return Ua(xi(i),xi(e))&&i.limitType===e.limitType}function Sd(i){return`${sa(xi(i))}|lt:${i.limitType}`}function $a(i){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(c=>Ml(c)).join(", ")}]`),ra(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(c=>{return`${(v=c).field.canonicalString()} (${v.dir})`;var v}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(c=>wa(c)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(c=>wa(c)).join(",")),`Target(${s})`}(xi(i))}; limitType=${i.limitType})`}function Gs(i,e){return e.isFoundDocument()&&function(s,c){const f=c.key.path;return null!==s.collectionGroup?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(f):Nn.isDocumentKey(s.path)?s.path.isEqual(f):s.path.isImmediateParentOf(f)}(i,e)&&function(s,c){for(const f of xl(s))if(!f.field.isKeyField()&&null===c.data.field(f.field))return!1;return!0}(i,e)&&function(s,c){for(const f of s.filters)if(!f.matches(c))return!1;return!0}(i,e)&&(c=e,!((s=i).startAt&&!function(v,x,k){const q=Zh(v,x,k);return v.inclusive?q<=0:q<0}(s.startAt,xl(s),c)||s.endAt&&!function(v,x,k){const q=Zh(v,x,k);return v.inclusive?q>=0:q>0}(s.endAt,xl(s),c)));var s,c}function Nl(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Kc(i){return(e,r)=>{let s=!1;for(const c of xl(i)){const f=tf(c,e,r);if(0!==f)return f;s=s||c.field.isKeyField()}return 0}}function tf(i,e,r){const s=i.field.isKeyField()?Nn.comparator(e.key,r.key):function(f,v,x){const k=v.data.field(f),q=x.data.field(f);return null!==k&&null!==q?Us(k,q):zn()}(i.field,e,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return zn()}}class Ol{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[c,f]of s)if(this.equalsFn(c,e))return f}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,r]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,r]);c.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[r]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(r,s)=>{for(const[c,f]of s)e(c,f)})}isEmpty(){return Vu(this.inner)}size(){return this.innerSize}}const Hu=new Hi(Nn.comparator);function wo(){return Hu}const vu=new Hi(Nn.comparator);function kl(...i){let e=vu;for(const r of i)e=e.insert(r.key,r);return e}function zu(i){let e=vu;return i.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function la(){return il()}function Ku(){return il()}function il(){return new Ol(i=>i.toString(),(i,e)=>i.isEqual(e))}const Tc=new Hi(Nn.comparator),hh=new li(Nn.comparator);function fr(...i){let e=hh;for(const r of i)e=e.add(r);return e}const So=new li(or);function qu(){return So}function fh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bs(e)?"-0":e}}function Ll(i){return{integerValue:""+i}}function Ad(i,e){return ar(e)?Ll(e):fh(i,e)}class Yu{constructor(){this._=void 0}}function nf(i,e,r){return i instanceof qc?function(c,f){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&_c(f)&&(f=Ca(f)),f&&(v.fields.__previous_value__=f),{mapValue:v}}(r,e):i instanceof Fl?yu(i,e):i instanceof Ga?Rd(i,e):function(c,f){const v=gh(c,f),x=Md(v)+Md(c.Ie);return fu(v)&&fu(c.Ie)?Ll(x):fh(c.serializer,x)}(i,e)}function ph(i,e,r){return i instanceof Fl?yu(i,e):i instanceof Ga?Rd(i,e):r}function gh(i,e){return i instanceof Vl?fu(s=e)||(f=s)&&"doubleValue"in f?e:{integerValue:0}:null;var s,f}class qc extends Yu{}class Fl extends Yu{constructor(e){super(),this.elements=e}}function yu(i,e){const r=mh(e);for(const s of i.elements)r.some(c=>Rs(c,s))||r.push(s);return{arrayValue:{values:r}}}class Ga extends Yu{constructor(e){super(),this.elements=e}}function Rd(i,e){let r=mh(e);for(const s of i.elements)r=r.filter(c=>!Rs(c,s));return{arrayValue:{values:r}}}class Vl extends Yu{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function Md(i){return Co(i.integerValue||i.doubleValue)}function mh(i){return nl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Iu{constructor(e,r){this.field=e,this.transform=r}}class Pd{constructor(e,r){this.version=e,this.transformResults=r}}class oo{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new oo}static exists(e){return new oo(void 0,e)}static updateTime(e){return new oo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Ms{}function ja(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ha(i.key,oo.none()):new Bl(i.key,i.data,oo.none());{const r=i.data,s=Oo.empty();let c=new li(Wi.comparator);for(let f of e.fields)if(!c.has(f)){let v=r.field(f);null===v&&f.length>1&&(f=f.popLast(),v=r.field(f)),null===v?s.delete(f):s.set(f,v),c=c.add(f)}return new ol(i.key,s,new ts(c.toArray()),oo.none())}}function Eu(i,e,r){i instanceof Bl?function(c,f,v){const x=c.value.clone(),k=Qu(c.fieldTransforms,f,v.transformResults);x.setAll(k),f.convertToFoundDocument(v.version,x).setHasCommittedMutations()}(i,e,r):i instanceof ol?function(c,f,v){if(!tc(c.precondition,f))return void f.convertToUnknownDocument(v.version);const x=Qu(c.fieldTransforms,f,v.transformResults),k=f.data;k.setAll(Cu(c)),k.setAll(x),f.convertToFoundDocument(v.version,k).setHasCommittedMutations()}(i,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Ul(i,e,r,s){return i instanceof Bl?function(f,v,x,k){if(!tc(f.precondition,v))return x;const q=f.value.clone(),oe=nc(f.fieldTransforms,k,v);return q.setAll(oe),v.convertToFoundDocument(v.version,q).setHasLocalMutations(),null}(i,e,r,s):i instanceof ol?function(f,v,x,k){if(!tc(f.precondition,v))return x;const q=nc(f.fieldTransforms,k,v),oe=v.data;return oe.setAll(Cu(f)),oe.setAll(q),v.convertToFoundDocument(v.version,oe).setHasLocalMutations(),null===x?null:x.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(ke=>ke.field))}(i,e,r,s):(x=r,tc(i.precondition,v=e)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):x);var v,x}function ms(i,e){let r=null;for(const s of i.fieldTransforms){const c=e.data.field(s.field),f=gh(s.transform,c||null);null!=f&&(null===r&&(r=Oo.empty()),r.set(s.field,f))}return r||null}function Wa(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(s=i.fieldTransforms)&&void 0===c||s&&c&&ji(s,c,(f,v)=>function _h(i,e){return i.field.isEqual(e.field)&&(c=e.transform,(s=i.transform)instanceof Fl&&c instanceof Fl||s instanceof Ga&&c instanceof Ga?ji(s.elements,c.elements,Rs):s instanceof Vl&&c instanceof Vl?Rs(s.Ie,c.Ie):s instanceof qc&&c instanceof qc);var s,c}(f,v))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var s,c}class Bl extends Ms{constructor(e,r,s,c=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class ol extends Ms{constructor(e,r,s,c,f=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function Cu(i){const e=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=i.data.field(r);e.set(r,s)}}),e}function Qu(i,e,r){const s=new Map;er(i.length===r.length);for(let c=0;c<r.length;c++){const f=i[c],v=f.transform,x=e.data.field(f.field);s.set(f.field,ph(v,x,r[c]))}return s}function nc(i,e,r){const s=new Map;for(const c of i){const f=c.transform,v=r.data.field(c.field);s.set(c.field,nf(f,v,e))}return s}class Ha extends Ms{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xd extends Ms{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class za{constructor(e,r,s,c){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&Eu(f,e,s[c])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=Ul(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=Ul(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Ku();return this.mutations.forEach(c=>{const f=e.get(c.key),v=f.overlayedDocument;let x=this.applyToLocalView(v,f.mutatedFields);x=r.has(c.key)?null:x;const k=ja(v,x);null!==k&&s.set(c.key,k),v.isValidDocument()||v.convertToNoDocument(ir.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),fr())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(r,s)=>Wa(r,s))&&ji(this.baseMutations,e.baseMutations,(r,s)=>Wa(r,s))}}class wu{constructor(e,r,s,c){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=c}static from(e,r,s){er(e.mutations.length===s.length);let c=function(){return Tc}();const f=e.mutations;for(let v=0;v<f.length;v++)c=c.insert(f[v].key,s[v].version);return new wu(e,r,s,c)}}class Nd{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lp{constructor(e,r){this.count=e,this.unchangedNames=r}}var Wo,Tr;function rc(i){switch(i){default:return zn();case Ot.CANCELLED:case Ot.UNKNOWN:case Ot.DEADLINE_EXCEEDED:case Ot.RESOURCE_EXHAUSTED:case Ot.INTERNAL:case Ot.UNAVAILABLE:case Ot.UNAUTHENTICATED:return!1;case Ot.INVALID_ARGUMENT:case Ot.NOT_FOUND:case Ot.ALREADY_EXISTS:case Ot.PERMISSION_DENIED:case Ot.FAILED_PRECONDITION:case Ot.ABORTED:case Ot.OUT_OF_RANGE:case Ot.UNIMPLEMENTED:case Ot.DATA_LOSS:return!0}}function Xu(i){if(void 0===i)return Gi("GRPC error has no .code"),Ot.UNKNOWN;switch(i){case Wo.OK:return Ot.OK;case Wo.CANCELLED:return Ot.CANCELLED;case Wo.UNKNOWN:return Ot.UNKNOWN;case Wo.DEADLINE_EXCEEDED:return Ot.DEADLINE_EXCEEDED;case Wo.RESOURCE_EXHAUSTED:return Ot.RESOURCE_EXHAUSTED;case Wo.INTERNAL:return Ot.INTERNAL;case Wo.UNAVAILABLE:return Ot.UNAVAILABLE;case Wo.UNAUTHENTICATED:return Ot.UNAUTHENTICATED;case Wo.INVALID_ARGUMENT:return Ot.INVALID_ARGUMENT;case Wo.NOT_FOUND:return Ot.NOT_FOUND;case Wo.ALREADY_EXISTS:return Ot.ALREADY_EXISTS;case Wo.PERMISSION_DENIED:return Ot.PERMISSION_DENIED;case Wo.FAILED_PRECONDITION:return Ot.FAILED_PRECONDITION;case Wo.ABORTED:return Ot.ABORTED;case Wo.OUT_OF_RANGE:return Ot.OUT_OF_RANGE;case Wo.UNIMPLEMENTED:return Ot.UNIMPLEMENTED;case Wo.DATA_LOSS:return Ot.DATA_LOSS;default:return zn()}}(Tr=Wo||(Wo={}))[Tr.OK=0]="OK",Tr[Tr.CANCELLED=1]="CANCELLED",Tr[Tr.UNKNOWN=2]="UNKNOWN",Tr[Tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tr[Tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tr[Tr.NOT_FOUND=5]="NOT_FOUND",Tr[Tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tr[Tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tr[Tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tr[Tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tr[Tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tr[Tr.ABORTED=10]="ABORTED",Tr[Tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tr[Tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tr[Tr.INTERNAL=13]="INTERNAL",Tr[Tr.UNAVAILABLE=14]="UNAVAILABLE",Tr[Tr.DATA_LOSS=15]="DATA_LOSS";function Da(){return new TextEncoder}const bc=new Zi([4294967295,4294967295],0);function sf(i){const e=Da().encode(i),r=new hi;return r.update(e),new Uint8Array(r.digest())}function Od(i){const e=new DataView(i.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new Zi([r,s],0),new Zi([c,f],0)]}class Zu{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Sc(`Invalid padding: ${r}`);if(s<0)throw new Sc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Sc(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new Sc(`Invalid padding when bitmap length is 0: ${r}`);this.Te=8*e.length-r,this.Ee=Zi.fromNumber(this.Te)}de(e,r,s){let c=e.add(r.multiply(Zi.fromNumber(s)));return 1===c.compare(bc)&&(c=new Zi([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const r=sf(e),[s,c]=Od(r);for(let f=0;f<this.hashCount;f++){const v=this.de(s,c,f);if(!this.Ae(v))return!1}return!0}static create(e,r,s){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),v=new Zu(f,c,r);return s.forEach(x=>v.insert(x)),v}insert(e){if(0===this.Te)return;const r=sf(e),[s,c]=Od(r);for(let f=0;f<this.hashCount;f++){const v=this.de(s,c,f);this.Re(v)}}Re(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class Sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class js{constructor(e,r,s,c,f){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const c=new Map;return c.set(e,Yc.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new js(ir.min(),c,new Hi(or),wo(),fr())}}class Yc{constructor(e,r,s,c,f){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new Yc(s,r,fr(),fr(),fr())}}class Ac{constructor(e,r,s,c){this.Ve=e,this.removedTargetIds=r,this.key=s,this.me=c}}class Ju{constructor(e,r){this.targetId=e,this.fe=r}}class E{constructor(e,r,s=Po.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=c}}class m{constructor(){this.ge=0,this.pe=W(),this.ye=Po.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=fr(),r=fr(),s=fr();return this.pe.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:r=r.add(c);break;case 1:s=s.add(c);break;default:zn()}}),new Yc(this.ye,this.we,e,r,s)}Fe(){this.Se=!1,this.pe=W()}Me(e,r){this.Se=!0,this.pe=this.pe.insert(e,r)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,er(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class _{constructor(e){this.Le=e,this.ke=new Map,this.qe=wo(),this.Qe=D(),this.Ke=new Hi(or)}$e(e){for(const r of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me);for(const r of e.removedTargetIds)this.We(r,e.key,e.me)}Ge(e){this.forEachTarget(e,r=>{const s=this.ze(r);switch(e.state){case 0:this.je(r)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(r);break;case 3:this.je(r)&&(s.Be(),s.Ce(e.resumeToken));break;case 4:this.je(r)&&(this.He(r),s.Ce(e.resumeToken));break;default:zn()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ke.forEach((s,c)=>{this.je(c)&&r(c)})}Je(e){const r=e.targetId,s=e.fe.count,c=this.Ye(r);if(c){const f=c.target;if(jc(f))if(0===s){const v=new Nn(f.path);this.We(r,v,zi.newNoDocument(v,ir.min()))}else er(1===s);else{const v=this.Ze(r);if(v!==s){const x=this.Xe(e),k=x?this.et(x,e,v):1;0!==k&&(this.He(r),this.Ke=this.Ke.insert(r,2===k?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const r=e.fe.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:f=0}=r;let v,x;try{v=Fa(s).toUint8Array()}catch(k){if(k instanceof di)return $o("Decoding the base64 bloom filter in existence filter failed ("+k.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw k}try{x=new Zu(v,c,f)}catch(k){return $o(k instanceof Sc?"BloomFilter error: ":"Applying bloom filter failed: ",k),null}return 0===x.Te?null:x}et(e,r,s){return r.fe.count===s-this.rt(e,r.targetId)?0:2}rt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let c=0;return s.forEach(f=>{const v=this.Le.nt(),x=`projects/${v.projectId}/databases/${v.database}/documents/${f.path.canonicalString()}`;e.mightContain(x)||(this.We(r,f,null),c++)}),c}it(e){const r=new Map;this.ke.forEach((f,v)=>{const x=this.Ye(v);if(x){if(f.current&&jc(x.target)){const k=new Nn(x.target.path);null!==this.qe.get(k)||this.st(v,k)||this.We(v,k,zi.newNoDocument(k,e))}f.De&&(r.set(v,f.ve()),f.Fe())}});let s=fr();this.Qe.forEach((f,v)=>{let x=!0;v.forEachWhile(k=>{const q=this.Ye(k);return!q||"TargetPurposeLimboResolution"===q.purpose||(x=!1,!1)}),x&&(s=s.add(f))}),this.qe.forEach((f,v)=>v.setReadTime(e));const c=new js(e,r,this.Ke,this.qe,s);return this.qe=wo(),this.Qe=D(),this.Ke=new Hi(or),c}Ue(e,r){if(!this.je(e))return;const s=this.st(e,r.key)?2:0;this.ze(e).Me(r.key,s),this.qe=this.qe.insert(r.key,r),this.Qe=this.Qe.insert(r.key,this.ot(r.key).add(e))}We(e,r,s){if(!this.je(e))return;const c=this.ze(e);this.st(e,r)?c.Me(r,1):c.xe(r),this.Qe=this.Qe.insert(r,this.ot(r).delete(e)),s&&(this.qe=this.qe.insert(r,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const r=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let r=this.ke.get(e);return r||(r=new m,this.ke.set(e,r)),r}ot(e){let r=this.Qe.get(e);return r||(r=new li(or),this.Qe=this.Qe.insert(e,r)),r}je(e){const r=null!==this.Ye(e);return r||sn("WatchChangeAggregator","Detected inactive target",e),r}Ye(e){const r=this.ke.get(e);return r&&r.be?null:this.Le._t(e)}He(e){this.ke.set(e,new m),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.We(e,r,null)})}st(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function D(){return new Hi(Nn.comparator)}function W(){return new Hi(Nn.comparator)}const ie={asc:"ASCENDING",desc:"DESCENDING"},rt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dt={and:"AND",or:"OR"};class en{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function On(i,e){return i.useProto3Json||ra(e)?e:{value:e}}function Un(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hn(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function _o(i,e){return Un(i,e.toTimestamp())}function Ni(i){return er(!!i),ir.fromTimestamp(function(r){const s=La(r);return new ro(s.seconds,s.nanos)}(i))}function Ta(i,e){return sl(i,e).canonicalString()}function sl(i,e){const r=(c=i,new ti(["projects",c.projectId,"databases",c.database])).child("documents");var c;return void 0===e?r:r.child(e)}function Do(i){const e=ti.fromString(i);return er(O(e)),e}function Rc(i,e){return Ta(i.databaseId,e.path)}function ca(i,e){const r=Do(e);if(r.get(1)!==i.databaseId.projectId)throw new rn(Ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new rn(Ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Nn(Qc(r))}function Mc(i,e){return Ta(i.databaseId,e)}function kd(i){const e=Do(i);return 4===e.length?ti.emptyPath():Qc(e)}function Du(i){return new ti(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Qc(i){return er(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ed(i,e,r){return{name:Rc(i,e),fields:r.value.mapValue.fields}}function Ld(i,e,r){const s=ca(i,e.name),c=Ni(e.updateTime),f=e.createTime?Ni(e.createTime):ir.min(),v=new Oo({mapValue:{fields:e.fields}}),x=zi.newFoundDocument(s,c,f,v);return r&&x.setHasCommittedMutations(),r?x.setHasCommittedMutations():x}function td(i,e){let r;if(e instanceof Bl)r={update:ed(i,e.key,e.value)};else if(e instanceof Ha)r={delete:Rc(i,e.key)};else if(e instanceof ol)r={update:ed(i,e.key,e.data),updateMask:T(e.fieldMask)};else{if(!(e instanceof xd))return zn();r={verify:Rc(i,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(f,v){const x=v.transform;if(x instanceof qc)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(x instanceof Fl)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:x.elements}};if(x instanceof Ga)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:x.elements}};if(x instanceof Vl)return{fieldPath:v.field.canonicalString(),increment:x.Ie};throw zn()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(f=e.precondition).updateTime?{updateTime:_o(i,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:zn()),r;var f}function af(i,e){const r=e.currentDocument?void 0!==(f=e.currentDocument).updateTime?oo.updateTime(Ni(f.updateTime)):void 0!==f.exists?oo.exists(f.exists):oo.none():oo.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(v,x){let k=null;"setToServerValue"in x?(er("REQUEST_TIME"===x.setToServerValue),k=new qc):"appendMissingElements"in x?k=new Fl(x.appendMissingElements.values||[]):"removeAllFromArray"in x?k=new Ga(x.removeAllFromArray.values||[]):"increment"in x?k=new Vl(v,x.increment):zn();const q=Wi.fromServerFormat(x.fieldPath);return new Iu(q,k)}(i,c)):[];var f;if(e.update){const c=ca(i,e.update.name),f=new Oo({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new ts((e.updateMask.fieldPaths||[]).map(oe=>Wi.fromServerFormat(oe)));return new ol(c,f,v,r,s)}return new Bl(c,f,r,s)}if(e.delete){const c=ca(i,e.delete);return new Ha(c,r)}if(e.verify){const c=ca(i,e.verify);return new xd(c,r)}return zn()}function up(i,e){return{documents:[Mc(i,e.path)]}}function Fd(i,e){const r={structuredQuery:{}},s=e.path;let c;null!==e.collectionGroup?(c=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=Mc(i,c);const f=function(q){if(0!==q.length)return y(Pi.create(q,"and"))}(e.filters);f&&(r.structuredQuery.where=f);const v=function(q){if(0!==q.length)return q.map(oe=>{return{field:d((ht=oe).field),direction:pp(ht.dir)};var ht})}(e.orderBy);v&&(r.structuredQuery.orderBy=v);const x=On(i,e.limit);return null!==x&&(r.structuredQuery.limit=x),e.startAt&&(r.structuredQuery.startAt={before:(q=e.startAt).inclusive,values:q.position}),e.endAt&&(r.structuredQuery.endAt=function(q){return{before:!q.inclusive,values:q.position}}(e.endAt)),{ut:r,parent:c};var q}function dp(i){let e=kd(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let c=null;if(s>0){er(1===s);const oe=r.from[0];oe.allDescendants?c=oe.collectionId:e=e.child(oe.collectionId)}let f=[];r.where&&(f=function(ke){const ht=fp(ke);return ht instanceof Pi&&oa(ht)?ht.getFilters():[ht]}(r.where));let v=[];r.orderBy&&(v=r.orderBy.map(ht=>{return new Xl(h((wn=ht).field),function(kn){switch(kn){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(wn.direction));var wn}));let x=null;r.limit&&(x=function(ke){let ht;return ht="object"==typeof ke?ke.value:ke,ra(ht)?null:ht}(r.limit));let k=null;var ke;r.startAt&&(k=new yc((ke=r.startAt).values||[],!!ke.before));let q=null;return r.endAt&&(q=function(ke){return new yc(ke.values||[],!ke.before)}(r.endAt)),_u(e,c,v,f,x,"F",k,q)}function fp(i){return void 0!==i.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=h(r.unaryFilter.field);return fi.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=h(r.unaryFilter.field);return fi.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=h(r.unaryFilter.field);return fi.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const v=h(r.unaryFilter.field);return fi.create(v,"!=",{nullValue:"NULL_VALUE"});default:return zn()}}(i):void 0!==i.fieldFilter?fi.create(h((r=i).fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zn()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==i.compositeFilter?function(r){return Pi.create(r.compositeFilter.filters.map(s=>fp(s)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return zn()}}(r.compositeFilter.op))}(i):zn();var r}function pp(i){return ie[i]}function Q_(i){return rt[i]}function g(i){return Dt[i]}function d(i){return{fieldPath:i.canonicalString()}}function h(i){return Wi.fromServerFormat(i.fieldPath)}function y(i){return i instanceof fi?function(r){if("=="===r.op){if(pu(r.value))return{unaryFilter:{field:d(r.field),op:"IS_NAN"}};if(uh(r.value))return{unaryFilter:{field:d(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(pu(r.value))return{unaryFilter:{field:d(r.field),op:"IS_NOT_NAN"}};if(uh(r.value))return{unaryFilter:{field:d(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:d(r.field),op:Q_(r.op),value:r.value}}}(i):i instanceof Pi?function(r){const s=r.getFilters().map(c=>y(c));return 1===s.length?s[0]:{compositeFilter:{op:g(r.op),filters:s}}}(i):zn()}function T(i){const e=[];return i.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function O(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class j{constructor(e,r,s,c,f=ir.min(),v=ir.min(),x=Po.EMPTY_BYTE_STRING,k=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=x,this.expectedCount=k}withSequenceNumber(e){return new j(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new j(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new j(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new j(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class de{constructor(e){this.ct=e}}function Ze(i,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Vt(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Rc(f=i.ct,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:Un(f,v.version.toTimestamp()),createTime:Un(f,v.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:Gt(e.version)};else{if(!e.isUnknownDocument())return zn();s.unknownDocument={path:r.path.toArray(),version:Gt(e.version)}}var f,v;return s}function Vt(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Gt(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zt(i){const e=new ro(i.seconds,i.nanoseconds);return ir.fromTimestamp(e)}function Fn(i,e){const r=(e.baseMutations||[]).map(f=>af(i.ct,f));for(let f=0;f<e.mutations.length-1;++f)f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(e.mutations[f].updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f);const s=e.mutations.map(f=>af(i.ct,f)),c=ro.fromMillis(e.localWriteTimeMs);return new za(e.batchId,c,r,s)}function lr(i){const e=Zt(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?Zt(i.lastLimboFreeSnapshotVersion):ir.min();let s;return s=void 0!==i.query.documents?(er(1===(f=i.query).documents.length),xi(qo(kd(f.documents[0])))):function(f){return xi(dp(f))}(i.query),new j(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,r,Po.fromBase64String(i.resumeToken));var f}function Oi(i,e){const r=Gt(e.snapshotVersion),s=Gt(e.lastLimboFreeSnapshotVersion);let c;c=jc(e.target)?up(i.ct,e.target):Fd(i.ct,e.target).ut;const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sa(e.target),readTime:r,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function ns(i){const e=dp({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ec(e,e.limit,"L"):e}function al(i,e){return new Nd(e.largestBatchId,af(i.ct,e.overlayMutation))}function $l(i,e){const r=e.path.lastSegment();return[i,io(e.path.popLast()),r]}function oc(i,e,r,s){return{indexId:i,uid:e,sequenceNumber:r,readTime:Gt(s.readTime),documentKey:io(s.documentKey.path),largestBatchId:s.largestBatchId}}class Vd{getBundleMetadata(e,r){return zg(e).get(r).next(s=>{if(s)return{id:(f=s).bundleId,createTime:Zt(f.createTime),version:f.version};var f})}saveBundleMetadata(e,r){return zg(e).put({bundleId:(c=r).id,createTime:Gt(Ni(c.createTime)),version:c.version});var c}getNamedQuery(e,r){return Kg(e).get(r).next(s=>{if(s)return{name:(f=s).name,query:ns(f.bundledQuery),readTime:Zt(f.readTime)};var f})}saveNamedQuery(e,r){return Kg(e).put({name:(c=r).name,readTime:Gt(Ni(c.readTime)),bundledQuery:c.bundledQuery});var c}}function zg(i){return fo(i,"bundles")}function Kg(i){return fo(i,"namedQueries")}class gp{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new gp(e,r.uid||"")}getOverlay(e,r){return lf(e).get($l(this.userId,r)).next(s=>s?al(this.serializer,s):null)}getOverlays(e,r){const s=la();return M.forEach(r,c=>this.getOverlay(e,c).next(f=>{null!==f&&s.set(c,f)})).next(()=>s)}saveOverlays(e,r,s){const c=[];return s.forEach((f,v)=>{const x=new Nd(r,v);c.push(this.ht(e,x))}),M.waitFor(c)}removeOverlaysForBatchId(e,r,s){const c=new Set;r.forEach(v=>c.add(io(v.getCollectionPath())));const f=[];return c.forEach(v=>{const x=IDBKeyRange.bound([this.userId,v,s],[this.userId,v,s+1],!1,!0);f.push(lf(e).H("collectionPathOverlayIndex",x))}),M.waitFor(f)}getOverlaysForCollection(e,r,s){const c=la(),f=io(r),v=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,Number.POSITIVE_INFINITY],!0);return lf(e).W("collectionPathOverlayIndex",v).next(x=>{for(const k of x){const q=al(this.serializer,k);c.set(q.getKey(),q)}return c})}getOverlaysForCollectionGroup(e,r,s,c){const f=la();let v;const x=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return lf(e).Y({index:"collectionGroupOverlayIndex",range:x},(k,q,oe)=>{const ke=al(this.serializer,q);f.size()<c||ke.largestBatchId===v?(f.set(ke.getKey(),ke),v=ke.largestBatchId):oe.done()}).next(()=>f)}ht(e,r){return lf(e).put(function(c,f,v){const[x,k,q]=$l(f,v.mutation.key);return{userId:f,collectionPath:k,documentId:q,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:td(c.ct,v.mutation)}}(this.serializer,this.userId,r))}}function lf(i){return fo(i,"documentOverlays")}class Ud{constructor(){}Pt(e,r){this.It(e,r),r.Tt()}It(e,r){if("nullValue"in e)this.Et(r,5);else if("booleanValue"in e)this.Et(r,10),r.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(r,15),r.dt(Co(e.integerValue));else if("doubleValue"in e){const s=Co(e.doubleValue);isNaN(s)?this.Et(r,13):(this.Et(r,15),bs(s)?r.dt(0):r.dt(s))}else if("timestampValue"in e){const s=e.timestampValue;this.Et(r,20),"string"==typeof s?r.At(s):(r.At(`${s.seconds||""}`),r.dt(s.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,r),this.Vt(r);else if("bytesValue"in e)this.Et(r,30),r.ft(Fa(e.bytesValue)),this.Vt(r);else if("referenceValue"in e)this.gt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.Et(r,45),r.dt(s.latitude||0),r.dt(s.longitude||0)}else"mapValue"in e?Sl(e)?this.Et(r,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,r),this.Vt(r)):"arrayValue"in e?(this.wt(e.arrayValue,r),this.Vt(r)):zn()}Rt(e,r){this.Et(r,25),this.St(e,r)}St(e,r){r.At(e)}yt(e,r){const s=e.fields||{};this.Et(r,55);for(const c of Object.keys(s))this.Rt(c,r),this.It(s[c],r)}wt(e,r){const s=e.values||[];this.Et(r,50);for(const c of s)this.It(c,r)}gt(e,r){this.Et(r,37),Nn.fromName(e).path.forEach(s=>{this.Et(r,60),this.St(s,r)})}Et(e,r){e.dt(r)}Vt(e){e.dt(2)}}function cI(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function X_(i){const e=64-function(s){let c=0;for(let f=0;f<8;++f){const v=cI(255&s[f]);if(c+=v,8!==v)break}return c}(i);return Math.ceil(e/8)}Ud.bt=new Ud;class nd{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ct(s.value),s=r.next();this.vt()}Ft(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Mt(s.value),s=r.next();this.xt()}Ot(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ct(s);else if(s<2048)this.Ct(960|s>>>6),this.Ct(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ct(480|s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s);else{const c=r.codePointAt(0);this.Ct(240|c>>>18),this.Ct(128|63&c>>>12),this.Ct(128|63&c>>>6),this.Ct(128|63&c)}}this.vt()}Nt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Mt(s);else if(s<2048)this.Mt(960|s>>>6),this.Mt(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s);else{const c=r.codePointAt(0);this.Mt(240|c>>>18),this.Mt(128|63&c>>>12),this.Mt(128|63&c>>>6),this.Mt(128|63&c)}}this.xt()}Bt(e){const r=this.Lt(e),s=X_(r);this.kt(1+s),this.buffer[this.position++]=255&s;for(let c=r.length-s;c<r.length;++c)this.buffer[this.position++]=255&r[c]}qt(e){const r=this.Lt(e),s=X_(r);this.kt(1+s),this.buffer[this.position++]=~(255&s);for(let c=r.length-s;c<r.length;++c)this.buffer[this.position++]=~(255&r[c])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const r=function(f){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,f,!1),new Uint8Array(v.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let c=1;c<r.length;++c)r[c]^=s?255:0;return r}Ct(e){const r=255&e;0===r?(this.Kt(0),this.Kt(255)):255===r?(this.Kt(255),this.Kt(0)):this.Kt(r)}Mt(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class cf{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class uI{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class mp{constructor(){this.Gt=new nd,this.zt=new cf(this.Gt),this.jt=new uI(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class vh{constructor(e,r,s,c){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=c}Jt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new vh(this.indexId,this.documentKey,this.arrayValue,s)}}function Bd(i,e){let r=i.indexId-e.indexId;return 0!==r?r:(r=dI(i.arrayValue,e.arrayValue),0!==r?r:(r=dI(i.directionalValue,e.directionalValue),0!==r?r:Nn.comparator(i.documentKey,e.documentKey)))}function dI(i,e){for(let r=0;r<i.length&&r<e.length;++r){const s=i[r]-e[r];if(0!==s)return s}return i.length-e.length}class hI{constructor(e){this.Yt=new li((r,s)=>Wi.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const r of e.filters){const s=r;s.isInequality()?this.Yt=this.Yt.add(s):this.Xt.push(s)}}get en(){return this.Yt.size>1}tn(e){if(er(e.collectionGroup===this.collectionId),this.en)return!1;const r=El(e);if(void 0!==r&&!this.nn(r))return!1;const s=hs(e);let c=new Set,f=0,v=0;for(;f<s.length&&this.nn(s[f]);++f)c=c.add(s[f].fieldPath.canonicalString());if(f===s.length)return!0;if(this.Yt.size>0){const x=this.Yt.getIterator().getNext();if(!c.has(x.field.canonicalString())){const k=s[f];if(!this.rn(x,k)||!this.sn(this.Zt[v++],k))return!1}++f}for(;f<s.length;++f)if(v>=this.Zt.length||!this.sn(this.Zt[v++],s[f]))return!1;return!0}on(){if(this.en)return null;let e=new li(Wi.comparator);const r=[];for(const s of this.Xt)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new el(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new el(s.field,0))}for(const s of this.Zt)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new el(s.field,"asc"===s.dir?0:1)));return new ta(ta.UNKNOWN_ID,this.collectionId,r,Di.empty())}nn(e){for(const r of this.Xt)if(this.rn(r,e))return!0;return!1}rn(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function qg(i){var e,r;if(er(i instanceof fi||i instanceof Pi),i instanceof fi){if(i instanceof Gc){const c=(null===(r=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(f=>fi.create(i.field,"==",f)))||[];return Pi.create(c,"or")}return i}const s=i.filters.map(c=>qg(c));return Pi.create(s,i.op)}function fI(i){if(0===i.getFilters().length)return[];const e=uf(qg(i));return er(Z_(e)),Yg(e)||Qg(e)?[e]:e.getFilters()}function Yg(i){return i instanceof fi}function Qg(i){return i instanceof Pi&&oa(i)}function Z_(i){return Yg(i)||Qg(i)||function(r){if(r instanceof Pi&&Ic(r)){for(const s of r.getFilters())if(!Yg(s)&&!Qg(s))return!1;return!0}return!1}(i)}function uf(i){if(er(i instanceof fi||i instanceof Pi),i instanceof fi)return i;if(1===i.filters.length)return uf(i.filters[0]);const e=i.filters.map(s=>uf(s));let r=Pi.create(e,i.op);return r=df(r),Z_(r)?r:(er(r instanceof Pi),er(Rl(r)),er(r.filters.length>1),r.filters.reduce((s,c)=>Pc(s,c)))}function Pc(i,e){let r;return er(i instanceof fi||i instanceof Pi),er(e instanceof fi||e instanceof Pi),r=i instanceof fi?e instanceof fi?Pi.create([i,e],"and"):yh(i,e):e instanceof fi?yh(e,i):function(c,f){if(er(c.filters.length>0&&f.filters.length>0),Rl(c)&&Rl(f))return Ec(c,f.getFilters());const v=Ic(c)?c:f,x=Ic(c)?f:c,k=v.filters.map(q=>Pc(q,x));return Pi.create(k,"or")}(i,e),df(r)}function yh(i,e){if(Rl(e))return Ec(e,i.getFilters());{const r=e.filters.map(s=>Pc(i,s));return Pi.create(r,"or")}}function df(i){if(er(i instanceof fi||i instanceof Pi),i instanceof fi)return i;const e=i.getFilters();if(1===e.length)return df(e[0]);if(Bs(i))return i;const r=e.map(c=>df(c)),s=[];return r.forEach(c=>{c instanceof fi?s.push(c):c instanceof Pi&&(c.op===i.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:Pi.create(s,i.op)}class J_{constructor(){this._n=new _p}addToCollectionParentIndex(e,r){return this._n.add(r),M.resolve()}getCollectionParents(e,r){return M.resolve(this._n.getEntries(r))}addFieldIndex(e,r){return M.resolve()}deleteFieldIndex(e,r){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,r){return M.resolve()}getDocumentsMatchingTarget(e,r){return M.resolve(null)}getIndexType(e,r){return M.resolve(0)}getFieldIndexes(e,r){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,r){return M.resolve(Go.min())}getMinOffsetFromCollectionGroup(e,r){return M.resolve(Go.min())}updateCollectionGroup(e,r,s){return M.resolve()}updateIndexEntries(e,r){return M.resolve()}}class _p{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),c=this.index[r]||new li(ti.comparator),f=!c.has(s);return this.index[r]=c.add(s),f}has(e){const r=e.lastSegment(),s=e.popLast(),c=this.index[r];return c&&c.has(s)}getEntries(e){return(this.index[e]||new li(ti.comparator)).toArray()}}const Xg=new Uint8Array(0);class Q0{constructor(e,r){this.databaseId=r,this.an=new _p,this.un=new Ol(s=>sa(s),(s,c)=>Ua(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.an.has(r)){const s=r.lastSegment(),c=r.popLast();e.addOnCommittedListener(()=>{this.an.add(r)});const f={collectionId:s,parent:io(c)};return pI(e).put(f)}return M.resolve()}getCollectionParents(e,r){const s=[],c=IDBKeyRange.bound([r,""],[ql(r),""],!1,!0);return pI(e).W(c).next(f=>{for(const v of f){if(v.collectionId!==r)break;s.push(jo(v.parent))}return s})}addFieldIndex(e,r){const s=$d(e),c={indexId:(x=r).indexId,collectionGroup:x.collectionGroup,fields:x.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var x;delete c.indexId;const f=s.add(c);if(r.indexState){const v=hf(e);return f.next(x=>{v.put(oc(x,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return f.next()}deleteFieldIndex(e,r){const s=$d(e),c=hf(e),f=rd(e);return s.delete(r.indexId).next(()=>c.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=$d(e),s=rd(e),c=hf(e);return r.H().next(()=>s.H()).next(()=>c.H())}createTargetIndexes(e,r){return M.forEach(this.cn(r),s=>this.getIndexType(e,s).next(c=>{if(0===c||1===c){const f=new hI(s).on();if(null!=f)return this.addFieldIndex(e,f)}}))}getDocumentsMatchingTarget(e,r){const s=rd(e);let c=!0;const f=new Map;return M.forEach(this.cn(r),v=>this.ln(e,v).next(x=>{c&&(c=!!x),f.set(v,x)})).next(()=>{if(c){let v=fr();const x=[];return M.forEach(f,(k,q)=>{var gr;sn("IndexedDbIndexManager",`Using index ${gr=k,`id=${gr.indexId}|cg=${gr.collectionGroup}|f=${gr.fields.map(Wr=>`${Wr.fieldPath}:${Wr.kind}`).join(",")}`} to execute ${sa(r)}`);const oe=function(gr,Wr){const Ki=El(Wr);if(void 0===Ki)return null;for(const ki of Wc(gr,Ki.fieldPath))switch(ki.op){case"array-contains-any":return ki.value.arrayValue.values||[];case"array-contains":return[ki.value]}return null}(q,k),ke=function(gr,Wr){const Ki=new Map;for(const ki of hs(Wr))for(const _s of Wc(gr,ki.fieldPath))switch(_s.op){case"==":case"in":Ki.set(ki.fieldPath.canonicalString(),_s.value);break;case"not-in":case"!=":return Ki.set(ki.fieldPath.canonicalString(),_s.value),Array.from(Ki.values())}return null}(q,k),ht=function(gr,Wr){const Ki=[];let ki=!0;for(const _s of hs(Wr)){const Ws=0===_s.kind?Wu(gr,_s.fieldPath,gr.startAt):Hc(gr,_s.fieldPath,gr.startAt);Ki.push(Ws.value),ki&&(ki=Ws.inclusive)}return new yc(Ki,ki)}(q,k),Mt=function(gr,Wr){const Ki=[];let ki=!0;for(const _s of hs(Wr)){const Ws=0===_s.kind?Hc(gr,_s.fieldPath,gr.endAt):Wu(gr,_s.fieldPath,gr.endAt);Ki.push(Ws.value),ki&&(ki=Ws.inclusive)}return new yc(Ki,ki)}(q,k),wn=this.hn(k,q,ht),Bn=this.hn(k,q,Mt),kn=this.Pn(k,q,ke),pr=this.In(k.indexId,oe,wn,ht.inclusive,Bn,Mt.inclusive,kn);return M.forEach(pr,Ur=>s.j(Ur,r.limit).next(gr=>{gr.forEach(Wr=>{const Ki=Nn.fromSegments(Wr.documentKey);v.has(Ki)||(v=v.add(Ki),x.push(Ki))})}))}).next(()=>x)}return M.resolve(null)})}cn(e){let r=this.un.get(e);return r||(r=0===e.filters.length?[e]:fI(Pi.create(e.filters,"and")).map(s=>Dc(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,r),r)}In(e,r,s,c,f,v,x){const k=(null!=r?r.length:1)*Math.max(s.length,f.length),q=k/(null!=r?r.length:1),oe=[];for(let ke=0;ke<k;++ke){const ht=r?this.Tn(r[ke/q]):Xg,Mt=this.En(e,ht,s[ke%q],c),wn=this.dn(e,ht,f[ke%q],v),Bn=x.map(kn=>this.En(e,ht,kn,!0));oe.push(...this.createRange(Mt,wn,Bn))}return oe}En(e,r,s,c){const f=new vh(e,Nn.empty(),r,s);return c?f:f.Jt()}dn(e,r,s,c){const f=new vh(e,Nn.empty(),r,s);return c?f.Jt():f}ln(e,r){const s=new hI(r),c=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,c).next(f=>{let v=null;for(const x of f)s.tn(x)&&(!v||x.fields.length>v.fields.length)&&(v=x);return v})}getIndexType(e,r){let s=2;const c=this.cn(r);return M.forEach(c,f=>this.ln(e,f).next(v=>{v?0!==s&&v.fields.length<function(k){let q=new li(Wi.comparator),oe=!1;for(const ke of k.filters)for(const ht of ke.getFlattenedFilters())ht.field.isKeyField()||("array-contains"===ht.op||"array-contains-any"===ht.op?oe=!0:q=q.add(ht.field));for(const ke of k.orderBy)ke.field.isKeyField()||(q=q.add(ke.field));return q.size+(oe?1:0)}(f)&&(s=1):s=0})).next(()=>null!==r.limit&&c.length>1&&2===s?1:s)}An(e,r){const s=new mp;for(const c of hs(e)){const f=r.data.field(c.fieldPath);if(null==f)return null;const v=s.Ht(c.kind);Ud.bt.Pt(f,v)}return s.Wt()}Tn(e){const r=new mp;return Ud.bt.Pt(e,r.Ht(0)),r.Wt()}Rn(e,r){const s=new mp;return Ud.bt.Pt(bl(this.databaseId,r),s.Ht(function(f){const v=hs(f);return 0===v.length?0:v[v.length-1].kind}(e))),s.Wt()}Pn(e,r,s){if(null===s)return[];let c=[];c.push(new mp);let f=0;for(const v of hs(e)){const x=s[f++];for(const k of c)if(this.Vn(r,v.fieldPath)&&nl(x))c=this.mn(c,v,x);else{const q=k.Ht(v.kind);Ud.bt.Pt(x,q)}}return this.fn(c)}hn(e,r,s){return this.Pn(e,r,s.position)}fn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].Wt();return r}mn(e,r,s){const c=[...e],f=[];for(const v of s.arrayValue.values||[])for(const x of c){const k=new mp;k.seed(x.Wt()),Ud.bt.Pt(v,k.Ht(r.kind)),f.push(k)}return f}Vn(e,r){return!!e.filters.find(s=>s instanceof fi&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=$d(e),c=hf(e);return(r?s.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.W()).next(f=>{const v=[];return M.forEach(f,x=>c.get([x.indexId,this.uid]).next(k=>{v.push(function(oe,ke){const ht=ke?new Di(ke.sequenceNumber,new Go(Zt(ke.readTime),new Nn(jo(ke.documentKey)),ke.largestBatchId)):Di.empty(),Mt=oe.fields.map(([wn,Bn])=>new el(Wi.fromServerFormat(wn),Bn));return new ta(oe.indexId,oe.collectionGroup,Mt,ht)}(x,k))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,c)=>{const f=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==f?f:or(s.collectionGroup,c.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const c=$d(e),f=hf(e);return this.gn(e).next(v=>c.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(x=>M.forEach(x,k=>f.put(oc(k.indexId,this.uid,v,s)))))}updateIndexEntries(e,r){const s=new Map;return M.forEach(r,(c,f)=>{const v=s.get(c.collectionGroup);return(v?M.resolve(v):this.getFieldIndexes(e,c.collectionGroup)).next(x=>(s.set(c.collectionGroup,x),M.forEach(x,k=>this.pn(e,c,k).next(q=>{const oe=this.yn(f,k);return q.isEqual(oe)?M.resolve():this.wn(e,f,k,q,oe)}))))})}Sn(e,r,s,c){return rd(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.Rn(s,r.key),documentKey:r.key.path.toArray()})}bn(e,r,s,c){return rd(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.Rn(s,r.key),r.key.path.toArray()])}pn(e,r,s){const c=rd(e);let f=new li(Bd);return c.Y({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.Rn(s,r)])},(v,x)=>{f=f.add(new vh(s.indexId,r,x.arrayValue,x.directionalValue))}).next(()=>f)}yn(e,r){let s=new li(Bd);const c=this.An(r,e);if(null==c)return s;const f=El(r);if(null!=f){const v=e.data.field(f.fieldPath);if(nl(v))for(const x of v.arrayValue.values||[])s=s.add(new vh(r.indexId,e.key,this.Tn(x),c))}else s=s.add(new vh(r.indexId,e.key,Xg,c));return s}wn(e,r,s,c,f){sn("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const v=[];return function(k,q,oe,ke,ht){const Mt=k.getIterator(),wn=q.getIterator();let Bn=Ji(Mt),kn=Ji(wn);for(;Bn||kn;){let pr=!1,Ur=!1;if(Bn&&kn){const gr=oe(Bn,kn);gr<0?Ur=!0:gr>0&&(pr=!0)}else null!=Bn?Ur=!0:pr=!0;pr?(ke(kn),kn=Ji(wn)):Ur?(ht(Bn),Bn=Ji(Mt)):(Bn=Ji(Mt),kn=Ji(wn))}}(c,f,Bd,x=>{v.push(this.Sn(e,r,s,x))},x=>{v.push(this.bn(e,r,s,x))}),M.waitFor(v)}gn(e){let r=1;return hf(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,f)=>{f.done(),r=c.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((v,x)=>Bd(v,x)).filter((v,x,k)=>!x||0!==Bd(v,k[x-1]));const c=[];c.push(e);for(const v of s){const x=Bd(v,e),k=Bd(v,r);if(0===x)c[0]=e.Jt();else if(x>0&&k<0)c.push(v),c.push(v.Jt());else if(k>0)break}c.push(r);const f=[];for(let v=0;v<c.length;v+=2){if(this.Dn(c[v],c[v+1]))return[];f.push(IDBKeyRange.bound([c[v].indexId,this.uid,c[v].arrayValue,c[v].directionalValue,Xg,[]],[c[v+1].indexId,this.uid,c[v+1].arrayValue,c[v+1].directionalValue,Xg,[]]))}return f}Dn(e,r){return Bd(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(gI)}getMinOffset(e,r){return M.mapArray(this.cn(r),s=>this.ln(e,s).next(c=>c||zn())).next(gI)}}function pI(i){return fo(i,"collectionParents")}function rd(i){return fo(i,"indexEntries")}function $d(i){return fo(i,"indexConfiguration")}function hf(i){return fo(i,"indexState")}function gI(i){er(0!==i.length);let e=i[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<i.length;s++){const c=i[s].indexState.offset;cu(c,e)<0&&(e=c),r<c.largestBatchId&&(r=c.largestBatchId)}return new Go(e.readTime,e.documentKey,r)}const Zg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ba{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ba(e,ba.DEFAULT_COLLECTION_PERCENTILE,ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ev(i,e,r){const s=i.store("mutations"),c=i.store("documentMutations"),f=[],v=IDBKeyRange.only(r.batchId);let x=0;const k=s.Y({range:v},(oe,ke,ht)=>(x++,ht.delete()));f.push(k.next(()=>{er(1===x)}));const q=[];for(const oe of r.mutations){const ke=hc(e,oe.key.path,r.batchId);f.push(c.delete(ke)),q.push(oe.key)}return M.waitFor(f).next(()=>q)}function vp(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw zn();e=i.noDocument}return JSON.stringify(e).length}ba.DEFAULT_COLLECTION_PERCENTILE=10,ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ba.DEFAULT=new ba(41943040,ba.DEFAULT_COLLECTION_PERCENTILE,ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ba.DISABLED=new ba(-1,0,0);class yp{constructor(e,r,s,c){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=c,this.Cn={}}static lt(e,r,s,c){er(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new yp(f,r,s,c)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).Y({index:"userMutationsIndex",range:s},(c,f,v)=>{r=!1,v.done()}).next(()=>r)}addMutationBatch(e,r,s,c){const f=Ih(e),v=xc(e);return v.add({}).next(x=>{er("number"==typeof x);const k=new za(x,r,s,c),q=function(Mt,wn,Bn){const kn=Bn.baseMutations.map(Ur=>td(Mt.ct,Ur)),pr=Bn.mutations.map(Ur=>td(Mt.ct,Ur));return{userId:wn,batchId:Bn.batchId,localWriteTimeMs:Bn.localWriteTime.toMillis(),baseMutations:kn,mutations:pr}}(this.serializer,this.userId,k),oe=[];let ke=new li((ht,Mt)=>or(ht.canonicalString(),Mt.canonicalString()));for(const ht of c){const Mt=hc(this.userId,ht.key.path,x);ke=ke.add(ht.key.path.popLast()),oe.push(v.put(q)),oe.push(f.put(Mt,Kh))}return ke.forEach(ht=>{oe.push(this.indexManager.addToCollectionParentIndex(e,ht))}),e.addOnCommittedListener(()=>{this.Cn[x]=k.keys()}),M.waitFor(oe).next(()=>k)})}lookupMutationBatch(e,r){return xc(e).get(r).next(s=>s?(er(s.userId===this.userId),Fn(this.serializer,s)):null)}vn(e,r){return this.Cn[r]?M.resolve(this.Cn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const c=s.keys();return this.Cn[r]=c,c}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,c=IDBKeyRange.lowerBound([this.userId,s]);let f=null;return xc(e).Y({index:"userMutationsIndex",range:c},(v,x,k)=>{x.userId===this.userId&&(er(x.batchId>=s),f=Fn(this.serializer,x)),k.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return xc(e).Y({index:"userMutationsIndex",range:r,reverse:!0},(c,f,v)=>{s=f.batchId,v.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).W("userMutationsIndex",r).next(s=>s.map(c=>Fn(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=wl(this.userId,r.path),c=IDBKeyRange.lowerBound(s),f=[];return Ih(e).Y({range:c},(v,x,k)=>{const[q,oe,ke]=v,ht=jo(oe);if(q===this.userId&&r.path.isEqual(ht))return xc(e).get(ke).next(Mt=>{if(!Mt)throw zn();er(Mt.userId===this.userId),f.push(Fn(this.serializer,Mt))});k.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new li(or);const c=[];return r.forEach(f=>{const v=wl(this.userId,f.path),x=IDBKeyRange.lowerBound(v),k=Ih(e).Y({range:x},(q,oe,ke)=>{const[ht,Mt,wn]=q,Bn=jo(Mt);ht===this.userId&&f.path.isEqual(Bn)?s=s.add(wn):ke.done()});c.push(k)}),M.waitFor(c).next(()=>this.Fn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,c=s.length+1,f=wl(this.userId,s),v=IDBKeyRange.lowerBound(f);let x=new li(or);return Ih(e).Y({range:v},(k,q,oe)=>{const[ke,ht,Mt]=k,wn=jo(ht);ke===this.userId&&s.isPrefixOf(wn)?wn.length===c&&(x=x.add(Mt)):oe.done()}).next(()=>this.Fn(e,x))}Fn(e,r){const s=[],c=[];return r.forEach(f=>{c.push(xc(e).get(f).next(v=>{if(null===v)throw zn();er(v.userId===this.userId),s.push(Fn(this.serializer,v))}))}),M.waitFor(c).next(()=>s)}removeMutationBatch(e,r){return ev(e.ae,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.Mn(r.batchId)}),M.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return M.resolve();const s=IDBKeyRange.lowerBound(function(v){return[v]}(this.userId)),c=[];return Ih(e).Y({range:s},(f,v,x)=>{if(f[0]===this.userId){const k=jo(f[1]);c.push(k)}else x.done()}).next(()=>{er(0===c.length)})})}containsKey(e,r){return Jg(e,this.userId,r)}xn(e){return Ip(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Jg(i,e,r){const s=wl(e,r.path),c=s[1],f=IDBKeyRange.lowerBound(s);let v=!1;return Ih(i).Y({range:f,J:!0},(x,k,q)=>{const[oe,ke,ht]=x;oe===e&&ke===c&&(v=!0),q.done()}).next(()=>v)}function xc(i){return fo(i,"mutations")}function Ih(i){return fo(i,"documentMutations")}function Ip(i){return fo(i,"mutationQueues")}class Gd{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Gd(0)}static Bn(){return new Gd(-1)}}class Eh{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.Ln(e).next(r=>{const s=new Gd(r.highestTargetId);return r.highestTargetId=s.next(),this.kn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(r=>ir.fromTimestamp(new ro(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.Ln(e).next(c=>(c.highestListenSequenceNumber=r,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),r>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=r),this.kn(e,c)))}addTargetData(e,r){return this.qn(e,r).next(()=>this.Ln(e).next(s=>(s.targetCount+=1,this.Qn(r,s),this.kn(e,s))))}updateTargetData(e,r){return this.qn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Ch(e).delete(r.targetId)).next(()=>this.Ln(e)).next(s=>(er(s.targetCount>0),s.targetCount-=1,this.kn(e,s)))}removeTargets(e,r,s){let c=0;const f=[];return Ch(e).Y((v,x)=>{const k=lr(x);k.sequenceNumber<=r&&null===s.get(k.targetId)&&(c++,f.push(this.removeTargetData(e,k)))}).next(()=>M.waitFor(f)).next(()=>c)}forEachTarget(e,r){return Ch(e).Y((s,c)=>{const f=lr(c);r(f)})}Ln(e){return tv(e).get("targetGlobalKey").next(r=>(er(null!==r),r))}kn(e,r){return tv(e).put("targetGlobalKey",r)}qn(e,r){return Ch(e).put(Oi(this.serializer,r))}Qn(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Ln(e).next(r=>r.targetCount)}getTargetData(e,r){const s=sa(r),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let f=null;return Ch(e).Y({range:c,index:"queryTargetsIndex"},(v,x,k)=>{const q=lr(x);Ua(r,q.target)&&(f=q,k.done())}).next(()=>f)}addMatchingKeys(e,r,s){const c=[],f=Su(e);return r.forEach(v=>{const x=io(v.path);c.push(f.put({targetId:s,path:x})),c.push(this.referenceDelegate.addReference(e,s,v))}),M.waitFor(c)}removeMatchingKeys(e,r,s){const c=Su(e);return M.forEach(r,f=>{const v=io(f.path);return M.waitFor([c.delete([s,v]),this.referenceDelegate.removeReference(e,s,f)])})}removeMatchingKeysForTargetId(e,r){const s=Su(e),c=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),c=Su(e);let f=fr();return c.Y({range:s,J:!0},(v,x,k)=>{const q=jo(v[1]),oe=new Nn(q);f=f.add(oe)}).next(()=>f)}containsKey(e,r){const s=io(r.path),c=IDBKeyRange.bound([s],[ql(s)],!1,!0);let f=0;return Su(e).Y({index:"documentTargetsIndex",J:!0,range:c},([v,x],k,q)=>{0!==v&&(f++,q.done())}).next(()=>f>0)}_t(e,r){return Ch(e).get(r).next(s=>s?lr(s):null)}}function Ch(i){return fo(i,"targets")}function tv(i){return fo(i,"targetGlobal")}function Su(i){return fo(i,"targetDocuments")}function em([i,e],[r,s]){const c=or(i,r);return 0===c?or(e,s):c}class mI{constructor(e){this.Kn=e,this.buffer=new li(em),this.$n=0}Un(){return++this.$n}Wn(e){const r=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();em(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class nv{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var r=this;sn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.c)(function*(){r.Gn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){mt(s)?sn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield w(s)}yield r.zn(3e5)}))}}class _I{constructor(e,r){this.jn=e,this.params=r}calculateTargetCount(e,r){return this.jn.Hn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return M.resolve(Bi._e);const s=new mI(r);return this.jn.forEachTarget(e,c=>s.Wn(c.sequenceNumber)).next(()=>this.jn.Jn(e,c=>s.Wn(c))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Zg)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zg):this.Yn(e,r))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,r){let s,c,f,v,x,k,q;const oe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ke=>(ke>this.params.maximumSequenceNumbersToCollect?(sn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ke}`),c=this.params.maximumSequenceNumbersToCollect):c=ke,v=Date.now(),this.nthSequenceNumber(e,c))).next(ke=>(s=ke,x=Date.now(),this.removeTargets(e,s,r))).next(ke=>(f=ke,k=Date.now(),this.removeOrphanedDocuments(e,s))).next(ke=>(q=Date.now(),mo()<=at.Ge.DEBUG&&sn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-oe}ms\n\tDetermined least recently used ${c} in `+(x-v)+`ms\n\tRemoved ${f} targets in `+(k-x)+`ms\n\tRemoved ${ke} documents in `+(q-k)+`ms\nTotal Duration: ${q-oe}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:ke})))}}class iv{constructor(e,r){this.db=e,this.garbageCollector=function rv(i,e){return new _I(i,e)}(this,r)}Hn(e){const r=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(c=>s+c))}Zn(e){let r=0;return this.Jn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Jn(e,r){return this.Xn(e,(s,c)=>r(c))}addReference(e,r,s){return tm(e,s)}removeReference(e,r,s){return tm(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return tm(e,r)}er(e,r){return function(c,f){let v=!1;return Ip(c).Z(x=>Jg(c,x,f).next(k=>(k&&(v=!0),M.resolve(!k)))).next(()=>v)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let f=0;return this.Xn(e,(v,x)=>{if(x<=r){const k=this.er(e,v).next(q=>{if(!q)return f++,s.getEntry(e,v).next(()=>(s.removeEntry(v,ir.min()),Su(e).delete([0,io(v.path)])))});c.push(k)}}).next(()=>M.waitFor(c)).next(()=>s.apply(e)).next(()=>f)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return tm(e,r)}Xn(e,r){const s=Su(e);let c,f=Bi._e;return s.Y({index:"documentTargetsIndex"},([v,x],{path:k,sequenceNumber:q})=>{0===v?(f!==Bi._e&&r(new Nn(jo(c)),f),f=q,c=k):f=Bi._e}).next(()=>{f!==Bi._e&&r(new Nn(jo(c)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tm(i,e){return Su(i).put((c=i.currentSequenceNumber,{targetId:0,path:io(e.path),sequenceNumber:c}));var c}class vI{constructor(){this.changes=new Ol(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,zi.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?M.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ff{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return id(e).put(s)}removeEntry(e,r,s){return id(e).delete(function(f,v){const x=f.path.toArray();return[x.slice(0,x.length-2),x[x.length-2],Vt(v),x[x.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.tr(e,s)))}getEntry(e,r){let s=zi.newInvalidDocument(r);return id(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(pf(r))},(c,f)=>{s=this.nr(r,f)}).next(()=>s)}rr(e,r){let s={size:0,document:zi.newInvalidDocument(r)};return id(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(pf(r))},(c,f)=>{s={document:this.nr(r,f),size:vp(f)}}).next(()=>s)}getEntries(e,r){let s=wo();return this.ir(e,r,(c,f)=>{const v=this.nr(c,f);s=s.insert(c,v)}).next(()=>s)}sr(e,r){let s=wo(),c=new Hi(Nn.comparator);return this.ir(e,r,(f,v)=>{const x=this.nr(f,v);s=s.insert(f,x),c=c.insert(f,vp(v))}).next(()=>({documents:s,_r:c}))}ir(e,r,s){if(r.isEmpty())return M.resolve();let c=new li(lv);r.forEach(k=>c=c.add(k));const f=IDBKeyRange.bound(pf(c.first()),pf(c.last())),v=c.getIterator();let x=v.getNext();return id(e).Y({index:"documentKeyIndex",range:f},(k,q,oe)=>{const ke=Nn.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;x&&lv(x,ke)<0;)s(x,null),x=v.getNext();x&&x.isEqual(ke)&&(s(x,q),x=v.hasNext()?v.getNext():null),x?oe.U(pf(x)):oe.done()}).next(()=>{for(;x;)s(x,null),x=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,r,s,c,f){const v=r.path,x=[v.popLast().toArray(),v.lastSegment(),Vt(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],k=[v.popLast().toArray(),v.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return id(e).W(IDBKeyRange.bound(x,k,!0)).next(q=>{null==f||f.incrementDocumentReadCount(q.length);let oe=wo();for(const ke of q){const ht=this.nr(Nn.fromSegments(ke.prefixPath.concat(ke.collectionGroup,ke.documentId)),ke);ht.isFoundDocument()&&(Gs(r,ht)||c.has(ht.key))&&(oe=oe.insert(ht.key,ht))}return oe})}getAllFromCollectionGroup(e,r,s,c){let f=wo();const v=av(r,s),x=av(r,Go.max());return id(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,x,!0)},(k,q,oe)=>{const ke=this.nr(Nn.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);f=f.insert(ke.key,ke),f.size===c&&oe.done()}).next(()=>f)}newChangeBuffer(e){return new yI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return sv(e).get("remoteDocumentGlobalKey").next(r=>(er(!!r),r))}tr(e,r){return sv(e).put("remoteDocumentGlobalKey",r)}nr(e,r){if(r){const s=function xe(i,e){let r;if(e.document)r=Ld(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Nn.fromSegments(e.noDocument.path),c=Zt(e.noDocument.readTime);r=zi.newNoDocument(s,c),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return zn();{const s=Nn.fromSegments(e.unknownDocument.path),c=Zt(e.unknownDocument.version);r=zi.newUnknownDocument(s,c)}}return e.readTime&&r.setReadTime(function(c){const f=new ro(c[0],c[1]);return ir.fromTimestamp(f)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(ir.min()))return s}return zi.newInvalidDocument(e)}}function ov(i){return new ff(i)}class yI extends vI{constructor(e,r){super(),this.ar=e,this.trackRemovals=r,this.ur=new Ol(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const r=[];let s=0,c=new li((f,v)=>or(f.canonicalString(),v.canonicalString()));return this.changes.forEach((f,v)=>{const x=this.ur.get(f);if(r.push(this.ar.removeEntry(e,f,x.readTime)),v.isValidDocument()){const k=Ze(this.ar.serializer,v);c=c.add(f.path.popLast());const q=vp(k);s+=q-x.size,r.push(this.ar.addEntry(e,f,k))}else if(s-=x.size,this.trackRemovals){const k=Ze(this.ar.serializer,v.convertToNoDocument(ir.min()));r.push(this.ar.addEntry(e,f,k))}}),c.forEach(f=>{r.push(this.ar.indexManager.addToCollectionParentIndex(e,f))}),r.push(this.ar.updateMetadata(e,s)),M.waitFor(r)}getFromCache(e,r){return this.ar.rr(e,r).next(s=>(this.ur.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.ar.sr(e,r).next(({documents:s,_r:c})=>(c.forEach((f,v)=>{this.ur.set(f,{size:v,readTime:s.get(f).readTime})}),s))}}function sv(i){return fo(i,"remoteDocumentGlobal")}function id(i){return fo(i,"remoteDocumentsV14")}function pf(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function av(i,e){const r=e.documentKey.path.toArray();return[i,Vt(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function lv(i,e){const r=i.path.toArray(),s=e.path.toArray();let c=0;for(let f=0;f<r.length-2&&f<s.length-2;++f)if(c=or(r[f],s[f]),c)return c;return c=or(r.length,s.length),c||(c=or(r[r.length-2],s[s.length-2]),c||or(r[r.length-1],s[s.length-1]))}class II{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Ep{constructor(e,r,s,c){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,r))).next(c=>(null!==s&&Ul(s.mutation,c,ts.empty(),ro.now()),c))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,fr()).next(()=>s))}getLocalViewOfDocuments(e,r,s=fr()){const c=la();return this.populateOverlays(e,c,r).next(()=>this.computeViews(e,r,c,s).next(f=>{let v=kl();return f.forEach((x,k)=>{v=v.insert(x,k.overlayedDocument)}),v}))}getOverlayedDocuments(e,r){const s=la();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,fr()))}populateOverlays(e,r,s){const c=[];return s.forEach(f=>{r.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((v,x)=>{r.set(v,x)})})}computeViews(e,r,s,c){let f=wo();const v=il(),x=il();return r.forEach((k,q)=>{const oe=s.get(q.key);c.has(q.key)&&(void 0===oe||oe.mutation instanceof ol)?f=f.insert(q.key,q):void 0!==oe?(v.set(q.key,oe.mutation.getFieldMask()),Ul(oe.mutation,q,oe.mutation.getFieldMask(),ro.now())):v.set(q.key,ts.empty())}),this.recalculateAndSaveOverlays(e,f).next(k=>(k.forEach((q,oe)=>v.set(q,oe)),r.forEach((q,oe)=>{var ke;return x.set(q,new II(oe,null!==(ke=v.get(q))&&void 0!==ke?ke:null))}),x))}recalculateAndSaveOverlays(e,r){const s=il();let c=new Hi((v,x)=>v-x),f=fr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(v=>{for(const x of v)x.keys().forEach(k=>{const q=r.get(k);if(null===q)return;let oe=s.get(k)||ts.empty();oe=x.applyToLocalView(q,oe),s.set(k,oe);const ke=(c.get(x.batchId)||fr()).add(k);c=c.insert(x.batchId,ke)})}).next(()=>{const v=[],x=c.getReverseIterator();for(;x.hasNext();){const k=x.getNext(),q=k.key,oe=k.value,ke=Ku();oe.forEach(ht=>{if(!f.has(ht)){const Mt=ja(r.get(ht),s.get(ht));null!==Mt&&ke.set(ht,Mt),f=f.add(ht)}}),v.push(this.documentOverlayCache.saveOverlays(e,q,ke))}return M.waitFor(v)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,c){return Nn.isDocumentKey((v=r).path)&&null===v.collectionGroup&&0===v.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Ba(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,c):this.getDocumentsMatchingCollectionQuery(e,r,s,c);var v}getNextDocuments(e,r,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,c).next(f=>{const v=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,c-f.size):M.resolve(la());let x=-1,k=f;return v.next(q=>M.forEach(q,(oe,ke)=>(x<ke.largestBatchId&&(x=ke.largestBatchId),f.get(oe)?M.resolve():this.remoteDocumentCache.getEntry(e,oe).next(ht=>{k=k.insert(oe,ht)}))).next(()=>this.populateOverlays(e,q,f)).next(()=>this.computeViews(e,k,q,fr())).next(oe=>({batchId:x,changes:zu(oe)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Nn(r)).next(s=>{let c=kl();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,r,s,c){const f=r.collectionGroup;let v=kl();return this.indexManager.getCollectionParents(e,f).next(x=>M.forEach(x,k=>{const q=(ke=r,ht=k.child(f),new rl(ht,null,ke.explicitOrderBy.slice(),ke.filters.slice(),ke.limit,ke.limitType,ke.startAt,ke.endAt));var ke,ht;return this.getDocumentsMatchingCollectionQuery(e,q,s,c).next(oe=>{oe.forEach((ke,ht)=>{v=v.insert(ke,ht)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(e,r,s,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(v=>(f=v,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,f,c))).next(v=>{f.forEach((k,q)=>{const oe=q.getKey();null===v.get(oe)&&(v=v.insert(oe,zi.newInvalidDocument(oe)))});let x=kl();return v.forEach((k,q)=>{const oe=f.get(k);void 0!==oe&&Ul(oe.mutation,q,ts.empty(),ro.now()),Gs(r,q)&&(x=x.insert(k,q))}),x})}}class EI{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,r){return M.resolve(this.cr.get(r))}saveBundleMetadata(e,r){return this.cr.set(r.id,{id:(c=r).id,version:c.version,createTime:Ni(c.createTime)}),M.resolve();var c}getNamedQuery(e,r){return M.resolve(this.lr.get(r))}saveNamedQuery(e,r){return this.lr.set(r.name,{name:(c=r).name,query:ns(c.bundledQuery),readTime:Ni(c.readTime)}),M.resolve();var c}}class CI{constructor(){this.overlays=new Hi(Nn.comparator),this.hr=new Map}getOverlay(e,r){return M.resolve(this.overlays.get(r))}getOverlays(e,r){const s=la();return M.forEach(r,c=>this.getOverlay(e,c).next(f=>{null!==f&&s.set(c,f)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((c,f)=>{this.ht(e,r,f)}),M.resolve()}removeOverlaysForBatchId(e,r,s){const c=this.hr.get(s);return void 0!==c&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.hr.delete(s)),M.resolve()}getOverlaysForCollection(e,r,s){const c=la(),f=r.length+1,v=new Nn(r.child("")),x=this.overlays.getIteratorFrom(v);for(;x.hasNext();){const k=x.getNext().value,q=k.getKey();if(!r.isPrefixOf(q.path))break;q.path.length===f&&k.largestBatchId>s&&c.set(k.getKey(),k)}return M.resolve(c)}getOverlaysForCollectionGroup(e,r,s,c){let f=new Hi((q,oe)=>q-oe);const v=this.overlays.getIterator();for(;v.hasNext();){const q=v.getNext().value;if(q.getKey().getCollectionGroup()===r&&q.largestBatchId>s){let oe=f.get(q.largestBatchId);null===oe&&(oe=la(),f=f.insert(q.largestBatchId,oe)),oe.set(q.getKey(),q)}}const x=la(),k=f.getIterator();for(;k.hasNext()&&(k.getNext().value.forEach((q,oe)=>x.set(q,oe)),!(x.size()>=c)););return M.resolve(x)}ht(e,r,s){const c=this.overlays.get(s.key);if(null!==c){const v=this.hr.get(c.largestBatchId).delete(s.key);this.hr.set(c.largestBatchId,v)}this.overlays=this.overlays.insert(s.key,new Nd(r,s));let f=this.hr.get(r);void 0===f&&(f=fr(),this.hr.set(r,f)),this.hr.set(r,f.add(s.key))}}class nm{constructor(){this.Pr=new li(Ps.Ir),this.Tr=new li(Ps.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,r){const s=new Ps(e,r);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Ar(new Ps(e,r))}Rr(e,r){e.forEach(s=>this.removeReference(s,r))}Vr(e){const r=new Nn(new ti([])),s=new Ps(r,e),c=new Ps(r,e+1),f=[];return this.Tr.forEachInRange([s,c],v=>{this.Ar(v),f.push(v.key)}),f}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const r=new Nn(new ti([])),s=new Ps(r,e),c=new Ps(r,e+1);let f=fr();return this.Tr.forEachInRange([s,c],v=>{f=f.add(v.key)}),f}containsKey(e){const r=new Ps(e,0),s=this.Pr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class Ps{constructor(e,r){this.key=e,this.pr=r}static Ir(e,r){return Nn.comparator(e.key,r.key)||or(e.pr,r.pr)}static Er(e,r){return or(e.pr,r.pr)||Nn.comparator(e.key,r.key)}}class wI{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.yr=1,this.wr=new li(Ps.Ir)}checkEmpty(e){return M.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,c){const f=this.yr;this.yr++;const v=new za(f,r,s,c);this.mutationQueue.push(v);for(const x of c)this.wr=this.wr.add(new Ps(x.key,f)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return M.resolve(v)}lookupMutationBatch(e,r){return M.resolve(this.Sr(r))}getNextMutationBatchAfterBatchId(e,r){const c=this.br(r+1),f=c<0?0:c;return M.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new Ps(r,0),c=new Ps(r,Number.POSITIVE_INFINITY),f=[];return this.wr.forEachInRange([s,c],v=>{const x=this.Sr(v.pr);f.push(x)}),M.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new li(or);return r.forEach(c=>{const f=new Ps(c,0),v=new Ps(c,Number.POSITIVE_INFINITY);this.wr.forEachInRange([f,v],x=>{s=s.add(x.pr)})}),M.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,c=s.length+1;let f=s;Nn.isDocumentKey(f)||(f=f.child(""));const v=new Ps(new Nn(f),0);let x=new li(or);return this.wr.forEachWhile(k=>{const q=k.key.path;return!!s.isPrefixOf(q)&&(q.length===c&&(x=x.add(k.pr)),!0)},v),M.resolve(this.Dr(x))}Dr(e){const r=[];return e.forEach(s=>{const c=this.Sr(s);null!==c&&r.push(c)}),r}removeMutationBatch(e,r){er(0===this.Cr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.wr;return M.forEach(r.mutations,c=>{const f=new Ps(c.key,r.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,r){const s=new Ps(r,0),c=this.wr.firstAfterOrEqual(s);return M.resolve(r.isEqual(c&&c.key))}performConsistencyCheck(e){return M.resolve()}Cr(e,r){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const r=this.br(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class DI{constructor(e){this.vr=e,this.docs=new Hi(Nn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,c=this.docs.get(s),f=c?c.size:0,v=this.vr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:v}),this.size+=v-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return M.resolve(s?s.document.mutableCopy():zi.newInvalidDocument(r))}getEntries(e,r){let s=wo();return r.forEach(c=>{const f=this.docs.get(c);s=s.insert(c,f?f.document.mutableCopy():zi.newInvalidDocument(c))}),M.resolve(s)}getDocumentsMatchingQuery(e,r,s,c){let f=wo();const v=r.path,x=new Nn(v.child("")),k=this.docs.getIteratorFrom(x);for(;k.hasNext();){const{key:q,value:{document:oe}}=k.getNext();if(!v.isPrefixOf(q.path))break;q.path.length>v.length+1||cu(Yl(oe),s)<=0||(c.has(oe.key)||Gs(r,oe))&&(f=f.insert(oe.key,oe.mutableCopy()))}return M.resolve(f)}getAllFromCollectionGroup(e,r,s,c){zn()}Fr(e,r){return M.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new ll(this)}getSize(e){return M.resolve(this.size)}}class ll extends vI{constructor(e){super(),this.ar=e}applyChanges(e){const r=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?r.push(this.ar.addEntry(e,c)):this.ar.removeEntry(s)}),M.waitFor(r)}getFromCache(e,r){return this.ar.getEntry(e,r)}getAllFromCache(e,r){return this.ar.getEntries(e,r)}}class rm{constructor(e){this.persistence=e,this.Mr=new Ol(r=>sa(r),Ua),this.lastRemoteSnapshotVersion=ir.min(),this.highestTargetId=0,this.Or=0,this.Nr=new nm,this.targetCount=0,this.Br=Gd.Nn()}forEachTarget(e,r){return this.Mr.forEach((s,c)=>r(c)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Or&&(this.Or=r),M.resolve()}qn(e){this.Mr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Br=new Gd(r),this.highestTargetId=r),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,r){return this.qn(r),this.targetCount+=1,M.resolve()}updateTargetData(e,r){return this.qn(r),M.resolve()}removeTargetData(e,r){return this.Mr.delete(r.target),this.Nr.Vr(r.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,r,s){let c=0;const f=[];return this.Mr.forEach((v,x)=>{x.sequenceNumber<=r&&null===s.get(x.targetId)&&(this.Mr.delete(v),f.push(this.removeMatchingKeysForTargetId(e,x.targetId)),c++)}),M.waitFor(f).next(()=>c)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,r){const s=this.Mr.get(r)||null;return M.resolve(s)}addMatchingKeys(e,r,s){return this.Nr.dr(r,s),M.resolve()}removeMatchingKeys(e,r,s){this.Nr.Rr(r,s);const c=this.persistence.referenceDelegate,f=[];return c&&r.forEach(v=>{f.push(c.markPotentiallyOrphaned(e,v))}),M.waitFor(f)}removeMatchingKeysForTargetId(e,r){return this.Nr.Vr(r),M.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Nr.gr(r);return M.resolve(s)}containsKey(e,r){return M.resolve(this.Nr.containsKey(r))}}class Cp{constructor(e,r){this.Lr={},this.overlays={},this.kr=new Bi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new rm(this),this.indexManager=new J_,this.remoteDocumentCache=new DI(s=>this.referenceDelegate.Kr(s)),this.serializer=new de(r),this.$r=new EI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new CI,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.Lr[e.toKey()];return s||(s=new wI(r,this.referenceDelegate),this.Lr[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,r,s){sn("MemoryPersistence","Starting transaction:",e);const c=new im(this.kr.next());return this.referenceDelegate.Ur(),s(c).next(f=>this.referenceDelegate.Wr(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}Gr(e,r){return M.or(Object.values(this.Lr).map(s=>()=>s.containsKey(e,r)))}}class im extends ku{constructor(e){super(),this.currentSequenceNumber=e}}class xs{constructor(e){this.persistence=e,this.zr=new nm,this.jr=null}static Hr(e){return new xs(e)}get Jr(){if(this.jr)return this.jr;throw zn()}addReference(e,r,s){return this.zr.addReference(s,r),this.Jr.delete(s.toString()),M.resolve()}removeReference(e,r,s){return this.zr.removeReference(s,r),this.Jr.add(s.toString()),M.resolve()}markPotentiallyOrphaned(e,r){return this.Jr.add(r.toString()),M.resolve()}removeTarget(e,r){this.zr.Vr(r.targetId).forEach(c=>this.Jr.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(c=>{c.forEach(f=>this.Jr.add(f.toString()))}).next(()=>s.removeTargetData(e,r))}Ur(){this.jr=new Set}Wr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,s=>{const c=Nn.fromPath(s);return this.Yr(e,c).next(f=>{f||r.removeEntry(c,ir.min())})}).next(()=>(this.jr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Yr(e,r).next(s=>{s?this.Jr.delete(r.toString()):this.Jr.add(r.toString())})}Kr(e){return 0}Yr(e,r){return M.or([()=>M.resolve(this.zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Gr(e,r)])}}class cv{constructor(e){this.serializer=e}N(e,r,s,c){const f=new R("createOrUpgrade",r);var k;s<1&&c>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lc,{unique:!0}),k.createObjectStore("documentMutations"),om(e),function(k){k.createObjectStore("remoteDocuments")}(e));let v=M.resolve();return s<3&&c>=3&&(0!==s&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),om(e)),v=v.next(()=>function(k){const q=k.store("targetGlobal"),oe={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ir.min().toTimestamp(),targetCount:0};return q.put("targetGlobalKey",oe)}(f))),s<4&&c>=4&&(0!==s&&(v=v.next(()=>function(k,q){return q.store("mutations").W().next(oe=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lc,{unique:!0});const ke=q.store("mutations"),ht=oe.map(Mt=>ke.put(Mt));return M.waitFor(ht)})}(e,f))),v=v.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(v=v.next(()=>this.Xr(f))),s<6&&c>=6&&(v=v.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.ei(f)))),s<7&&c>=7&&(v=v.next(()=>this.ti(f))),s<8&&c>=8&&(v=v.next(()=>this.ni(e,f))),s<9&&c>=9&&(v=v.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(v=v.next(()=>this.ri(f))),s<11&&c>=11&&(v=v.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(v=v.next(()=>{!function(k){const q=k.createObjectStore("documentOverlays",{keyPath:gc});q.createIndex("collectionPathOverlayIndex",Vc,{unique:!1}),q.createIndex("collectionGroupOverlayIndex",lh,{unique:!1})}(e)})),s<13&&c>=13&&(v=v.next(()=>function(k){const q=k.createObjectStore("remoteDocumentsV14",{keyPath:Dd});q.createIndex("documentKeyIndex",fc),q.createIndex("collectionGroupIndex",uu)}(e)).next(()=>this.ii(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(v=v.next(()=>this.si(e,f))),s<15&&c>=15&&(v=v.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:pc}).createIndex("sequenceNumberIndex",qh,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:ap}).createIndex("documentKeyIndex",Yh,{unique:!1})}(e))),v}ei(e){let r=0;return e.store("remoteDocuments").Y((s,c)=>{r+=vp(c)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Xr(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.W().next(c=>M.forEach(c,f=>{const v=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",v).next(x=>M.forEach(x,k=>{er(k.userId===f.userId);const q=Fn(this.serializer,k);return ev(e,f.userId,q).next(()=>{})}))}))}ti(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const f=[];return s.Y((v,x)=>{const k=new ti(v),q=[0,io(k)];f.push(r.get(q).next(oe=>oe?M.resolve():r.put({targetId:0,path:io(k),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>M.waitFor(f))})}ni(e,r){e.createObjectStore("collectionParents",{keyPath:Fc});const s=r.store("collectionParents"),c=new _p,f=v=>{if(c.add(v)){const x=v.lastSegment(),k=v.popLast();return s.put({collectionId:x,parent:io(k)})}};return r.store("remoteDocuments").Y({J:!0},(v,x)=>{const k=new ti(v);return f(k.popLast())}).next(()=>r.store("documentMutations").Y({J:!0},([v,x,k],q)=>{const oe=jo(x);return f(oe.popLast())}))}ri(e){const r=e.store("targets");return r.Y((s,c)=>{const f=lr(c),v=Oi(this.serializer,f);return r.put(v)})}ii(e,r){const s=r.store("remoteDocuments"),c=[];return s.Y((f,v)=>{const x=r.store("remoteDocumentsV14"),k=(ke=v,ke.document?new Nn(ti.fromString(ke.document.name).popFirst(5)):ke.noDocument?Nn.fromSegments(ke.noDocument.path):ke.unknownDocument?Nn.fromSegments(ke.unknownDocument.path):zn()).path.toArray(),q={prefixPath:k.slice(0,k.length-2),collectionGroup:k[k.length-2],documentId:k[k.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};var ke;c.push(x.put(q))}).next(()=>M.waitFor(c))}si(e,r){const s=r.store("mutations"),c=ov(this.serializer),f=new Cp(xs.Hr,this.serializer.ct);return s.W().next(v=>{const x=new Map;return v.forEach(k=>{var q;let oe=null!==(q=x.get(k.userId))&&void 0!==q?q:fr();Fn(this.serializer,k).keys().forEach(ke=>oe=oe.add(ke)),x.set(k.userId,oe)}),M.forEach(x,(k,q)=>{const oe=new Mi(q),ke=gp.lt(this.serializer,oe),ht=f.getIndexManager(oe),Mt=yp.lt(oe,this.serializer,ht,f.referenceDelegate);return new Ep(c,Mt,ke,ht).recalculateAndSaveOverlaysForDocumentKeys(new Dl(r,Bi._e),k).next()})})}}function om(i){i.createObjectStore("targetDocuments",{keyPath:Dr}).createIndex("documentTargetsIndex",ui,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",du,{unique:!0}),i.createObjectStore("targetGlobal")}const sm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wp{constructor(e,r,s,c,f,v,x,k,q,oe,ke=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.oi=f,this.window=v,this.document=x,this._i=q,this.ai=oe,this.ui=ke,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=ht=>Promise.resolve(),!wp.D())throw new rn(Ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iv(this,c),this.Ti=r+"main",this.serializer=new de(k),this.Ei=new U(this.Ti,this.ui,new cv(this.serializer)),this.Qr=new Eh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ov(this.serializer),this.$r=new Vd,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===oe&&Gi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new rn(Ot.FAILED_PRECONDITION,sm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Bi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var r=this;return this.Ii=function(){var s=(0,ve.c)(function*(c){if(r.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var r=(0,ve.c)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ve.c)(function*(){r.started&&(yield r.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(r=>{r||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(r=>this.isPrimary&&!r?this.yi(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(mt(e))return sn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return sn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return gf(e).get("owner").next(r=>M.resolve(this.Si(r)))}bi(e){return mf(e).delete(this.clientId)}Di(){var e=this;return(0,ve.c)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=fo(s,"clientMetadata");return c.W().next(f=>{const v=e.vi(f,18e5),x=f.filter(k=>-1===v.indexOf(k));return M.forEach(x,k=>c.delete(k.clientId)).next(()=>x)})}).catch(()=>[]);if(e.di)for(const s of r)e.di.removeItem(e.Fi(s.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):gf(e).get("owner").next(r=>{if(null!==r&&this.Ci(r.leaseTimestampMs,5e3)&&!this.Mi(r.ownerId)){if(this.Si(r)&&this.networkEnabled)return!0;if(!this.Si(r)){if(!r.allowTabSynchronization)throw new rn(Ot.FAILED_PRECONDITION,sm);return!1}}return!(!this.networkEnabled||!this.inForeground)||mf(e).W().next(s=>void 0===this.vi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(r=>(this.isPrimary!==r&&sn("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,ve.c)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new Dl(r,Bi._e);return e.yi(s).next(()=>e.bi(s))}),e.Ei.close(),e.Bi()})()}vi(e,r){return e.filter(s=>this.Ci(s.updateTimeMs,r)&&!this.Mi(s.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>mf(e).W().next(r=>this.vi(r,18e5).map(s=>s.clientId)))}get started(){return this.qr}getMutationQueue(e,r){return yp.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Q0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gp.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,r,s){sn("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===r?"readonly":"readwrite",f=15===(k=this.ui)?mc:14===k?Fu:13===k?Qh:12===k?Lu:11===k?ps:void zn();var k;let v;return this.Ei.runTransaction(e,c,f,x=>(v=new Dl(x,this.kr?this.kr.next():Bi._e),"readwrite-primary"===r?this.gi(v).next(k=>!!k||this.pi(v)).next(k=>{if(!k)throw Gi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new rn(Ot.FAILED_PRECONDITION,Ou);return s(v)}).next(k=>this.wi(v).next(()=>k)):this.ki(v).next(()=>s(v)))).then(x=>(v.raiseOnCommittedEvent(),x))}ki(e){return gf(e).get("owner").next(r=>{if(null!==r&&this.Ci(r.leaseTimestampMs,5e3)&&!this.Mi(r.ownerId)&&!this.Si(r)&&!(this.ai||this.allowTabSynchronization&&r.allowTabSynchronization))throw new rn(Ot.FAILED_PRECONDITION,sm)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gf(e).put("owner",r)}static D(){return U.D()}yi(e){const r=gf(e);return r.get("owner").next(s=>this.Si(s)?(sn("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):M.resolve())}Ci(e,r){const s=Date.now();return!(e<s-r||e>s&&(Gi(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const r=/(?:Version|Mobile)\/1[456]/;(0,ae.qk)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var r;try{const s=null!==(null===(r=this.di)||void 0===r?void 0:r.getItem(this.Fi(e)));return sn("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Gi("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Gi("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gf(i){return fo(i,"owner")}function mf(i){return fo(i,"clientMetadata")}function am(i,e){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+e+"/"+r+"/"}class Dp{constructor(e,r,s,c){this.targetId=e,this.fromCache=r,this.qi=s,this.Qi=c}static Ki(e,r){let s=fr(),c=fr();for(const f of r.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new Dp(e,r.fromCache,s,c)}}class TI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uv{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,ae.qk)()?8:U.v((0,ae.Su)())>0?6:4}initialize(e,r){this.zi=e,this.indexManager=r,this.$i=!0}getDocumentsMatchingQuery(e,r,s,c){const f={result:null};return this.ji(e,r).next(v=>{f.result=v}).next(()=>{if(!f.result)return this.Hi(e,r,c,s).next(v=>{f.result=v})}).next(()=>{if(f.result)return;const v=new TI;return this.Ji(e,r,v).next(x=>{if(f.result=x,this.Ui)return this.Yi(e,r,v,x.size)})}).next(()=>f.result)}Yi(e,r,s,c){return s.documentReadCount<this.Wi?(mo()<=at.Ge.DEBUG&&sn("QueryEngine","SDK will not create cache indexes for query:",$a(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(mo()<=at.Ge.DEBUG&&sn("QueryEngine","Query:",$a(r),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.Gi*c?(mo()<=at.Ge.DEBUG&&sn("QueryEngine","The SDK decides to create cache indexes for query:",$a(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(r))):M.resolve())}ji(e,r){if(Jl(r))return M.resolve(null);let s=xi(r);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==r.limit&&1===c&&(r=ec(r,null,"F"),s=xi(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(f=>{const v=fr(...f);return this.zi.getDocuments(e,v).next(x=>this.indexManager.getMinOffset(e,s).next(k=>{const q=this.Zi(r,x);return this.Xi(r,q,v,k.readTime)?this.ji(e,ec(r,null,"F")):this.es(e,q,r,k)}))})))}Hi(e,r,s,c){return Jl(r)||c.isEqual(ir.min())?M.resolve(null):this.zi.getDocuments(e,s).next(f=>{const v=this.Zi(r,f);return this.Xi(r,v,s,c)?M.resolve(null):(mo()<=at.Ge.DEBUG&&sn("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),$a(r)),this.es(e,v,r,Nu(c,-1)).next(x=>x))})}Zi(e,r){let s=new li(Kc(e));return r.forEach((c,f)=>{Gs(e,f)&&(s=s.add(f))}),s}Xi(e,r,s,c){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const f="F"===e.limitType?r.last():r.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}Ji(e,r,s){return mo()<=at.Ge.DEBUG&&sn("QueryEngine","Using full collection scan to execute query:",$a(r)),this.zi.getDocumentsMatchingQuery(e,r,Go.min(),s)}es(e,r,s,c){return this.zi.getDocumentsMatchingQuery(e,s,c).next(f=>(r.forEach(v=>{f=f.insert(v.key,v)}),f))}}class bI{constructor(e,r,s,c){this.persistence=e,this.ts=r,this.serializer=c,this.ns=new Hi(or),this.rs=new Ol(f=>sa(f),Ua),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ep(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ns))}}function dv(i,e,r,s){return new bI(i,e,r,s)}function Tp(i,e){return hv.apply(this,arguments)}function hv(){return hv=(0,ve.c)(function*(i,e){const r=Rn(i);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let c;return r.mutationQueue.getAllMutationBatches(s).next(f=>(c=f,r._s(e),r.mutationQueue.getAllMutationBatches(s))).next(f=>{const v=[],x=[];let k=fr();for(const q of c){v.push(q.batchId);for(const oe of q.mutations)k=k.add(oe.key)}for(const q of f){x.push(q.batchId);for(const oe of q.mutations)k=k.add(oe.key)}return r.localDocuments.getDocuments(s,k).next(q=>({us:q,removedBatchIds:v,addedBatchIds:x}))})})}),hv.apply(this,arguments)}function bp(i){const e=Rn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Qr.getLastRemoteSnapshotVersion(r))}function SI(i,e,r){let s=fr(),c=fr();return r.forEach(f=>s=s.add(f)),e.getEntries(i,s).next(f=>{let v=wo();return r.forEach((x,k)=>{const q=f.get(x);k.isFoundDocument()!==q.isFoundDocument()&&(c=c.add(x)),k.isNoDocument()&&k.version.isEqual(ir.min())?(e.removeEntry(x,k.readTime),v=v.insert(x,k)):!q.isValidDocument()||k.version.compareTo(q.version)>0||0===k.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(k),v=v.insert(x,k)):sn("LocalStore","Ignoring outdated watch update for ",x,". Current version:",q.version," Watch version:",k.version)}),{cs:v,ls:c}})}function J0(i,e){const r=Rn(i);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function _f(i,e){const r=Rn(i);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return r.Qr.getTargetData(s,e).next(f=>f?(c=f,M.resolve(c)):r.Qr.allocateTargetId(s).next(v=>(c=new j(e,v,"TargetPurposeListen",s.currentSequenceNumber),r.Qr.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=r.ns.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(r.ns=r.ns.insert(s.targetId,s),r.rs.set(e,s.targetId)),s})}function vf(i,e,r){return lm.apply(this,arguments)}function lm(){return lm=(0,ve.c)(function*(i,e,r){const s=Rn(i),c=s.ns.get(e),f=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",f,v=>s.persistence.referenceDelegate.removeTarget(v,c)))}catch(v){if(!mt(v))throw v;sn("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}s.ns=s.ns.remove(e),s.rs.delete(c.target)}),lm.apply(this,arguments)}function jd(i,e,r){const s=Rn(i);let c=ir.min(),f=fr();return s.persistence.runTransaction("Execute query","readwrite",v=>function(k,q,oe){const ke=Rn(k),ht=ke.rs.get(oe);return void 0!==ht?M.resolve(ke.ns.get(ht)):ke.Qr.getTargetData(q,oe)}(s,v,xi(e)).next(x=>{if(x)return c=x.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(v,x.targetId).next(k=>{f=k})}).next(()=>s.ts.getDocumentsMatchingQuery(v,e,r?c:ir.min(),r?f:fr())).next(x=>(cm(s,Nl(e),x),{documents:x,hs:f})))}function yf(i,e){const r=Rn(i),s=Rn(r.Qr),c=r.ns.get(e);return c?Promise.resolve(c.target):r.persistence.runTransaction("Get target data","readonly",f=>s._t(f,e).next(v=>v?v.target:null))}function Sp(i,e){const r=Rn(i),s=r.ss.get(e)||ir.min();return r.persistence.runTransaction("Get new document changes","readonly",c=>r.os.getAllFromCollectionGroup(c,e,Nu(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(cm(r,e,c),c))}function cm(i,e,r){let s=i.ss.get(e)||ir.min();r.forEach((c,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)}),i.ss.set(e,s)}function um(){return um=(0,ve.c)(function*(i,e,r,s){const c=Rn(i);let f=fr(),v=wo();for(const q of r){const oe=e.Ps(q.metadata.name);q.document&&(f=f.add(oe));const ke=e.Is(q);ke.setReadTime(e.Ts(q.metadata.readTime)),v=v.insert(oe,ke)}const x=c.os.newChangeBuffer({trackRemovals:!0}),k=yield _f(c,(oe=s,xi(qo(ti.fromString(`__bundle__/docs/${oe}`)))));var oe;return c.persistence.runTransaction("Apply bundle documents","readwrite",q=>SI(q,x,v).next(oe=>(x.apply(q),oe)).next(oe=>c.Qr.removeMatchingKeysForTargetId(q,k.targetId).next(()=>c.Qr.addMatchingKeys(q,f,k.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(q,oe.cs,oe.ls)).next(()=>oe.cs)))}),um.apply(this,arguments)}function AI(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ve.c)(function*(i,e,r=fr()){const s=yield _f(i,xi(ns(e.bundledQuery))),c=Rn(i);return c.persistence.runTransaction("Save named query","readwrite",f=>{const v=Ni(e.readTime);if(s.snapshotVersion.compareTo(v)>=0)return c.$r.saveNamedQuery(f,e);const x=s.withResumeToken(Po.EMPTY_BYTE_STRING,v);return c.ns=c.ns.insert(x.targetId,x),c.Qr.updateTargetData(f,x).next(()=>c.Qr.removeMatchingKeysForTargetId(f,s.targetId)).next(()=>c.Qr.addMatchingKeys(f,r,s.targetId)).next(()=>c.$r.saveNamedQuery(f,e))})}),Ap.apply(this,arguments)}function Wd(i,e){return`firestore_clients_${i}_${e}`}function cl(i,e,r){let s=`firestore_mutations_${i}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Xc(i,e){return`firestore_targets_${i}_${e}`}class If{constructor(e,r,s,c){this.user=e,this.batchId=r,this.state=s,this.error=c}static Es(e,r,s){const c=JSON.parse(s);let f,v="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return v&&c.error&&(v="string"==typeof c.error.message&&"string"==typeof c.error.code,v&&(f=new rn(c.error.code,c.error.message))),v?new If(e,r,c.state,f):(Gi("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rp{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Es(e,r){const s=JSON.parse(r);let c,f="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return f&&s.error&&(f="string"==typeof s.error.message&&"string"==typeof s.error.code,f&&(c=new rn(s.error.code,s.error.message))),f?new Rp(e,s.state,c):(Gi("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mp{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Es(e,r){const s=JSON.parse(r);let c="object"==typeof s&&s.activeTargetIds instanceof Array,f=qu();for(let v=0;c&&v<s.activeTargetIds.length;++v)c=ar(s.activeTargetIds[v]),f=f.add(s.activeTargetIds[v]);return c?new Mp(e,f):(Gi("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class pv{constructor(e,r){this.clientId=e,this.onlineState=r}static Es(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new pv(r.clientId,r.onlineState):(Gi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gv{constructor(){this.activeTargetIds=qu()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pp{constructor(e,r,s,c,f){this.window=e,this.oi=r,this.persistenceKey=s,this.Vs=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Hi(or),this.started=!1,this.ys=[];const v=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.ws=Wd(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new gv),this.bs=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.c)(function*(){const r=yield e.syncEngine.Li();for(const c of r){if(c===e.Vs)continue;const f=e.getItem(Wd(e.persistenceKey,c));if(f){const v=Mp.Es(c,f);v&&(e.ps=e.ps.insert(v.clientId,v))}}e.Ms();const s=e.storage.getItem(e.vs);if(s){const c=e.xs(s);c&&e.Os(c)}for(const c of e.ys)e.gs(c);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let r=!1;return this.ps.forEach((s,c)=>{c.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,r,s){this.Bs(e,r,s),this.Ls(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Xc(this.persistenceKey,e));if(s){const c=Rp.Es(e,s);c&&(r=c.state)}}return this.ks.As(e),this.Ms(),r}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xc(this.persistenceKey,e))}updateQueryState(e,r,s){this.qs(e,r,s)}handleUserChange(e,r,s){r.forEach(c=>{this.Ls(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return sn("SharedClientState","READ",e,r),r}setItem(e,r){sn("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){sn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var r=this;const s=e;if(s.storageArea===this.storage){if(sn("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ws)return void Gi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ve.c)(function*(){if(r.started){if(null!==s.key)if(r.bs.test(s.key)){if(null==s.newValue){const c=r.$s(s.key);return r.Us(c,null)}{const c=r.Ws(s.key,s.newValue);if(c)return r.Us(c.clientId,c)}}else if(r.Ds.test(s.key)){if(null!==s.newValue){const c=r.Gs(s.key,s.newValue);if(c)return r.zs(c)}}else if(r.Cs.test(s.key)){if(null!==s.newValue){const c=r.js(s.key,s.newValue);if(c)return r.Hs(c)}}else if(s.key===r.vs){if(null!==s.newValue){const c=r.xs(s.newValue);if(c)return r.Os(c)}}else if(s.key===r.Ss){const c=function(v){let x=Bi._e;if(null!=v)try{const k=JSON.parse(v);er("number"==typeof k),x=k}catch(k){Gi("SharedClientState","Failed to read sequence number from WebStorage",k)}return x}(s.newValue);c!==Bi._e&&r.sequenceNumberHandler(c)}else if(s.key===r.Fs){const c=r.Js(s.newValue);yield Promise.all(c.map(f=>r.syncEngine.Ys(f)))}}else r.ys.push(s)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,r,s){const c=new If(this.currentUser,e,r,s),f=cl(this.persistenceKey,this.currentUser,e);this.setItem(f,c.ds())}Ls(e){const r=cl(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,r,s){const c=Xc(this.persistenceKey,e),f=new Rp(e,r,s);this.setItem(c,f.ds())}Ks(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Fs,r)}$s(e){const r=this.bs.exec(e);return r?r[1]:null}Ws(e,r){const s=this.$s(e);return Mp.Es(s,r)}Gs(e,r){const s=this.Ds.exec(e),c=Number(s[1]);return If.Es(new Mi(void 0!==s[2]?s[2]:null),c,r)}js(e,r){const s=this.Cs.exec(e),c=Number(s[1]);return Rp.Es(c,r)}xs(e){return pv.Es(e)}Js(e){return JSON.parse(e)}zs(e){var r=this;return(0,ve.c)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Zs(e.batchId,e.state,e.error);sn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,r){const s=r?this.ps.insert(e,r):this.ps.remove(e),c=this.Ns(this.ps),f=this.Ns(s),v=[],x=[];return f.forEach(k=>{c.has(k)||v.push(k)}),c.forEach(k=>{f.has(k)||x.push(k)}),this.syncEngine.eo(v,x).then(()=>{this.ps=s})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let r=qu();return e.forEach((s,c)=>{r=r.unionWith(c.activeTargetIds)}),r}}class dm{constructor(){this.no=new gv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,r,s){this.ro[e]=r}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new gv,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eC{io(e){}shutdown(){}}class Ef{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){sn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){sn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wh=null;function Cf(){return null===wh?wh=268435456+Math.round(2147483648*Math.random()):wh++,"0x"+wh.toString(16)}const RI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dh{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Ns="WebChannelConnection";class mv extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),f=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+r.host,this.po=`projects/${c}/databases/${f}`,this.yo="(default)"===this.databaseId.database?`project_id=${c}`:`project_id=${c}&database_id=${f}`}get wo(){return!1}So(r,s,c,f,v){const x=Cf(),k=this.bo(r,s.toUriEncodedString());sn("RestConnection",`Sending RPC '${r}' ${x}:`,k,c);const q={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(q,f,v),this.Co(r,k,q,c).then(oe=>(sn("RestConnection",`Received RPC '${r}' ${x}: `,oe),oe),oe=>{throw $o("RestConnection",`RPC '${r}' ${x} failed with error: `,oe,"url: ",k,"request:",c),oe})}vo(r,s,c,f,v,x){return this.So(r,s,c,f,v)}Do(r,s,c){r["X-Goog-Api-Client"]="gl-js/ fire/"+ho,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((f,v)=>r[v]=f),c&&c.headers.forEach((f,v)=>r[v]=f)}bo(r,s){return`${this.fo}/v1/${s}:${RI[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,r,s,c){const f=Cf();return new Promise((v,x)=>{const k=new ai;k.setWithCredentials(!0),k.listenOnce(In.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case Ut.NO_ERROR:const oe=k.getResponseJson();sn(Ns,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(oe)),v(oe);break;case Ut.TIMEOUT:sn(Ns,`RPC '${e}' ${f} timed out`),x(new rn(Ot.DEADLINE_EXCEEDED,"Request time out"));break;case Ut.HTTP_ERROR:const ke=k.getStatus();if(sn(Ns,`RPC '${e}' ${f} failed with status:`,ke,"response text:",k.getResponseText()),ke>0){let ht=k.getResponseJson();Array.isArray(ht)&&(ht=ht[0]);const Mt=null==ht?void 0:ht.error;if(Mt&&Mt.status&&Mt.message){const wn=function(kn){const pr=kn.toLowerCase().replace(/_/g,"-");return Object.values(Ot).indexOf(pr)>=0?pr:Ot.UNKNOWN}(Mt.status);x(new rn(wn,Mt.message))}else x(new rn(Ot.UNKNOWN,"Server responded with status "+k.getStatus()))}else x(new rn(Ot.UNAVAILABLE,"Connection failed."));break;default:zn()}}finally{sn(Ns,`RPC '${e}' ${f} completed.`)}});const q=JSON.stringify(c);sn(Ns,`RPC '${e}' ${f} sending request:`,c),k.send(r,"POST",q,s,15)})}Fo(e,r,s){const c=Cf(),f=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=pe(),x=ze(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},q=this.longPollingOptions.timeoutSeconds;void 0!==q&&(k.longPollingTimeout=Math.round(1e3*q)),this.useFetchStreams&&(k.useFetchStreams=!0),this.Do(k.initMessageHeaders,r,s),k.encodeInitMessageHeaders=!0;const oe=f.join("");sn(Ns,`Creating RPC '${e}' stream ${c}: ${oe}`,k);const ke=v.createWebChannel(oe,k);let ht=!1,Mt=!1;const wn=new Dh({lo:kn=>{Mt?sn(Ns,`Not sending because RPC '${e}' stream ${c} is closed:`,kn):(ht||(sn(Ns,`Opening RPC '${e}' stream ${c} transport.`),ke.open(),ht=!0),sn(Ns,`RPC '${e}' stream ${c} sending:`,kn),ke.send(kn))},ho:()=>ke.close()}),Bn=(kn,pr,Ur)=>{kn.listen(pr,gr=>{try{Ur(gr)}catch(Wr){setTimeout(()=>{throw Wr},0)}})};return Bn(ke,Er.EventType.OPEN,()=>{Mt||sn(Ns,`RPC '${e}' stream ${c} transport opened.`)}),Bn(ke,Er.EventType.CLOSE,()=>{Mt||(Mt=!0,sn(Ns,`RPC '${e}' stream ${c} transport closed`),wn.Vo())}),Bn(ke,Er.EventType.ERROR,kn=>{Mt||(Mt=!0,$o(Ns,`RPC '${e}' stream ${c} transport errored:`,kn),wn.Vo(new rn(Ot.UNAVAILABLE,"The operation could not be completed")))}),Bn(ke,Er.EventType.MESSAGE,kn=>{var pr;if(!Mt){const Ur=kn.data[0];er(!!Ur);const Wr=Ur.error||(null===(pr=Ur[0])||void 0===pr?void 0:pr.error);if(Wr){sn(Ns,`RPC '${e}' stream ${c} received error:`,Wr);const Ki=Wr.status;let ki=function(ru){const Gh=Wo[ru];if(void 0!==Gh)return Xu(Gh)}(Ki),_s=Wr.message;void 0===ki&&(ki=Ot.INTERNAL,_s="Unknown error status: "+Ki+" with message "+Wr.message),Mt=!0,wn.Vo(new rn(ki,_s)),ke.close()}else sn(Ns,`RPC '${e}' stream ${c} received:`,Ur),wn.mo(Ur)}}),Bn(x,Pr.STAT_EVENT,kn=>{kn.stat===Yr.PROXY?sn(Ns,`RPC '${e}' stream ${c} detected buffering proxy`):kn.stat===Yr.NOPROXY&&sn(Ns,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{wn.Ro()},0),wn}}function xp(){return typeof window<"u"?window:null}function Hd(){return typeof document<"u"?document:null}function wf(i){return new en(i,!0)}class hm{constructor(e,r,s=1e3,c=1.5,f=6e4){this.oi=e,this.timerId=r,this.Mo=s,this.xo=c,this.Oo=f,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const r=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Lo),c=Math.max(0,r-s);c>0&&sn("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.No} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,c,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class fm{constructor(e,r,s,c,f,v,x,k){this.oi=e,this.$o=s,this.Uo=c,this.connection=f,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=x,this.listener=k,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new hm(e,r)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,ve.c)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,ve.c)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,r){var s=this;return(0,ve.c)(function*(){s.n_(),s.r_(),s.jo.cancel(),s.Wo++,4!==e?s.jo.reset():r&&r.code===Ot.RESOURCE_EXHAUSTED?(Gi(r.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),s.jo.ko()):r&&r.code===Ot.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.i_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.To(r)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),r=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.Wo===r&&this.o_(s,c)},s=>{e(()=>{const c=new rn(Ot.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(c)})})}o_(e,r){const s=this.s_(this.Wo);this.stream=this.a_(e,r),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(c=>{s(()=>this.__(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Yo(){var e=this;this.state=5,this.jo.qo((0,ve.c)(function*(){e.state=0,e.start()}))}__(e){return sn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return r=>{this.oi.enqueueAndForget(()=>this.Wo===e?r():(sn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MI extends fm{constructor(e,r,s,c,f,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,c,v),this.serializer=f}a_(e,r){return this.connection.Fo("Listen",e,r)}onMessage(e){this.jo.reset();const r=function bu(i,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===q?1:"REMOVE"===q?2:"CURRENT"===q?3:"RESET"===q?4:zn(),c=e.targetChange.targetIds||[],f=function(q,oe){return q.useProto3Json?(er(void 0===oe||"string"==typeof oe),Po.fromBase64String(oe||"")):(er(void 0===oe||oe instanceof Uint8Array),Po.fromUint8Array(oe||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,x=v&&function(q){const oe=void 0===q.code?Ot.UNKNOWN:Xu(q.code);return new rn(oe,q.message||"")}(v);r=new E(s,c,f,x||null)}else if("documentChange"in e){const s=e.documentChange,c=ca(i,s.document.name),f=Ni(s.document.updateTime),v=s.document.createTime?Ni(s.document.createTime):ir.min(),x=new Oo({mapValue:{fields:s.document.fields}}),k=zi.newFoundDocument(c,f,v,x);r=new Ac(s.targetIds||[],s.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const s=e.documentDelete,c=ca(i,s.document),f=s.readTime?Ni(s.readTime):ir.min(),v=zi.newNoDocument(c,f);r=new Ac([],s.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const s=e.documentRemove,c=ca(i,s.document);r=new Ac([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return zn();{const s=e.filter,{count:c=0,unchangedNames:f}=s,v=new lp(c,f);r=new Ju(s.targetId,v)}}var q;return r}(this.serializer,e),s=function(f){if(!("targetChange"in f))return ir.min();const v=f.targetChange;return v.targetIds&&v.targetIds.length?ir.min():v.readTime?Ni(v.readTime):ir.min()}(e);return this.listener.u_(r,s)}c_(e){const r={};r.database=Du(this.serializer),r.addTarget=function(f,v){let x;const k=v.target;if(x=jc(k)?{documents:up(f,k)}:{query:Fd(f,k).ut},x.targetId=v.targetId,v.resumeToken.approximateByteSize()>0){x.resumeToken=Hn(f,v.resumeToken);const q=On(f,v.expectedCount);null!==q&&(x.expectedCount=q)}else if(v.snapshotVersion.compareTo(ir.min())>0){x.readTime=Un(f,v.snapshotVersion.toTimestamp());const q=On(f,v.expectedCount);null!==q&&(x.expectedCount=q)}return x}(this.serializer,e);const s=function hp(i,e){const r=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zn()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.t_(r)}l_(e){const r={};r.database=Du(this.serializer),r.removeTarget=e,this.t_(r)}}class PI extends fm{constructor(e,r,s,c,f,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,c,v),this.serializer=f,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,r){return this.connection.Fo("Write",e,r)}onMessage(e){if(er(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const r=function cp(i,e){return i&&i.length>0?(er(void 0!==e),i.map(r=>function(c,f){let v=Ni(c.updateTime?c.updateTime:f);return v.isEqual(ir.min())&&(v=Ni(f)),new Pd(v,c.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=Ni(e.commitTime);return this.listener.T_(s,r)}return er(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Du(this.serializer),this.t_(e)}I_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>td(this.serializer,s))};this.t_(r)}}class xI extends class{}{constructor(e,r,s,c){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=c,this.A_=!1}R_(){if(this.A_)throw new rn(Ot.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,s,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,v])=>this.connection.So(e,sl(r,s),c,f,v)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new rn(Ot.UNKNOWN,f.toString())})}vo(e,r,s,c,f){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([v,x])=>this.connection.vo(e,sl(r,s),c,v,x,f)).catch(v=>{throw"FirebaseError"===v.name?(v.code===Ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),v):new rn(Ot.UNKNOWN,v.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Np{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Gi(r),this.g_=!1):sn("OnlineStateTracker",r)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class pm{constructor(e,r,s,c,f){var v=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=f,this.M_.io(x=>{s.enqueueAndForget((0,ve.c)(function*(){var k;ad(v)&&(sn("RemoteStore","Restarting streams for network reachability change."),yield(k=(0,ve.c)(function*(oe){const ke=Rn(oe);ke.v_.add(4),yield sd(ke),ke.x_.set("Unknown"),ke.v_.delete(4),yield Df(ke)}),function q(oe){return k.apply(this,arguments)})(v))}))}),this.x_=new Np(s,c)}}function Df(i){return gm.apply(this,arguments)}function gm(){return gm=(0,ve.c)(function*(i){if(ad(i))for(const e of i.F_)yield e(!0)}),gm.apply(this,arguments)}function sd(i){return Op.apply(this,arguments)}function Op(){return Op=(0,ve.c)(function*(i){for(const e of i.F_)yield e(!1)}),Op.apply(this,arguments)}function Zc(i,e){const r=Rn(i);r.C_.has(e.targetId)||(r.C_.set(e.targetId,e),bh(r)?yv(r):Nc(r).Jo()&&kp(r,e))}function Th(i,e){const r=Rn(i),s=Nc(r);r.C_.delete(e),s.Jo()&&vv(r,e),0===r.C_.size&&(s.Jo()?s.Xo():ad(r)&&r.x_.set("Unknown"))}function kp(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ir.min())>0){const r=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Nc(i).c_(e)}function vv(i,e){i.O_.Oe(e),Nc(i).l_(e)}function yv(i){i.O_=new _({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Nc(i).start(),i.x_.p_()}function bh(i){return ad(i)&&!Nc(i).Ho()&&i.C_.size>0}function ad(i){return 0===Rn(i).v_.size}function mm(i){i.O_=void 0}function Iv(i){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,ve.c)(function*(i){i.C_.forEach((e,r)=>{kp(i,e)})}),Lp.apply(this,arguments)}function _m(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,ve.c)(function*(i,e){mm(i),bh(i)?(i.x_.S_(e),yv(i)):i.x_.set("Unknown")}),Fp.apply(this,arguments)}function Vp(i,e,r){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,ve.c)(function*(i,e,r){if(i.x_.set("Online"),e instanceof E&&2===e.state&&e.cause)try{yield(s=(0,ve.c)(function*(f,v){const x=v.cause;for(const k of v.targetIds)f.C_.has(k)&&(yield f.remoteSyncer.rejectListen(k,x),f.C_.delete(k),f.O_.removeTarget(k))}),function c(f,v){return s.apply(this,arguments)})(i,e)}catch(s){sn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Tf(i,s)}else if(e instanceof Ac?i.O_.$e(e):e instanceof Ju?i.O_.Je(e):i.O_.Ge(e),!r.isEqual(ir.min()))try{const s=yield bp(i.localStore);r.compareTo(s)>=0&&(yield function(f,v){const x=f.O_.it(v);return x.targetChanges.forEach((k,q)=>{if(k.resumeToken.approximateByteSize()>0){const oe=f.C_.get(q);oe&&f.C_.set(q,oe.withResumeToken(k.resumeToken,v))}}),x.targetMismatches.forEach((k,q)=>{const oe=f.C_.get(k);if(!oe)return;f.C_.set(k,oe.withResumeToken(Po.EMPTY_BYTE_STRING,oe.snapshotVersion)),vv(f,k);const ke=new j(oe.target,k,q,oe.sequenceNumber);kp(f,ke)}),f.remoteSyncer.applyRemoteEvent(x)}(i,r))}catch(s){sn("RemoteStore","Failed to raise snapshot:",s),yield Tf(i,s)}var s}),Kd.apply(this,arguments)}function Tf(i,e,r){return bf.apply(this,arguments)}function bf(){return bf=(0,ve.c)(function*(i,e,r){if(!mt(e))throw e;i.v_.add(1),yield sd(i),i.x_.set("Offline"),r||(r=()=>bp(i.localStore)),i.asyncQueue.enqueueRetryable((0,ve.c)(function*(){sn("RemoteStore","Retrying IndexedDB access"),yield r(),i.v_.delete(1),yield Df(i)}))}),bf.apply(this,arguments)}function Sf(i,e){return e().catch(r=>Tf(i,r,e))}function qd(i){return Af.apply(this,arguments)}function Af(){return Af=(0,ve.c)(function*(i){const e=Rn(i),r=Jc(e);let s=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Up(e);)try{const c=yield J0(e.localStore,s);if(null===c){0===e.D_.length&&r.Xo();break}s=c.batchId,NI(e,c)}catch(c){yield Tf(e,c)}vm(e)&&Ev(e)}),Af.apply(this,arguments)}function Up(i){return ad(i)&&i.D_.length<10}function NI(i,e){i.D_.push(e);const r=Jc(i);r.Jo()&&r.P_&&r.I_(e.mutations)}function vm(i){return ad(i)&&!Jc(i).Ho()&&i.D_.length>0}function Ev(i){Jc(i).start()}function OI(i){return ym.apply(this,arguments)}function ym(){return ym=(0,ve.c)(function*(i){Jc(i).d_()}),ym.apply(this,arguments)}function Cv(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,ve.c)(function*(i){const e=Jc(i);for(const r of i.D_)e.I_(r.mutations)}),Bp.apply(this,arguments)}function Qr(i,e,r){return $p.apply(this,arguments)}function $p(){return $p=(0,ve.c)(function*(i,e,r){const s=i.D_.shift(),c=wu.from(s,e,r);yield Sf(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield qd(i)}),$p.apply(this,arguments)}function wv(i,e){return ld.apply(this,arguments)}function ld(){return ld=(0,ve.c)(function*(i,e){var r;e&&Jc(i).P_&&(yield(r=(0,ve.c)(function*(c,f){if(rc(x=f.code)&&x!==Ot.ABORTED){const v=c.D_.shift();Jc(c).Zo(),yield Sf(c,()=>c.remoteSyncer.rejectFailedWrite(v.batchId,f)),yield qd(c)}var x}),function s(c,f){return r.apply(this,arguments)})(i,e)),vm(i)&&Ev(i)}),ld.apply(this,arguments)}function Im(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,ve.c)(function*(i,e){const r=Rn(i);r.asyncQueue.verifyOperationInProgress(),sn("RemoteStore","RemoteStore received new credentials");const s=ad(r);r.v_.add(3),yield sd(r),s&&r.x_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.v_.delete(3),yield Df(r)}),Gp.apply(this,arguments)}function Em(i,e){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,ve.c)(function*(i,e){const r=Rn(i);e?(r.v_.delete(2),yield Df(r)):e||(r.v_.add(2),yield sd(r),r.x_.set("Unknown"))}),Sh.apply(this,arguments)}function Nc(i){return i.N_||(i.N_=function(r,s,c){const f=Rn(r);return f.R_(),new MI(s,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{Po:Iv.bind(null,i),To:_m.bind(null,i),u_:Vp.bind(null,i)}),i.F_.push(function(){var e=(0,ve.c)(function*(r){r?(i.N_.Zo(),bh(i)?yv(i):i.x_.set("Unknown")):(yield i.N_.stop(),mm(i))});return function(r){return e.apply(this,arguments)}}())),i.N_}function Jc(i){return i.B_||(i.B_=function(r,s,c){const f=Rn(r);return f.R_(),new PI(s,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{Po:OI.bind(null,i),To:wv.bind(null,i),E_:Cv.bind(null,i),T_:Qr.bind(null,i)}),i.F_.push(function(){var e=(0,ve.c)(function*(r){r?(i.B_.Zo(),yield qd(i)):(yield i.B_.stop(),i.D_.length>0&&(sn("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(r){return e.apply(this,arguments)}}())),i.B_}class Yd{constructor(e,r,s,c,f){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=c,this.removalCallback=f,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,c,f){const v=Date.now()+s,x=new Yd(e,r,v,c,f);return x.start(s),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rn(Ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qd(i,e){if(Gi("AsyncQueue",`${e}: ${i}`),mt(i))return new rn(Ot.UNAVAILABLE,`${e}: ${i}`);throw i}class cd{constructor(e){this.comparator=e?(r,s)=>e(r,s)||Nn.comparator(r.key,s.key):(r,s)=>Nn.comparator(r.key,s.key),this.keyedMap=kl(),this.sortedSet=new Hi(this.comparator)}static emptySet(e){return new cd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof cd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const c=r.getNext().key,f=s.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new cd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class jp{constructor(){this.L_=new Hi(Nn.comparator)}track(e){const r=e.doc.key,s=this.L_.get(r);s?0!==e.type&&3===s.type?this.L_=this.L_.insert(r,e):3===e.type&&1!==s.type?this.L_=this.L_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.L_=this.L_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.L_=this.L_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.L_=this.L_.remove(r):1===e.type&&2===s.type?this.L_=this.L_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.L_=this.L_.insert(r,{type:2,doc:e.doc}):zn():this.L_=this.L_.insert(r,e)}k_(){const e=[];return this.L_.inorderTraversal((r,s)=>{e.push(s)}),e}}class ud{constructor(e,r,s,c,f,v,x,k,q){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=f,this.fromCache=v,this.syncStateChanged=x,this.excludesMetadataChanges=k,this.hasCachedResults=q}static fromInitialDocuments(e,r,s,c,f){const v=[];return r.forEach(x=>{v.push({type:0,doc:x})}),new ud(e,r,cd.emptySet(r),v,s,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&aa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let c=0;c<r.length;c++)if(r[c].type!==s[c].type||!r[c].doc.isEqual(s[c].doc))return!1;return!0}}class Dv{constructor(){this.q_=void 0,this.Q_=[]}}class Cm{constructor(){this.queries=new Ol(e=>Sd(e),aa),this.onlineState="Unknown",this.K_=new Set}}function wm(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,ve.c)(function*(i,e){const r=Rn(i),s=e.query;let c=!1,f=r.queries.get(s);if(f||(c=!0,f=new Dv),c)try{f.q_=yield r.onListen(s)}catch(v){const x=Qd(v,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(x)}r.queries.set(s,f),f.Q_.push(e),e.U_(r.onlineState),f.q_&&e.W_(f.q_)&&bm(r)}),Dm.apply(this,arguments)}function Tm(i,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,ve.c)(function*(i,e){const r=Rn(i),s=e.query;let c=!1;const f=r.queries.get(s);if(f){const v=f.Q_.indexOf(e);v>=0&&(f.Q_.splice(v,1),c=0===f.Q_.length)}if(c)return r.queries.delete(s),r.onUnlisten(s)}),Wp.apply(this,arguments)}function kI(i,e){const r=Rn(i);let s=!1;for(const c of e){const v=r.queries.get(c.query);if(v){for(const x of v.Q_)x.W_(c)&&(s=!0);v.q_=c}}s&&bm(r)}function LI(i,e,r){const s=Rn(i),c=s.queries.get(e);if(c)for(const f of c.Q_)f.onError(r);s.queries.delete(e)}function bm(i){i.K_.forEach(e=>{e.next()})}class Sm{constructor(e,r,s){this.query=e,this.G_=r,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=s||{}}W_(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new ud(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.z_?this.H_(e)&&(this.G_.next(e),r=!0):this.J_(e,this.onlineState)&&(this.Y_(e),r=!0),this.j_=e,r}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let r=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),r=!0),r}J_(e,r){return!e.fromCache||(!this.options.Z_||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Tv{constructor(e,r){this.X_=e,this.byteLength=r}ea(){return"metadata"in this.X_}}class Am{constructor(e){this.serializer=e}Ps(e){return ca(this.serializer,e)}Is(e){return e.metadata.exists?Ld(this.serializer,e.document,!1):zi.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ni(e)}}class FI{constructor(e,r,s){this.ta=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bv(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++r;const s=ti.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ra(e){const r=new Map,s=new Am(this.serializer);for(const c of e)if(c.metadata.queries){const f=s.Ps(c.metadata.name);for(const v of c.metadata.queries){const x=(r.get(v)||fr()).add(f);r.set(v,x)}}return r}complete(){var e=this;return(0,ve.c)(function*(){const r=yield function fv(i,e,r,s){return um.apply(this,arguments)}(e.localStore,new Am(e.serializer),e.documents,e.ta.id),s=e.ra(e.documents);for(const c of e.queries)yield AI(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:r}})()}}function bv(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Ka{constructor(e){this.key=e}}class Sv{constructor(e){this.key=e}}class Av{constructor(e,r){this.query=e,this.oa=r,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=fr(),this.mutatedKeys=fr(),this.ua=Kc(e),this.ca=new cd(this.ua)}get la(){return this.oa}ha(e,r){const s=r?r.Pa:new jp,c=r?r.ca:this.ca;let f=r?r.mutatedKeys:this.mutatedKeys,v=c,x=!1;const k="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,q="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((oe,ke)=>{const ht=c.get(oe),Mt=Gs(this.query,ke)?ke:null,wn=!!ht&&this.mutatedKeys.has(ht.key),Bn=!!Mt&&(Mt.hasLocalMutations||this.mutatedKeys.has(Mt.key)&&Mt.hasCommittedMutations);let kn=!1;ht&&Mt?ht.data.isEqual(Mt.data)?wn!==Bn&&(s.track({type:3,doc:Mt}),kn=!0):this.Ia(ht,Mt)||(s.track({type:2,doc:Mt}),kn=!0,(k&&this.ua(Mt,k)>0||q&&this.ua(Mt,q)<0)&&(x=!0)):!ht&&Mt?(s.track({type:0,doc:Mt}),kn=!0):ht&&!Mt&&(s.track({type:1,doc:ht}),kn=!0,(k||q)&&(x=!0)),kn&&(Mt?(v=v.add(Mt),f=Bn?f.add(oe):f.delete(oe)):(v=v.delete(oe),f=f.delete(oe)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const oe="F"===this.query.limitType?v.last():v.first();v=v.delete(oe.key),f=f.delete(oe.key),s.track({type:1,doc:oe})}return{ca:v,Pa:s,Xi:x,mutatedKeys:f}}Ia(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,c){const f=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const v=e.Pa.k_();v.sort((oe,ke)=>function(Mt,wn){const Bn=kn=>{switch(kn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zn()}};return Bn(Mt)-Bn(wn)}(oe.type,ke.type)||this.ua(oe.doc,ke.doc)),this.Ta(s),c=null!=c&&c;const x=r&&!c?this.Ea():[],k=0===this.aa.size&&this.current&&!c?1:0,q=k!==this._a;return this._a=k,0!==v.length||q?{snapshot:new ud(this.query,e.ca,f,v,e.mutatedKeys,0===k,q,!1,!!s&&s.resumeToken.approximateByteSize()>0),da:x}:{da:x}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new jp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(r=>this.oa=this.oa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.oa=this.oa.delete(r)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=fr(),this.ca.forEach(s=>{this.Aa(s.key)&&(this.aa=this.aa.add(s.key))});const r=[];return e.forEach(s=>{this.aa.has(s)||r.push(new Sv(s))}),this.aa.forEach(s=>{e.has(s)||r.push(new Ka(s))}),r}Ra(e){this.oa=e.hs,this.aa=fr();const r=this.ha(e.documents);return this.applyChanges(r,!0)}Va(){return ud.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class tC{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class Rm{constructor(e){this.key=e,this.ma=!1}}class Rv{constructor(e,r,s,c,f,v){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=v,this.fa={},this.ga=new Ol(x=>Sd(x),aa),this.pa=new Map,this.ya=new Set,this.wa=new Hi(Nn.comparator),this.Sa=new Map,this.ba=new nm,this.Da={},this.Ca=new Map,this.va=Gd.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function VI(i,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,ve.c)(function*(i,e){const r=Zp(i);let s,c;const f=r.ga.get(e);if(f)s=f.targetId,r.sharedClientState.addLocalQueryTarget(s),c=f.view.Va();else{const v=yield _f(r.localStore,xi(e)),x=r.sharedClientState.addLocalQueryTarget(v.targetId);s=v.targetId,c=yield Pm(r,e,s,"current"===x,v.resumeToken),r.isPrimaryClient&&Zc(r.remoteStore,v)}return c}),Mm.apply(this,arguments)}function Pm(i,e,r,s,c){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,ve.c)(function*(i,e,r,s,c){i.Ma=(ke,ht,Mt)=>{return(wn=(0,ve.c)(function*(kn,pr,Ur,gr){let Wr=pr.view.ha(Ur);Wr.Xi&&(Wr=yield jd(kn.localStore,pr.query,!1).then(({documents:Ws})=>pr.view.ha(Ws,Wr)));const Ki=gr&&gr.targetChanges.get(pr.targetId),ki=gr&&null!=gr.targetMismatches.get(pr.targetId),_s=pr.view.applyChanges(Wr,kn.isPrimaryClient,Ki,ki);return Kp(kn,pr.targetId,_s.da),_s.snapshot}),function Bn(kn,pr,Ur,gr){return wn.apply(this,arguments)})(i,ke,ht,Mt);var wn};const f=yield jd(i.localStore,e,!0),v=new Av(e,f.hs),x=v.ha(f.documents),k=Yc.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==i.onlineState,c),q=v.applyChanges(x,i.isPrimaryClient,k);Kp(i,r,q.da);const oe=new tC(e,r,v);return i.ga.set(e,oe),i.pa.has(r)?i.pa.get(r).push(e):i.pa.set(r,[e]),q.snapshot}),Hp.apply(this,arguments)}function UI(i,e){return xm.apply(this,arguments)}function xm(){return xm=(0,ve.c)(function*(i,e){const r=Rn(i),s=r.ga.get(e),c=r.pa.get(s.targetId);if(c.length>1)return r.pa.set(s.targetId,c.filter(f=>!aa(f,e))),void r.ga.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield vf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),Th(r.remoteStore,s.targetId),Xd(r,s.targetId)}).catch(w))):(Xd(r,s.targetId),yield vf(r.localStore,s.targetId,!0))}),xm.apply(this,arguments)}function Om(){return Om=(0,ve.c)(function*(i,e,r){const s=Jp(i);try{const c=yield function(v,x){const k=Rn(v),q=ro.now(),oe=x.reduce((Mt,wn)=>Mt.add(wn.key),fr());let ke,ht;return k.persistence.runTransaction("Locally write mutations","readwrite",Mt=>{let wn=wo(),Bn=fr();return k.os.getEntries(Mt,oe).next(kn=>{wn=kn,wn.forEach((pr,Ur)=>{Ur.isValidDocument()||(Bn=Bn.add(pr))})}).next(()=>k.localDocuments.getOverlayedDocuments(Mt,wn)).next(kn=>{ke=kn;const pr=[];for(const Ur of x){const gr=ms(Ur,ke.get(Ur.key).overlayedDocument);null!=gr&&pr.push(new ol(Ur.key,gr,$u(gr.value.mapValue),oo.exists(!0)))}return k.mutationQueue.addMutationBatch(Mt,q,pr,x)}).next(kn=>{ht=kn;const pr=kn.applyToLocalDocumentSet(ke,Bn);return k.documentOverlayCache.saveOverlays(Mt,kn.batchId,pr)})}).then(()=>({batchId:ht.batchId,changes:zu(ke)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(v,x,k){let q=v.Da[v.currentUser.toKey()];q||(q=new Hi(or)),q=q.insert(x,k),v.Da[v.currentUser.toKey()]=q}(s,c.batchId,r),yield ua(s,c.changes),yield qd(s.remoteStore)}catch(c){const f=Qd(c,"Failed to persist write");r.reject(f)}}),Om.apply(this,arguments)}function Mv(i,e){return km.apply(this,arguments)}function km(){return km=(0,ve.c)(function*(i,e){const r=Rn(i);try{const s=yield function Z0(i,e){const r=Rn(i),s=e.snapshotVersion;let c=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const v=r.os.newChangeBuffer({trackRemovals:!0});c=r.ns;const x=[];e.targetChanges.forEach((oe,ke)=>{const ht=c.get(ke);if(!ht)return;x.push(r.Qr.removeMatchingKeys(f,oe.removedDocuments,ke).next(()=>r.Qr.addMatchingKeys(f,oe.addedDocuments,ke)));let Mt=ht.withSequenceNumber(f.currentSequenceNumber);var Bn,kn,pr;null!==e.targetMismatches.get(ke)?Mt=Mt.withResumeToken(Po.EMPTY_BYTE_STRING,ir.min()).withLastLimboFreeSnapshotVersion(ir.min()):oe.resumeToken.approximateByteSize()>0&&(Mt=Mt.withResumeToken(oe.resumeToken,s)),c=c.insert(ke,Mt),kn=Mt,pr=oe,(0===(Bn=ht).resumeToken.approximateByteSize()||kn.snapshotVersion.toMicroseconds()-Bn.snapshotVersion.toMicroseconds()>=3e8||pr.addedDocuments.size+pr.modifiedDocuments.size+pr.removedDocuments.size>0)&&x.push(r.Qr.updateTargetData(f,Mt))});let k=wo(),q=fr();if(e.documentUpdates.forEach(oe=>{e.resolvedLimboDocuments.has(oe)&&x.push(r.persistence.referenceDelegate.updateLimboDocument(f,oe))}),x.push(SI(f,v,e.documentUpdates).next(oe=>{k=oe.cs,q=oe.ls})),!s.isEqual(ir.min())){const oe=r.Qr.getLastRemoteSnapshotVersion(f).next(ke=>r.Qr.setTargetsMetadata(f,f.currentSequenceNumber,s));x.push(oe)}return M.waitFor(x).next(()=>v.apply(f)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,k,q)).next(()=>k)}).then(f=>(r.ns=c,f))}(r.localStore,e);e.targetChanges.forEach((c,f)=>{const v=r.Sa.get(f);v&&(er(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?v.ma=!0:c.modifiedDocuments.size>0?er(v.ma):c.removedDocuments.size>0&&(er(v.ma),v.ma=!1))}),yield ua(r,s,e)}catch(s){yield w(s)}}),km.apply(this,arguments)}function Pv(i,e,r){const s=Rn(i);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const c=[];s.ga.forEach((f,v)=>{const x=v.view.U_(e);x.snapshot&&c.push(x.snapshot)}),function(v,x){const k=Rn(v);k.onlineState=x;let q=!1;k.queries.forEach((oe,ke)=>{for(const ht of ke.Q_)ht.U_(x)&&(q=!0)}),q&&bm(k)}(s.eventManager,e),c.length&&s.fa.u_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function BI(i,e,r){return sc.apply(this,arguments)}function sc(){return sc=(0,ve.c)(function*(i,e,r){const s=Rn(i);s.sharedClientState.updateQueryState(e,"rejected",r);const c=s.Sa.get(e),f=c&&c.key;if(f){let v=new Hi(Nn.comparator);v=v.insert(f,zi.newNoDocument(f,ir.min()));const x=fr().add(f),k=new js(ir.min(),new Map,new Hi(or),v,x);yield Mv(s,k),s.wa=s.wa.remove(f),s.Sa.delete(e),Mf(s)}else yield vf(s.localStore,e,!1).then(()=>Xd(s,e,r)).catch(w)}),sc.apply(this,arguments)}function Lm(i,e){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ve.c)(function*(i,e){const r=Rn(i),s=e.batch.batchId;try{const c=yield function X0(i,e){const r=Rn(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),f=r.os.newChangeBuffer({trackRemovals:!0});return function(x,k,q,oe){const ke=q.batch,ht=ke.keys();let Mt=M.resolve();return ht.forEach(wn=>{Mt=Mt.next(()=>oe.getEntry(k,wn)).next(Bn=>{const kn=q.docVersions.get(wn);er(null!==kn),Bn.version.compareTo(kn)<0&&(ke.applyToRemoteDocument(Bn,q),Bn.isValidDocument()&&(Bn.setReadTime(q.commitVersion),oe.addEntry(Bn)))})}),Mt.next(()=>x.mutationQueue.removeMutationBatch(k,ke))}(r,s,e,f).next(()=>f.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(x){let k=fr();for(let q=0;q<x.mutationResults.length;++q)x.mutationResults[q].transformResults.length>0&&(k=k.add(x.batch.mutations[q].key));return k}(e))).next(()=>r.localDocuments.getDocuments(s,c))})}(r.localStore,e);Nv(r,s,null),Rf(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield ua(r,c)}catch(c){yield w(c)}}),Fm.apply(this,arguments)}function $I(i,e,r){return zp.apply(this,arguments)}function zp(){return zp=(0,ve.c)(function*(i,e,r){const s=Rn(i);try{const c=yield function(v,x){const k=Rn(v);return k.persistence.runTransaction("Reject batch","readwrite-primary",q=>{let oe;return k.mutationQueue.lookupMutationBatch(q,x).next(ke=>(er(null!==ke),oe=ke.keys(),k.mutationQueue.removeMutationBatch(q,ke))).next(()=>k.mutationQueue.performConsistencyCheck(q)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(q,oe,x)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(q,oe)).next(()=>k.localDocuments.getDocuments(q,oe))})}(s.localStore,e);Nv(s,e,r),Rf(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield ua(s,c)}catch(c){yield w(c)}}),zp.apply(this,arguments)}function Ah(){return Ah=(0,ve.c)(function*(i,e){const r=Rn(i);ad(r.remoteStore)||sn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(v){const x=Rn(v);return x.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>x.mutationQueue.getHighestUnacknowledgedBatchId(k))}(r.localStore);if(-1===s)return void e.resolve();const c=r.Ca.get(s)||[];c.push(e),r.Ca.set(s,c)}catch(s){const c=Qd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),Ah.apply(this,arguments)}function Rf(i,e){(i.Ca.get(e)||[]).forEach(r=>{r.resolve()}),i.Ca.delete(e)}function Nv(i,e,r){const s=Rn(i);let c=s.Da[s.currentUser.toKey()];if(c){const f=c.get(e);f&&(r?f.reject(r):f.resolve(),c=c.remove(e)),s.Da[s.currentUser.toKey()]=c}}function Xd(i,e,r=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.pa.get(e))i.ga.delete(s),r&&i.fa.xa(s,r);i.pa.delete(e),i.isPrimaryClient&&i.ba.Vr(e).forEach(s=>{i.ba.containsKey(s)||Vm(i,s)})}function Vm(i,e){i.ya.delete(e.path.canonicalString());const r=i.wa.get(e);null!==r&&(Th(i.remoteStore,r),i.wa=i.wa.remove(e),i.Sa.delete(r),Mf(i))}function Kp(i,e,r){for(const s of r)s instanceof Ka?(i.ba.addReference(s.key,e),qp(i,s)):s instanceof Sv?(sn("SyncEngine","Document no longer in limbo: "+s.key),i.ba.removeReference(s.key,e),i.ba.containsKey(s.key)||Vm(i,s.key)):zn()}function qp(i,e){const r=e.key,s=r.path.canonicalString();i.wa.get(r)||i.ya.has(s)||(sn("SyncEngine","New document in limbo: "+r),i.ya.add(s),Mf(i))}function Mf(i){for(;i.ya.size>0&&i.wa.size<i.maxConcurrentLimboResolutions;){const e=i.ya.values().next().value;i.ya.delete(e);const r=new Nn(ti.fromString(e)),s=i.va.next();i.Sa.set(s,new Rm(r)),i.wa=i.wa.insert(r,s),Zc(i.remoteStore,new j(xi(qo(r.path)),s,"TargetPurposeLimboResolution",Bi._e))}}function ua(i,e,r){return Um.apply(this,arguments)}function Um(){return Um=(0,ve.c)(function*(i,e,r){const s=Rn(i),c=[],f=[],v=[];var x;s.ga.isEmpty()||(s.ga.forEach((x,k)=>{v.push(s.Ma(k,e,r).then(q=>{if((q||r)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(k.targetId,null!=q&&q.fromCache?"not-current":"current"),q){c.push(q);const oe=Dp.Ki(k.targetId,q);f.push(oe)}}))}),yield Promise.all(v),s.fa.u_(c),yield(x=(0,ve.c)(function*(q,oe){const ke=Rn(q);try{yield ke.persistence.runTransaction("notifyLocalViewChanges","readwrite",ht=>M.forEach(oe,Mt=>M.forEach(Mt.qi,wn=>ke.persistence.referenceDelegate.addReference(ht,Mt.targetId,wn)).next(()=>M.forEach(Mt.Qi,wn=>ke.persistence.referenceDelegate.removeReference(ht,Mt.targetId,wn)))))}catch(ht){if(!mt(ht))throw ht;sn("LocalStore","Failed to update sequence numbers: "+ht)}for(const ht of oe){const Mt=ht.targetId;if(!ht.fromCache){const wn=ke.ns.get(Mt),kn=wn.withLastLimboFreeSnapshotVersion(wn.snapshotVersion);ke.ns=ke.ns.insert(Mt,kn)}}}),function k(q,oe){return x.apply(this,arguments)})(s.localStore,f))}),Um.apply(this,arguments)}function GI(i,e){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,ve.c)(function*(i,e){const r=Rn(i);if(!r.currentUser.isEqual(e)){sn("SyncEngine","User change. New user:",e.toKey());const s=yield Tp(r.localStore,e);r.currentUser=e,(f=r).Ca.forEach(x=>{x.forEach(k=>{k.reject(new rn(Ot.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.Ca.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ua(r,s.us)}var f}),Pf.apply(this,arguments)}function jI(i,e){const r=Rn(i),s=r.Sa.get(e);if(s&&s.ma)return fr().add(s.key);{let c=fr();const f=r.pa.get(e);if(!f)return c;for(const v of f){const x=r.ga.get(v);c=c.unionWith(x.view.la)}return c}}function xf(i,e){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,ve.c)(function*(i,e){const r=Rn(i),s=yield jd(r.localStore,e.query,!0),c=e.view.Ra(s);return r.isPrimaryClient&&Kp(r,e.targetId,c.da),c}),Yp.apply(this,arguments)}function Rh(i,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,ve.c)(function*(i,e){const r=Rn(i);return Sp(r.localStore,e).then(s=>ua(r,s))}),Zd.apply(this,arguments)}function Bm(i,e,r,s){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,ve.c)(function*(i,e,r,s){const c=Rn(i),f=yield function(x,k){const q=Rn(x),oe=Rn(q.mutationQueue);return q.persistence.runTransaction("Lookup mutation documents","readonly",ke=>oe.vn(ke,k).next(ht=>ht?q.localDocuments.getDocuments(ke,ht):M.resolve(null)))}(c.localStore,e);var k;null!==f?("pending"===r?yield qd(c.remoteStore):"acknowledged"===r||"rejected"===r?(Nv(c,e,s||null),Rf(c,e),k=e,Rn(Rn(c.localStore).mutationQueue).Mn(k)):zn(),yield ua(c,f)):sn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Jd.apply(this,arguments)}function Qp(){return Qp=(0,ve.c)(function*(i,e){const r=Rn(i);if(Zp(r),Jp(r),!0===e&&!0!==r.Fa){const s=r.sharedClientState.getAllActiveQueryTargets(),c=yield kv(r,s.toArray());r.Fa=!0,yield Em(r.remoteStore,!0);for(const f of c)Zc(r.remoteStore,f)}else if(!1===e&&!1!==r.Fa){const s=[];let c=Promise.resolve();r.pa.forEach((f,v)=>{r.sharedClientState.isLocalQueryTarget(v)?s.push(v):c=c.then(()=>(Xd(r,v),vf(r.localStore,v,!0))),Th(r.remoteStore,v)}),yield c,yield kv(r,s),function(v){const x=Rn(v);x.Sa.forEach((k,q)=>{Th(x.remoteStore,q)}),x.ba.mr(),x.Sa=new Map,x.wa=new Hi(Nn.comparator)}(r),r.Fa=!1,yield Em(r.remoteStore,!1)}}),Qp.apply(this,arguments)}function kv(i,e,r){return $m.apply(this,arguments)}function $m(){return $m=(0,ve.c)(function*(i,e,r){const s=Rn(i),c=[],f=[];for(const v of e){let x;const k=s.pa.get(v);if(k&&0!==k.length){x=yield _f(s.localStore,xi(k[0]));for(const q of k){const oe=s.ga.get(q),ke=yield xf(s,oe);ke.snapshot&&f.push(ke.snapshot)}}else{const q=yield yf(s.localStore,v);x=yield _f(s.localStore,q),yield Pm(s,Lv(q),v,!1,x.resumeToken)}c.push(x)}return s.fa.u_(f),c}),$m.apply(this,arguments)}function Lv(i){return _u(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function WI(i){return r=Rn(i).localStore,Rn(Rn(r).persistence).Li();var r}function HI(i,e,r,s){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,ve.c)(function*(i,e,r,s){const c=Rn(i);if(c.Fa)return void sn("SyncEngine","Ignoring unexpected query state notification.");const f=c.pa.get(e);if(f&&f.length>0)switch(r){case"current":case"not-current":{const v=yield Sp(c.localStore,Nl(f[0])),x=js.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Po.EMPTY_BYTE_STRING);yield ua(c,v,x);break}case"rejected":yield vf(c.localStore,e,!0),Xd(c,e,s);break;default:zn()}}),Gm.apply(this,arguments)}function Fv(i,e,r){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,ve.c)(function*(i,e,r){const s=Zp(i);if(s.Fa){for(const c of e){if(s.pa.has(c)){sn("SyncEngine","Adding an already active target "+c);continue}const f=yield yf(s.localStore,c),v=yield _f(s.localStore,f);yield Pm(s,Lv(f),v.targetId,!1,v.resumeToken),Zc(s.remoteStore,v)}for(const c of r)s.pa.has(c)&&(yield vf(s.localStore,c,!1).then(()=>{Th(s.remoteStore,c),Xd(s,c)}).catch(w))}}),Xp.apply(this,arguments)}function Zp(i){const e=Rn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BI.bind(null,e),e.fa.u_=kI.bind(null,e.eventManager),e.fa.xa=LI.bind(null,e.eventManager),e}function Jp(i){const e=Rn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$I.bind(null,e),e}class Mh{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,ve.c)(function*(){r.serializer=wf(e.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(e),r.persistence=r.createPersistence(e),yield r.persistence.start(),r.localStore=r.createLocalStore(e),r.gcScheduler=r.createGarbageCollectionScheduler(e,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(e,r.localStore)})()}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return dv(this.persistence,new uv,e.initialUser,this.serializer)}createPersistence(e){return new Cp(xs.Hr,this.serializer)}createSharedClientState(e){return new dm}terminate(){var e=this;return(0,ve.c)(function*(){var r,s;null===(r=e.gcScheduler)||void 0===r||r.stop(),null===(s=e.indexBackfillerScheduler)||void 0===s||s.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jm extends Mh{constructor(e,r,s){super(),this.Na=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,ve.c)(function*(){yield r().call(s,e),yield s.Na.initialize(s,e),yield Jp(s.Na.syncEngine),yield qd(s.Na.remoteStore),yield s.persistence.fi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return dv(this.persistence,new uv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,r){return new nv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}createIndexBackfillerScheduler(e,r){const s=new ci(r,this.persistence);return new Ti(e.asyncQueue,s)}createPersistence(e){const r=am(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ba.withCacheSize(this.cacheSizeBytes):ba.DEFAULT;return new wp(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,xp(),Hd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new dm}}class Vv extends jm{constructor(e,r){super(e,r,!1),this.Na=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,ve.c)(function*(){yield r().call(s,e);const c=s.Na.syncEngine;s.sharedClientState instanceof Pp&&(s.sharedClientState.syncEngine={Zs:Bm.bind(null,c),Xs:HI.bind(null,c),eo:Fv.bind(null,c),Li:WI.bind(null,c),Ys:Rh.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.fi(function(){var f=(0,ve.c)(function*(v){yield function Ov(i,e){return Qp.apply(this,arguments)}(s.Na.syncEngine,v),s.gcScheduler&&(v&&!s.gcScheduler.started?s.gcScheduler.start():v||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(v&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():v||s.indexBackfillerScheduler.stop())});return function(v){return f.apply(this,arguments)}}())})()}createSharedClientState(e){const r=xp();if(!Pp.D(r))throw new rn(Ot.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=am(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pp(r,e.asyncQueue,s,e.clientId,e.initialUser)}}class eh{initialize(e,r){var s=this;return(0,ve.c)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>Pv(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=GI.bind(null,s.syncEngine),yield Em(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Cm}createDatastore(e){const r=wf(e.databaseInfo.databaseId),s=new mv(e.databaseInfo);return new xI(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return s=this.localStore,c=this.datastore,f=e.asyncQueue,v=r=>Pv(this.syncEngine,r,0),x=Ef.D()?new Ef:new eC,new pm(s,c,f,v,x);var s,c,f,v,x}createSyncEngine(e,r){return function(c,f,v,x,k,q,oe){const ke=new Rv(c,f,v,x,k,q);return oe&&(ke.Fa=!0),ke}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){var e=this;return(0,ve.c)(function*(){var r,s;yield(s=(0,ve.c)(function*(f){const v=Rn(f);sn("RemoteStore","RemoteStore shutting down."),v.v_.add(5),yield sd(v),v.M_.shutdown(),v.x_.set("Unknown")}),function c(f){return s.apply(this,arguments)})(e.remoteStore),null===(r=e.datastore)||void 0===r||r.terminate()})()}}function Uv(i,e=10240){let r=0;return{read:()=>(0,ve.c)(function*(){if(r<i.byteLength){const s={value:i.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,ve.c)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class Bv{constructor(e,r){this.ka=e,this.serializer=r,this.metadata=new ei,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(s=>{s&&s.ea()?this.metadata.resolve(s.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.X_)}`))},s=>this.metadata.reject(s))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,ve.c)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,ve.c)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,ve.c)(function*(){const r=yield e.Ka();if(null===r)return null;const s=e.qa.decode(r),c=Number(s);isNaN(c)&&e.$a(`length string (${s}) is not valid number`);const f=yield e.Ua(c);return new Tv(JSON.parse(f),r.length+c)})()}Wa(){return this.buffer.findIndex(e=>123===e)}Ka(){var e=this;return(0,ve.c)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const r=e.Wa();r<0&&e.$a("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}Ua(e){var r=this;return(0,ve.c)(function*(){for(;r.buffer.length<e;)(yield r.Ga())&&r.$a("Reached the end of bundle when more is expected.");const s=r.qa.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,ve.c)(function*(){const r=yield e.ka.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class Wm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,ve.c)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new rn(Ot.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(c=(0,ve.c)(function*(v,x){const k=Rn(v),q={documents:x.map(Mt=>Rc(k.serializer,Mt))},oe=yield k.vo("BatchGetDocuments",k.serializer.databaseId,ti.emptyPath(),q,x.length),ke=new Map;oe.forEach(Mt=>{const wn=function Tu(i,e){return"found"in e?function(s,c){er(!!c.found);const f=ca(s,c.found.name),v=Ni(c.found.updateTime),x=c.found.createTime?Ni(c.found.createTime):ir.min(),k=new Oo({mapValue:{fields:c.found.fields}});return zi.newFoundDocument(f,v,x,k)}(i,e):"missing"in e?function(s,c){er(!!c.missing),er(!!c.readTime);const f=ca(s,c.missing),v=Ni(c.readTime);return zi.newNoDocument(f,v)}(i,e):zn()}(k.serializer,Mt);ke.set(wn.key.toString(),wn)});const ht=[];return x.forEach(Mt=>{const wn=ke.get(Mt.toString());er(!!wn),ht.push(wn)}),ht}),function f(v,x){return c.apply(this,arguments)})(r.datastore,e);var c;return s.forEach(c=>r.recordVersion(c)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ha(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.c)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,c)=>{const f=Nn.fromPath(c);e.mutations.push(new xd(f,e.precondition(f)))}),yield(s=(0,ve.c)(function*(f,v){const x=Rn(f),k={writes:v.map(q=>td(x.serializer,q))};yield x.So("Commit",x.serializer.databaseId,ti.emptyPath(),k)}),function c(f,v){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw zn();r=ir.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new rn(Ot.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(ir.min())?oo.exists(!1):oo.updateTime(r):oo.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(ir.min()))throw new rn(Ot.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oo.updateTime(r)}return oo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $v{constructor(e,r,s,c,f){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=c,this.deferred=f,this.za=s.maxAttempts,this.jo=new hm(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,ve.c)(function*(){const r=new Wm(e.datastore),s=e.Ja(r);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(c)}).catch(f=>{e.Ya(f)}))}).catch(c=>{e.Ya(c)})}))}Ja(e){try{const r=this.updateFunction(e);return!ra(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!rc(r)}return!1}}class Nf{constructor(e,r,s,c){var f=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=c,this.user=Mi.UNAUTHENTICATED,this.clientId=Ja.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var v=(0,ve.c)(function*(x){sn("FirestoreClient","Received user=",x.uid),yield f.authCredentialListener(x),f.user=x});return function(x){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(s,v=>(sn("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rn(Ot.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.c)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const c=Qd(s,"Failed to shutdown persistence");r.reject(c)}})),r.promise}}function dd(i,e){return th.apply(this,arguments)}function th(){return th=(0,ve.c)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),sn("FirestoreClient","Initializing OfflineComponentProvider");const r=i.configuration;yield e.initialize(r);let s=r.initialUser;i.setCredentialChangeListener(function(){var c=(0,ve.c)(function*(f){s.isEqual(f)||(yield Tp(e.localStore,f),s=f)});return function(f){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),th.apply(this,arguments)}function Hm(i,e){return zm.apply(this,arguments)}function zm(){return zm=(0,ve.c)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const r=yield Ph(i);sn("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,i.configuration),i.setCredentialChangeListener(s=>Im(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,c)=>Im(e.remoteStore,c)),i._onlineComponents=e}),zm.apply(this,arguments)}function Gv(i){return"FirebaseError"===i.name?i.code===Ot.FAILED_PRECONDITION||i.code===Ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Ph(i){return Of.apply(this,arguments)}function Of(){return Of=(0,ve.c)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){sn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield dd(i,i._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!Gv(r))throw r;$o("Error using user provided cache. Falling back to memory cache: "+r),yield dd(i,new Mh)}}else sn("FirestoreClient","Using default OfflineComponentProvider"),yield dd(i,new Mh);return i._offlineComponents}),Of.apply(this,arguments)}function ng(i){return jv.apply(this,arguments)}function jv(){return jv=(0,ve.c)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(sn("FirestoreClient","Using user provided OnlineComponentProvider"),yield Hm(i,i._uninitializedComponentsProvider._online)):(sn("FirestoreClient","Using default OnlineComponentProvider"),yield Hm(i,new eh))),i._onlineComponents}),jv.apply(this,arguments)}function zI(i){return Ph(i).then(e=>e.persistence)}function xh(i){return Ph(i).then(e=>e.localStore)}function Wv(i){return ng(i).then(e=>e.remoteStore)}function Hv(i){return ng(i).then(e=>e.syncEngine)}function kf(i){return Km.apply(this,arguments)}function Km(){return Km=(0,ve.c)(function*(i){const e=yield ng(i),r=e.eventManager;return r.onListen=VI.bind(null,e.syncEngine),r.onUnlisten=UI.bind(null,e.syncEngine),r}),Km.apply(this,arguments)}function Nh(i,e,r={}){const s=new ei;return i.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return function(f,v,x,k,q){const oe=new tg({next:ht=>{v.enqueueAndForget(()=>Tm(f,ke));const Mt=ht.docs.has(x);!Mt&&ht.fromCache?q.reject(new rn(Ot.UNAVAILABLE,"Failed to get document because the client is offline.")):Mt&&ht.fromCache&&k&&"server"===k.source?q.reject(new rn(Ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):q.resolve(ht)},error:ht=>q.reject(ht)}),ke=new Sm(qo(x.path),oe,{includeMetadataChanges:!0,Z_:!0});return wm(f,ke)}(yield kf(i),i.asyncQueue,e,r,s)})),s.promise}function Lf(i,e,r={}){const s=new ei;return i.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return function(f,v,x,k,q){const oe=new tg({next:ht=>{v.enqueueAndForget(()=>Tm(f,ke)),ht.fromCache&&"server"===k.source?q.reject(new rn(Ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):q.resolve(ht)},error:ht=>q.reject(ht)}),ke=new Sm(x,oe,{includeMetadataChanges:!0,Z_:!0});return wm(f,ke)}(yield kf(i),i.asyncQueue,e,r,s)})),s.promise}function Qv(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Qm=new Map;function Oh(i,e,r){if(!r)throw new rn(Ot.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Xv(i,e,r,s){if(!0===e&&!0===s)throw new rn(Ot.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function Zv(i){if(!Nn.isDocumentKey(i))throw new rn(Ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Jv(i){if(Nn.isDocumentKey(i))throw new rn(Ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function rg(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(s=i).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof i?"a function":zn()}function bi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new rn(Ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=rg(i);throw new rn(Ot.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return i}function ig(i,e){if(e<=0)throw new rn(Ot.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class kh{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new rn(Ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new rn(Ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Qv(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(f){if(void 0!==f.timeoutSeconds){if(isNaN(f.timeoutSeconds))throw new rn(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new rn(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new rn(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hd{constructor(e,r,s,c){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new rn(Ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new rn(Ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kh(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new ah;switch(s.type){case"firstParty":return new Js(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rn(Ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=Qm.get(r);s&&(sn("ComponentProvider","Removing Datastore"),Qm.delete(r),s.terminate())}(this),Promise.resolve()}}class Sa{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Sa(this.firestore,e,this._query)}}class ko{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ko(this.firestore,e,this._key)}}class eu extends Sa{constructor(e,r,s){super(e,r,qo(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ko(this.firestore,null,new Nn(e))}withConverter(e){return new eu(this.firestore,e,this._path)}}function og(i,e,...r){if(i=(0,ae.Yj)(i),Oh("collection","path",e),i instanceof hd){const s=ti.fromString(e,...r);return Jv(s),new eu(i,null,s)}{if(!(i instanceof ko||i instanceof eu))throw new rn(Ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ti.fromString(e,...r));return Jv(s),new eu(i.firestore,null,s)}}function Bf(i,e,...r){if(i=(0,ae.Yj)(i),1===arguments.length&&(e=Ja.newId()),Oh("doc","path",e),i instanceof hd){const s=ti.fromString(e,...r);return Zv(s),new ko(i,null,new Nn(s))}{if(!(i instanceof ko||i instanceof eu))throw new rn(Ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ti.fromString(e,...r));return Zv(s),new ko(i.firestore,i instanceof eu?i.converter:null,new Nn(s))}}function ey(i,e){return i=(0,ae.Yj)(i),e=(0,ae.Yj)(e),(i instanceof ko||i instanceof eu)&&(e instanceof ko||e instanceof eu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Xm(i,e){return i=(0,ae.Yj)(i),e=(0,ae.Yj)(e),i instanceof Sa&&e instanceof Sa&&i.firestore===e.firestore&&aa(i._query,e._query)&&i.converter===e.converter}class ty{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new hm(this,"async_queue_retry"),this._u=()=>{const r=Hd();r&&sn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.jo.Ko()};const e=Hd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const r=Hd();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const r=new ei;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,ve.c)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(r){if(!mt(r))throw r;sn("AsyncQueue","Operation failed with retryable error: "+r)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const r=this.Xa.then(()=>(this.iu=!0,e().catch(s=>{throw this.ru=s,this.iu=!1,Gi("INTERNAL UNHANDLED ERROR: ",function(v){let x=v.message||"";return v.stack&&(x=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),x}(s)),s}).then(s=>(this.iu=!1,s))));return this.Xa=r,r}enqueueAfterDelay(e,r,s){this.au(),this.ou.indexOf(e)>-1&&(r=0);const c=Yd.createAndSchedule(this,e,r,s,f=>this.lu(f));return this.nu.push(c),c}au(){this.ru&&zn()}verifyOperationInProgress(){}hu(){var e=this;return(0,ve.c)(function*(){let r;do{r=e.Xa,yield r}while(r!==e.Xa)})()}Pu(e){for(const r of this.nu)if(r.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.nu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const r=this.nu.indexOf(e);this.nu.splice(r,1)}}function Zm(i){return function(r,s){if("object"!=typeof r||null===r)return!1;const c=r;for(const f of["next","error","complete"])if(f in c&&"function"==typeof c[f])return!0;return!1}(i)}class XI{constructor(){this._progressObserver={},this._taskCompletionResolver=new ei,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class To extends hd{constructor(e,r,s,c){super(e,r,s,c),this.type="firestore",this._queue=new ty,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Jm(this),this._firestoreClient.terminate()}}function rs(i){return i._firestoreClient||Jm(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Jm(i){var e,r,s;const c=i._freezeSettings(),f=(k=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Xh(i._databaseId,k,i._persistenceKey,(oe=c).host,oe.ssl,oe.experimentalForceLongPolling,oe.experimentalAutoDetectLongPolling,Qv(oe.experimentalLongPollingOptions),oe.useFetchStreams));var k,oe;i._firestoreClient=new Nf(i._authCredentials,i._appCheckCredentials,i._queue,f),null!==(r=c.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(s=c.localCache)&&void 0!==s&&s._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.localCache.kind,_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider})}function $f(i,e,r){const s=new ei;return i.asyncQueue.enqueue((0,ve.c)(function*(){try{yield dd(i,r),yield Hm(i,e),s.resolve()}catch(c){const f=c;if(!Gv(f))throw f;$o("Error enabling indexeddb cache. Falling back to memory cache: "+f),s.reject(f)}})).then(()=>s.promise)}function rE(i){if(i._initialized||i._terminated)throw new rn(Ot.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class tu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tu(Po.fromBase64String(e))}catch(r){throw new rn(Ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new tu(Po.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nu{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new rn(Ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fh{constructor(e){this._methodName=e}}class nh{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new rn(Ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new rn(Ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return or(this._lat,e._lat)||or(this._long,e._long)}}const oE=/^__.*__$/;class sE{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new ol(e,this.data,this.fieldMask,r,this.fieldTransforms):new Bl(e,this.data,r,this.fieldTransforms)}}class ag{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new ol(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function e_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zn()}}class lg{constructor(e,r,s,c,f,v){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===f&&this.Eu(),this.fieldTransforms=f||[],this.fieldMask=v||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),c=this.Au({path:s,Vu:!1});return c.mu(e),c}fu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),c=this.Au({path:s,Vu:!1});return c.Eu(),c}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return a_(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(e_(this.du)&&oE.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class aE{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||wf(e)}Su(e,r,s,c=!1){return new lg({du:e,methodName:r,wu:s,path:Wi.emptyPath(),Vu:!1,yu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rh(i){const e=i._freezeSettings(),r=wf(i._databaseId);return new aE(i._databaseId,!!e.ignoreUndefinedProperties,r)}function cg(i,e,r,s,c,f={}){const v=i.Su(f.merge||f.mergeFields?2:0,e,r,c);s_("Data must be an object, but it was:",v,s);const x=sy(s,v);let k,q;if(f.merge)k=new ts(v.fieldMask),q=v.fieldTransforms;else if(f.mergeFields){const oe=[];for(const ke of f.mergeFields){const ht=jf(e,ke,r);if(!v.contains(ht))throw new rn(Ot.INVALID_ARGUMENT,`Field '${ht}' is specified in your field mask but missing from your input data.`);cE(oe,ht)||oe.push(ht)}k=new ts(oe),q=v.fieldTransforms.filter(ke=>k.covers(ke.field))}else k=null,q=v.fieldTransforms;return new sE(new Oo(x),k,q)}class Vh extends Fh{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vh}}function t_(i,e,r){return new lg({du:3,wu:e.settings.wu,methodName:i._methodName,Vu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ug extends Fh{_toFieldTransform(e){return new Iu(e.path,new qc)}isEqual(e){return e instanceof ug}}class n_ extends Fh{constructor(e,r){super(e),this.bu=r}_toFieldTransform(e){const r=t_(this,e,!0),s=this.bu.map(f=>Au(f,r)),c=new Fl(s);return new Iu(e.path,c)}isEqual(e){return e instanceof n_&&(0,ae.IN)(this.bu,e.bu)}}class r_ extends Fh{constructor(e,r){super(e),this.bu=r}_toFieldTransform(e){const r=t_(this,e,!0),s=this.bu.map(f=>Au(f,r)),c=new Ga(s);return new Iu(e.path,c)}isEqual(e){return e instanceof r_&&(0,ae.IN)(this.bu,e.bu)}}class dg extends Fh{constructor(e,r){super(e),this.Du=r}_toFieldTransform(e){const r=new Vl(e.serializer,Ad(e.serializer,this.Du));return new Iu(e.path,r)}isEqual(e){return e instanceof dg&&this.Du===e.Du}}function Gf(i,e,r,s){const c=i.Su(1,e,r);s_("Data must be an object, but it was:",c,s);const f=[],v=Oo.empty();es(s,(k,q)=>{const oe=hg(e,k,r);q=(0,ae.Yj)(q);const ke=c.fu(oe);if(q instanceof Vh)f.push(oe);else{const ht=Au(q,ke);null!=ht&&(f.push(oe),v.set(oe,ht))}});const x=new ts(f);return new ag(v,x,c.fieldTransforms)}function oy(i,e,r,s,c,f){const v=i.Su(1,e,r),x=[jf(e,s,r)],k=[c];if(f.length%2!=0)throw new rn(Ot.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ht=0;ht<f.length;ht+=2)x.push(jf(e,f[ht])),k.push(f[ht+1]);const q=[],oe=Oo.empty();for(let ht=x.length-1;ht>=0;--ht)if(!cE(q,x[ht])){const Mt=x[ht];let wn=k[ht];wn=(0,ae.Yj)(wn);const Bn=v.fu(Mt);if(wn instanceof Vh)q.push(Mt);else{const kn=Au(wn,Bn);null!=kn&&(q.push(Mt),oe.set(Mt,kn))}}const ke=new ts(q);return new ag(oe,ke,v.fieldTransforms)}function i_(i,e,r,s=!1){return Au(r,i.Su(s?4:3,e))}function Au(i,e){if(o_(i=(0,ae.Yj)(i)))return s_("Unsupported field value:",e,i),sy(i,e);if(i instanceof Fh)return function(s,c){if(!e_(c.du))throw c.pu(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.pu(`${s._methodName}() is not currently supported inside arrays`);const f=s._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(s,c){const f=[];let v=0;for(const x of s){let k=Au(x,c.gu(v));null==k&&(k={nullValue:"NULL_VALUE"}),f.push(k),v++}return{arrayValue:{values:f}}}(i,e)}return function(s,c){if(null===(s=(0,ae.Yj)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Ad(c.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const f=ro.fromDate(s);return{timestampValue:Un(c.serializer,f)}}if(s instanceof ro){const f=new ro(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Un(c.serializer,f)}}if(s instanceof nh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof tu)return{bytesValue:Hn(c.serializer,s._byteString)};if(s instanceof ko){const f=c.databaseId,v=s.firestore._databaseId;if(!v.isEqual(f))throw c.pu(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:Ta(s.firestore._databaseId||c.databaseId,s._key.path)}}throw c.pu(`Unsupported field value: ${rg(s)}`)}(i,e)}function sy(i,e){const r={};return Vu(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(i,(s,c)=>{const f=Au(c,e.Ru(s));null!=f&&(r[s]=f)}),{mapValue:{fields:r}}}function o_(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ro||i instanceof nh||i instanceof tu||i instanceof ko||i instanceof Fh)}function s_(i,e,r){if(!o_(r)||"object"!=typeof(c=r)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const s=rg(r);throw e.pu("an object"===s?i+" a custom object":i+" "+s)}var c}function jf(i,e,r){if((e=(0,ae.Yj)(e))instanceof nu)return e._internalPath;if("string"==typeof e)return hg(i,e);throw a_("Field path arguments must be of type string or ",i,!1,void 0,r)}const lE=new RegExp("[~\\*/\\[\\]]");function hg(i,e,r){if(e.search(lE)>=0)throw a_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new nu(...e.split("."))._internalPath}catch{throw a_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function a_(i,e,r,s,c){const f=s&&!s.isEmpty(),v=void 0!==c;let x=`Function ${e}() called with invalid data`;r&&(x+=" (via `toFirestore()`)"),x+=". ";let k="";return(f||v)&&(k+=" (found",f&&(k+=` in field ${s}`),v&&(k+=` in document ${c}`),k+=")"),new rn(Ot.INVALID_ARGUMENT,x+i+k)}function cE(i,e){return i.some(r=>r.isEqual(e))}class fd{constructor(e,r,s,c,f){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new ko(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(fg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class uE extends fd{data(){return super.data()}}function fg(i,e){return"string"==typeof e?hg(i,e):e instanceof nu?e._internalPath:e._delegate._internalPath}function dE(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new rn(Ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l_{}class Wf extends l_{}function pd(i,e,...r){let s=[];e instanceof l_&&s.push(e),s=s.concat(r),function(f){const v=f.filter(k=>k instanceof ih).length,x=f.filter(k=>k instanceof Hf).length;if(v>1||v>0&&x>0)throw new rn(Ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)i=c._apply(i);return i}class Hf extends Wf{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new Hf(e,r,s)}_apply(e){const r=this._parse(e);return h_(e._query,r),new Sa(e.firestore,e.converter,zc(e._query,r))}_parse(e){const r=rh(e.firestore);return function(f,v,x,k,q,oe,ke){let ht;if(q.isKeyField()){if("array-contains"===oe||"array-contains-any"===oe)throw new rn(Ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${oe}' queries on documentId().`);if("in"===oe||"not-in"===oe){gd(ke,oe);const Mt=[];for(const wn of ke)Mt.push(uy(k,f,wn));ht={arrayValue:{values:Mt}}}else ht=uy(k,f,ke)}else"in"!==oe&&"not-in"!==oe&&"array-contains-any"!==oe||gd(ke,oe),ht=i_(x,"where",ke,"in"===oe||"not-in"===oe);return fi.create(q,oe,ht)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class ih extends l_{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ih(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:Pi.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(c,f){let v=c;const x=f.getFlattenedFilters();for(const k of x)h_(v,k),v=zc(v,k)}(e._query,r),new Sa(e.firestore,e.converter,zc(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class c_ extends Wf{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new c_(e,r)}_apply(e){const r=function(c,f,v){if(null!==c.startAt)throw new rn(Ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new rn(Ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xl(f,v)}(e._query,this._field,this._direction);return new Sa(e.firestore,e.converter,function(c,f){const v=c.explicitOrderBy.concat([f]);return new rl(c.path,c.collectionGroup,v,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,r))}}class Ho extends Wf{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new Ho(e,r,s)}_apply(e){return new Sa(e.firestore,e.converter,ec(e._query,this._limit,this._limitType))}}class pg extends Wf{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new pg(e,r,s)}_apply(e){const r=cy(e,this.type,this._docOrFields,this._inclusive);return new Sa(e.firestore,e.converter,(f=r,new rl((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,f,c.endAt)));var c,f}}class zf extends Wf{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new zf(e,r,s)}_apply(e){const r=cy(e,this.type,this._docOrFields,this._inclusive);return new Sa(e.firestore,e.converter,(f=r,new rl((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,f)));var c,f}}function cy(i,e,r,s){if(r[0]=(0,ae.Yj)(r[0]),r[0]instanceof fd)return function(f,v,x,k,q){if(!k)throw new rn(Ot.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${x}().`);const oe=[];for(const ke of xl(f))if(ke.field.isKeyField())oe.push(bl(v,k.key));else{const ht=k.data.field(ke.field);if(_c(ht))throw new rn(Ot.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ke.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ht){const Mt=ke.field.canonicalString();throw new rn(Ot.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Mt}' (used as the orderBy) does not exist.`)}oe.push(ht)}return new yc(oe,q)}(i._query,i.firestore._databaseId,e,r[0]._document,s);{const c=rh(i.firestore);return function(v,x,k,q,oe,ke){const ht=v.explicitOrderBy;if(oe.length>ht.length)throw new rn(Ot.INVALID_ARGUMENT,`Too many arguments provided to ${q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Mt=[];for(let wn=0;wn<oe.length;wn++){const Bn=oe[wn];if(ht[wn].field.isKeyField()){if("string"!=typeof Bn)throw new rn(Ot.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${q}(), but got a ${typeof Bn}`);if(!Ba(v)&&-1!==Bn.indexOf("/"))throw new rn(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${q}() must be a plain document ID, but '${Bn}' contains a slash.`);const kn=v.path.child(ti.fromString(Bn));if(!Nn.isDocumentKey(kn))throw new rn(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${q}() must result in a valid document path, but '${kn}' is not because it contains an odd number of segments.`);const pr=new Nn(kn);Mt.push(bl(x,pr))}else{const kn=i_(k,q,Bn);Mt.push(kn)}}return new yc(Mt,ke)}(i._query,i.firestore._databaseId,c,e,r,s)}}function uy(i,e,r){if("string"==typeof(r=(0,ae.Yj)(r))){if(""===r)throw new rn(Ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ba(e)&&-1!==r.indexOf("/"))throw new rn(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(ti.fromString(r));if(!Nn.isDocumentKey(s))throw new rn(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return bl(i,new Nn(s))}if(r instanceof ko)return bl(i,r._key);throw new rn(Ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rg(r)}.`)}function gd(i,e){if(!Array.isArray(i)||0===i.length)throw new rn(Ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h_(i,e){const r=function(c,f){for(const v of c)for(const x of v.getFlattenedFilters())if(f.indexOf(x.op)>=0)return x.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new rn(Ot.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class p_{convertValue(e,r="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Co(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw zn()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return es(e,(c,f)=>{s[c]=this.convertValue(f,r)}),s}convertGeoPoint(e){return new nh(Co(e.latitude),Co(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Ca(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Vs(e));default:return null}}convertTimestamp(e){const r=La(e);return new ro(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=ti.fromString(e);er(O(s));const c=new ia(s.get(1),s.get(3)),f=new Nn(s.popFirst(5));return c.isEqual(r)||Gi(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),f}}function Kf(i,e,r){let s;return s=i?r&&(r.merge||r.mergeFields)?i.toFirestore(e,r):i.toFirestore(e):e,s}class dy extends p_{constructor(e){super(),this.firestore=e}convertBytes(e){return new tu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ko(this.firestore,null,r)}}class md{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gl extends fd{constructor(e,r,s,c,f,v){super(e,r,s,c,v),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(fg("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class qf extends Gl{data(e={}){return super.data(e)}}class _d{constructor(e,r,s,c){this._firestore=e,this._userDataWriter=r,this._snapshot=c,this.metadata=new md(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new qf(this._firestore,this._userDataWriter,s.key,s,new md(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new rn(Ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let v=0;return c._snapshot.docChanges.map(x=>({type:"added",doc:new qf(c._firestore,c._userDataWriter,x.doc.key,x.doc,new md(c._snapshot.mutatedKeys.has(x.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:v++}))}{let v=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(x=>f||3!==x.type).map(x=>{const k=new qf(c._firestore,c._userDataWriter,x.doc.key,x.doc,new md(c._snapshot.mutatedKeys.has(x.doc.key),c._snapshot.fromCache),c.query.converter);let q=-1,oe=-1;return 0!==x.type&&(q=v.indexOf(x.doc.key),v=v.delete(x.doc.key)),1!==x.type&&(v=v.add(x.doc),oe=v.indexOf(x.doc.key)),{type:__(x.type),doc:k,oldIndex:q,newIndex:oe}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function __(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zn()}}function v_(i,e){return i instanceof Gl&&e instanceof Gl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof _d&&e instanceof _d&&i._firestore===e._firestore&&Xm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class ac extends p_{constructor(e){super(),this.firestore=e}convertBytes(e){return new tu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ko(this.firestore,null,r)}}function py(i,e,r){i=bi(i,ko);const s=bi(i.firestore,To),c=Kf(i.converter,e,r);return $h(s,[cg(rh(s),"setDoc",i._key,c,null!==i.converter,r).toMutation(i._key,oo.none())])}function Bh(i,e,r,...s){i=bi(i,ko);const c=bi(i.firestore,To),f=rh(c);let v;return v="string"==typeof(e=(0,ae.Yj)(e))||e instanceof nu?oy(f,"updateDoc",i._key,e,r,s):Gf(f,"updateDoc",i._key,e),$h(c,[v.toMutation(i._key,oo.exists(!0))])}function gy(i,...e){var r,s,c;i=(0,ae.Yj)(i);let f={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||Zm(e[v])||(f=e[v],v++);const x={includeMetadataChanges:f.includeMetadataChanges};if(Zm(e[v])){const ke=e[v];e[v]=null===(r=ke.next)||void 0===r?void 0:r.bind(ke),e[v+1]=null===(s=ke.error)||void 0===s?void 0:s.bind(ke),e[v+2]=null===(c=ke.complete)||void 0===c?void 0:c.bind(ke)}let k,q,oe;if(i instanceof ko)q=bi(i.firestore,To),oe=qo(i._key.path),k={next:ke=>{e[v]&&e[v](y_(q,i,ke))},error:e[v+1],complete:e[v+2]};else{const ke=bi(i,Sa);q=bi(ke.firestore,To),oe=ke._query;const ht=new ac(q);k={next:Mt=>{e[v]&&e[v](new _d(q,ht,ke,Mt))},error:e[v+1],complete:e[v+2]},dE(i._query)}return function(ht,Mt,wn,Bn){const kn=new tg(Bn),pr=new Sm(Mt,kn,wn);return ht.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return wm(yield kf(ht),pr)})),()=>{kn.La(),ht.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return Tm(yield kf(ht),pr)}))}}(rs(q),oe,x,k)}function $h(i,e){return function(s,c){const f=new ei;return s.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return function Nm(i,e,r){return Om.apply(this,arguments)}(yield Hv(s),c,f)})),f.promise}(rs(i),e)}function y_(i,e,r){const s=r.docs.get(e._key),c=new ac(i);return new Gl(i,c,e._key,s,new md(r.hasPendingWrites,r.fromCache),e.converter)}const SE={maxAttempts:5};class Iy{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=rh(e)}set(e,r,s){this._verifyNotCommitted();const c=yd(e,this._firestore),f=Kf(c.converter,r,s),v=cg(this._dataReader,"WriteBatch.set",c._key,f,null!==c.converter,s);return this._mutations.push(v.toMutation(c._key,oo.none())),this}update(e,r,s,...c){this._verifyNotCommitted();const f=yd(e,this._firestore);let v;return v="string"==typeof(r=(0,ae.Yj)(r))||r instanceof nu?oy(this._dataReader,"WriteBatch.update",f._key,r,s,c):Gf(this._dataReader,"WriteBatch.update",f._key,r),this._mutations.push(v.toMutation(f._key,oo.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=yd(e,this._firestore);return this._mutations=this._mutations.concat(new Ha(r._key,oo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new rn(Ot.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yd(i,e){if((i=(0,ae.Yj)(i)).firestore!==e)throw new rn(Ot.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class E_ extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=rh(r)}get(r){const s=yd(r,this._firestore),c=new dy(this._firestore);return this._transaction.lookup([s._key]).then(f=>{if(!f||1!==f.length)return zn();const v=f[0];if(v.isFoundDocument())return new fd(this._firestore,c,v.key,v,s.converter);if(v.isNoDocument())return new fd(this._firestore,c,s._key,null,s.converter);throw zn()})}set(r,s,c){const f=yd(r,this._firestore),v=Kf(f.converter,s,c),x=cg(this._dataReader,"Transaction.set",f._key,v,null!==f.converter,c);return this._transaction.set(f._key,x),this}update(r,s,c,...f){const v=yd(r,this._firestore);let x;return x="string"==typeof(s=(0,ae.Yj)(s))||s instanceof nu?oy(this._dataReader,"Transaction.update",v._key,s,c,f):Gf(this._dataReader,"Transaction.update",v._key,s),this._transaction.update(v._key,x),this}delete(r){const s=yd(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=yd(e,this._firestore),s=new ac(this._firestore);return super.get(e).then(c=>new Gl(this._firestore,s,r._key,c._document,new md(!1,!1),r.converter))}}function vg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new rn("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function R_(){if(typeof Uint8Array>"u")throw new rn("unimplemented","Uint8Arrays are not available in this environment.")}function M_(){if(!function Uu(){return typeof atob<"u"}())throw new rn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){ho=Xe.SDK_VERSION,(0,Xe._registerComponent)(new et.Yl("firestore",(s,{instanceIdentifier:c,options:f})=>{const v=s.getProvider("app").getImmediate(),x=new To(new dc(s.getProvider("auth-internal")),new ea(s.getProvider("app-check-internal")),function(q,oe){if(!Object.prototype.hasOwnProperty.apply(q.options,["projectId"]))throw new rn(Ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ia(q.options.projectId,oe)}(v,c),v);return f=Object.assign({useFetchStreams:r},f),x._setSettings(f),x},"PUBLIC").setMultipleInstances(!0)),(0,Xe.registerVersion)(Zs,"4.4.2",e),(0,Xe.registerVersion)(Zs,"4.4.2","esm2017")}();class Xf{constructor(e){this._delegate=e}static fromBase64String(e){return M_(),new Xf(tu.fromBase64String(e))}static fromUint8Array(e){return R_(),new Xf(tu.fromUint8Array(e))}toBase64(){return M_(),this._delegate.toBase64()}toUint8Array(){return R_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ty(i){return function pC(i,e){if("object"!=typeof i||null===i)return!1;const r=i;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(i,["next","error","complete"])}class gC{enableIndexedDbPersistence(e,r){return function iC(i,e){rE(i=bi(i,To));const r=rs(i);if(r._uninitializedComponentsProvider)throw new rn(Ot.FAILED_PRECONDITION,"SDK cache is already specified.");$o("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),c=new eh;return $f(r,c,new jm(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function JI(i){rE(i=bi(i,To));const e=rs(i);if(e._uninitializedComponentsProvider)throw new rn(Ot.FAILED_PRECONDITION,"SDK cache is already specified.");$o("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=i._freezeSettings(),s=new eh;return $f(e,s,new Vv(s,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ny(i){if(i._initialized&&!i._terminated)throw new rn(Ot.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ei;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ve.c)(function*(){try{yield(r=(0,ve.c)(function*(c){if(!U.D())return Promise.resolve();const f=c+"main";yield U.delete(f)}),function s(c){return r.apply(this,arguments)})(am(i._databaseId,i._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class NE{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof ia||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&$o("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function Uf(i,e,r,s={}){var c;const f=(i=bi(i,hd))._getSettings(),v=`${e}:${r}`;if("firestore.googleapis.com"!==f.host&&f.host!==v&&$o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},f),{host:v,ssl:!1})),s.mockUserToken){let x,k;if("string"==typeof s.mockUserToken)x=s.mockUserToken,k=Mi.MOCK_USER;else{x=(0,ae.YD)(s.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const q=s.mockUserToken.sub||s.mockUserToken.user_id;if(!q)throw new rn(Ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Mi(q)}i._authCredentials=new Ts(new kc(x,k))}}(this._delegate,e,r,s)}enableNetwork(){return function tE(i){return function KI(i){return i.asyncQueue.enqueue((0,ve.c)(function*(){const e=yield zI(i),r=yield Wv(i);return e.setNetworkEnabled(!0),function(c){const f=Rn(c);return f.v_.delete(0),Df(f)}(r)}))}(rs(i=bi(i,To)))}(this._delegate)}disableNetwork(){return function nE(i){return function qI(i){return i.asyncQueue.enqueue((0,ve.c)(function*(){const e=yield zI(i),r=yield Wv(i);return e.setNetworkEnabled(!1),(s=(0,ve.c)(function*(f){const v=Rn(f);v.v_.add(0),yield sd(v),v.x_.set("Offline")}),function c(f){return s.apply(this,arguments)})(r);var s}))}(rs(i=bi(i,To)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Xv("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function eE(i){return function(r){const s=new ei;return r.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return function xv(i,e){return Ah.apply(this,arguments)}(yield Hv(r),s)})),s.promise}(rs(i=bi(i,To)))}(this._delegate)}onSnapshotsInSync(e){return function IE(i,e){return function Kv(i,e){const r=new tg(e);return i.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return c=yield kf(i),f=r,Rn(c).K_.add(f),void f.next();var c,f})),()=>{r.La(),i.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return c=yield kf(i),f=r,void Rn(c).K_.delete(f);var c,f}))}}(rs(i=bi(i,To)),Zm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new rn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zf(this,og(this._delegate,e))}catch(r){throw ul(r,"collection()","Firestore.collection()")}}doc(e){try{return new jl(this,Bf(this._delegate,e))}catch(r){throw ul(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new dl(this,function QI(i,e){if(i=bi(i,hd),Oh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new rn(Ot.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Sa(i,null,(s=e,new rl(ti.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw ul(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function C_(i,e,r){i=bi(i,To);const s=Object.assign(Object.assign({},SE),r);return function(f){if(f.maxAttempts<1)throw new rn(Ot.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(f,v,x){const k=new ei;return f.asyncQueue.enqueueAndForget((0,ve.c)(function*(){const q=yield function zv(i){return ng(i).then(e=>e.datastore)}(f);new $v(f.asyncQueue,q,x,v,k).ja()})),k.promise}(rs(i),c=>e(new E_(i,c)),s)}(this._delegate,r=>e(new OE(this,r)))}batch(){return rs(this._delegate),new kE(new Iy(this._delegate,e=>$h(this._delegate,e)))}loadBundle(e){return function iy(i,e){const r=rs(i=bi(i,To)),s=new XI;return function Ff(i,e,r,s){const c=function(v,x){let k;return k="string"==typeof v?Da().encode(v):v,oe=function(oe,ke){if(oe instanceof Uint8Array)return Uv(oe,void 0);if(oe instanceof ArrayBuffer)return Uv(new Uint8Array(oe),void 0);if(oe instanceof ReadableStream)return oe.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new Bv(oe,x);var oe}(r,wf(e));i.asyncQueue.enqueueAndForget((0,ve.c)(function*(){!function eg(i,e,r){const s=Rn(i);var c;(c=(0,ve.c)(function*(v,x,k){try{const q=yield x.getMetadata();if(yield function(wn,Bn){const kn=Rn(wn),pr=Ni(Bn.createTime);return kn.persistence.runTransaction("hasNewerBundle","readonly",Ur=>kn.$r.getBundleMetadata(Ur,Bn.id)).then(Ur=>!!Ur&&Ur.createTime.compareTo(pr)>=0)}(v.localStore,q))return yield x.close(),k._completeWith({taskState:"Success",documentsLoaded:(wn=q).totalDocuments,bytesLoaded:wn.totalBytes,totalDocuments:wn.totalDocuments,totalBytes:wn.totalBytes}),Promise.resolve(new Set);k._updateProgress(bv(q));const oe=new FI(q,v.localStore,x.serializer);let ke=yield x.Oa();for(;ke;){const Mt=yield oe.na(ke);Mt&&k._updateProgress(Mt),ke=yield x.Oa()}const ht=yield oe.complete();return yield ua(v,ht.sa,void 0),yield function(wn,Bn){const kn=Rn(wn);return kn.persistence.runTransaction("Save bundle","readwrite",pr=>kn.$r.saveBundleMetadata(pr,Bn))}(v.localStore,q),k._completeWith(ht.progress),Promise.resolve(ht.ia)}catch(q){return $o("SyncEngine",`Loading bundle failed with ${q}`),k._failWith(q),Promise.resolve(new Set)}var wn}),function f(v,x,k){return c.apply(this,arguments)})(s,e,r).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield Hv(i),c,s)}))}(r,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function oC(i,e){return function qv(i,e){return i.asyncQueue.enqueue((0,ve.c)(function*(){return function(s,c){const f=Rn(s);return f.persistence.runTransaction("Get named query","readonly",v=>f.$r.getNamedQuery(v,c))}(yield xh(i),e)}))}(rs(i=bi(i,To)),e).then(r=>r?new Sa(i,null,r.query):null)}(this._delegate,e).then(r=>r?new dl(this,r):null)}}class P_ extends p_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xf(new tu(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return jl.forKey(r,this.firestore,null)}}class OE{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new P_(e)}get(e){const r=sh(e);return this._delegate.get(r).then(s=>new yg(this._firestore,new Gl(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const c=sh(e);return s?(vg("Transaction.set",s),this._delegate.set(c,r,s)):this._delegate.set(c,r),this}update(e,r,s,...c){const f=sh(e);return 2===arguments.length?this._delegate.update(f,r):this._delegate.update(f,r,s,...c),this}delete(e){const r=sh(e);return this._delegate.delete(r),this}}class kE{constructor(e){this._delegate=e}set(e,r,s){const c=sh(e);return s?(vg("WriteBatch.set",s),this._delegate.set(c,r,s)):this._delegate.set(c,r),this}update(e,r,s,...c){const f=sh(e);return 2===arguments.length?this._delegate.update(f,r):this._delegate.update(f,r,s,...c),this}delete(e){const r=sh(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Id{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new qf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ig(this._firestore,s),null!=r?r:{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=Id.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let f=c.get(r);return f||(f=new Id(e,new P_(e),r),c.set(r,f)),f}}Id.INSTANCES=new WeakMap;class jl{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new P_(e)}static forPath(e,r,s){if(e.length%2!=0)throw new rn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new jl(r,new ko(r._delegate,s,new Nn(e)))}static forKey(e,r,s){return new jl(r,new ko(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Zf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zf(this.firestore,og(this._delegate,e))}catch(r){throw ul(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ae.Yj)(e))instanceof ko&&ey(this._delegate,e)}set(e,r){r=vg("DocumentReference.set",r);try{return r?py(this._delegate,e,r):py(this._delegate,e)}catch(s){throw ul(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?Bh(this._delegate,e):Bh(this._delegate,e,r,...s)}catch(c){throw ul(c,"updateDoc()","DocumentReference.update()")}}delete(){return function vE(i){return $h(bi(i.firestore,To),[new Ha(i._key,oo.none())])}(this._delegate)}onSnapshot(...e){const r=LE(e),s=FE(e,c=>new yg(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return gy(this._delegate,r,s)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function lC(i){i=bi(i,ko);const e=bi(i.firestore,To),r=rs(e),s=new ac(e);return function qm(i,e){const r=new ei;return i.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return(s=(0,ve.c)(function*(f,v,x){try{const k=yield function(oe,ke){const ht=Rn(oe);return ht.persistence.runTransaction("read document","readonly",Mt=>ht.localDocuments.getDocument(Mt,ke))}(f,v);k.isFoundDocument()?x.resolve(k):k.isNoDocument()?x.resolve(null):x.reject(new rn(Ot.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const q=Qd(k,`Failed to get document '${v} from cache`);x.reject(q)}}),function c(f,v,x){return s.apply(this,arguments)})(yield xh(i),e,r);var s})),r.promise}(r,i._key).then(c=>new Gl(e,s,i._key,c,new md(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function mg(i){i=bi(i,ko);const e=bi(i.firestore,To);return Nh(rs(e),i._key,{source:"server"}).then(r=>y_(e,i,r))}(this._delegate):function vd(i){i=bi(i,ko);const e=bi(i.firestore,To);return Nh(rs(e),i._key).then(r=>y_(e,i,r))}(this._delegate),r.then(s=>new yg(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new jl(this.firestore,this._delegate.withConverter(e?Id.getInstance(this.firestore,e):null))}}function ul(i,e,r){return i.message=i.message.replace(e,r),i}function LE(i){for(const e of i)if("object"==typeof e&&!Ty(e))return e;return{}}function FE(i,e){var r,s;let c;return c=Ty(i[0])?i[0]:Ty(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:f=>{c.next&&c.next(e(f))},error:null===(r=c.error)||void 0===r?void 0:r.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class yg{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new jl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return v_(this._delegate,e._delegate)}}class Ig extends yg{data(e){const r=this._delegate.data(e);return this._delegate._converter||function vl(i,e){i||zn()}(void 0!==r),r}}class dl{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new P_(e)}where(e,r,s){try{return new dl(this.firestore,pd(this._delegate,function hE(i,e,r){const s=e,c=fg("where",i);return Hf._create(c,s,r)}(e,r,s)))}catch(c){throw ul(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new dl(this.firestore,pd(this._delegate,function aC(i,e="asc"){const r=e,s=fg("orderBy",i);return c_._create(s,r)}(e,r)))}catch(s){throw ul(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new dl(this.firestore,pd(this._delegate,function pE(i){return ig("limit",i),Ho._create("limit",i,"F")}(e)))}catch(r){throw ul(r,"limit()","Query.limit()")}}limitToLast(e){try{return new dl(this.firestore,pd(this._delegate,function u_(i){return ig("limitToLast",i),Ho._create("limitToLast",i,"L")}(e)))}catch(r){throw ul(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new dl(this.firestore,pd(this._delegate,function gE(...i){return pg._create("startAt",i,!0)}(...e)))}catch(r){throw ul(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new dl(this.firestore,pd(this._delegate,function d_(...i){return pg._create("startAfter",i,!1)}(...e)))}catch(r){throw ul(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new dl(this.firestore,pd(this._delegate,function ay(...i){return zf._create("endBefore",i,!1)}(...e)))}catch(r){throw ul(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new dl(this.firestore,pd(this._delegate,function ly(...i){return zf._create("endAt",i,!0)}(...e)))}catch(r){throw ul(r,"endAt()","Query.endAt()")}}isEqual(e){return Xm(this._delegate,e._delegate)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function fy(i){i=bi(i,Sa);const e=bi(i.firestore,To),r=rs(e),s=new ac(e);return function Ym(i,e){const r=new ei;return i.asyncQueue.enqueueAndForget((0,ve.c)(function*(){return(s=(0,ve.c)(function*(f,v,x){try{const k=yield jd(f,v,!0),q=new Av(v,k.hs),oe=q.ha(k.documents),ke=q.applyChanges(oe,!1);x.resolve(ke.snapshot)}catch(k){const q=Qd(k,`Failed to execute query '${v} against cache`);x.reject(q)}}),function c(f,v,x){return s.apply(this,arguments)})(yield xh(i),e,r);var s})),r.promise}(r,i._query).then(c=>new _d(e,s,i,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function _E(i){i=bi(i,Sa);const e=bi(i.firestore,To),r=rs(e),s=new ac(e);return Lf(r,i._query,{source:"server"}).then(c=>new _d(e,s,i,c))}(this._delegate):function hy(i){i=bi(i,Sa);const e=bi(i.firestore,To),r=rs(e),s=new ac(e);return dE(i._query),Lf(r,i._query).then(c=>new _d(e,s,i,c))}(this._delegate),r.then(s=>new by(this.firestore,new _d(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=LE(e),s=FE(e,c=>new by(this.firestore,new _d(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return gy(this._delegate,r,s)}withConverter(e){return new dl(this.firestore,this._delegate.withConverter(e?Id.getInstance(this.firestore,e):null))}}class _C{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Ig(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class by{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new dl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ig(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new _C(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new Ig(this._firestore,s))})}isEqual(e){return v_(this._delegate,e._delegate)}}class Zf extends dl{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new jl(this.firestore,e):null}doc(e){try{return new jl(this.firestore,void 0===e?Bf(this._delegate):Bf(this._delegate,e))}catch(r){throw ul(r,"doc()","CollectionReference.doc()")}}add(e){return function yE(i,e){const r=bi(i.firestore,To),s=Bf(i),c=Kf(i.converter,e);return $h(r,[cg(rh(i.firestore),"addDoc",s._key,c,null!==i.converter,{}).toMutation(s._key,oo.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new jl(this.firestore,r))}isEqual(e){return ey(this._delegate,e._delegate)}withConverter(e){return new Zf(this.firestore,this._delegate.withConverter(e?Id.getInstance(this.firestore,e):null))}}function sh(i){return bi(i,ko)}class Ed{constructor(...e){this._delegate=new nu(...e)}static documentId(){return new Ed(Wi.keyField().canonicalString())}isEqual(e){return(e=(0,ae.Yj)(e))instanceof nu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Oc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function w_(){return new ug("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Oc(e)}static delete(){const e=function Ey(){return new Vh("deleteField")}();return e._methodName="FieldValue.delete",new Oc(e)}static arrayUnion(...e){const r=function D_(...i){return new n_("arrayUnion",i)}(...e);return r._methodName="FieldValue.arrayUnion",new Oc(r)}static arrayRemove(...e){const r=function AE(...i){return new r_("arrayRemove",i)}(...e);return r._methodName="FieldValue.arrayRemove",new Oc(r)}static increment(e){const r=function RE(i){return new dg("increment",i)}(e);return r._methodName="FieldValue.increment",new Oc(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const VE={Firestore:NE,GeoPoint:nh,Timestamp:ro,Blob:Xf,Transaction:OE,WriteBatch:kE,DocumentReference:jl,DocumentSnapshot:yg,Query:dl,QueryDocumentSnapshot:Ig,QuerySnapshot:by,CollectionReference:Zf,FieldPath:Ed,FieldValue:Oc,setLogLevel:function mC(i){!function wr(i){wi.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function Ay(i,e){return function IC(i,e=_e.M){return new je._(r=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},r)}):s=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=s&&s()}})}(i,e)}function x_(i,e){return Ay(i,e).pipe((0,Oe.k)(r=>({payload:r,type:"query"})))}!function Sy(i){(function vC(i,e){i.INTERNAL.registerComponent(new et.Yl("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),c=r.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},VE)))})(i,(e,r)=>new NE(e,r,new gC)),i.registerVersion("@firebase/firestore-compat","0.3.25")}(pt.c),N(9252);class Jf{constructor(e,r){(0,l.c)(this,"ref",void 0),(0,l.c)(this,"afs",void 0),this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:c,query:f}=ky(s,r);return new Ny(c,f,this.afs)}snapshotChanges(){return function UE(i,e){return Ay(i,e).pipe((0,Ee.W)(void 0),We(),(0,Oe.k)(r=>{const[s,c]=r;return c.exists?null!=s&&s.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ee.wH)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Oe.k)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,Qe.Q)(this.ref.get(e)).pipe(ee.wH)}}function ep(i,e){return x_(i,e).pipe((0,Ee.W)(void 0),We(),(0,Oe.k)(r=>{const[s,c]=r,f=c.payload.docChanges(),v=f.map(x=>({type:x.type,payload:x}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((x,k)=>{const q=f.find(ke=>ke.doc.ref.isEqual(x.ref)),oe=null==s?void 0:s.payload.docs.find(ke=>ke.ref.isEqual(x.ref));q&&JSON.stringify(q.doc.metadata)===JSON.stringify(x.metadata)||!q&&oe&&JSON.stringify(oe.metadata)===JSON.stringify(x.metadata)||v.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:x}})}),v}))}function Ry(i,e,r){return ep(i,r).pipe((0,it.K)((s,c)=>function My(i,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(i=function xy(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Py(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=i.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Py(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Py(i,e.oldIndex,1)}return i}(i,s))}),i}(s,c.map(f=>f.payload),e),[]),(0,Ge.a)(),(0,Oe.k)(s=>s.map(c=>({type:c.type,payload:c}))))}function Py(i,e,r,...s){const c=i.slice();return c.splice(e,r,...s),c}function BE(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Ny{constructor(e,r,s){(0,l.c)(this,"ref",void 0),(0,l.c)(this,"query",void 0),(0,l.c)(this,"afs",void 0),this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=ep(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,Oe.k)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),r.pipe((0,Ee.W)(void 0),We(),(0,Ve.I)(([s,c])=>c.length>0||!s),(0,Oe.k)(([,s])=>s),ee.wH)}auditTrail(e){return this.stateChanges(e).pipe((0,it.K)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=BE(e);return Ry(this.query,r,this.afs.schedulers.outsideAngular).pipe(ee.wH)}valueChanges(e={}){return x_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.k)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),ee.wH)}get(e){return(0,Qe.Q)(this.query.get(e)).pipe(ee.wH)}add(e){return this.ref.add(e)}doc(e){return new Jf(this.ref.doc(e),this.afs)}}class Oy{constructor(e,r){(0,l.c)(this,"query",void 0),(0,l.c)(this,"afs",void 0),this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?ep(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.k)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,Ve.I)(r=>r.length>0),ee.wH):ep(this.query,this.afs.schedulers.outsideAngular).pipe(ee.wH)}auditTrail(e){return this.stateChanges(e).pipe((0,it.K)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=BE(e);return Ry(this.query,r,this.afs.schedulers.outsideAngular).pipe(ee.wH)}valueChanges(e={}){return x_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.k)(s=>s.payload.docs.map(c=>e.idField?{[e.idField]:c.id,...c.data()}:c.data())),ee.wH)}get(e){return(0,Qe.Q)(this.query.get(e)).pipe(ee.wH)}}const N_=new Z.UbH("angularfire2.enableFirestorePersistence"),$E=new Z.UbH("angularfire2.firestore.persistenceSettings"),GE=new Z.UbH("angularfire2.firestore.settings"),Eg=new Z.UbH("angularfire2.firestore.use-emulator");function ky(i,e=(r=>r)){return{query:e(i),ref:i}}let jE=(()=>{var i;class e{constructor(s,c,f,v,x,k,q,oe,ke,ht,Mt,wn,Bn,kn,pr,Ur,gr){(0,l.c)(this,"schedulers",void 0),(0,l.c)(this,"firestore",void 0),(0,l.c)(this,"persistenceEnabled$",void 0),this.schedulers=q;const Wr=(0,Ne._G)(s,k,c),Ki=ke;ht&&(0,ge.CU)(Wr,k,Mt,Bn,kn,pr,wn,Ur),[this.firestore,this.persistenceEnabled$]=(0,Ne.PQ)(`${Wr.name}.firestore`,"AngularFirestore",Wr.name,()=>{const ki=k.runOutsideAngular(()=>Wr.firestore());if(v&&ki.settings(v),Ki&&ki.useEmulator(...Ki),f&&!(0,K.uf)(x)){const _s=()=>{try{return(0,Qe.Q)(ki.enablePersistence(oe||void 0).then(()=>!0,()=>!1))}catch(Ws){return typeof console<"u"&&console.warn(Ws),(0,be.of)(!1)}};return[ki,k.runOutsideAngular(_s)]}return[ki,(0,be.of)(!1)]},[v,Ki,f])}collection(s,c){let f;f="string"==typeof s?this.firestore.collection(s):s;const{ref:v,query:x}=ky(f,c),k=this.schedulers.ngZone.run(()=>v);return new Ny(k,x,this)}collectionGroup(s,c){const f=c||(x=>x),v=this.firestore.collectionGroup(s);return new Oy(f(v),this)}doc(s){let c;c="string"==typeof s?this.firestore.doc(s):s;const f=this.schedulers.ngZone.run(()=>c);return new Jf(f,this)}createId(){return this.firestore.collection("_").doc().id}}return i=e,(0,l.c)(e,"\u0275fac",function(s){return new(s||i)(Z.CoB(Ne.E9),Z.CoB(Ne.Ml,8),Z.CoB(N_,8),Z.CoB(GE,8),Z.CoB(Z.AHE),Z.CoB(Z.WW2),Z.CoB(ee.u),Z.CoB($E,8),Z.CoB(Eg,8),Z.CoB(ge._o,8),Z.CoB(ge.GW,8),Z.CoB(ge.mq,8),Z.CoB(ge.ox,8),Z.CoB(ge.cd,8),Z.CoB(ge._8,8),Z.CoB(ge.Ev,8),Z.CoB(ee.gJ,8))}),(0,l.c)(e,"\u0275prov",Z.wxM({token:i,factory:i.\u0275fac,providedIn:"any"})),e})()},6e3:(mn,st,N)=>{"use strict";N.d(st,{E9:()=>Qe,Ml:()=>be,PQ:()=>Oe,UN:()=>We,_G:()=>Ee,_w:()=>ge,rh:()=>_e});var l=N(4580),K=N(4496),Z=N(7900),ee=N(9252);const Ne=["ngOnDestroy"],ge=($e,pt,ve,Xe={})=>new Proxy($e,{get:(et,at)=>ve.runOutsideAngular(()=>{var ae;if($e[at])return null!=Xe&&null!==(ae=Xe.spy)&&void 0!==ae&&ae.get&&Xe.spy.get(at,$e[at]),$e[at];if(Ne.indexOf(at)>-1)return()=>{};const te=pt.toPromise().then(se=>{const L=null==se?void 0:se[at];return"function"==typeof L?L.bind(se):null!=L&&L.then?L.then(Le=>ve.run(()=>Le)):ve.run(()=>L)});return new Proxy(()=>{},{get:(se,L)=>te[L],apply:(se,L,Le)=>te.then(Ce=>{var Ye;const It=null==Ce?void 0:Ce(...Le);return null!=Xe&&null!==(Ye=Xe.spy)&&void 0!==Ye&&Ye.apply&&Xe.spy.apply(at,Le,It),It})})})}),_e=($e,pt)=>{pt.forEach(ve=>{Object.getOwnPropertyNames(ve.prototype||ve).forEach(Xe=>{Object.defineProperty($e.prototype,Xe,Object.getOwnPropertyDescriptor(ve.prototype||ve,Xe))})})};class je{constructor(pt){return pt}}const Qe=new K.UbH("angularfire2.app.options"),be=new K.UbH("angularfire2.app.name");function Ee($e,pt,ve){const et="object"==typeof ve&&ve||{};et.name=et.name||"string"==typeof ve&&ve||"[DEFAULT]";const ae=ee.c.apps.filter(te=>te&&te.name===et.name)[0]||pt.runOutsideAngular(()=>ee.c.initializeApp($e,et));try{if(JSON.stringify($e)!==JSON.stringify(ae.options)){const te=!!module.hot;Ke("error",`${ae.name} Firebase App already initialized with different options${te?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new je(ae)}const Ke=($e,...pt)=>{(0,K.sPQ)()&&typeof console<"u"&&console[$e](...pt)},He={provide:je,useFactory:Ee,deps:[Qe,K.WW2,[new K.T7N,be]]};let We=(()=>{var $e;class pt{static initializeApp(Xe,et){return{ngModule:pt,providers:[{provide:Qe,useValue:Xe},{provide:be,useValue:et}]}}constructor(Xe){ee.c.registerVersion("angularfire",Z.j1.full,"core"),ee.c.registerVersion("angularfire",Z.j1.full,"app-compat"),ee.c.registerVersion("angular",K.j1C.full,Xe.toString())}}return $e=pt,(0,l.c)(pt,"\u0275fac",function(Xe){return new(Xe||$e)(K.CoB(K.AHE))}),(0,l.c)(pt,"\u0275mod",K.a4G({type:$e})),(0,l.c)(pt,"\u0275inj",K.s3X({providers:[He]})),pt})();function Oe($e,pt,ve,Xe,et){const[,at,ae]=globalThis.\u0275AngularfireInstanceCache.find(te=>te[0]===$e)||[];if(at)return function it($e,pt){try{return $e.toString()===pt.toString()}catch{return $e===pt}}(et,ae)||(Ve("error",`${pt} was already initialized on the ${ve} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),Ve("warn",{is:et,was:ae})),at;{const te=Xe();return globalThis.\u0275AngularfireInstanceCache.push([$e,te,et]),te}}const Ge=typeof module<"u"&&!!module.hot,Ve=($e,...pt)=>{(0,K.sPQ)()&&typeof console<"u"&&console[$e](...pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7900:(mn,st,N)=>{"use strict";N.d(st,{j1:()=>it,wH:()=>Ye,u:()=>ae,gJ:()=>pt});var l=N(4580),K=N(4496),Z=N(9360);(0,Z.registerVersion)("firebase","10.8.0","app");var ge=N(1364),je=N(9816);const be=new class Qe extends je.k{}(class _e extends ge.m{constructor(me,he){super(me,he),this.scheduler=me,this.work=he}schedule(me,he=0){return he>0?super.schedule(me,he):(this.delay=he,this.state=me,this.scheduler.flush(this),this)}execute(me,he){return he>0||this.closed?super.execute(me,he):this._execute(me,he)}requestAsyncId(me,he,ye=0){return null!=ye&&ye>0||null==ye&&this.delay>0?super.requestAsyncId(me,he,ye):(me.flush(this),0)}});var Ke=N(112),He=N(9212),We=N(2924),Oe=N(3920);const it=new K.a8Z("ANGULARFIRE2_VERSION");class pt{constructor(){return((nt,me)=>{const he=(0,Z.getApps)(),ye=[];return he.forEach(Fe=>{Fe.container.getProvider(nt).instances.forEach(De=>{ye.includes(De)||ye.push(De)})}),ye})(ve)}}const ve="app-check";function Xe(){}class et{constructor(me,he=be){(0,l.c)(this,"zone",void 0),(0,l.c)(this,"delegate",void 0),this.zone=me,this.delegate=he}now(){return this.delegate.now()}schedule(me,he,ye){const Fe=this.zone;return this.delegate.schedule(function(De){Fe.runGuarded(()=>{me.apply(this,[De])})},he,ye)}}class at{constructor(me){(0,l.c)(this,"zone",void 0),(0,l.c)(this,"task",null),this.zone=me}call(me,he){const ye=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xe,{},Xe,Xe)),he.pipe((0,He.y)({next:ye,complete:ye,error:ye})).subscribe(me).add(ye)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ae=(()=>{var nt;class me{constructor(ye){(0,l.c)(this,"ngZone",void 0),(0,l.c)(this,"outsideAngular",void 0),(0,l.c)(this,"insideAngular",void 0),this.ngZone=ye,this.outsideAngular=ye.runOutsideAngular(()=>new et(Zone.current)),this.insideAngular=ye.run(()=>new et(Zone.current,Ke.M)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return nt=me,(0,l.c)(me,"\u0275fac",function(ye){return new(ye||nt)(K.CoB(K.WW2))}),(0,l.c)(me,"\u0275prov",K.wxM({token:nt,factory:nt.\u0275fac,providedIn:"root"})),me})();function Ye(nt){return function It(nt){return function(he){return(he=he.lift(new at(nt.ngZone))).pipe((0,We.y)(nt.outsideAngular),(0,Oe.y)(nt.insideAngular))}}(function te(){const nt=globalThis.\u0275AngularFireScheduler;if(!nt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return nt}())(nt)}},4716:(mn,st,N)=>{"use strict";N.d(st,{y:()=>pl,_t:()=>eo,Gu:()=>os,WM:()=>at,Y6:()=>Oe,eq:()=>Sn,ue:()=>Cr,_G:()=>qt});var l=N(4496),K=N(1368),Z=N(9900),ee=N(3252),Ne=N(4300),ge=N(560),_e=N(6624),je=N(7773),Qe=N(4187),be=N(7904),Ke=N(4704);let He=(()=>{var z;class V{constructor(H,Se){this._renderer=H,this._elementRef=Se,this.onChange=_n=>{},this.onTouched=()=>{}}setProperty(H,Se){this._renderer.setProperty(this._elementRef.nativeElement,H,Se)}registerOnTouched(H){this.onTouched=H}registerOnChange(H){this.onChange=H}setDisabledState(H){this.setProperty("disabled",H)}}return(z=V).\u0275fac=function(H){return new(H||z)(l.GI1(l.q87),l.GI1(l.GMv))},z.\u0275dir=l.Sc5({type:z}),V})(),We=(()=>{var z;class V extends He{}return(z=V).\u0275fac=(()=>{let ce;return function(Se){return(ce||(ce=l.otF(z)))(Se||z)}})(),z.\u0275dir=l.Sc5({type:z,features:[l.eg9]}),V})();const Oe=new l.UbH(""),Ve={provide:Oe,useExisting:(0,l.wd)(()=>ve),multi:!0},pt=new l.UbH("");let ve=(()=>{var z;class V extends He{constructor(H,Se,_n){super(H,Se),this._compositionMode=_n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $e(){const z=(0,K.uy)()?(0,K.uy)().getUserAgent():"";return/android (\d+)/.test(z.toLowerCase())}())}writeValue(H){this.setProperty("value",null==H?"":H)}_handleInput(H){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(H)}_compositionStart(){this._composing=!0}_compositionEnd(H){this._composing=!1,this._compositionMode&&this.onChange(H)}}return(z=V).\u0275fac=function(H){return new(H||z)(l.GI1(l.q87),l.GI1(l.GMv),l.GI1(pt,8))},z.\u0275dir=l.Sc5({type:z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(H,Se){1&H&&l.qCj("input",function(Pn){return Se._handleInput(Pn.target.value)})("blur",function(){return Se.onTouched()})("compositionstart",function(){return Se._compositionStart()})("compositionend",function(Pn){return Se._compositionEnd(Pn.target.value)})},features:[l.M5G([Ve]),l.eg9]}),V})();function Xe(z){return null==z||("string"==typeof z||Array.isArray(z))&&0===z.length}const at=new l.UbH(""),ae=new l.UbH("");function me(z){return null}function he(z){return null!=z}function ye(z){return(0,l.w5$)(z)?(0,Z.Q)(z):z}function Fe(z){let V={};return z.forEach(ce=>{V=null!=ce?{...V,...ce}:V}),0===Object.keys(V).length?null:V}function Je(z,V){return V.map(ce=>ce(z))}function $t(z){return z.map(V=>function De(z){return!z.validate}(V)?V:ce=>V.validate(ce))}function dn(z){return null!=z?function Jt(z){if(!z)return null;const V=z.filter(he);return 0==V.length?null:function(ce){return Fe(Je(ce,V))}}($t(z)):null}function an(z){return null!=z?function Lt(z){if(!z)return null;const V=z.filter(he);return 0==V.length?null:function(ce){return function Ee(...z){const V=(0,_e.yu)(z),{args:ce,keys:H}=(0,Ne.Q)(z),Se=new ee._(_n=>{const{length:Pn}=ce;if(!Pn)return void _n.complete();const _i=new Array(Pn);let zo=Pn,cs=Pn;for(let Fr=0;Fr<Pn;Fr++){let Ks=!1;(0,ge.Uv)(ce[Fr]).subscribe((0,je.e)(_n,Fo=>{Ks||(Ks=!0,cs--),_i[Fr]=Fo},()=>zo--,void 0,()=>{(!zo||!Ks)&&(cs||_n.next(H?(0,be.q)(H,_i):_i),_n.complete())}))}});return V?Se.pipe((0,Qe.j)(V)):Se}(Je(ce,V).map(ye)).pipe((0,Ke.k)(Fe))}}($t(z)):null}function Qn(z,V){return null===z?[V]:Array.isArray(z)?[...z,V]:[z,V]}function ft(z){return z?Array.isArray(z)?z:[z]:[]}function Tt(z,V){return Array.isArray(z)?z.includes(V):z===V}function kt(z,V){const ce=ft(V);return ft(z).forEach(Se=>{Tt(ce,Se)||ce.push(Se)}),ce}function vn(z,V){return ft(V).filter(ce=>!Tt(z,ce))}class Ft{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=dn(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=an(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V=void 0){this.control&&this.control.reset(V)}hasError(V,ce){return!!this.control&&this.control.hasError(V,ce)}getError(V,ce){return this.control?this.control.getError(V,ce):null}}class Qt extends Ft{get formDirective(){return null}get path(){return null}}class Sn extends Ft{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xn{constructor(V){this._cd=V}get isTouched(){var V;return!(null===(V=this._cd)||void 0===V||null===(V=V.control)||void 0===V||!V.touched)}get isUntouched(){var V;return!(null===(V=this._cd)||void 0===V||null===(V=V.control)||void 0===V||!V.untouched)}get isPristine(){var V;return!(null===(V=this._cd)||void 0===V||null===(V=V.control)||void 0===V||!V.pristine)}get isDirty(){var V;return!(null===(V=this._cd)||void 0===V||null===(V=V.control)||void 0===V||!V.dirty)}get isValid(){var V;return!(null===(V=this._cd)||void 0===V||null===(V=V.control)||void 0===V||!V.valid)}get isInvalid(){var V;return!(null===(V=this._cd)||void 0===V||null===(V=V.control)||void 0===V||!V.invalid)}get isPending(){var V;return!(null===(V=this._cd)||void 0===V||null===(V=V.control)||void 0===V||!V.pending)}get isSubmitted(){var V;return!(null===(V=this._cd)||void 0===V||!V.submitted)}}let Cr=(()=>{var z;class V extends xn{constructor(H){super(H)}}return(z=V).\u0275fac=function(H){return new(H||z)(l.GI1(Sn,2))},z.\u0275dir=l.Sc5({type:z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(H,Se){2&H&&l.eAK("ng-untouched",Se.isUntouched)("ng-touched",Se.isTouched)("ng-pristine",Se.isPristine)("ng-dirty",Se.isDirty)("ng-valid",Se.isValid)("ng-invalid",Se.isInvalid)("ng-pending",Se.isPending)},features:[l.eg9]}),V})();const St="VALID",dt="INVALID",Rt="PENDING",lt="DISABLED";function ut(z){return null!=z&&!Array.isArray(z)&&"object"==typeof z}class qn{constructor(V,ce){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(V),this._assignAsyncValidators(ce)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===St}get invalid(){return this.status===dt}get pending(){return this.status==Rt}get disabled(){return this.status===lt}get enabled(){return this.status!==lt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._assignValidators(V)}setAsyncValidators(V){this._assignAsyncValidators(V)}addValidators(V){this.setValidators(kt(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(kt(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(vn(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(vn(V,this._rawAsyncValidators))}hasValidator(V){return Tt(this._rawValidators,V)}hasAsyncValidator(V){return Tt(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(ce=>{ce.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(ce=>{ce.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=Rt,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const ce=this._parentMarkedDirty(V.onlySelf);this.status=lt,this.errors=null,this._forEachChild(H=>{H.disable({...V,onlySelf:!0})}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...V,skipPristineCheck:ce}),this._onDisabledChange.forEach(H=>H(!0))}enable(V={}){const ce=this._parentMarkedDirty(V.onlySelf);this.status=St,this._forEachChild(H=>{H.enable({...V,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors({...V,skipPristineCheck:ce}),this._onDisabledChange.forEach(H=>H(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}getRawValue(){return this.value}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===St||this.status===Rt)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(ce=>ce._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lt:St}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=Rt,this._hasOwnPendingAsyncValidator=!0;const ce=ye(this.asyncValidator(this));this._asyncValidationSubscription=ce.subscribe(H=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(H,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,ce={}){this.errors=V,this._updateControlsErrors(!1!==ce.emitEvent)}get(V){let ce=V;return null==ce||(Array.isArray(ce)||(ce=ce.split(".")),0===ce.length)?null:ce.reduce((H,Se)=>H&&H._find(Se),this)}getError(V,ce){const H=ce?this.get(ce):this;return H&&H.errors?H.errors[V]:null}hasError(V,ce){return!!this.getError(V,ce)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new l._w7,this.statusChanges=new l._w7}_calculateStatus(){return this._allControlsDisabled()?lt:this.errors?dt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rt)?Rt:this._anyControlsHaveStatus(dt)?dt:St}_anyControlsHaveStatus(V){return this._anyControls(ce=>ce.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){ut(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(V){return null}_assignValidators(V){this._rawValidators=Array.isArray(V)?V.slice():V,this._composedValidatorFn=function Ie(z){return Array.isArray(z)?dn(z):z||null}(this._rawValidators)}_assignAsyncValidators(V){this._rawAsyncValidators=Array.isArray(V)?V.slice():V,this._composedAsyncValidatorFn=function tt(z){return Array.isArray(z)?an(z):z||null}(this._rawAsyncValidators)}}const Or=new l.UbH("CallSetDisabledState",{providedIn:"root",factory:()=>hr}),hr="always";function vt(z,V,ce=hr){var H,Se;(function Kn(z,V){const ce=function jn(z){return z._rawValidators}(z);null!==V.validator?z.setValidators(Qn(ce,V.validator)):"function"==typeof ce&&z.setValidators([ce]);const H=function xt(z){return z._rawAsyncValidators}(z);null!==V.asyncValidator?z.setAsyncValidators(Qn(H,V.asyncValidator)):"function"==typeof H&&z.setAsyncValidators([H]);const Se=()=>z.updateValueAndValidity();Mn(V._rawValidators,Se),Mn(V._rawAsyncValidators,Se)})(z,V),V.valueAccessor.writeValue(z.value),(z.disabled||"always"===ce)&&(null===(H=(Se=V.valueAccessor).setDisabledState)||void 0===H||H.call(Se,z.disabled)),function $r(z,V){V.valueAccessor.registerOnChange(ce=>{z._pendingValue=ce,z._pendingChange=!0,z._pendingDirty=!0,"change"===z.updateOn&&Gr(z,V)})}(z,V),function go(z,V){const ce=(H,Se)=>{V.valueAccessor.writeValue(H),Se&&V.viewToModelUpdate(H)};z.registerOnChange(ce),V._registerOnDestroy(()=>{z._unregisterOnChange(ce)})}(z,V),function Vr(z,V){V.valueAccessor.registerOnTouched(()=>{z._pendingTouched=!0,"blur"===z.updateOn&&z._pendingChange&&Gr(z,V),"submit"!==z.updateOn&&z.markAsTouched()})}(z,V),function Xn(z,V){if(V.valueAccessor.setDisabledState){const ce=H=>{V.valueAccessor.setDisabledState(H)};z.registerOnDisabledChange(ce),V._registerOnDestroy(()=>{z._unregisterOnDisabledChange(ce)})}}(z,V)}function Mn(z,V){z.forEach(ce=>{ce.registerOnValidatorChange&&ce.registerOnValidatorChange(V)})}function Gr(z,V){z._pendingDirty&&z.markAsDirty(),z.setValue(z._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(z._pendingValue),z._pendingChange=!1}function Jn(z,V){const ce=z.indexOf(V);ce>-1&&z.splice(ce,1)}function gi(z){return"object"==typeof z&&null!==z&&2===Object.keys(z).length&&"value"in z&&"disabled"in z}Promise.resolve();const Ct=class extends qn{constructor(V=null,ce,H){super(function ue(z){return(ut(z)?z.validators:z)||null}(ce),function Ue(z,V){return(ut(V)?V.asyncValidators:z)||null}(H,ce)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(ce),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ut(ce)&&(ce.nonNullable||ce.initialValueIsDefault)&&(this.defaultValue=gi(V)?V.value:V)}setValue(V,ce={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==ce.emitModelToViewChange&&this._onChange.forEach(H=>H(this.value,!1!==ce.emitViewToModelChange)),this.updateValueAndValidity(ce)}patchValue(V,ce={}){this.setValue(V,ce)}reset(V=this.defaultValue,ce={}){this._applyFormState(V),this.markAsPristine(ce),this.markAsUntouched(ce),this.setValue(this.value,ce),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){Jn(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){Jn(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){gi(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}},Nt={provide:Sn,useExisting:(0,l.wd)(()=>qt)},on=Promise.resolve();let qt=(()=>{var z;class V extends Sn{constructor(H,Se,_n,Pn,_i,zo){super(),this._changeDetectorRef=_i,this.callSetDisabledState=zo,this.control=new Ct,this._registered=!1,this.name="",this.update=new l._w7,this._parent=H,this._setValidators(Se),this._setAsyncValidators(_n),this.valueAccessor=function Te(z,V){if(!V)return null;let ce,H,Se;return Array.isArray(V),V.forEach(_n=>{_n.constructor===ve?ce=_n:function Me(z){return Object.getPrototypeOf(z.constructor)===We}(_n)?H=_n:Se=_n}),Se||H||ce||null}(0,Pn)}ngOnChanges(H){if(this._checkForErrors(),!this._registered||"name"in H){if(this._registered&&(this._checkName(),this.formDirective)){const Se=H.name.previousValue;this.formDirective.removeControl({name:Se,path:this._getPath(Se)})}this._setUpControl()}"isDisabled"in H&&this._updateDisabled(H),function Pe(z,V){if(!z.hasOwnProperty("model"))return!1;const ce=z.model;return!!ce.isFirstChange()||!Object.is(V,ce.currentValue)}(H,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(H){on.then(()=>{var Se;this.control.setValue(H,{emitViewToModelChange:!1}),null===(Se=this._changeDetectorRef)||void 0===Se||Se.markForCheck()})}_updateDisabled(H){const Se=H.isDisabled.currentValue,_n=0!==Se&&(0,l.cZD)(Se);on.then(()=>{var Pn;_n&&!this.control.disabled?this.control.disable():!_n&&this.control.disabled&&this.control.enable(),null===(Pn=this._changeDetectorRef)||void 0===Pn||Pn.markForCheck()})}_getPath(H){return this._parent?function yt(z,V){return[...V.path,z]}(H,this._parent):[H]}}return(z=V).\u0275fac=function(H){return new(H||z)(l.GI1(Qt,9),l.GI1(at,10),l.GI1(ae,10),l.GI1(Oe,10),l.GI1(l.kD9,8),l.GI1(Or,8))},z.\u0275dir=l.Sc5({type:z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[l.Wk5.None,"disabled","isDisabled"],model:[l.Wk5.None,"ngModel","model"],options:[l.Wk5.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l.M5G([Nt]),l.eg9,l.SYr]}),V})();function Qo(z){return"number"==typeof z?z:parseFloat(z)}let Ii=(()=>{var z;class V{constructor(){this._validator=me}ngOnChanges(H){if(this.inputName in H){const Se=this.normalizeInput(H[this.inputName].currentValue);this._enabled=this.enabled(Se),this._validator=this._enabled?this.createValidator(Se):me,this._onChange&&this._onChange()}}validate(H){return this._validator(H)}registerOnValidatorChange(H){this._onChange=H}enabled(H){return null!=H}}return(z=V).\u0275fac=function(H){return new(H||z)},z.\u0275dir=l.Sc5({type:z,features:[l.SYr]}),V})();const pa={provide:at,useExisting:(0,l.wd)(()=>eo),multi:!0};let eo=(()=>{var z;class V extends Ii{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=H=>Qo(H),this.createValidator=H=>function Le(z){return V=>{if(Xe(V.value)||Xe(z))return null;const ce=parseFloat(V.value);return!isNaN(ce)&&ce>z?{max:{max:z,actual:V.value}}:null}}(H)}}return(z=V).\u0275fac=(()=>{let ce;return function(Se){return(ce||(ce=l.otF(z)))(Se||z)}})(),z.\u0275dir=l.Sc5({type:z,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(H,Se){2&H&&l.e48("max",Se._enabled?Se.max:null)},inputs:{max:"max"},features:[l.M5G([pa]),l.eg9]}),V})();const uo={provide:at,useExisting:(0,l.wd)(()=>os),multi:!0};let os=(()=>{var z;class V extends Ii{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=H=>Qo(H),this.createValidator=H=>function L(z){return V=>{if(Xe(V.value)||Xe(z))return null;const ce=parseFloat(V.value);return!isNaN(ce)&&ce<z?{min:{min:z,actual:V.value}}:null}}(H)}}return(z=V).\u0275fac=(()=>{let ce;return function(Se){return(ce||(ce=l.otF(z)))(Se||z)}})(),z.\u0275dir=l.Sc5({type:z,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(H,Se){2&H&&l.e48("min",Se._enabled?Se.min:null)},inputs:{min:"min"},features:[l.M5G([uo]),l.eg9]}),V})(),Ra=(()=>{var z;class V{}return(z=V).\u0275fac=function(H){return new(H||z)},z.\u0275mod=l.a4G({type:z}),z.\u0275inj=l.s3X({}),V})(),pl=(()=>{var z;class V{static withConfig(H){var Se;return{ngModule:V,providers:[{provide:Or,useValue:null!==(Se=H.callSetDisabledState)&&void 0!==Se?Se:hr}]}}}return(z=V).\u0275fac=function(H){return new(H||z)},z.\u0275mod=l.a4G({type:z}),z.\u0275inj=l.s3X({imports:[Ra]}),V})()},4476:(mn,st,N)=>{"use strict";N.d(st,{OY:()=>vn,iE:()=>ft,o_:()=>an});var l=N(4496),K=N(1368);class Z extends K.mg{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ee extends Z{static makeCurrent(){(0,K.ug)(new ee)}onAndCancel(dt,Rt,lt){return dt.addEventListener(Rt,lt),()=>{dt.removeEventListener(Rt,lt)}}dispatchEvent(dt,Rt){dt.dispatchEvent(Rt)}remove(dt){dt.parentNode&&dt.parentNode.removeChild(dt)}createElement(dt,Rt){return(Rt=Rt||this.getDefaultDocument()).createElement(dt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(dt){return dt.nodeType===Node.ELEMENT_NODE}isShadowRoot(dt){return dt instanceof DocumentFragment}getGlobalEventTarget(dt,Rt){return"window"===Rt?window:"document"===Rt?dt:"body"===Rt?dt.body:null}getBaseHref(dt){const Rt=function ge(){return Ne=Ne||document.querySelector("base"),Ne?Ne.getAttribute("href"):null}();return null==Rt?null:function _e(St){return new URL(St,document.baseURI).pathname}(Rt)}resetBaseElement(){Ne=null}getUserAgent(){return window.navigator.userAgent}getCookie(dt){return(0,K.Sg)(document.cookie,dt)}}let Ne=null,Qe=(()=>{var St;class dt{build(){return new XMLHttpRequest}}return(St=dt).\u0275fac=function(lt){return new(lt||St)},St.\u0275prov=l.wxM({token:St,factory:St.\u0275fac}),dt})();const be=new l.UbH("");let Ee=(()=>{var St;class dt{constructor(lt,ue){this._zone=ue,this._eventNameToPlugin=new Map,lt.forEach(Ie=>{Ie.manager=this}),this._plugins=lt.slice().reverse()}addEventListener(lt,ue,Ie){return this._findPluginFor(ue).addEventListener(lt,ue,Ie)}getZone(){return this._zone}_findPluginFor(lt){let ue=this._eventNameToPlugin.get(lt);if(ue)return ue;if(ue=this._plugins.find(Ue=>Ue.supports(lt)),!ue)throw new l.OBp(5101,!1);return this._eventNameToPlugin.set(lt,ue),ue}}return(St=dt).\u0275fac=function(lt){return new(lt||St)(l.CoB(be),l.CoB(l.WW2))},St.\u0275prov=l.wxM({token:St,factory:St.\u0275fac}),dt})();class Ke{constructor(dt){this._doc=dt}}const He="ng-app-id";let We=(()=>{var St;class dt{constructor(lt,ue,Ie,Ue={}){this.doc=lt,this.appId=ue,this.nonce=Ie,this.platformId=Ue,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,K.uf)(Ue),this.resetHostNodes()}addStyles(lt){for(const ue of lt)1===this.changeUsageCount(ue,1)&&this.onStyleAdded(ue)}removeStyles(lt){for(const ue of lt)this.changeUsageCount(ue,-1)<=0&&this.onStyleRemoved(ue)}ngOnDestroy(){const lt=this.styleNodesInDOM;lt&&(lt.forEach(ue=>ue.remove()),lt.clear());for(const ue of this.getAllStyles())this.onStyleRemoved(ue);this.resetHostNodes()}addHost(lt){this.hostNodes.add(lt);for(const ue of this.getAllStyles())this.addStyleToHost(lt,ue)}removeHost(lt){this.hostNodes.delete(lt)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(lt){for(const ue of this.hostNodes)this.addStyleToHost(ue,lt)}onStyleRemoved(lt){var ue;const Ie=this.styleRef;null===(ue=Ie.get(lt))||void 0===ue||null===(ue=ue.elements)||void 0===ue||ue.forEach(Ue=>Ue.remove()),Ie.delete(lt)}collectServerRenderedStyles(){var lt;const ue=null===(lt=this.doc.head)||void 0===lt?void 0:lt.querySelectorAll(`style[${He}="${this.appId}"]`);if(null!=ue&&ue.length){const Ie=new Map;return ue.forEach(Ue=>{null!=Ue.textContent&&Ie.set(Ue.textContent,Ue)}),Ie}return null}changeUsageCount(lt,ue){const Ie=this.styleRef;if(Ie.has(lt)){const Ue=Ie.get(lt);return Ue.usage+=ue,Ue.usage}return Ie.set(lt,{usage:ue,elements:[]}),ue}getStyleElement(lt,ue){const Ie=this.styleNodesInDOM,Ue=null==Ie?void 0:Ie.get(ue);if((null==Ue?void 0:Ue.parentNode)===lt)return Ie.delete(ue),Ue.removeAttribute(He),Ue;{const tt=this.doc.createElement("style");return this.nonce&&tt.setAttribute("nonce",this.nonce),tt.textContent=ue,this.platformIsServer&&tt.setAttribute(He,this.appId),lt.appendChild(tt),tt}}addStyleToHost(lt,ue){var Ie;const Ue=this.getStyleElement(lt,ue),tt=this.styleRef,ut=null===(Ie=tt.get(ue))||void 0===Ie?void 0:Ie.elements;ut?ut.push(Ue):tt.set(ue,{elements:[Ue],usage:1})}resetHostNodes(){const lt=this.hostNodes;lt.clear(),lt.add(this.doc.head)}}return(St=dt).\u0275fac=function(lt){return new(lt||St)(l.CoB(K.Ud),l.CoB(l.QHP),l.CoB(l.YND,8),l.CoB(l.AHE))},St.\u0275prov=l.wxM({token:St,factory:St.\u0275fac}),dt})();const Oe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},it=/%COMP%/g,ve=new l.UbH("",{providedIn:"root",factory:()=>!0});function at(St,dt){return dt.map(Rt=>Rt.replace(it,St))}let ae=(()=>{var St;class dt{constructor(lt,ue,Ie,Ue,tt,ut,pn,$n=null){this.eventManager=lt,this.sharedStylesHost=ue,this.appId=Ie,this.removeStylesOnCompDestroy=Ue,this.doc=tt,this.platformId=ut,this.ngZone=pn,this.nonce=$n,this.rendererByCompId=new Map,this.platformIsServer=(0,K.uf)(ut),this.defaultRenderer=new te(lt,tt,pn,this.platformIsServer)}createRenderer(lt,ue){if(!lt||!ue)return this.defaultRenderer;this.platformIsServer&&ue.encapsulation===l.K6R.ShadowDom&&(ue={...ue,encapsulation:l.K6R.Emulated});const Ie=this.getOrCreateRenderer(lt,ue);return Ie instanceof It?Ie.applyToHost(lt):Ie instanceof Ye&&Ie.applyStyles(),Ie}getOrCreateRenderer(lt,ue){const Ie=this.rendererByCompId;let Ue=Ie.get(ue.id);if(!Ue){const tt=this.doc,ut=this.ngZone,pn=this.eventManager,$n=this.sharedStylesHost,qn=this.removeStylesOnCompDestroy,Nr=this.platformIsServer;switch(ue.encapsulation){case l.K6R.Emulated:Ue=new It(pn,$n,ue,this.appId,qn,tt,ut,Nr);break;case l.K6R.ShadowDom:return new Ce(pn,$n,lt,ue,tt,ut,this.nonce,Nr);default:Ue=new Ye(pn,$n,ue,qn,tt,ut,Nr)}Ie.set(ue.id,Ue)}return Ue}ngOnDestroy(){this.rendererByCompId.clear()}}return(St=dt).\u0275fac=function(lt){return new(lt||St)(l.CoB(Ee),l.CoB(We),l.CoB(l.QHP),l.CoB(ve),l.CoB(K.Ud),l.CoB(l.AHE),l.CoB(l.WW2),l.CoB(l.YND))},St.\u0275prov=l.wxM({token:St,factory:St.\u0275fac}),dt})();class te{constructor(dt,Rt,lt,ue){this.eventManager=dt,this.doc=Rt,this.ngZone=lt,this.platformIsServer=ue,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(dt,Rt){return Rt?this.doc.createElementNS(Oe[Rt]||Rt,dt):this.doc.createElement(dt)}createComment(dt){return this.doc.createComment(dt)}createText(dt){return this.doc.createTextNode(dt)}appendChild(dt,Rt){(Le(dt)?dt.content:dt).appendChild(Rt)}insertBefore(dt,Rt,lt){dt&&(Le(dt)?dt.content:dt).insertBefore(Rt,lt)}removeChild(dt,Rt){dt&&dt.removeChild(Rt)}selectRootElement(dt,Rt){let lt="string"==typeof dt?this.doc.querySelector(dt):dt;if(!lt)throw new l.OBp(-5104,!1);return Rt||(lt.textContent=""),lt}parentNode(dt){return dt.parentNode}nextSibling(dt){return dt.nextSibling}setAttribute(dt,Rt,lt,ue){if(ue){Rt=ue+":"+Rt;const Ie=Oe[ue];Ie?dt.setAttributeNS(Ie,Rt,lt):dt.setAttribute(Rt,lt)}else dt.setAttribute(Rt,lt)}removeAttribute(dt,Rt,lt){if(lt){const ue=Oe[lt];ue?dt.removeAttributeNS(ue,Rt):dt.removeAttribute(`${lt}:${Rt}`)}else dt.removeAttribute(Rt)}addClass(dt,Rt){dt.classList.add(Rt)}removeClass(dt,Rt){dt.classList.remove(Rt)}setStyle(dt,Rt,lt,ue){ue&(l.yzm.DashCase|l.yzm.Important)?dt.style.setProperty(Rt,lt,ue&l.yzm.Important?"important":""):dt.style[Rt]=lt}removeStyle(dt,Rt,lt){lt&l.yzm.DashCase?dt.style.removeProperty(Rt):dt.style[Rt]=""}setProperty(dt,Rt,lt){null!=dt&&(dt[Rt]=lt)}setValue(dt,Rt){dt.nodeValue=Rt}listen(dt,Rt,lt){if("string"==typeof dt&&!(dt=(0,K.uy)().getGlobalEventTarget(this.doc,dt)))throw new Error(`Unsupported event target ${dt} for event ${Rt}`);return this.eventManager.addEventListener(dt,Rt,this.decoratePreventDefault(lt))}decoratePreventDefault(dt){return Rt=>{if("__ngUnwrap__"===Rt)return dt;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>dt(Rt)):dt(Rt))&&Rt.preventDefault()}}}function Le(St){return"TEMPLATE"===St.tagName&&void 0!==St.content}class Ce extends te{constructor(dt,Rt,lt,ue,Ie,Ue,tt,ut){super(dt,Ie,Ue,ut),this.sharedStylesHost=Rt,this.hostEl=lt,this.shadowRoot=lt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const pn=at(ue.id,ue.styles);for(const $n of pn){const qn=document.createElement("style");tt&&qn.setAttribute("nonce",tt),qn.textContent=$n,this.shadowRoot.appendChild(qn)}}nodeOrShadowRoot(dt){return dt===this.hostEl?this.shadowRoot:dt}appendChild(dt,Rt){return super.appendChild(this.nodeOrShadowRoot(dt),Rt)}insertBefore(dt,Rt,lt){return super.insertBefore(this.nodeOrShadowRoot(dt),Rt,lt)}removeChild(dt,Rt){return super.removeChild(this.nodeOrShadowRoot(dt),Rt)}parentNode(dt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(dt)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ye extends te{constructor(dt,Rt,lt,ue,Ie,Ue,tt,ut){super(dt,Ie,Ue,tt),this.sharedStylesHost=Rt,this.removeStylesOnCompDestroy=ue,this.styles=ut?at(ut,lt.styles):lt.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class It extends Ye{constructor(dt,Rt,lt,ue,Ie,Ue,tt,ut){const pn=ue+"-"+lt.id;super(dt,Rt,lt,Ie,Ue,tt,ut,pn),this.contentAttr=function Xe(St){return"_ngcontent-%COMP%".replace(it,St)}(pn),this.hostAttr=function et(St){return"_nghost-%COMP%".replace(it,St)}(pn)}applyToHost(dt){this.applyStyles(),this.setAttribute(dt,this.hostAttr,"")}createElement(dt,Rt){const lt=super.createElement(dt,Rt);return super.setAttribute(lt,this.contentAttr,""),lt}}let Wt=(()=>{var St;class dt extends Ke{constructor(lt){super(lt)}supports(lt){return!0}addEventListener(lt,ue,Ie){return lt.addEventListener(ue,Ie,!1),()=>this.removeEventListener(lt,ue,Ie)}removeEventListener(lt,ue,Ie){return lt.removeEventListener(ue,Ie)}}return(St=dt).\u0275fac=function(lt){return new(lt||St)(l.CoB(K.Ud))},St.\u0275prov=l.wxM({token:St,factory:St.\u0275fac}),dt})();const un=["alt","control","meta","shift"],nt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},me={alt:St=>St.altKey,control:St=>St.ctrlKey,meta:St=>St.metaKey,shift:St=>St.shiftKey};let he=(()=>{var St;class dt extends Ke{constructor(lt){super(lt)}supports(lt){return null!=dt.parseEventName(lt)}addEventListener(lt,ue,Ie){const Ue=dt.parseEventName(ue),tt=dt.eventCallback(Ue.fullKey,Ie,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,K.uy)().onAndCancel(lt,Ue.domEventName,tt))}static parseEventName(lt){const ue=lt.toLowerCase().split("."),Ie=ue.shift();if(0===ue.length||"keydown"!==Ie&&"keyup"!==Ie)return null;const Ue=dt._normalizeKey(ue.pop());let tt="",ut=ue.indexOf("code");if(ut>-1&&(ue.splice(ut,1),tt="code."),un.forEach($n=>{const qn=ue.indexOf($n);qn>-1&&(ue.splice(qn,1),tt+=$n+".")}),tt+=Ue,0!=ue.length||0===Ue.length)return null;const pn={};return pn.domEventName=Ie,pn.fullKey=tt,pn}static matchEventFullKeyCode(lt,ue){let Ie=nt[lt.key]||lt.key,Ue="";return ue.indexOf("code.")>-1&&(Ie=lt.code,Ue="code."),!(null==Ie||!Ie)&&(Ie=Ie.toLowerCase()," "===Ie?Ie="space":"."===Ie&&(Ie="dot"),un.forEach(tt=>{tt!==Ie&&(0,me[tt])(lt)&&(Ue+=tt+".")}),Ue+=Ie,Ue===ue)}static eventCallback(lt,ue,Ie){return Ue=>{dt.matchEventFullKeyCode(Ue,lt)&&Ie.runGuarded(()=>ue(Ue))}}static _normalizeKey(lt){return"esc"===lt?"escape":lt}}return(St=dt).\u0275fac=function(lt){return new(lt||St)(l.CoB(K.Ud))},St.\u0275prov=l.wxM({token:St,factory:St.\u0275fac}),dt})();const an=(0,l.grM)(l.m4O,"browser",[{provide:l.AHE,useValue:K._k},{provide:l.crf,useValue:function $t(){ee.makeCurrent()},multi:!0},{provide:K.Ud,useFactory:function dn(){return(0,l.auf)(document),document},deps:[]}]),Qn=new l.UbH(""),jn=[{provide:l.Mn9,useClass:class je{addToWindow(dt){l.IHs.getAngularTestability=(lt,ue=!0)=>{const Ie=dt.findTestabilityInTree(lt,ue);if(null==Ie)throw new l.OBp(5103,!1);return Ie},l.IHs.getAllAngularTestabilities=()=>dt.getAllTestabilities(),l.IHs.getAllAngularRootElements=()=>dt.getAllRootElements(),l.IHs.frameworkStabilizers||(l.IHs.frameworkStabilizers=[]),l.IHs.frameworkStabilizers.push(lt=>{const ue=l.IHs.getAllAngularTestabilities();let Ie=ue.length;const Ue=function(){Ie--,0==Ie&&lt()};ue.forEach(tt=>{tt.whenStable(Ue)})})}findTestabilityInTree(dt,Rt,lt){if(null==Rt)return null;const ue=dt.getTestability(Rt);return null!=ue?ue:lt?(0,K.uy)().isShadowRoot(Rt)?this.findTestabilityInTree(dt,Rt.host,!0):this.findTestabilityInTree(dt,Rt.parentElement,!0):null}},deps:[]},{provide:l.aS5,useClass:l.G4X,deps:[l.WW2,l.eOv,l.Mn9]},{provide:l.G4X,useClass:l.G4X,deps:[l.WW2,l.eOv,l.Mn9]}],xt=[{provide:l.i4S,useValue:"root"},{provide:l.eAe,useFactory:function Jt(){return new l.eAe},deps:[]},{provide:be,useClass:Wt,multi:!0,deps:[K.Ud,l.WW2,l.AHE]},{provide:be,useClass:he,multi:!0,deps:[K.Ud]},ae,We,Ee,{provide:l.O8F,useExisting:ae},{provide:K.OM,useClass:Qe,deps:[]},[]];let ft=(()=>{var St;class dt{constructor(lt){}static withServerTransition(lt){return{ngModule:dt,providers:[{provide:l.QHP,useValue:lt.appId}]}}}return(St=dt).\u0275fac=function(lt){return new(lt||St)(l.CoB(Qn,12))},St.\u0275mod=l.a4G({type:St}),St.\u0275inj=l.s3X({providers:[...xt,...jn],imports:[K.MD,l.Ev2]}),dt})(),vn=(()=>{var St;class dt{constructor(lt){this._doc=lt}getTitle(){return this._doc.title}setTitle(lt){this._doc.title=lt||""}}return(St=dt).\u0275fac=function(lt){return new(lt||St)(l.CoB(K.Ud))},St.\u0275prov=l.wxM({token:St,factory:St.\u0275fac,providedIn:"root"}),dt})()},9148:(mn,st,N)=>{"use strict";N.d(st,{gV:()=>ii,O4:()=>tr,Qx:()=>gt,gf:()=>Lt,eu:()=>au,XE:()=>In,E5:()=>ho,ER:()=>wr,qQ:()=>Nn,qd:()=>hn});var l=N(4496),K=N(3252),Z=N(8880),Ne=N(9900),ge=N(2700),_e=N(6700),je=N(6040),Qe=N(7696),be=N(7228),Ee=N(1424),Ke=N(3928),He=N(3800),We=N(8960),Oe=N(2376),it=N(5657),Ge=N(6928),Ve=N(1368),$e=N(4704),pt=N(7368),ve=N(3992),Xe=N(5568),et=N(6684),at=N(7400),ae=N(5084);function te(w,P){return(0,Z.m)(P)?(0,at.O)(w,P,1):(0,at.O)(w,1)}var se=N(9212),L=N(560),Le=N(7773),Ce=N(5448);function Ye(w){return(0,Ce.i)((P,M)=>{let J,R=null,U=!1;R=P.subscribe((0,Le.e)(M,void 0,void 0,we=>{J=(0,L.Uv)(w(we,Ye(w)(P))),R?(R.unsubscribe(),R=null,J.subscribe(M)):U=!0})),U&&(R.unsubscribe(),R=null,J.subscribe(M))})}var It=N(208),Wt=N(2156);function un(w){return w<=0?()=>We.k:(0,Ce.i)((P,M)=>{let R=[];P.subscribe((0,Le.e)(M,U=>{R.push(U),w<R.length&&R.shift()},()=>{for(const U of R)M.next(U);M.complete()},void 0,()=>{R=null}))})}var nt=N(8124),me=N(528),ye=N(320);function Fe(w){return(0,Ce.i)((P,M)=>{try{P.subscribe(M)}finally{M.add(w)}})}var Je=N(8084),De=N(308),Jt=N(267),dn=N(4476);const Lt="primary",an=Symbol("RouteTitle");class Qn{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const M=this.params[P];return Array.isArray(M)?M[0]:M}return null}getAll(P){if(this.has(P)){const M=this.params[P];return Array.isArray(M)?M:[M]}return[]}get keys(){return Object.keys(this.params)}}function jn(w){return new Qn(w)}function xt(w,P,M){const R=M.path.split("/");if(R.length>w.length||"full"===M.pathMatch&&(P.hasChildren()||R.length<w.length))return null;const U={};for(let J=0;J<R.length;J++){const we=R[J],mt=w[J];if(we.startsWith(":"))U[we.substring(1)]=mt;else if(we!==mt.path)return null}return{consumed:w.slice(0,R.length),posParams:U}}function Tt(w,P){const M=w?kt(w):void 0,R=P?kt(P):void 0;if(!M||!R||M.length!=R.length)return!1;let U;for(let J=0;J<M.length;J++)if(U=M[J],!vn(w[U],P[U]))return!1;return!0}function kt(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}function vn(w,P){if(Array.isArray(w)&&Array.isArray(P)){if(w.length!==P.length)return!1;const M=[...w].sort(),R=[...P].sort();return M.every((U,J)=>R[J]===U)}return w===P}function Ft(w){return w.length>0?w[w.length-1]:null}function Qt(w){return function ee(w){return!!w&&(w instanceof K._||(0,Z.m)(w.lift)&&(0,Z.m)(w.subscribe))}(w)?w:(0,l.w5$)(w)?(0,Ne.Q)(Promise.resolve(w)):(0,ge.of)(w)}const Sn={exact:function Cr(w,P,M){if(!bt(w.segments,P.segments)||!ri(w.segments,P.segments,M)||w.numberOfChildren!==P.numberOfChildren)return!1;for(const R in P.children)if(!w.children[R]||!Cr(w.children[R],P.children[R],M))return!1;return!0},subset:Wn},xn={exact:function mr(w,P){return Tt(w,P)},subset:function Tn(w,P){return Object.keys(P).length<=Object.keys(w).length&&Object.keys(P).every(M=>vn(w[M],P[M]))},ignored:()=>!0};function br(w,P,M){return Sn[M.paths](w.root,P.root,M.matrixParams)&&xn[M.queryParams](w.queryParams,P.queryParams)&&!("exact"===M.fragment&&w.fragment!==P.fragment)}function Wn(w,P,M){return Sr(w,P,P.segments,M)}function Sr(w,P,M,R){if(w.segments.length>M.length){const U=w.segments.slice(0,M.length);return!(!bt(U,M)||P.hasChildren()||!ri(U,M,R))}if(w.segments.length===M.length){if(!bt(w.segments,M)||!ri(w.segments,M,R))return!1;for(const U in P.children)if(!w.children[U]||!Wn(w.children[U],P.children[U],R))return!1;return!0}{const U=M.slice(0,w.segments.length),J=M.slice(w.segments.length);return!!(bt(w.segments,U)&&ri(w.segments,U,R)&&w.children[Lt])&&Sr(w.children[Lt],P,J,R)}}function ri(w,P,M){return P.every((R,U)=>xn[M](w[U].parameters,R.parameters))}class sr{constructor(P=new Et([],{}),M={},R=null){this.root=P,this.queryParams=M,this.fragment=R}get queryParamMap(){var P;return null!==(P=this._queryParamMap)&&void 0!==P||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return jr.serialize(this)}}class Et{constructor(P,M){this.segments=P,this.children=M,this.parent=null,Object.values(M).forEach(R=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return po(this)}}class Xt{constructor(P,M){this.path=P,this.parameters=M}get parameterMap(){var P;return null!==(P=this._parameterMap)&&void 0!==P||(this._parameterMap=jn(this.parameters)),this._parameterMap}toString(){return lt(this)}}function bt(w,P){return w.length===P.length&&w.every((M,R)=>M.path===P[R].path)}let hn=(()=>{var w;class P{}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:()=>new nr,providedIn:"root"}),P})();class nr{parse(P){const M=new Br(P);return new sr(M.parseRootSegment(),M.parseQueryParams(),M.parseFragment())}serialize(P){const M=`/${Xr(P.root,!0)}`,R=function Ie(w){const P=Object.entries(w).map(([M,R])=>Array.isArray(R)?R.map(U=>`${Li(M)}=${Li(U)}`).join("&"):`${Li(M)}=${Li(R)}`).filter(M=>M);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${M}${R}${"string"==typeof P.fragment?`#${function Yi(w){return encodeURI(w)}(P.fragment)}`:""}`}}const jr=new nr;function po(w){return w.segments.map(P=>lt(P)).join("/")}function Xr(w,P){if(!w.hasChildren())return po(w);if(P){const M=w.children[Lt]?Xr(w.children[Lt],!1):"",R=[];return Object.entries(w.children).forEach(([U,J])=>{U!==Lt&&R.push(`${U}:${Xr(J,!1)}`)}),R.length>0?`${M}(${R.join("//")})`:M}{const M=function yn(w,P){let M=[];return Object.entries(w.children).forEach(([R,U])=>{R===Lt&&(M=M.concat(P(U,R)))}),Object.entries(w.children).forEach(([R,U])=>{R!==Lt&&(M=M.concat(P(U,R)))}),M}(w,(R,U)=>U===Lt?[Xr(w.children[Lt],!1)]:[`${U}:${Xr(R,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[Lt]?`${po(w)}/${M[0]}`:`${po(w)}/(${M.join("//")})`}}function Rr(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Li(w){return Rr(w).replace(/%3B/gi,";")}function St(w){return Rr(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dt(w){return decodeURIComponent(w)}function Rt(w){return dt(w.replace(/\+/g,"%20"))}function lt(w){return`${St(w.path)}${function ue(w){return Object.entries(w).map(([P,M])=>`;${St(P)}=${St(M)}`).join("")}(w.parameters)}`}const Ue=/^[^\/()?;#]+/;function tt(w){const P=w.match(Ue);return P?P[0]:""}const ut=/^[^\/()?;=#]+/,$n=/^[^=?&#]+/,Nr=/^[^&#]+/;class Br{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let M={};this.peekStartsWith("/(")&&(this.capture("/"),M=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(P.length>0||Object.keys(M).length>0)&&(R[Lt]=new Et(P,M)),R}parseSegment(){const P=tt(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new l.OBp(4009,!1);return this.capture(P),new Xt(dt(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const M=function pn(w){const P=w.match(ut);return P?P[0]:""}(this.remaining);if(!M)return;this.capture(M);let R="";if(this.consumeOptional("=")){const U=tt(this.remaining);U&&(R=U,this.capture(R))}P[dt(M)]=dt(R)}parseQueryParam(P){const M=function qn(w){const P=w.match($n);return P?P[0]:""}(this.remaining);if(!M)return;this.capture(M);let R="";if(this.consumeOptional("=")){const we=function Ar(w){const P=w.match(Nr);return P?P[0]:""}(this.remaining);we&&(R=we,this.capture(R))}const U=Rt(M),J=Rt(R);if(P.hasOwnProperty(U)){let we=P[U];Array.isArray(we)||(we=[we],P[U]=we),we.push(J)}else P[U]=J}parseParens(P){const M={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=tt(this.remaining),U=this.remaining[R.length];if("/"!==U&&")"!==U&&";"!==U)throw new l.OBp(4010,!1);let J;R.indexOf(":")>-1?(J=R.slice(0,R.indexOf(":")),this.capture(J),this.capture(":")):P&&(J=Lt);const we=this.parseChildren();M[J]=1===Object.keys(we).length?we[Lt]:new Et([],we),this.consumeOptional("//")}return M}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new l.OBp(4011,!1)}}function bn(w){return w.segments.length>0?new Et([],{[Lt]:w}):w}function Mr(w){const P={};for(const[R,U]of Object.entries(w.children)){const J=Mr(U);if(R===Lt&&0===J.segments.length&&J.hasChildren())for(const[we,mt]of Object.entries(J.children))P[we]=mt;else(J.segments.length>0||J.hasChildren())&&(P[R]=J)}return function so(w){if(1===w.numberOfChildren&&w.children[Lt]){const P=w.children[Lt];return new Et(w.segments.concat(P.segments),P.children)}return w}(new Et(w.segments,P))}function Or(w){return w instanceof sr}function yt(w){var P;let M;const J=bn(function R(we){const mt={};for(const wt of we.children){const Ln=R(wt);mt[wt.outlet]=Ln}const fn=new Et(we.url,mt);return we===w&&(M=fn),fn}(w.root));return null!==(P=M)&&void 0!==P?P:J}function vt(w,P,M,R){let U=w;for(;U.parent;)U=U.parent;if(0===P.length)return Xn(U,U,U,M,R);const J=function $r(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Zn(!0,0,w);let P=0,M=!1;const R=w.reduce((U,J,we)=>{if("object"==typeof J&&null!=J){if(J.outlets){const mt={};return Object.entries(J.outlets).forEach(([fn,wt])=>{mt[fn]="string"==typeof wt?wt.split("/"):wt}),[...U,{outlets:mt}]}if(J.segmentPath)return[...U,J.segmentPath]}return"string"!=typeof J?[...U,J]:0===we?(J.split("/").forEach((mt,fn)=>{0==fn&&"."===mt||(0==fn&&""===mt?M=!0:".."===mt?P++:""!=mt&&U.push(mt))}),U):[...U,J]},[]);return new Zn(M,P,R)}(P);if(J.toRoot())return Xn(U,U,new Et([],{}),M,R);const we=function Gr(w,P,M){if(w.isAbsolute)return new Vr(P,!0,0);if(!M)return new Vr(P,!1,NaN);if(null===M.parent)return new Vr(M,!0,0);const R=Ht(w.commands[0])?0:1;return function go(w,P,M){let R=w,U=P,J=M;for(;J>U;){if(J-=U,R=R.parent,!R)throw new l.OBp(4005,!1);U=R.segments.length}return new Vr(R,!1,U-J)}(M,M.segments.length-1+R,w.numberOfDoubleDots)}(J,U,w),mt=we.processChildren?lo(we.segmentGroup,we.index,J.commands):Hr(we.segmentGroup,we.index,J.commands);return Xn(U,we.segmentGroup,mt,M,R)}function Ht(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Mn(w){return"object"==typeof w&&null!=w&&w.outlets}function Xn(w,P,M,R,U){let we,J={};R&&Object.entries(R).forEach(([fn,wt])=>{J[fn]=Array.isArray(wt)?wt.map(Ln=>`${Ln}`):`${wt}`}),we=w===P?M:Kn(w,P,M);const mt=bn(Mr(we));return new sr(mt,J,U)}function Kn(w,P,M){const R={};return Object.entries(w.children).forEach(([U,J])=>{R[U]=J===P?M:Kn(J,P,M)}),new Et(w.segments,R)}class Zn{constructor(P,M,R){if(this.isAbsolute=P,this.numberOfDoubleDots=M,this.commands=R,P&&R.length>0&&Ht(R[0]))throw new l.OBp(4003,!1);const U=R.find(Mn);if(U&&U!==Ft(R))throw new l.OBp(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vr{constructor(P,M,R){this.segmentGroup=P,this.processChildren=M,this.index=R}}function Hr(w,P,M){var R;if(null!==(R=w)&&void 0!==R||(w=new Et([],{})),0===w.segments.length&&w.hasChildren())return lo(w,P,M);const U=function pi(w,P,M){let R=0,U=P;const J={match:!1,pathIndex:0,commandIndex:0};for(;U<w.segments.length;){if(R>=M.length)return J;const we=w.segments[U],mt=M[R];if(Mn(mt))break;const fn=`${mt}`,wt=R<M.length-1?M[R+1]:null;if(U>0&&void 0===fn)break;if(fn&&wt&&"object"==typeof wt&&void 0===wt.outlets){if(!Pe(fn,wt,we))return J;R+=2}else{if(!Pe(fn,{},we))return J;R++}U++}return{match:!0,pathIndex:U,commandIndex:R}}(w,P,M),J=M.slice(U.commandIndex);if(U.match&&U.pathIndex<w.segments.length){const we=new Et(w.segments.slice(0,U.pathIndex),{});return we.children[Lt]=new Et(w.segments.slice(U.pathIndex),w.children),lo(we,0,J)}return U.match&&0===J.length?new Et(w.segments,{}):U.match&&!w.hasChildren()?Kr(w,P,M):U.match?lo(w,0,J):Kr(w,P,M)}function lo(w,P,M){if(0===M.length)return new Et(w.segments,{});{const R=function ao(w){return Mn(w[0])?w[0].outlets:{[Lt]:w}}(M),U={};if(Object.keys(R).some(J=>J!==Lt)&&w.children[Lt]&&1===w.numberOfChildren&&0===w.children[Lt].segments.length){const J=lo(w.children[Lt],P,M);return new Et(w.segments,J.children)}return Object.entries(R).forEach(([J,we])=>{"string"==typeof we&&(we=[we]),null!==we&&(U[J]=Hr(w.children[J],P,we))}),Object.entries(w.children).forEach(([J,we])=>{void 0===R[J]&&(U[J]=we)}),new Et(w.segments,U)}}function Kr(w,P,M){const R=w.segments.slice(0,P);let U=0;for(;U<M.length;){const J=M[U];if(Mn(J)){const fn=Ir(J.outlets);return new Et(R,fn)}if(0===U&&Ht(M[0])){R.push(new Xt(w.segments[P].path,qr(M[0]))),U++;continue}const we=Mn(J)?J.outlets[Lt]:`${J}`,mt=U<M.length-1?M[U+1]:null;we&&mt&&Ht(mt)?(R.push(new Xt(we,qr(mt))),U+=2):(R.push(new Xt(we,{})),U++)}return new Et(R,{})}function Ir(w){const P={};return Object.entries(w).forEach(([M,R])=>{"string"==typeof R&&(R=[R]),null!==R&&(P[M]=Kr(new Et([],{}),0,R))}),P}function qr(w){const P={};return Object.entries(w).forEach(([M,R])=>P[M]=`${R}`),P}function Pe(w,P,M){return w==M.path&&Tt(P,M.parameters)}const Me="imperative";var X=function(w){return w[w.NavigationStart=0]="NavigationStart",w[w.NavigationEnd=1]="NavigationEnd",w[w.NavigationCancel=2]="NavigationCancel",w[w.NavigationError=3]="NavigationError",w[w.RoutesRecognized=4]="RoutesRecognized",w[w.ResolveStart=5]="ResolveStart",w[w.ResolveEnd=6]="ResolveEnd",w[w.GuardsCheckStart=7]="GuardsCheckStart",w[w.GuardsCheckEnd=8]="GuardsCheckEnd",w[w.RouteConfigLoadStart=9]="RouteConfigLoadStart",w[w.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",w[w.ChildActivationStart=11]="ChildActivationStart",w[w.ChildActivationEnd=12]="ChildActivationEnd",w[w.ActivationStart=13]="ActivationStart",w[w.ActivationEnd=14]="ActivationEnd",w[w.Scroll=15]="Scroll",w[w.NavigationSkipped=16]="NavigationSkipped",w}(X||{});class Te{constructor(P,M){this.id=P,this.url=M}}class gt extends Te{constructor(P,M,R="imperative",U=null){super(P,M),this.type=X.NavigationStart,this.navigationTrigger=R,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jt extends Te{constructor(P,M,R){super(P,M),this.urlAfterRedirects=R,this.type=X.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Dn=function(w){return w[w.Redirect=0]="Redirect",w[w.SupersededByNewNavigation=1]="SupersededByNewNavigation",w[w.NoDataFromResolver=2]="NoDataFromResolver",w[w.GuardRejected=3]="GuardRejected",w}(Dn||{}),An=function(w){return w[w.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",w[w.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",w}(An||{});class Gn extends Te{constructor(P,M,R,U){super(P,M),this.reason=R,this.code=U,this.type=X.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jn extends Te{constructor(P,M,R,U){super(P,M),this.reason=R,this.code=U,this.type=X.NavigationSkipped}}class gi extends Te{constructor(P,M,R,U){super(P,M),this.error=R,this.target=U,this.type=X.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ct extends Te{constructor(P,M,R,U){super(P,M),this.urlAfterRedirects=R,this.state=U,this.type=X.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y extends Te{constructor(P,M,R,U){super(P,M),this.urlAfterRedirects=R,this.state=U,this.type=X.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ne extends Te{constructor(P,M,R,U,J){super(P,M),this.urlAfterRedirects=R,this.state=U,this.shouldActivate=J,this.type=X.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qe extends Te{constructor(P,M,R,U){super(P,M),this.urlAfterRedirects=R,this.state=U,this.type=X.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ct extends Te{constructor(P,M,R,U){super(P,M),this.urlAfterRedirects=R,this.state=U,this.type=X.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _t{constructor(P){this.route=P,this.type=X.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pt{constructor(P){this.route=P,this.type=X.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kt{constructor(P){this.snapshot=P,this.type=X.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gn{constructor(P){this.snapshot=P,this.type=X.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tn{constructor(P){this.snapshot=P,this.type=X.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nt{constructor(P){this.snapshot=P,this.type=X.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class on{constructor(P,M,R){this.routerEvent=P,this.position=M,this.anchor=R,this.type=X.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class qt{}class ln{constructor(P){this.url=P}}class kr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new tr,this.attachRef=null}}let tr=(()=>{var w;class P{constructor(){this.contexts=new Map}onChildOutletCreated(R,U){const J=this.getOrCreateContext(R);J.outlet=U,this.contexts.set(R,J)}onChildOutletDestroyed(R){const U=this.getContext(R);U&&(U.outlet=null,U.attachRef=null)}onOutletDeactivated(){const R=this.contexts;return this.contexts=new Map,R}onOutletReAttached(R){this.contexts=R}getOrCreateContext(R){let U=this.getContext(R);return U||(U=new kr,this.contexts.set(R,U)),U}getContext(R){return this.contexts.get(R)||null}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})();class A{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const M=this.pathFromRoot(P);return M.length>1?M[M.length-2]:null}children(P){const M=fe(P,this._root);return M?M.children.map(R=>R.value):[]}firstChild(P){const M=fe(P,this._root);return M&&M.children.length>0?M.children[0].value:null}siblings(P){const M=F(P,this._root);return M.length<2?[]:M[M.length-2].children.map(U=>U.value).filter(U=>U!==P)}pathFromRoot(P){return F(P,this._root).map(M=>M.value)}}function fe(w,P){if(w===P.value)return P;for(const M of P.children){const R=fe(w,M);if(R)return R}return null}function F(w,P){if(w===P.value)return[P];for(const M of P.children){const R=F(w,M);if(R.length)return R.unshift(P),R}return[]}class le{constructor(P,M){this.value=P,this.children=M}toString(){return`TreeNode(${this.value})`}}function Ae(w){const P={};return w&&w.children.forEach(M=>P[M.value.outlet]=M),P}class Bt extends A{constructor(P,M){super(P),this.snapshot=M,Fi(this,P)}toString(){return this.snapshot.toString()}}function rr(w){const P=function Si(w){const J=new Yo([],{},{},"",{},Lt,w,null,{});return new oi("",new le(J,[]))}(w),M=new _e.g([new Xt("",{})]),R=new _e.g({}),U=new _e.g({}),J=new _e.g({}),we=new _e.g(""),mt=new ii(M,R,J,we,U,Lt,w,P.root);return mt.snapshot=P.root,new Bt(new le(mt,[]),P)}class ii{constructor(P,M,R,U,J,we,mt,fn){var wt,Ln;this.urlSubject=P,this.paramsSubject=M,this.queryParamsSubject=R,this.fragmentSubject=U,this.dataSubject=J,this.outlet=we,this.component=mt,this._futureSnapshot=fn,this.title=null!==(wt=null===(Ln=this.dataSubject)||void 0===Ln?void 0:Ln.pipe((0,$e.k)(yr=>yr[an])))&&void 0!==wt?wt:(0,ge.of)(void 0),this.url=P,this.params=M,this.queryParams=R,this.fragment=U,this.data=J}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var P;return null!==(P=this._paramMap)&&void 0!==P||(this._paramMap=this.params.pipe((0,$e.k)(M=>jn(M)))),this._paramMap}get queryParamMap(){var P;return null!==(P=this._queryParamMap)&&void 0!==P||(this._queryParamMap=this.queryParams.pipe((0,$e.k)(M=>jn(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zr(w,P,M="emptyOnly"){var R;let U;const{routeConfig:J}=w;var we;return U=null===P||"always"!==M&&""!==(null==J?void 0:J.path)&&(P.component||null!==(R=P.routeConfig)&&void 0!==R&&R.loadComponent)?{params:{...w.params},data:{...w.data},resolve:{...w.data,...null!==(we=w._resolvedData)&&void 0!==we?we:{}}}:{params:{...P.params,...w.params},data:{...P.data,...w.data},resolve:{...w.data,...P.data,...null==J?void 0:J.data,...w._resolvedData}},J&&vs(J)&&(U.resolve[an]=J.title),U}class Yo{get title(){var P;return null===(P=this.data)||void 0===P?void 0:P[an]}constructor(P,M,R,U,J,we,mt,fn,wt){this.url=P,this.params=M,this.queryParams=R,this.fragment=U,this.data=J,this.outlet=we,this.component=mt,this.routeConfig=fn,this._resolve=wt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var P;return null!==(P=this._paramMap)&&void 0!==P||(this._paramMap=jn(this.params)),this._paramMap}get queryParamMap(){var P;return null!==(P=this._queryParamMap)&&void 0!==P||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oi extends A{constructor(P,M){super(M),this.url=P,Fi(this,M)}toString(){return co(this._root)}}function Fi(w,P){P.value._routerState=w,P.children.forEach(M=>Fi(w,M))}function co(w){const P=w.children.length>0?` { ${w.children.map(co).join(", ")} } `:"";return`${w.value}${P}`}function Yn(w){if(w.snapshot){const P=w.snapshot,M=w._futureSnapshot;w.snapshot=M,Tt(P.queryParams,M.queryParams)||w.queryParamsSubject.next(M.queryParams),P.fragment!==M.fragment&&w.fragmentSubject.next(M.fragment),Tt(P.params,M.params)||w.paramsSubject.next(M.params),function ft(w,P){if(w.length!==P.length)return!1;for(let M=0;M<w.length;++M)if(!Tt(w[M],P[M]))return!1;return!0}(P.url,M.url)||w.urlSubject.next(M.url),Tt(P.data,M.data)||w.dataSubject.next(M.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function is(w,P){const M=Tt(w.params,P.params)&&function Yt(w,P){return bt(w,P)&&w.every((M,R)=>Tt(M.parameters,P[R].parameters))}(w.url,P.url);return M&&!(!w.parent!=!P.parent)&&(!w.parent||is(w.parent,P.parent))}function vs(w){return"string"==typeof w.title||null===w.title}let zs=(()=>{var w;class P{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new l._w7,this.deactivateEvents=new l._w7,this.attachEvents=new l._w7,this.detachEvents=new l._w7,this.parentContexts=(0,l.uUt)(tr),this.location=(0,l.uUt)(l.y8U),this.changeDetector=(0,l.uUt)(l.kD9),this.environmentInjector=(0,l.uUt)(l.SIe),this.inputBinder=(0,l.uUt)(ys,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(R){if(R.name){const{firstChange:U,previousValue:J}=R.name;if(U)return;this.isTrackedInParentContexts(J)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(J)),this.initializeOutletWithName()}}ngOnDestroy(){var R;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(R=this.inputBinder)||void 0===R||R.unsubscribeFromRouteData(this)}isTrackedInParentContexts(R){var U;return(null===(U=this.parentContexts.getContext(R))||void 0===U?void 0:U.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const R=this.parentContexts.getContext(this.name);null!=R&&R.route&&(R.attachRef?this.attach(R.attachRef,R.route):this.activateWith(R.route,R.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.OBp(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.OBp(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.OBp(4012,!1);this.location.detach();const R=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(R.instance),R}attach(R,U){var J;this.activated=R,this._activatedRoute=U,this.location.insert(R.hostView),null===(J=this.inputBinder)||void 0===J||J.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(R.instance)}deactivate(){if(this.activated){const R=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(R)}}activateWith(R,U){var J;if(this.isActivated)throw new l.OBp(4013,!1);this._activatedRoute=R;const we=this.location,fn=R.snapshot.component,wt=this.parentContexts.getOrCreateContext(this.name).children,Ln=new yi(R,wt,we.injector);this.activated=we.createComponent(fn,{index:we.length,injector:Ln,environmentInjector:null!=U?U:this.environmentInjector}),this.changeDetector.markForCheck(),null===(J=this.inputBinder)||void 0===J||J.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275dir=l.Sc5({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[l.SYr]}),P})();class yi{constructor(P,M,R){this.route=P,this.childContexts=M,this.parent=R}get(P,M){return P===ii?this.route:P===tr?this.childContexts:this.parent.get(P,M)}}const ys=new l.UbH("");let vo=(()=>{var w;class P{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(R){this.unsubscribeFromRouteData(R),this.subscribeToRouteData(R)}unsubscribeFromRouteData(R){var U;null===(U=this.outletDataSubscriptions.get(R))||void 0===U||U.unsubscribe(),this.outletDataSubscriptions.delete(R)}subscribeToRouteData(R){const{activatedRoute:U}=R,J=(0,je.E)([U.queryParams,U.params,U.data]).pipe((0,pt.G)(([we,mt,fn],wt)=>(fn={...we,...mt,...fn},0===wt?(0,ge.of)(fn):Promise.resolve(fn)))).subscribe(we=>{if(!R.isActivated||!R.activatedComponentRef||R.activatedRoute!==U||null===U.component)return void this.unsubscribeFromRouteData(R);const mt=(0,l.o9M)(U.component);if(mt)for(const{templateName:fn}of mt.inputs)R.activatedComponentRef.setInput(fn,we[fn]);else this.unsubscribeFromRouteData(R)});this.outletDataSubscriptions.set(R,J)}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac}),P})();function Qi(w,P,M){if(M&&w.shouldReuseRoute(P.value,M.value.snapshot)){const R=M.value;R._futureSnapshot=P.value;const U=function Ao(w,P,M){return P.children.map(R=>{for(const U of M.children)if(w.shouldReuseRoute(R.value,U.value.snapshot))return Qi(w,R,U);return Qi(w,R)})}(w,P,M);return new le(R,U)}{if(w.shouldAttach(P.value)){const J=w.retrieve(P.value);if(null!==J){const we=J.route;return we.value._futureSnapshot=P.value,we.children=P.children.map(mt=>Qi(w,mt)),we}}const R=function _r(w){return new ii(new _e.g(w.url),new _e.g(w.params),new _e.g(w.queryParams),new _e.g(w.fragment),new _e.g(w.data),w.outlet,w.component,w)}(P.value),U=P.children.map(J=>Qi(w,J));return new le(R,U)}}const Lr="ngNavigationCancelingError";function Ro(w,P){const{redirectTo:M,navigationBehaviorOptions:R}=Or(P)?{redirectTo:P,navigationBehaviorOptions:void 0}:P,U=cr(!1,Dn.Redirect);return U.url=M,U.navigationBehaviorOptions=R,U}function cr(w,P){const M=new Error(`NavigationCancelingError: ${w||""}`);return M[Lr]=!0,M.cancellationCode=P,M}function Qo(w){return!!w&&w[Lr]}let Ii=(()=>{var w;class P{}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275cmp=l.In1({type:w,selectors:[["ng-component"]],standalone:!0,features:[l.UHJ],decls:1,vars:0,template:function(R,U){1&R&&l.wR5(0,"router-outlet")},dependencies:[zs],encapsulation:2}),P})();function Ei(w){const P=w.children&&w.children.map(Ei),M=P?{...w,children:P}:{...w};return!M.component&&!M.loadComponent&&(P||M.loadChildren)&&M.outlet&&M.outlet!==Lt&&(M.component=Ii),M}function to(w){return w.outlet||Lt}function ss(w){var P;if(!w)return null;if(null!==(P=w.routeConfig)&&void 0!==P&&P._injector)return w.routeConfig._injector;for(let M=w.parent;M;M=M.parent){const R=M.routeConfig;if(null!=R&&R._loadedInjector)return R._loadedInjector;if(null!=R&&R._injector)return R._injector}return null}class mi{constructor(P,M,R,U,J){this.routeReuseStrategy=P,this.futureState=M,this.currState=R,this.forwardEvent=U,this.inputBindingEnabled=J}activate(P){const M=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(M,R,P),Yn(this.futureState.root),this.activateChildRoutes(M,R,P)}deactivateChildRoutes(P,M,R){const U=Ae(M);P.children.forEach(J=>{const we=J.value.outlet;this.deactivateRoutes(J,U[we],R),delete U[we]}),Object.values(U).forEach(J=>{this.deactivateRouteAndItsChildren(J,R)})}deactivateRoutes(P,M,R){const U=P.value,J=M?M.value:null;if(U===J)if(U.component){const we=R.getContext(U.outlet);we&&this.deactivateChildRoutes(P,M,we.children)}else this.deactivateChildRoutes(P,M,R);else J&&this.deactivateRouteAndItsChildren(M,R)}deactivateRouteAndItsChildren(P,M){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,M):this.deactivateRouteAndOutlet(P,M)}detachAndStoreRouteSubtree(P,M){const R=M.getContext(P.value.outlet),U=R&&P.value.component?R.children:M,J=Ae(P);for(const we of Object.values(J))this.deactivateRouteAndItsChildren(we,U);if(R&&R.outlet){const we=R.outlet.detach(),mt=R.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:we,route:P,contexts:mt})}}deactivateRouteAndOutlet(P,M){const R=M.getContext(P.value.outlet),U=R&&P.value.component?R.children:M,J=Ae(P);for(const we of Object.values(J))this.deactivateRouteAndItsChildren(we,U);R&&(R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated()),R.attachRef=null,R.route=null)}activateChildRoutes(P,M,R){const U=Ae(M);P.children.forEach(J=>{this.activateRoutes(J,U[J.value.outlet],R),this.forwardEvent(new Nt(J.value.snapshot))}),P.children.length&&this.forwardEvent(new gn(P.value.snapshot))}activateRoutes(P,M,R){const U=P.value,J=M?M.value:null;if(Yn(U),U===J)if(U.component){const we=R.getOrCreateContext(U.outlet);this.activateChildRoutes(P,M,we.children)}else this.activateChildRoutes(P,M,R);else if(U.component){const we=R.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const mt=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),we.children.onOutletReAttached(mt.contexts),we.attachRef=mt.componentRef,we.route=mt.route.value,we.outlet&&we.outlet.attach(mt.componentRef,mt.route.value),Yn(mt.route.value),this.activateChildRoutes(P,null,we.children)}else{const mt=ss(U.snapshot);we.attachRef=null,we.route=U,we.injector=mt,we.outlet&&we.outlet.activateWith(U,we.injector),this.activateChildRoutes(P,null,we.children)}}else this.activateChildRoutes(P,null,R)}}class Aa{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class Es{constructor(P,M){this.component=P,this.route=M}}function Hl(w,P,M){const R=w._root;return Xo(R,P?P._root:null,M,[R.value])}function as(w,P){const M=Symbol(),R=P.get(w,M);return R===M?"function"!=typeof w||(0,l.K_M)(w)?P.get(w):w:R}function Xo(w,P,M,R,U={canDeactivateChecks:[],canActivateChecks:[]}){const J=Ae(P);return w.children.forEach(we=>{(function Ma(w,P,M,R,U={canDeactivateChecks:[],canActivateChecks:[]}){const J=w.value,we=P?P.value:null,mt=M?M.getContext(w.value.outlet):null;if(we&&J.routeConfig===we.routeConfig){const fn=function dr(w,P,M){if("function"==typeof M)return M(w,P);switch(M){case"pathParamsChange":return!bt(w.url,P.url);case"pathParamsOrQueryParamsChange":return!bt(w.url,P.url)||!Tt(w.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!is(w,P)||!Tt(w.queryParams,P.queryParams);default:return!is(w,P)}}(we,J,J.routeConfig.runGuardsAndResolvers);fn?U.canActivateChecks.push(new Aa(R)):(J.data=we.data,J._resolvedData=we._resolvedData),Xo(w,P,J.component?mt?mt.children:null:M,R,U),fn&&mt&&mt.outlet&&mt.outlet.isActivated&&U.canDeactivateChecks.push(new Es(mt.outlet.component,we))}else we&&ma(P,mt,U),U.canActivateChecks.push(new Aa(R)),Xo(w,null,J.component?mt?mt.children:null:M,R,U)})(we,J[we.value.outlet],M,R.concat([we.value]),U),delete J[we.value.outlet]}),Object.entries(J).forEach(([we,mt])=>ma(mt,M.getContext(we),U)),U}function ma(w,P,M){const R=Ae(w),U=w.value;Object.entries(R).forEach(([J,we])=>{ma(we,U.component?P?P.children.getContext(J):null:P,M)}),M.canDeactivateChecks.push(new Es(U.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,U))}function ls(w){return"function"==typeof w}function ce(w){return w instanceof Qe.G||"EmptyError"===(null==w?void 0:w.name)}const H=Symbol("INITIAL_VALUE");function Se(){return(0,pt.G)(w=>(0,je.E)(w.map(P=>P.pipe((0,ve.U)(1),(0,Xe.W)(H)))).pipe((0,$e.k)(P=>{for(const M of P)if(!0!==M){if(M===H)return H;if(!1===M||M instanceof sr)return M}return!0}),(0,et.I)(P=>P!==H),(0,ve.U)(1)))}function cc(w){return(0,Ke.W)((0,se.y)(P=>{if(Or(P))throw Ro(0,P)}),(0,$e.k)(P=>!0===P))}class Ys{constructor(P){this.segmentGroup=P||null}}class Xi extends Error{constructor(P){super(),this.urlTree=P}}function Qs(w){return(0,He.c)(new Ys(w))}class Zo{constructor(P,M){this.urlSerializer=P,this.urlTree=M}lineralizeSegments(P,M){let R=[],U=M.root;for(;;){if(R=R.concat(U.segments),0===U.numberOfChildren)return(0,ge.of)(R);if(U.numberOfChildren>1||!U.children[Lt])return(0,He.c)(new l.OBp(4e3,!1));U=U.children[Lt]}}applyRedirectCommands(P,M,R){const U=this.applyRedirectCreateUrlTree(M,this.urlSerializer.parse(M),P,R);if(M.startsWith("/"))throw new Xi(U);return U}applyRedirectCreateUrlTree(P,M,R,U){const J=this.createSegmentGroup(P,M.root,R,U);return new sr(J,this.createQueryParams(M.queryParams,this.urlTree.queryParams),M.fragment)}createQueryParams(P,M){const R={};return Object.entries(P).forEach(([U,J])=>{if("string"==typeof J&&J.startsWith(":")){const mt=J.substring(1);R[U]=M[mt]}else R[U]=J}),R}createSegmentGroup(P,M,R,U){const J=this.createSegments(P,M.segments,R,U);let we={};return Object.entries(M.children).forEach(([mt,fn])=>{we[mt]=this.createSegmentGroup(P,fn,R,U)}),new Et(J,we)}createSegments(P,M,R,U){return M.map(J=>J.path.startsWith(":")?this.findPosParam(P,J,U):this.findOrReturn(J,R))}findPosParam(P,M,R){const U=R[M.path.substring(1)];if(!U)throw new l.OBp(4001,!1);return U}findOrReturn(P,M){let R=0;for(const U of M){if(U.path===P.path)return M.splice(R),U;R++}return P}}const Fs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ya(w,P,M,R,U){const J=Jo(w,P,M);return J.matched?(R=function pa(w,P){var M;return w.providers&&!w._injector&&(w._injector=(0,l.SIz)(w.providers,P,`Route: ${w.path}`)),null!==(M=w._injector)&&void 0!==M?M:P}(P,R),function qs(w,P,M,R){const U=P.canMatch;if(!U||0===U.length)return(0,ge.of)(!0);const J=U.map(we=>{const mt=as(we,w);return Qt(function V(w){return w&&ls(w.canMatch)}(mt)?mt.canMatch(P,M):(0,l.SMS)(w,()=>mt(P,M)))});return(0,ge.of)(J).pipe(Se(),cc())}(R,P,M).pipe((0,$e.k)(we=>!0===we?J:{...Fs}))):(0,ge.of)(J)}function Jo(w,P,M){var R,U;if("**"===P.path)return function gl(w){return{matched:!0,parameters:w.length>0?Ft(w).parameters:{},consumedSegments:w,remainingSegments:[],positionalParamSegments:{}}}(M);if(""===P.path)return"full"===P.pathMatch&&(w.hasChildren()||M.length>0)?{...Fs}:{matched:!0,consumedSegments:[],remainingSegments:M,parameters:{},positionalParamSegments:{}};const we=(P.matcher||xt)(M,w,P);if(!we)return{...Fs};const mt={};Object.entries(null!==(R=we.posParams)&&void 0!==R?R:{}).forEach(([wt,Ln])=>{mt[wt]=Ln.path});const fn=we.consumed.length>0?{...mt,...we.consumed[we.consumed.length-1].parameters}:mt;return{matched:!0,consumedSegments:we.consumed,remainingSegments:M.slice(we.consumed.length),parameters:fn,positionalParamSegments:null!==(U=we.posParams)&&void 0!==U?U:{}}}function _a(w,P,M,R){return M.length>0&&function Xs(w,P,M){return M.some(R=>Vo(w,P,R)&&to(R)!==Lt)}(w,M,R)?{segmentGroup:new Et(P,Xa(R,new Et(M,w.children))),slicedSegments:[]}:0===M.length&&function ur(w,P,M){return M.some(R=>Vo(w,P,R))}(w,M,R)?{segmentGroup:new Et(w.segments,Qa(w,M,R,w.children)),slicedSegments:M}:{segmentGroup:new Et(w.segments,w.children),slicedSegments:M}}function Qa(w,P,M,R){const U={};for(const J of M)if(Vo(w,P,J)&&!R[to(J)]){const we=new Et([],{});U[to(J)]=we}return{...R,...U}}function Xa(w,P){const M={};M[Lt]=P;for(const R of w)if(""===R.path&&to(R)!==Lt){const U=new Et([],{});M[to(R)]=U}return M}function Vo(w,P,M){return(!(w.hasChildren()||P.length>0)||"full"!==M.pathMatch)&&""===M.path}class ml{}class fs{constructor(P,M,R,U,J,we,mt){this.injector=P,this.configLoader=M,this.rootComponentType=R,this.config=U,this.urlTree=J,this.paramsInheritanceStrategy=we,this.urlSerializer=mt,this.applyRedirects=new Zo(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(P){return new l.OBp(4002,`'${P.segmentGroup}'`)}recognize(){const P=_a(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(P).pipe((0,$e.k)(M=>{const R=new Yo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,{}),U=new le(R,M),J=new oi("",U),we=function hr(w,P,M=null,R=null){return vt(yt(w),P,M,R)}(R,[],this.urlTree.queryParams,this.urlTree.fragment);return we.queryParams=this.urlTree.queryParams,J.url=this.urlSerializer.serialize(we),this.inheritParamsAndData(J._root,null),{state:J,tree:we}}))}match(P){return this.processSegmentGroup(this.injector,this.config,P,Lt).pipe(Ye(R=>{if(R instanceof Xi)return this.urlTree=R.urlTree,this.match(R.urlTree.root);throw R instanceof Ys?this.noMatchError(R):R}))}inheritParamsAndData(P,M){const R=P.value,U=Zr(R,M,this.paramsInheritanceStrategy);R.params=Object.freeze(U.params),R.data=Object.freeze(U.data),P.children.forEach(J=>this.inheritParamsAndData(J,R))}processSegmentGroup(P,M,R,U){return 0===R.segments.length&&R.hasChildren()?this.processChildren(P,M,R):this.processSegment(P,M,R,R.segments,U,!0).pipe((0,$e.k)(J=>J instanceof le?[J]:[]))}processChildren(P,M,R){const U=[];for(const J of Object.keys(R.children))"primary"===J?U.unshift(J):U.push(J);return(0,Ne.Q)(U).pipe(te(J=>{const we=R.children[J],mt=function Ls(w,P){const M=w.filter(R=>to(R)===P);return M.push(...w.filter(R=>to(R)!==P)),M}(M,J);return this.processSegmentGroup(P,mt,we,J)}),(0,It.K)((J,we)=>(J.push(...we),J)),(0,Wt.G)(null),function he(w,P){const M=arguments.length>=2;return R=>R.pipe(w?(0,et.I)((U,J)=>w(U,J,R)):me.Z,un(1),M?(0,Wt.G)(P):(0,nt._)(()=>new Qe.G))}(),(0,at.O)(J=>{if(null===J)return Qs(R);const we=uc(J);return function Ia(w){w.sort((P,M)=>P.value.outlet===Lt?-1:M.value.outlet===Lt?1:P.value.outlet.localeCompare(M.value.outlet))}(we),(0,ge.of)(we)}))}processSegment(P,M,R,U,J,we){return(0,Ne.Q)(M).pipe(te(mt=>{var fn;return this.processSegmentAgainstRoute(null!==(fn=mt._injector)&&void 0!==fn?fn:P,M,mt,R,U,J,we).pipe(Ye(wt=>{if(wt instanceof Ys)return(0,ge.of)(null);throw wt}))}),(0,ae.K)(mt=>!!mt),Ye(mt=>{if(ce(mt))return function va(w,P,M){return 0===P.length&&!w.children[M]}(R,U,J)?(0,ge.of)(new ml):Qs(R);throw mt}))}processSegmentAgainstRoute(P,M,R,U,J,we,mt){return function zl(w,P,M,R){return!!(to(w)===R||R!==Lt&&Vo(P,M,w))&&Jo(P,w,M).matched}(R,U,J,we)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(P,U,R,J,we):this.allowRedirects&&mt?this.expandSegmentAgainstRouteUsingRedirect(P,U,M,R,J,we):Qs(U):Qs(U)}expandSegmentAgainstRouteUsingRedirect(P,M,R,U,J,we){const{matched:mt,consumedSegments:fn,positionalParamSegments:wt,remainingSegments:Ln}=Jo(M,U,J);if(!mt)return Qs(M);U.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const yr=this.applyRedirects.applyRedirectCommands(fn,U.redirectTo,wt);return this.applyRedirects.lineralizeSegments(U,yr).pipe((0,at.O)(Ti=>this.processSegment(P,R,M,Ti.concat(Ln),we,!1)))}matchSegmentAgainstRoute(P,M,R,U,J){const we=Ya(M,R,U,P);return"**"===R.path&&(M.children={}),we.pipe((0,pt.G)(mt=>{var fn;return mt.matched?(P=null!==(fn=R._injector)&&void 0!==fn?fn:P,this.getChildConfig(P,R,U).pipe((0,pt.G)(({routes:wt})=>{var Ln,yr,Ti;const ci=null!==(Ln=R._loadedInjector)&&void 0!==Ln?Ln:P,{consumedSegments:Bi,remainingSegments:ra,parameters:bs}=mt,ar=new Yo(Bi,bs,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function ws(w){return w.data||{}}(R),to(R),null!==(yr=null!==(Ti=R.component)&&void 0!==Ti?Ti:R._loadedComponent)&&void 0!==yr?yr:null,R,function zt(w){return w.resolve||{}}(R)),{segmentGroup:io,slicedSegments:Cl}=_a(M,Bi,ra,wt);if(0===Cl.length&&io.hasChildren())return this.processChildren(ci,wt,io).pipe((0,$e.k)(jo=>null===jo?null:new le(ar,jo)));if(0===wt.length&&0===Cl.length)return(0,ge.of)(new le(ar,[]));const tl=to(R)===J;return this.processSegment(ci,wt,io,Cl,tl?Lt:J,!0).pipe((0,$e.k)(jo=>new le(ar,jo instanceof le?[jo]:[])))}))):Qs(M)}))}getChildConfig(P,M,R){return M.children?(0,ge.of)({routes:M.children,injector:P}):M.loadChildren?void 0!==M._loadedRoutes?(0,ge.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):function Io(w,P,M,R){const U=P.canLoad;if(void 0===U||0===U.length)return(0,ge.of)(!0);const J=U.map(we=>{const mt=as(we,w);return Qt(function Ri(w){return w&&ls(w.canLoad)}(mt)?mt.canLoad(P,M):(0,l.SMS)(w,()=>mt(P,M)))});return(0,ge.of)(J).pipe(Se(),cc())}(P,M,R).pipe((0,at.O)(U=>U?this.configLoader.loadChildren(P,M).pipe((0,se.y)(J=>{M._loadedRoutes=J.routes,M._loadedInjector=J.injector})):function Ko(w){return(0,He.c)(cr(!1,Dn.GuardRejected))}())):(0,ge.of)({routes:[],injector:P})}}function no(w){const P=w.value.routeConfig;return P&&""===P.path}function uc(w){const P=[],M=new Set;for(const R of w){if(!no(R)){P.push(R);continue}const U=P.find(J=>R.value.routeConfig===J.value.routeConfig);void 0!==U?(U.children.push(...R.children),M.add(U)):P.push(R)}for(const R of M){const U=uc(R.children);P.push(new le(R.value,U))}return P.filter(R=>!M.has(R))}function zr(w){const P=w.children.map(M=>zr(M)).flat();return[w,...P]}function Uo(w){return(0,pt.G)(P=>{const M=w(P);return M?(0,Ne.Q)(M).pipe((0,$e.k)(()=>P)):(0,ge.of)(P)})}let _l=(()=>{var w;class P{buildTitle(R){let U,J=R.root;for(;void 0!==J;){var we;U=null!==(we=this.getResolvedTitleForRoute(J))&&void 0!==we?we:U,J=J.children.find(mt=>mt.outlet===Lt)}return U}getResolvedTitleForRoute(R){return R.data[an]}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:()=>(0,l.uUt)(si),providedIn:"root"}),P})(),si=(()=>{var w;class P extends _l{constructor(R){super(),this.title=R}updateTitle(R){const U=this.buildTitle(R);void 0!==U&&this.title.setTitle(U)}}return(w=P).\u0275fac=function(R){return new(R||w)(l.CoB(dn.OY))},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})();const Mo=new l.UbH("",{providedIn:"root",factory:()=>({})}),Ds=new l.UbH("");let us=(()=>{var w;class P{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,l.uUt)(l.ESV)}loadComponent(R){if(this.componentLoaders.get(R))return this.componentLoaders.get(R);if(R._loadedComponent)return(0,ge.of)(R._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(R);const U=Qt(R.loadComponent()).pipe((0,$e.k)(ds),(0,se.y)(we=>{this.onLoadEndListener&&this.onLoadEndListener(R),R._loadedComponent=we}),Fe(()=>{this.componentLoaders.delete(R)})),J=new Oe.C(U,()=>new it.E).pipe((0,Je.O)());return this.componentLoaders.set(R,J),J}loadChildren(R,U){if(this.childrenLoaders.get(U))return this.childrenLoaders.get(U);if(U._loadedRoutes)return(0,ge.of)({routes:U._loadedRoutes,injector:U._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(U);const we=function Ui(w,P,M,R){return Qt(w.loadChildren()).pipe((0,$e.k)(ds),(0,at.O)(U=>U instanceof l.obV||Array.isArray(U)?(0,ge.of)(U):(0,Ne.Q)(P.compileModuleAsync(U))),(0,$e.k)(U=>{R&&R(w);let J,we,mt=!1;return Array.isArray(U)?(we=U,!0):(J=U.create(M).injector,we=J.get(Ds,[],{optional:!0,self:!0}).flat()),{routes:we.map(Ei),injector:J}}))}(U,this.compiler,R,this.onLoadEndListener).pipe(Fe(()=>{this.childrenLoaders.delete(U)})),mt=new Oe.C(we,()=>new it.E).pipe((0,Je.O)());return this.childrenLoaders.set(U,mt),mt}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})();function ds(w){return function vi(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let Bo=(()=>{var w;class P{}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:()=>(0,l.uUt)(b),providedIn:"root"}),P})(),b=(()=>{var w;class P{shouldProcessUrl(R){return!0}extract(R){return R}merge(R,U){return R}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})();const G=new l.UbH(""),Re=new l.UbH("");function $(w,P,M){const R=w.get(Re),U=w.get(Ve.Ud);return w.get(l.WW2).runOutsideAngular(()=>{if(!U.startViewTransition||R.skipNextTransition)return R.skipNextTransition=!1,Promise.resolve();let J;const we=new Promise(wt=>{J=wt}),mt=U.startViewTransition(()=>(J(),function pe(w){return new Promise(P=>{(0,l.I44)(P,{injector:w})})}(w))),{onViewTransitionCreated:fn}=R;return fn&&(0,l.SMS)(w,()=>fn({transition:mt,from:P,to:M})),we})}let ze=(()=>{var w;class P{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new it.E,this.transitionAbortSubject=new it.E,this.configLoader=(0,l.uUt)(us),this.environmentInjector=(0,l.uUt)(l.SIe),this.urlSerializer=(0,l.uUt)(hn),this.rootContexts=(0,l.uUt)(tr),this.location=(0,l.uUt)(Ve.oB),this.inputBindingEnabled=null!==(0,l.uUt)(ys,{optional:!0}),this.titleStrategy=(0,l.uUt)(_l),this.options=(0,l.uUt)(Mo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,l.uUt)(Bo),this.createViewTransition=(0,l.uUt)(G,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ge.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=J=>this.events.next(new Pt(J)),this.configLoader.onLoadStartListener=J=>this.events.next(new _t(J))}complete(){var R;null===(R=this.transitions)||void 0===R||R.complete()}handleNavigationRequest(R){var U;const J=++this.navigationId;null===(U=this.transitions)||void 0===U||U.next({...this.transitions.value,...R,id:J})}setupNavigations(R,U,J){return this.transitions=new _e.g({id:0,currentUrlTree:U,currentRawUrl:U,extractedUrl:this.urlHandlingStrategy.extract(U),urlAfterRedirects:this.urlHandlingStrategy.extract(U),rawUrl:U,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Me,restoredState:null,currentSnapshot:J.snapshot,targetSnapshot:null,currentRouterState:J,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,et.I)(we=>0!==we.id),(0,$e.k)(we=>({...we,extractedUrl:this.urlHandlingStrategy.extract(we.rawUrl)})),(0,pt.G)(we=>{this.currentTransition=we;let mt=!1,fn=!1;return(0,ge.of)(we).pipe((0,se.y)(wt=>{this.currentNavigation={id:wt.id,initialUrl:wt.rawUrl,extractedUrl:wt.extractedUrl,trigger:wt.source,extras:wt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,pt.G)(wt=>{var Ln;const yr=!R.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),Ti=null!==(Ln=wt.extras.onSameUrlNavigation)&&void 0!==Ln?Ln:R.onSameUrlNavigation;if(!yr&&"reload"!==Ti){const ci="";return this.events.next(new Jn(wt.id,this.urlSerializer.serialize(wt.rawUrl),ci,An.IgnoredSameUrlNavigation)),wt.resolve(null),We.k}if(this.urlHandlingStrategy.shouldProcessUrl(wt.rawUrl))return(0,ge.of)(wt).pipe((0,pt.G)(ci=>{var Bi,ra;const bs=null===(Bi=this.transitions)||void 0===Bi?void 0:Bi.getValue();return this.events.next(new gt(ci.id,this.urlSerializer.serialize(ci.extractedUrl),ci.source,ci.restoredState)),bs!==(null===(ra=this.transitions)||void 0===ra?void 0:ra.getValue())?We.k:Promise.resolve(ci)}),function vr(w,P,M,R,U,J){return(0,at.O)(we=>function Kl(w,P,M,R,U,J,we="emptyOnly"){return new fs(w,P,M,R,U,we,J).recognize()}(w,P,M,R,we.extractedUrl,U,J).pipe((0,$e.k)(({state:mt,tree:fn})=>({...we,targetSnapshot:mt,urlAfterRedirects:fn}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,R.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,se.y)(ci=>{we.targetSnapshot=ci.targetSnapshot,we.urlAfterRedirects=ci.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:ci.urlAfterRedirects};const Bi=new Ct(ci.id,this.urlSerializer.serialize(ci.extractedUrl),this.urlSerializer.serialize(ci.urlAfterRedirects),ci.targetSnapshot);this.events.next(Bi)}));if(yr&&this.urlHandlingStrategy.shouldProcessUrl(wt.currentRawUrl)){const{id:ci,extractedUrl:Bi,source:ra,restoredState:bs,extras:ar}=wt,io=new gt(ci,this.urlSerializer.serialize(Bi),ra,bs);this.events.next(io);const Cl=rr(this.rootComponentType).snapshot;return this.currentTransition=we={...wt,targetSnapshot:Cl,urlAfterRedirects:Bi,extras:{...ar,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Bi,(0,ge.of)(we)}{const ci="";return this.events.next(new Jn(wt.id,this.urlSerializer.serialize(wt.extractedUrl),ci,An.IgnoredByUrlHandlingStrategy)),wt.resolve(null),We.k}}),(0,se.y)(wt=>{const Ln=new Y(wt.id,this.urlSerializer.serialize(wt.extractedUrl),this.urlSerializer.serialize(wt.urlAfterRedirects),wt.targetSnapshot);this.events.next(Ln)}),(0,$e.k)(wt=>(this.currentTransition=we={...wt,guards:Hl(wt.targetSnapshot,wt.currentSnapshot,this.rootContexts)},we)),function _n(w,P){return(0,at.O)(M=>{const{targetSnapshot:R,currentSnapshot:U,guards:{canActivateChecks:J,canDeactivateChecks:we}}=M;return 0===we.length&&0===J.length?(0,ge.of)({...M,guardsResult:!0}):function Pn(w,P,M,R){return(0,Ne.Q)(w).pipe((0,at.O)(U=>function Fo(w,P,M,R,U){const J=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,ge.of)(!0);const we=J.map(mt=>{var fn;const wt=null!==(fn=ss(P))&&void 0!==fn?fn:U,Ln=as(mt,wt);return Qt(function z(w){return w&&ls(w.canDeactivate)}(Ln)?Ln.canDeactivate(w,P,M,R):(0,l.SMS)(wt,()=>Ln(w,P,M,R))).pipe((0,ae.K)())});return(0,ge.of)(we).pipe(Se())}(U.component,U.route,M,P,R)),(0,ae.K)(U=>!0!==U,!0))}(we,R,U,w).pipe((0,at.O)(mt=>mt&&function qa(w){return"boolean"==typeof w}(mt)?function _i(w,P,M,R){return(0,Ne.Q)(P).pipe(te(U=>(0,be.W)(function cs(w,P){return null!==w&&P&&P(new Kt(w)),(0,ge.of)(!0)}(U.route.parent,R),function zo(w,P){return null!==w&&P&&P(new tn(w)),(0,ge.of)(!0)}(U.route,R),function Ks(w,P,M){const R=P[P.length-1],J=P.slice(0,P.length-1).reverse().map(we=>function Ra(w){const P=w.routeConfig?w.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:w,guards:P}:null}(we)).filter(we=>null!==we).map(we=>(0,Ee.Q)(()=>{const mt=we.guards.map(fn=>{var wt;const Ln=null!==(wt=ss(we.node))&&void 0!==wt?wt:M,yr=as(fn,Ln);return Qt(function Pa(w){return w&&ls(w.canActivateChild)}(yr)?yr.canActivateChild(R,w):(0,l.SMS)(Ln,()=>yr(R,w))).pipe((0,ae.K)())});return(0,ge.of)(mt).pipe(Se())}));return(0,ge.of)(J).pipe(Se())}(w,U.path,M),function Fr(w,P,M){const R=P.routeConfig?P.routeConfig.canActivate:null;if(!R||0===R.length)return(0,ge.of)(!0);const U=R.map(J=>(0,Ee.Q)(()=>{var we;const mt=null!==(we=ss(P))&&void 0!==we?we:M,fn=as(J,mt);return Qt(function pl(w){return w&&ls(w.canActivate)}(fn)?fn.canActivate(P,w):(0,l.SMS)(mt,()=>fn(P,w))).pipe((0,ae.K)())}));return(0,ge.of)(U).pipe(Se())}(w,U.route,M))),(0,ae.K)(U=>!0!==U,!0))}(R,J,w,P):(0,ge.of)(mt)),(0,$e.k)(mt=>({...M,guardsResult:mt})))})}(this.environmentInjector,wt=>this.events.next(wt)),(0,se.y)(wt=>{if(we.guardsResult=wt.guardsResult,Or(wt.guardsResult))throw Ro(0,wt.guardsResult);const Ln=new ne(wt.id,this.urlSerializer.serialize(wt.extractedUrl),this.urlSerializer.serialize(wt.urlAfterRedirects),wt.targetSnapshot,!!wt.guardsResult);this.events.next(Ln)}),(0,et.I)(wt=>!!wt.guardsResult||(this.cancelNavigationTransition(wt,"",Dn.GuardRejected),!1)),Uo(wt=>{if(wt.guards.canActivateChecks.length)return(0,ge.of)(wt).pipe((0,se.y)(Ln=>{const yr=new qe(Ln.id,this.urlSerializer.serialize(Ln.extractedUrl),this.urlSerializer.serialize(Ln.urlAfterRedirects),Ln.targetSnapshot);this.events.next(yr)}),(0,pt.G)(Ln=>{let yr=!1;return(0,ge.of)(Ln).pipe(function Na(w,P){return(0,at.O)(M=>{const{targetSnapshot:R,guards:{canActivateChecks:U}}=M;if(!U.length)return(0,ge.of)(M);const J=new Set(U.map(fn=>fn.route)),we=new Set;for(const fn of J)if(!we.has(fn))for(const wt of zr(fn))we.add(wt);let mt=0;return(0,Ne.Q)(we).pipe(te(fn=>J.has(fn)?function Ci(w,P,M,R){const U=w.routeConfig,J=w._resolve;return void 0!==(null==U?void 0:U.title)&&!vs(U)&&(J[an]=U.title),function Ea(w,P,M,R){const U=kt(w);if(0===U.length)return(0,ge.of)({});const J={};return(0,Ne.Q)(U).pipe((0,at.O)(we=>function Eo(w,P,M,R){var U;const J=null!==(U=ss(P))&&void 0!==U?U:R,we=as(w,J);return Qt(we.resolve?we.resolve(P,M):(0,l.SMS)(J,()=>we(P,M)))}(w[we],P,M,R).pipe((0,ae.K)(),(0,se.y)(mt=>{J[we]=mt}))),un(1),(0,ye.e)(J),Ye(we=>ce(we)?We.k:(0,He.c)(we)))}(J,w,P,R).pipe((0,$e.k)(we=>(w._resolvedData=we,w.data=Zr(w,w.parent,M).resolve,null)))}(fn,R,w,P):(fn.data=Zr(fn,fn.parent,w).resolve,(0,ge.of)(void 0))),(0,se.y)(()=>mt++),un(1),(0,at.O)(fn=>mt===we.size?(0,ge.of)(M):We.k))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,se.y)({next:()=>yr=!0,complete:()=>{yr||this.cancelNavigationTransition(Ln,"",Dn.NoDataFromResolver)}}))}),(0,se.y)(Ln=>{const yr=new ct(Ln.id,this.urlSerializer.serialize(Ln.extractedUrl),this.urlSerializer.serialize(Ln.urlAfterRedirects),Ln.targetSnapshot);this.events.next(yr)}))}),Uo(wt=>{const Ln=yr=>{var Ti;const ci=[];null!==(Ti=yr.routeConfig)&&void 0!==Ti&&Ti.loadComponent&&!yr.routeConfig._loadedComponent&&ci.push(this.configLoader.loadComponent(yr.routeConfig).pipe((0,se.y)(Bi=>{yr.component=Bi}),(0,$e.k)(()=>{})));for(const Bi of yr.children)ci.push(...Ln(Bi));return ci};return(0,je.E)(Ln(wt.targetSnapshot.root)).pipe((0,Wt.G)(null),(0,ve.U)(1))}),Uo(()=>this.afterPreactivation()),(0,pt.G)(()=>{var wt;const{currentSnapshot:Ln,targetSnapshot:yr}=we,Ti=null===(wt=this.createViewTransition)||void 0===wt?void 0:wt.call(this,this.environmentInjector,Ln.root,yr.root);return Ti?(0,Ne.Q)(Ti).pipe((0,$e.k)(()=>we)):(0,ge.of)(we)}),(0,$e.k)(wt=>{const Ln=function $i(w,P,M){const R=Qi(w,P._root,M?M._root:void 0);return new Bt(R,P)}(R.routeReuseStrategy,wt.targetSnapshot,wt.currentRouterState);return this.currentTransition=we={...wt,targetRouterState:Ln},this.currentNavigation.targetRouterState=Ln,we}),(0,se.y)(()=>{this.events.next(new qt)}),((w,P,M,R)=>(0,$e.k)(U=>(new mi(P,U.targetRouterState,U.currentRouterState,M,R).activate(w),U)))(this.rootContexts,R.routeReuseStrategy,wt=>this.events.next(wt),this.inputBindingEnabled),(0,ve.U)(1),(0,se.y)({next:wt=>{var Ln;mt=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new jt(wt.id,this.urlSerializer.serialize(wt.extractedUrl),this.urlSerializer.serialize(wt.urlAfterRedirects))),null===(Ln=this.titleStrategy)||void 0===Ln||Ln.updateTitle(wt.targetRouterState.snapshot),wt.resolve(!0)},complete:()=>{mt=!0}}),function $t(w){return(0,Ce.i)((P,M)=>{(0,L.Uv)(w).subscribe((0,Le.e)(M,()=>M.complete(),De.K)),!M.closed&&P.subscribe(M)})}(this.transitionAbortSubject.pipe((0,se.y)(wt=>{throw wt}))),Fe(()=>{var wt;!mt&&!fn&&this.cancelNavigationTransition(we,"",Dn.SupersededByNewNavigation),(null===(wt=this.currentTransition)||void 0===wt?void 0:wt.id)===we.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ye(wt=>{if(fn=!0,Qo(wt))this.events.next(new Gn(we.id,this.urlSerializer.serialize(we.extractedUrl),wt.message,wt.cancellationCode)),function yo(w){return Qo(w)&&Or(w.url)}(wt)?this.events.next(new ln(wt.url)):we.resolve(!1);else{var Ln;this.events.next(new gi(we.id,this.urlSerializer.serialize(we.extractedUrl),wt,null!==(Ln=we.targetSnapshot)&&void 0!==Ln?Ln:void 0));try{we.resolve(R.errorHandler(wt))}catch(yr){this.options.resolveNavigationPromiseOnError?we.resolve(!1):we.reject(yr)}}return We.k}))}))}cancelNavigationTransition(R,U,J){const we=new Gn(R.id,this.urlSerializer.serialize(R.extractedUrl),U,J);this.events.next(we),R.resolve(!1)}isUpdatingInternalState(){var R,U;return(null===(R=this.currentTransition)||void 0===R?void 0:R.extractedUrl.toString())!==(null===(U=this.currentTransition)||void 0===U?void 0:U.currentUrlTree.toString())}isUpdatedBrowserUrl(){var R,U;return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==(null===(R=this.currentTransition)||void 0===R?void 0:R.extractedUrl.toString())&&!(null!==(U=this.currentTransition)&&void 0!==U&&U.extras.skipLocationChange)}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})();function Ut(w){return w!==Me}let In=(()=>{var w;class P{}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:()=>(0,l.uUt)(Yr),providedIn:"root"}),P})();class Pr{shouldDetach(P){return!1}store(P,M){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,M){return P.routeConfig===M.routeConfig}}let Yr=(()=>{var w;class P extends Pr{}return(w=P).\u0275fac=(()=>{let M;return function(U){return(M||(M=l.otF(w)))(U||w)}})(),w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})(),Jr=(()=>{var w;class P{}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:()=>(0,l.uUt)(Er),providedIn:"root"}),P})(),Er=(()=>{var w;class P extends Jr{constructor(){super(...arguments),this.location=(0,l.uUt)(Ve.oB),this.urlSerializer=(0,l.uUt)(hn),this.options=(0,l.uUt)(Mo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,l.uUt)(Bo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new sr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rr(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var R,U;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(R=null===(U=this.restoredState())||void 0===U?void 0:U.\u0275routerPageId)&&void 0!==R?R:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(R){return this.location.subscribe(U=>{"popstate"===U.type&&R(U.url,U.state)})}handleRouterEvent(R,U){if(R instanceof gt)this.stateMemento=this.createStateMemento();else if(R instanceof Jn)this.rawUrlTree=U.initialUrl;else if(R instanceof Ct){if("eager"===this.urlUpdateStrategy&&!U.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(U.finalUrl,U.initialUrl);this.setBrowserUrl(J,U)}}else R instanceof qt?(this.currentUrlTree=U.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(U.finalUrl,U.initialUrl),this.routerState=U.targetRouterState,"deferred"===this.urlUpdateStrategy&&(U.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,U))):R instanceof Gn&&(R.code===Dn.GuardRejected||R.code===Dn.NoDataFromResolver)?this.restoreHistory(U):R instanceof gi?this.restoreHistory(U,!0):R instanceof jt&&(this.lastSuccessfulId=R.id,this.currentPageId=this.browserPageId)}setBrowserUrl(R,U){const J=this.urlSerializer.serialize(R);if(this.location.isCurrentPathEqualTo(J)||U.extras.replaceUrl){const mt={...U.extras.state,...this.generateNgRouterState(U.id,this.browserPageId)};this.location.replaceState(J,"",mt)}else{const we={...U.extras.state,...this.generateNgRouterState(U.id,this.browserPageId+1)};this.location.go(J,"",we)}}restoreHistory(R,U=!1){if("computed"===this.canceledNavigationResolution){const we=this.currentPageId-this.browserPageId;0!==we?this.location.historyGo(we):this.currentUrlTree===R.finalUrl&&0===we&&(this.resetState(R),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(R),this.resetUrlToCurrentUrlTree())}resetState(R){var U;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(U=R.finalUrl)&&void 0!==U?U:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(R,U){return"computed"===this.canceledNavigationResolution?{navigationId:R,\u0275routerPageId:U}:{navigationId:R}}}return(w=P).\u0275fac=(()=>{let M;return function(U){return(M||(M=l.otF(w)))(U||w)}})(),w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})();var ai=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(ai||{});function hi(w,P){w.events.pipe((0,et.I)(M=>M instanceof jt||M instanceof Gn||M instanceof gi||M instanceof Jn),(0,$e.k)(M=>M instanceof jt||M instanceof Jn?ai.COMPLETE:M instanceof Gn&&(M.code===Dn.Redirect||M.code===Dn.SupersededByNewNavigation)?ai.REDIRECTING:ai.FAILED),(0,et.I)(M=>M!==ai.REDIRECTING),(0,ve.U)(1)).subscribe(()=>{P()})}function Zi(w){throw w}const Zs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ho=(()=>{var w;class P{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var R,U;this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,l.uUt)(l.oPY),this.stateManager=(0,l.uUt)(Jr),this.options=(0,l.uUt)(Mo,{optional:!0})||{},this.pendingTasks=(0,l.uUt)(l.g9Y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,l.uUt)(ze),this.urlSerializer=(0,l.uUt)(hn),this.location=(0,l.uUt)(Ve.oB),this.urlHandlingStrategy=(0,l.uUt)(Bo),this._events=new it.E,this.errorHandler=this.options.errorHandler||Zi,this.navigated=!1,this.routeReuseStrategy=(0,l.uUt)(In),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(R=null===(U=(0,l.uUt)(Ds,{optional:!0}))||void 0===U?void 0:U.flat())&&void 0!==R?R:[],this.componentInputBindingEnabled=!!(0,l.uUt)(ys,{optional:!0}),this.eventsSubscription=new Ge.wH,this.isNgZoneEnabled=(0,l.uUt)(l.WW2)instanceof l.WW2&&l.WW2.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:J=>{this.console.warn(J)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const R=this.navigationTransitions.events.subscribe(U=>{try{const J=this.navigationTransitions.currentTransition,we=this.navigationTransitions.currentNavigation;if(null!==J&&null!==we)if(this.stateManager.handleRouterEvent(U,we),U instanceof Gn&&U.code!==Dn.Redirect&&U.code!==Dn.SupersededByNewNavigation)this.navigated=!0;else if(U instanceof jt)this.navigated=!0;else if(U instanceof ln){const mt=this.urlHandlingStrategy.merge(U.url,J.currentRawUrl),fn={info:J.extras.info,skipLocationChange:J.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ut(J.source)};this.scheduleNavigation(mt,Me,null,fn,{resolve:J.resolve,reject:J.reject,promise:J.promise})}(function mo(w){return!(w instanceof qt||w instanceof ln)})(U)&&this._events.next(U)}catch(J){this.navigationTransitions.transitionAbortSubject.next(J)}});this.eventsSubscription.add(R)}resetRootComponentType(R){this.routerState.root.component=R,this.navigationTransitions.rootComponentType=R}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Me,this.stateManager.restoredState())}setUpLocationChangeListener(){var R;null!==(R=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==R||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((U,J)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(U,"popstate",J)},0)}))}navigateToSyncWithBrowser(R,U,J){const we={replaceUrl:!0},mt=null!=J&&J.navigationId?J:null;if(J){const wt={...J};delete wt.navigationId,delete wt.\u0275routerPageId,0!==Object.keys(wt).length&&(we.state=wt)}const fn=this.parseUrl(R);this.scheduleNavigation(fn,U,mt,we)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(R){this.config=R.map(Ei),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(R,U={}){const{relativeTo:J,queryParams:we,fragment:mt,queryParamsHandling:fn,preserveFragment:wt}=U,Ln=wt?this.currentUrlTree.fragment:mt;let Ti,yr=null;switch(fn){case"merge":yr={...this.currentUrlTree.queryParams,...we};break;case"preserve":yr=this.currentUrlTree.queryParams;break;default:yr=we||null}null!==yr&&(yr=this.removeEmptyProps(yr));try{Ti=yt(J?J.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof R[0]||!R[0].startsWith("/"))&&(R=[]),Ti=this.currentUrlTree.root}return vt(Ti,R,yr,null!=Ln?Ln:null)}navigateByUrl(R,U={skipLocationChange:!1}){const J=Or(R)?R:this.parseUrl(R),we=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(we,Me,null,U)}navigate(R,U={skipLocationChange:!1}){return function wi(w){for(let P=0;P<w.length;P++)if(null==w[P])throw new l.OBp(4008,!1)}(R),this.navigateByUrl(this.createUrlTree(R,U),U)}serializeUrl(R){return this.urlSerializer.serialize(R)}parseUrl(R){try{return this.urlSerializer.parse(R)}catch{return this.urlSerializer.parse("/")}}isActive(R,U){let J;if(J=!0===U?{...Zs}:!1===U?{...Mi}:U,Or(R))return br(this.currentUrlTree,R,J);const we=this.parseUrl(R);return br(this.currentUrlTree,we,J)}removeEmptyProps(R){return Object.entries(R).reduce((U,[J,we])=>(null!=we&&(U[J]=we),U),{})}scheduleNavigation(R,U,J,we,mt){if(this.disposed)return Promise.resolve(!1);let fn,wt,Ln;mt?(fn=mt.resolve,wt=mt.reject,Ln=mt.promise):Ln=new Promise((Ti,ci)=>{fn=Ti,wt=ci});const yr=this.pendingTasks.add();return hi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(yr))}),this.navigationTransitions.handleNavigationRequest({source:U,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:R,extras:we,resolve:fn,reject:wt,promise:Ln,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ln.catch(Ti=>Promise.reject(Ti))}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})(),wr=(()=>{var w;class P{constructor(R,U,J,we,mt,fn){var wt;this.router=R,this.route=U,this.tabIndexAttribute=J,this.renderer=we,this.el=mt,this.locationStrategy=fn,this.href=null,this.commands=null,this.onChanges=new it.E,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ln=null===(wt=mt.nativeElement.tagName)||void 0===wt?void 0:wt.toLowerCase();this.isAnchorElement="a"===Ln||"area"===Ln,this.isAnchorElement?this.subscription=R.events.subscribe(yr=>{yr instanceof jt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(R){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",R)}ngOnChanges(R){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(R){null!=R?(this.commands=Array.isArray(R)?R:[R],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(R,U,J,we,mt){const fn=this.urlTree;return!!(null===fn||this.isAnchorElement&&(0!==R||U||J||we||mt||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(fn,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var R;null===(R=this.subscription)||void 0===R||R.unsubscribe()}updateHref(){var R;const U=this.urlTree;this.href=null!==U&&this.locationStrategy?null===(R=this.locationStrategy)||void 0===R?void 0:R.prepareExternalUrl(this.router.serializeUrl(U)):null;const J=null===this.href?null:(0,l.YFg)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",J)}applyAttributeValue(R,U){const J=this.renderer,we=this.el.nativeElement;null!==U?J.setAttribute(we,R,U):J.removeAttribute(we,R)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(w=P).\u0275fac=function(R){return new(R||w)(l.GI1(ho),l.GI1(ii),l.gJ8("tabindex"),l.GI1(l.q87),l.GI1(l.GMv),l.GI1(Ve.Qd))},w.\u0275dir=l.Sc5({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(R,U){1&R&&l.qCj("click",function(we){return U.onClick(we.button,we.ctrlKey,we.shiftKey,we.altKey,we.metaKey)}),2&R&&l.e48("target",U.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[l.Wk5.HasDecoratorInputTransform,"preserveFragment","preserveFragment",l.cZD],skipLocationChange:[l.Wk5.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",l.cZD],replaceUrl:[l.Wk5.HasDecoratorInputTransform,"replaceUrl","replaceUrl",l.cZD],routerLink:"routerLink"},standalone:!0,features:[l.QJr,l.SYr]}),P})();class $o{}let au=(()=>{var w;class P{preload(R,U){return U().pipe(Ye(()=>(0,ge.of)(null)))}}return(w=P).\u0275fac=function(R){return new(R||w)},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})(),er=(()=>{var w;class P{constructor(R,U,J,we,mt){this.router=R,this.injector=J,this.preloadingStrategy=we,this.loader=mt}setUpPreloading(){this.subscription=this.router.events.pipe((0,et.I)(R=>R instanceof jt),te(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(R,U){const J=[];for(const wt of U){var we,mt;wt.providers&&!wt._injector&&(wt._injector=(0,l.SIz)(wt.providers,R,`Route: ${wt.path}`));const Ln=null!==(we=wt._injector)&&void 0!==we?we:R,yr=null!==(mt=wt._loadedInjector)&&void 0!==mt?mt:Ln;var fn;(wt.loadChildren&&!wt._loadedRoutes&&void 0===wt.canLoad||wt.loadComponent&&!wt._loadedComponent)&&J.push(this.preloadConfig(Ln,wt)),(wt.children||wt._loadedRoutes)&&J.push(this.processRoutes(yr,null!==(fn=wt.children)&&void 0!==fn?fn:wt._loadedRoutes))}return(0,Ne.Q)(J).pipe((0,Jt.u)())}preloadConfig(R,U){return this.preloadingStrategy.preload(U,()=>{let J;J=U.loadChildren&&void 0===U.canLoad?this.loader.loadChildren(R,U):(0,ge.of)(null);const we=J.pipe((0,at.O)(mt=>{var fn;return null===mt?(0,ge.of)(void 0):(U._loadedRoutes=mt.routes,U._loadedInjector=mt.injector,this.processRoutes(null!==(fn=mt.injector)&&void 0!==fn?fn:R,mt.routes))}));if(U.loadComponent&&!U._loadedComponent){const mt=this.loader.loadComponent(U);return(0,Ne.Q)([we,mt]).pipe((0,Jt.u)())}return we})}}return(w=P).\u0275fac=function(R){return new(R||w)(l.CoB(ho),l.CoB(l.ESV),l.CoB(l.SIe),l.CoB($o),l.CoB(us))},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac,providedIn:"root"}),P})();const vl=new l.UbH("");let Rn=(()=>{var w;class P{constructor(R,U,J,we,mt={}){this.urlSerializer=R,this.transitions=U,this.viewportScroller=J,this.zone=we,this.options=mt,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},mt.scrollPositionRestoration||(mt.scrollPositionRestoration="disabled"),mt.anchorScrolling||(mt.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(R=>{R instanceof gt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=R.navigationTrigger,this.restoredId=R.restoredState?R.restoredState.navigationId:0):R instanceof jt?(this.lastId=R.id,this.scheduleScrollEvent(R,this.urlSerializer.parse(R.urlAfterRedirects).fragment)):R instanceof Jn&&R.code===An.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(R,this.urlSerializer.parse(R.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(R=>{R instanceof on&&(R.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(R.position):R.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(R.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(R,U){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new on(R,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))})},0)})}ngOnDestroy(){var R,U;null===(R=this.routerEventsSubscription)||void 0===R||R.unsubscribe(),null===(U=this.scrollEventsSubscription)||void 0===U||U.unsubscribe()}}return(w=P).\u0275fac=function(R){l.KEo()},w.\u0275prov=l.wxM({token:w,factory:w.\u0275fac}),P})();function ei(w,P){return{\u0275kind:w,\u0275providers:P}}function lu(){const w=(0,l.uUt)(l.zZn);return P=>{var M,R;const U=w.get(l.Swk);if(P!==U.components[0])return;const J=w.get(ho),we=w.get(Js);1===w.get(Za)&&J.initialNavigation(),null===(M=w.get(Ja,null,l._6O.Optional))||void 0===M||M.setUpPreloading(),null===(R=w.get(vl,null,l._6O.Optional))||void 0===R||R.init(),J.resetRootComponentType(U.componentTypes[0]),we.closed||(we.next(),we.complete(),we.unsubscribe())}}const Js=new l.UbH("",{factory:()=>new it.E}),Za=new l.UbH("",{providedIn:"root",factory:()=>1}),Ja=new l.UbH("");function or(w){return ei(0,[{provide:Ja,useExisting:er},{provide:$o,useExisting:w}])}function yl(w){return ei(9,[{provide:G,useValue:$},{provide:Re,useValue:{skipNextTransition:!(null==w||!w.skipInitialTransition),...w}}])}const Il=new l.UbH("ROUTER_FORROOT_GUARD"),Wi=[Ve.oB,{provide:hn,useClass:nr},ho,tr,{provide:ii,useFactory:function rn(w){return w.routerState.root},deps:[ho]},us,[]];let Nn=(()=>{var w;class P{constructor(R){}static forRoot(R,U){return{ngModule:P,providers:[Wi,[],{provide:Ds,multi:!0,useValue:R},{provide:Il,useFactory:Oa,deps:[[ho,new l.T7N,new l.Qfh]]},{provide:Mo,useValue:U||{}},null!=U&&U.useHash?{provide:Ve.Qd,useClass:Ve.MP}:{provide:Ve.Qd,useClass:Ve.uC},{provide:vl,useFactory:()=>{const w=(0,l.uUt)(Ve.YZ),P=(0,l.uUt)(l.WW2),M=(0,l.uUt)(Mo),R=(0,l.uUt)(ze),U=(0,l.uUt)(hn);return M.scrollOffset&&w.setOffset(M.scrollOffset),new Rn(U,R,w,P,M)}},null!=U&&U.preloadingStrategy?or(U.preloadingStrategy).\u0275providers:[],null!=U&&U.initialNavigation?el(U):[],null!=U&&U.bindToComponentInputs?ei(8,[vo,{provide:ys,useExisting:vo}]).\u0275providers:[],null!=U&&U.enableViewTransitions?yl().\u0275providers:[],[{provide:na,useFactory:lu},{provide:l.qid,multi:!0,useExisting:na}]]}}static forChild(R){return{ngModule:P,providers:[{provide:Ds,multi:!0,useValue:R}]}}}return(w=P).\u0275fac=function(R){return new(R||w)(l.CoB(Il,8))},w.\u0275mod=l.a4G({type:w}),w.\u0275inj=l.s3X({}),P})();function Oa(w){return"guarded"}function el(w){return["disabled"===w.initialNavigation?ei(3,[{provide:l.kZF,multi:!0,useFactory:()=>{const P=(0,l.uUt)(ho);return()=>{P.setUpLocationChangeListener()}}},{provide:Za,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?ei(2,[{provide:Za,useValue:0},{provide:l.kZF,multi:!0,deps:[l.zZn],useFactory:P=>{const M=P.get(Ve.mQ,Promise.resolve());return()=>M.then(()=>new Promise(R=>{const U=P.get(ho),J=P.get(Js);hi(U,()=>{R(!0)}),P.get(ze).afterPreactivation=()=>(R(!0),J.closed?(0,ge.of)(void 0):J),U.initialNavigation()}))}}]).\u0275providers:[]]}const na=new l.UbH("")},8368:(mn,st,N)=>{"use strict";N.d(st,{c:()=>Oe});var l=N(7144),K=N(4920),Z=N(9360),ee=N(5976);class Ne{constructor(Ge,Ve){this._delegate=Ge,this.firebase=Ve,(0,Z._addComponent)(Ge,new K.Yl("app-compat",()=>this,"PUBLIC")),this.container=Ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this._delegate.automaticDataCollectionEnabled=Ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ge=>{this._delegate.checkDestroyed(),Ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Ge,Ve=Z._DEFAULT_ENTRY_NAME){var $e;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Ge);return!pt.isInitialized()&&"EXPLICIT"===(null===($e=pt.getComponent())||void 0===$e?void 0:$e.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Ve})}_removeServiceInstance(Ge,Ve=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ge).clearInstance(Ve)}_addComponent(Ge){(0,Z._addComponent)(this._delegate,Ge)}_addOrOverwriteComponent(Ge){(0,Z._addOrOverwriteComponent)(this._delegate,Ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new l.UR("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),be=function Qe(){const it=function je(it){const Ge={},Ve={__esModule:!0,initializeApp:function ve(ae,te={}){const se=Z.initializeApp(ae,te);if((0,l.Y7)(Ge,se.name))return Ge[se.name];const L=new it(se,Ve);return Ge[se.name]=L,L},app:pt,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function et(ae){const te=ae.name,se=te.replace("-compat","");if(Z._registerComponent(ae)&&"PUBLIC"===ae.type){const L=(Le=pt())=>{if("function"!=typeof Le[se])throw _e.create("invalid-app-argument",{appName:te});return Le[se]()};void 0!==ae.serviceProps&&(0,l.Ww)(L,ae.serviceProps),Ve[se]=L,it.prototype[se]=function(...Le){return this._getService.bind(this,te).apply(this,ae.multipleInstances?Le:[])}}return"PUBLIC"===ae.type?Ve[se]:null},removeApp:function $e(ae){delete Ge[ae]},useAsService:function at(ae,te){return"serverAuth"===te?null:te},modularAPIs:Z}};function pt(ae){if(!(0,l.Y7)(Ge,ae=ae||Z._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:ae});return Ge[ae]}return Ve.default=Ve,Object.defineProperty(Ve,"apps",{get:function Xe(){return Object.keys(Ge).map(ae=>Ge[ae])}}),pt.App=it,Ve}(Ne);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Qe,extendNamespace:function Ge(Ve){(0,l.Ww)(it,Ve)},createSubscribe:l.my,ErrorFactory:l.UR,deepExtend:l.Ww}),it}(),Ee=new ee.YJ("@firebase/app-compat");if((0,l.uH)()&&void 0!==self.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=be;!function We(it){(0,Z.registerVersion)("@firebase/app-compat","0.2.27",it)}()},9360:(mn,st,N)=>{"use strict";N.r(st),N.d(st,{FirebaseError:()=>ee.kx,SDK_VERSION:()=>nr,_DEFAULT_ENTRY_NAME:()=>mr,_addComponent:()=>Sr,_addOrOverwriteComponent:()=>ri,_apps:()=>Tn,_clearComponents:()=>Yt,_components:()=>Wn,_getProvider:()=>Et,_registerComponent:()=>sr,_removeServiceInstance:()=>Xt,deleteApp:()=>Rr,getApp:()=>po,getApps:()=>Xr,initializeApp:()=>jr,onLog:()=>St,registerVersion:()=>Yi,setLogLevel:()=>dt});var l=N(1528),K=N(4920),Z=N(5976),ee=N(7144);const Ne=(yt,vt)=>vt.some(Ht=>yt instanceof Ht);let ge,_e;const be=new WeakMap,Ee=new WeakMap,Ke=new WeakMap,He=new WeakMap,We=new WeakMap;let Ge={get(yt,vt,Ht){if(yt instanceof IDBTransaction){if("done"===vt)return Ee.get(yt);if("objectStoreNames"===vt)return yt.objectStoreNames||Ke.get(yt);if("store"===vt)return Ht.objectStoreNames[1]?void 0:Ht.objectStore(Ht.objectStoreNames[0])}return ve(yt[vt])},set:(yt,vt,Ht)=>(yt[vt]=Ht,!0),has:(yt,vt)=>yt instanceof IDBTransaction&&("done"===vt||"store"===vt)||vt in yt};function pt(yt){return"function"==typeof yt?function $e(yt){return yt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qe(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(yt)?function(...vt){return yt.apply(Xe(this),vt),ve(be.get(this))}:function(...vt){return ve(yt.apply(Xe(this),vt))}:function(vt,...Ht){const Mn=yt.call(Xe(this),vt,...Ht);return Ke.set(Mn,vt.sort?vt.sort():[vt]),ve(Mn)}}(yt):(yt instanceof IDBTransaction&&function it(yt){if(Ee.has(yt))return;const vt=new Promise((Ht,Mn)=>{const Xn=()=>{yt.removeEventListener("complete",Kn),yt.removeEventListener("error",Zn),yt.removeEventListener("abort",Zn)},Kn=()=>{Ht(),Xn()},Zn=()=>{Mn(yt.error||new DOMException("AbortError","AbortError")),Xn()};yt.addEventListener("complete",Kn),yt.addEventListener("error",Zn),yt.addEventListener("abort",Zn)});Ee.set(yt,vt)}(yt),Ne(yt,function je(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(yt,Ge):yt)}function ve(yt){if(yt instanceof IDBRequest)return function Oe(yt){const vt=new Promise((Ht,Mn)=>{const Xn=()=>{yt.removeEventListener("success",Kn),yt.removeEventListener("error",Zn)},Kn=()=>{Ht(ve(yt.result)),Xn()},Zn=()=>{Mn(yt.error),Xn()};yt.addEventListener("success",Kn),yt.addEventListener("error",Zn)});return vt.then(Ht=>{Ht instanceof IDBCursor&&be.set(Ht,yt)}).catch(()=>{}),We.set(vt,yt),vt}(yt);if(He.has(yt))return He.get(yt);const vt=pt(yt);return vt!==yt&&(He.set(yt,vt),We.set(vt,yt)),vt}const Xe=yt=>We.get(yt),ae=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],se=new Map;function L(yt,vt){if(!(yt instanceof IDBDatabase)||vt in yt||"string"!=typeof vt)return;if(se.get(vt))return se.get(vt);const Ht=vt.replace(/FromIndex$/,""),Mn=vt!==Ht,Xn=te.includes(Ht);if(!(Ht in(Mn?IDBIndex:IDBObjectStore).prototype)||!Xn&&!ae.includes(Ht))return;const Kn=function(){var Zn=(0,l.c)(function*($r,...Vr){const Gr=this.transaction($r,Xn?"readwrite":"readonly");let go=Gr.store;return Mn&&(go=go.index(Vr.shift())),(yield Promise.all([go[Ht](...Vr),Xn&&Gr.done]))[0]});return function(Vr){return Zn.apply(this,arguments)}}();return se.set(vt,Kn),Kn}!function Ve(yt){Ge=yt(Ge)}(yt=>({...yt,get:(vt,Ht,Mn)=>L(vt,Ht)||yt.get(vt,Ht,Mn),has:(vt,Ht)=>!!L(vt,Ht)||yt.has(vt,Ht)}));class Le{constructor(vt){this.container=vt}getPlatformInfoString(){return this.container.getProviders().map(Ht=>{if(function Ce(yt){const vt=yt.getComponent();return"VERSION"===(null==vt?void 0:vt.type)}(Ht)){const Mn=Ht.getImmediate();return`${Mn.library}/${Mn.version}`}return null}).filter(Ht=>Ht).join(" ")}}const Ye="@firebase/app",Wt=new Z.YJ("@firebase/app"),mr="[DEFAULT]",Cr={[Ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tn=new Map,Wn=new Map;function Sr(yt,vt){try{yt.container.addComponent(vt)}catch(Ht){Wt.debug(`Component ${vt.name} failed to register with FirebaseApp ${yt.name}`,Ht)}}function ri(yt,vt){yt.container.addOrOverwriteComponent(vt)}function sr(yt){const vt=yt.name;if(Wn.has(vt))return Wt.debug(`There were multiple attempts to register component ${vt}.`),!1;Wn.set(vt,yt);for(const Ht of Tn.values())Sr(Ht,yt);return!0}function Et(yt,vt){const Ht=yt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ht&&Ht.triggerHeartbeat(),yt.container.getProvider(vt)}function Xt(yt,vt,Ht=mr){Et(yt,vt).clearInstance(Ht)}function Yt(){Wn.clear()}const yn=new ee.UR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hn{constructor(vt,Ht,Mn){this._isDeleted=!1,this._options=Object.assign({},vt),this._config=Object.assign({},Ht),this._name=Ht.name,this._automaticDataCollectionEnabled=Ht.automaticDataCollectionEnabled,this._container=Mn,this.container.addComponent(new K.Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(vt){this.checkDestroyed(),this._automaticDataCollectionEnabled=vt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(vt){this._isDeleted=vt}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}const nr="10.8.0";function jr(yt,vt={}){let Ht=yt;"object"!=typeof vt&&(vt={name:vt});const Mn=Object.assign({name:mr,automaticDataCollectionEnabled:!1},vt),Xn=Mn.name;if("string"!=typeof Xn||!Xn)throw yn.create("bad-app-name",{appName:String(Xn)});if(Ht||(Ht=(0,ee.Yd)()),!Ht)throw yn.create("no-options");const Kn=Tn.get(Xn);if(Kn){if((0,ee.IN)(Ht,Kn.options)&&(0,ee.IN)(Mn,Kn.config))return Kn;throw yn.create("duplicate-app",{appName:Xn})}const Zn=new K.op(Xn);for(const Vr of Wn.values())Zn.addComponent(Vr);const $r=new hn(Ht,Mn,Zn);return Tn.set(Xn,$r),$r}function po(yt=mr){const vt=Tn.get(yt);if(!vt&&yt===mr&&(0,ee.Yd)())return jr();if(!vt)throw yn.create("no-app",{appName:yt});return vt}function Xr(){return Array.from(Tn.values())}function Rr(yt){return Li.apply(this,arguments)}function Li(){return(Li=(0,l.c)(function*(yt){const vt=yt.name;Tn.has(vt)&&(Tn.delete(vt),yield Promise.all(yt.container.getProviders().map(Ht=>Ht.delete())),yt.isDeleted=!0)})).apply(this,arguments)}function Yi(yt,vt,Ht){var Mn;let Xn=null!==(Mn=Cr[yt])&&void 0!==Mn?Mn:yt;Ht&&(Xn+=`-${Ht}`);const Kn=Xn.match(/\s|\//),Zn=vt.match(/\s|\//);if(Kn||Zn){const $r=[`Unable to register library "${Xn}" with version "${vt}":`];return Kn&&$r.push(`library name "${Xn}" contains illegal characters (whitespace or "/")`),Kn&&Zn&&$r.push("and"),Zn&&$r.push(`version name "${vt}" contains illegal characters (whitespace or "/")`),void Wt.warn($r.join(" "))}sr(new K.Yl(`${Xn}-version`,()=>({library:Xn,version:vt}),"VERSION"))}function St(yt,vt){if(null!==yt&&"function"!=typeof yt)throw yn.create("invalid-log-argument");(0,Z.S2)(yt,vt)}function dt(yt){(0,Z.QN)(yt)}const Rt="firebase-heartbeat-database",lt=1,ue="firebase-heartbeat-store";let Ie=null;function Ue(){return Ie||(Ie=function et(yt,vt,{blocked:Ht,upgrade:Mn,blocking:Xn,terminated:Kn}={}){const Zn=indexedDB.open(yt,vt),$r=ve(Zn);return Mn&&Zn.addEventListener("upgradeneeded",Vr=>{Mn(ve(Zn.result),Vr.oldVersion,Vr.newVersion,ve(Zn.transaction),Vr)}),Ht&&Zn.addEventListener("blocked",Vr=>Ht(Vr.oldVersion,Vr.newVersion,Vr)),$r.then(Vr=>{Kn&&Vr.addEventListener("close",()=>Kn()),Xn&&Vr.addEventListener("versionchange",Gr=>Xn(Gr.oldVersion,Gr.newVersion,Gr))}).catch(()=>{}),$r}(Rt,lt,{upgrade:(yt,vt)=>{if(0===vt)try{yt.createObjectStore(ue)}catch(Ht){console.warn(Ht)}}}).catch(yt=>{throw yn.create("idb-open",{originalErrorMessage:yt.message})})),Ie}function ut(){return(ut=(0,l.c)(function*(yt){try{const Ht=(yield Ue()).transaction(ue),Mn=yield Ht.objectStore(ue).get(qn(yt));return yield Ht.done,Mn}catch(vt){if(vt instanceof ee.kx)Wt.warn(vt.message);else{const Ht=yn.create("idb-get",{originalErrorMessage:null==vt?void 0:vt.message});Wt.warn(Ht.message)}}})).apply(this,arguments)}function pn(yt,vt){return $n.apply(this,arguments)}function $n(){return($n=(0,l.c)(function*(yt,vt){try{const Mn=(yield Ue()).transaction(ue,"readwrite");yield Mn.objectStore(ue).put(vt,qn(yt)),yield Mn.done}catch(Ht){if(Ht instanceof ee.kx)Wt.warn(Ht.message);else{const Mn=yn.create("idb-set",{originalErrorMessage:null==Ht?void 0:Ht.message});Wt.warn(Mn.message)}}})).apply(this,arguments)}function qn(yt){return`${yt.name}!${yt.options.appId}`}class Br{constructor(vt){this.container=vt,this._heartbeatsCache=null;const Ht=this.container.getProvider("app").getImmediate();this._storage=new so(Ht),this._heartbeatsCachePromise=this._storage.read().then(Mn=>(this._heartbeatsCache=Mn,Mn))}triggerHeartbeat(){var vt=this;return(0,l.c)(function*(){var Ht,Mn;const Kn=vt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Zn=bn();if((null!=(null===(Ht=vt._heartbeatsCache)||void 0===Ht?void 0:Ht.heartbeats)||(vt._heartbeatsCache=yield vt._heartbeatsCachePromise,null!=(null===(Mn=vt._heartbeatsCache)||void 0===Mn?void 0:Mn.heartbeats)))&&vt._heartbeatsCache.lastSentHeartbeatDate!==Zn&&!vt._heartbeatsCache.heartbeats.some($r=>$r.date===Zn))return vt._heartbeatsCache.heartbeats.push({date:Zn,agent:Kn}),vt._heartbeatsCache.heartbeats=vt._heartbeatsCache.heartbeats.filter($r=>{const Vr=new Date($r.date).valueOf();return Date.now()-Vr<=2592e6}),vt._storage.overwrite(vt._heartbeatsCache)})()}getHeartbeatsHeader(){var vt=this;return(0,l.c)(function*(){var Ht;if(null===vt._heartbeatsCache&&(yield vt._heartbeatsCachePromise),null==(null===(Ht=vt._heartbeatsCache)||void 0===Ht?void 0:Ht.heartbeats)||0===vt._heartbeatsCache.heartbeats.length)return"";const Mn=bn(),{heartbeatsToSend:Xn,unsentEntries:Kn}=function Mr(yt,vt=1024){const Ht=[];let Mn=yt.slice();for(const Xn of yt){const Kn=Ht.find(Zn=>Zn.agent===Xn.agent);if(Kn){if(Kn.dates.push(Xn.date),Or(Ht)>vt){Kn.dates.pop();break}}else if(Ht.push({agent:Xn.agent,dates:[Xn.date]}),Or(Ht)>vt){Ht.pop();break}Mn=Mn.slice(1)}return{heartbeatsToSend:Ht,unsentEntries:Mn}}(vt._heartbeatsCache.heartbeats),Zn=(0,ee.Wg)(JSON.stringify({version:2,heartbeats:Xn}));return vt._heartbeatsCache.lastSentHeartbeatDate=Mn,Kn.length>0?(vt._heartbeatsCache.heartbeats=Kn,yield vt._storage.overwrite(vt._heartbeatsCache)):(vt._heartbeatsCache.heartbeats=[],vt._storage.overwrite(vt._heartbeatsCache)),Zn})()}}function bn(){return(new Date).toISOString().substring(0,10)}class so{constructor(vt){this.app=vt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.c)(function*(){return!!(0,ee.yy)()&&(0,ee.A3)().then(()=>!0).catch(()=>!1)})()}read(){var vt=this;return(0,l.c)(function*(){if(yield vt._canUseIndexedDBPromise){const Mn=yield function tt(yt){return ut.apply(this,arguments)}(vt.app);return null!=Mn&&Mn.heartbeats?Mn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(vt){var Ht=this;return(0,l.c)(function*(){var Mn;if(yield Ht._canUseIndexedDBPromise){const Kn=yield Ht.read();return pn(Ht.app,{lastSentHeartbeatDate:null!==(Mn=vt.lastSentHeartbeatDate)&&void 0!==Mn?Mn:Kn.lastSentHeartbeatDate,heartbeats:vt.heartbeats})}})()}add(vt){var Ht=this;return(0,l.c)(function*(){var Mn;if(yield Ht._canUseIndexedDBPromise){const Kn=yield Ht.read();return pn(Ht.app,{lastSentHeartbeatDate:null!==(Mn=vt.lastSentHeartbeatDate)&&void 0!==Mn?Mn:Kn.lastSentHeartbeatDate,heartbeats:[...Kn.heartbeats,...vt.heartbeats]})}})()}}function Or(yt){return(0,ee.Wg)(JSON.stringify({version:2,heartbeats:yt})).length}!function hr(yt){sr(new K.Yl("platform-logger",vt=>new Le(vt),"PRIVATE")),sr(new K.Yl("heartbeat",vt=>new Br(vt),"PRIVATE")),Yi(Ye,"0.9.27",yt),Yi(Ye,"0.9.27","esm2017"),Yi("fire-js","")}("")},4920:(mn,st,N)=>{"use strict";N.d(st,{C_:()=>Ne,Yl:()=>Z,op:()=>je});var l=N(1528),K=N(7144);class Z{constructor(be,Ee,Ke){this.name=be,this.instanceFactory=Ee,this.type=Ke,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(be){return this.instantiationMode=be,this}setMultipleInstances(be){return this.multipleInstances=be,this}setServiceProps(be){return this.serviceProps=be,this}setInstanceCreatedCallback(be){return this.onInstanceCreated=be,this}}const ee="[DEFAULT]";class Ne{constructor(be,Ee){this.name=be,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(be){const Ee=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(Ee)){const Ke=new K.o9;if(this.instancesDeferred.set(Ee,Ke),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:Ee});He&&Ke.resolve(He)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(be){var Ee;const Ke=this.normalizeInstanceIdentifier(null==be?void 0:be.identifier),He=null!==(Ee=null==be?void 0:be.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(Ke)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ke})}catch(We){if(He)return null;throw We}}getComponent(){return this.component}setComponent(be){if(be.name!==this.name)throw Error(`Mismatching Component ${be.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=be,this.shouldAutoInitialize()){if(function _e(Qe){return"EAGER"===Qe.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[Ee,Ke]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(Ee);try{const We=this.getOrInitializeService({instanceIdentifier:He});Ke.resolve(We)}catch{}}}}clearInstance(be=ee){this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)}delete(){var be=this;return(0,l.c)(function*(){const Ee=Array.from(be.instances.values());yield Promise.all([...Ee.filter(Ke=>"INTERNAL"in Ke).map(Ke=>Ke.INTERNAL.delete()),...Ee.filter(Ke=>"_delete"in Ke).map(Ke=>Ke._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(be=ee){return this.instances.has(be)}getOptions(be=ee){return this.instancesOptions.get(be)||{}}initialize(be={}){const{options:Ee={}}=be,Ke=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(Ke))throw Error(`${this.name}(${Ke}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Ke,options:Ee});for(const[We,Oe]of this.instancesDeferred.entries())Ke===this.normalizeInstanceIdentifier(We)&&Oe.resolve(He);return He}onInit(be,Ee){var Ke;const He=this.normalizeInstanceIdentifier(Ee),We=null!==(Ke=this.onInitCallbacks.get(He))&&void 0!==Ke?Ke:new Set;We.add(be),this.onInitCallbacks.set(He,We);const Oe=this.instances.get(He);return Oe&&be(Oe,He),()=>{We.delete(be)}}invokeOnInitCallbacks(be,Ee){const Ke=this.onInitCallbacks.get(Ee);if(Ke)for(const He of Ke)try{He(be,Ee)}catch{}}getOrInitializeService({instanceIdentifier:be,options:Ee={}}){let Ke=this.instances.get(be);if(!Ke&&this.component&&(Ke=this.component.instanceFactory(this.container,{instanceIdentifier:(Qe=be,Qe===ee?void 0:Qe),options:Ee}),this.instances.set(be,Ke),this.instancesOptions.set(be,Ee),this.invokeOnInitCallbacks(Ke,be),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,be,Ke)}catch{}var Qe;return Ke||null}normalizeInstanceIdentifier(be=ee){return this.component?this.component.multipleInstances?be:ee:be}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class je{constructor(be){this.name=be,this.providers=new Map}addComponent(be){const Ee=this.getProvider(be.name);if(Ee.isComponentSet())throw new Error(`Component ${be.name} has already been registered with ${this.name}`);Ee.setComponent(be)}addOrOverwriteComponent(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)}getProvider(be){if(this.providers.has(be))return this.providers.get(be);const Ee=new Ne(be,this);return this.providers.set(be,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},5976:(mn,st,N)=>{"use strict";N.d(st,{Ge:()=>K,QN:()=>je,S2:()=>Qe,YJ:()=>_e});const l=[];var K=function(be){return be[be.DEBUG=0]="DEBUG",be[be.VERBOSE=1]="VERBOSE",be[be.INFO=2]="INFO",be[be.WARN=3]="WARN",be[be.ERROR=4]="ERROR",be[be.SILENT=5]="SILENT",be}(K||{});const Z={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ee=K.INFO,Ne={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},ge=(be,Ee,...Ke)=>{if(Ee<be.logLevel)return;const He=(new Date).toISOString(),We=Ne[Ee];if(!We)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[We](`[${He}]  ${be.name}:`,...Ke)};class _e{constructor(Ee){this.name=Ee,this._logLevel=ee,this._logHandler=ge,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in K))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?Z[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...Ee),this._logHandler(this,K.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...Ee),this._logHandler(this,K.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,K.INFO,...Ee),this._logHandler(this,K.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,K.WARN,...Ee),this._logHandler(this,K.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...Ee),this._logHandler(this,K.ERROR,...Ee)}}function je(be){l.forEach(Ee=>{Ee.setLogLevel(be)})}function Qe(be,Ee){for(const Ke of l){let He=null;Ee&&Ee.level&&(He=Z[Ee.level]),Ke.userLogHandler=null===be?null:(We,Oe,...it)=>{const Ge=it.map(Ve=>{if(null==Ve)return null;if("string"==typeof Ve)return Ve;if("number"==typeof Ve||"boolean"==typeof Ve)return Ve.toString();if(Ve instanceof Error)return Ve.message;try{return JSON.stringify(Ve)}catch{return null}}).filter(Ve=>Ve).join(" ");Oe>=(null!=He?He:We.logLevel)&&be({level:K[Oe].toLowerCase(),message:Ge,args:it,type:We.name})}}}},304:(mn,st,N)=>{"use strict";N.d(st,{kh:()=>sr,_U:()=>Tn,m2:()=>Wn,Im:()=>Mn,Qz:()=>lt,Ej:()=>Vr,sW:()=>St,Cg:()=>Mr,CE:()=>Gr,um:()=>Ir,wX:()=>xn,gk:()=>qr,g5:()=>Xn,GY:()=>Kn,uU:()=>ao,Al:()=>yt,cl:()=>go,ag:()=>Hr});var l=N(1528),K=N(4496),Z=N(9148),ee=N(1368);class Ne{constructor(){this.m=new Map}reset(Me){this.m=new Map(Object.entries(Me))}get(Me,X){const Te=this.m.get(Me);return void 0!==Te?Te:X}getBoolean(Me,X=!1){const Te=this.m.get(Me);return void 0===Te?X:"string"==typeof Te?"true"===Te:!!Te}getNumber(Me,X){const Te=parseFloat(this.m.get(Me));return isNaN(Te)?void 0!==X?X:NaN:Te}set(Me,X){this.m.set(Me,X)}}const ge=new Ne,He=Pe=>Oe(Pe),Oe=(Pe=window)=>{if(typeof Pe>"u")return[];Pe.Ionic=Pe.Ionic||{};let Me=Pe.Ionic.platforms;return null==Me&&(Me=Pe.Ionic.platforms=it(Pe),Me.forEach(X=>Pe.document.documentElement.classList.add(`plt-${X}`))),Me},it=Pe=>{const Me=ge.get("platform");return Object.keys(un).filter(X=>{const Te=null==Me?void 0:Me[X];return"function"==typeof Te?Te(Pe):un[X](Pe)})},Ve=Pe=>!!(It(Pe,/iPad/i)||It(Pe,/Macintosh/i)&&ae(Pe)),ve=Pe=>It(Pe,/android|sink/i),ae=Pe=>Wt(Pe,"(any-pointer:coarse)"),se=Pe=>L(Pe)||Le(Pe),L=Pe=>!!(Pe.cordova||Pe.phonegap||Pe.PhoneGap),Le=Pe=>{const Me=Pe.Capacitor;return!(null==Me||!Me.isNative)},It=(Pe,Me)=>Me.test(Pe.navigator.userAgent),Wt=(Pe,Me)=>{var X;return null===(X=Pe.matchMedia)||void 0===X?void 0:X.call(Pe,Me).matches},un={ipad:Ve,iphone:Pe=>It(Pe,/iPhone/i),ios:Pe=>It(Pe,/iPhone|iPod/i)||Ve(Pe),android:ve,phablet:Pe=>{const Me=Pe.innerWidth,X=Pe.innerHeight,Te=Math.min(Me,X),gt=Math.max(Me,X);return Te>390&&Te<520&&gt>620&&gt<800},tablet:Pe=>{const Me=Pe.innerWidth,X=Pe.innerHeight,Te=Math.min(Me,X),gt=Math.max(Me,X);return Ve(Pe)||(Pe=>ve(Pe)&&!It(Pe,/mobile/i))(Pe)||Te>460&&Te<820&&gt>780&&gt<1400},cordova:L,capacitor:Le,electron:Pe=>It(Pe,/electron/i),pwa:Pe=>{var Me;return!!(null!==(Me=Pe.matchMedia)&&void 0!==Me&&Me.call(Pe,"(display-mode: standalone)").matches||Pe.navigator.standalone)},mobile:ae,mobileweb:Pe=>ae(Pe)&&!se(Pe),desktop:Pe=>!ae(Pe),hybrid:se};var ye=N(1896),Fe=N(9248),Je=N(5657),De=N(800),$t=N(6700),Jt=N(6040),dn=N(2700),Lt=N(1316),an=N(6684),Qn=N(7368),jn=N(4e3),xt=N(4716);const ft=["tabsInner"];let Ft=(()=>{class Pe{constructor(X,Te){this.doc=X,this.backButton=new Je.E,this.keyboardDidShow=new Je.E,this.keyboardDidHide=new Je.E,this.pause=new Je.E,this.resume=new Je.E,this.resize=new Je.E,Te.run(()=>{var gt;let jt;this.win=X.defaultView,this.backButton.subscribeWithPriority=function(Dn,An){return this.subscribe(Gn=>Gn.register(Dn,Jn=>Te.run(()=>An(Jn))))},Sn(this.pause,X,"pause",Te),Sn(this.resume,X,"resume",Te),Sn(this.backButton,X,"ionBackButton",Te),Sn(this.resize,this.win,"resize",Te),Sn(this.keyboardDidShow,this.win,"ionKeyboardDidShow",Te),Sn(this.keyboardDidHide,this.win,"ionKeyboardDidHide",Te),this._readyPromise=new Promise(Dn=>{jt=Dn}),null!==(gt=this.win)&&void 0!==gt&&gt.cordova?X.addEventListener("deviceready",()=>{jt("cordova")},{once:!0}):jt("dom")})}is(X){return((Pe,Me)=>("string"==typeof Pe&&(Me=Pe,Pe=void 0),He(Pe).includes(Me)))(this.win,X)}platforms(){return He(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(X){return Qt(this.win.location.href,X)}isLandscape(){return!this.isPortrait()}isPortrait(){var X,Te;return null===(X=(Te=this.win).matchMedia)||void 0===X?void 0:X.call(Te,"(orientation: portrait)").matches}testUserAgent(X){const Te=this.win.navigator;return!!(null!=Te&&Te.userAgent&&Te.userAgent.indexOf(X)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return Pe.\u0275fac=function(X){return new(X||Pe)(K.CoB(ee.Ud),K.CoB(K.WW2))},Pe.\u0275prov=K.wxM({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})();const Qt=(Pe,Me)=>{Me=Me.replace(/[[\]\\]/g,"\\$&");const Te=new RegExp("[\\?&]"+Me+"=([^&#]*)").exec(Pe);return Te?decodeURIComponent(Te[1].replace(/\+/g," ")):null},Sn=(Pe,Me,X,Te)=>{Me&&Me.addEventListener(X,gt=>{Te.run(()=>{Pe.next(null!=gt?gt.detail:void 0)})})};let xn=(()=>{class Pe{constructor(X,Te,gt,jt){this.location=Te,this.serializer=gt,this.router=jt,this.direction=mr,this.animated=Cr,this.guessDirection="forward",this.lastNavId=-1,jt&&jt.events.subscribe(Dn=>{if(Dn instanceof Z.Qx){const An=Dn.restoredState?Dn.restoredState.navigationId:Dn.id;this.guessDirection=An<this.lastNavId?"back":"forward",this.guessAnimation=Dn.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Dn.id:An}}),X.backButton.subscribeWithPriority(0,Dn=>{this.pop(),Dn()})}navigateForward(X,Te={}){return this.setDirection("forward",Te.animated,Te.animationDirection,Te.animation),this.navigate(X,Te)}navigateBack(X,Te={}){return this.setDirection("back",Te.animated,Te.animationDirection,Te.animation),this.navigate(X,Te)}navigateRoot(X,Te={}){return this.setDirection("root",Te.animated,Te.animationDirection,Te.animation),this.navigate(X,Te)}back(X={animated:!0,animationDirection:"back"}){return this.setDirection("back",X.animated,X.animationDirection,X.animation),this.location.back()}pop(){var X=this;return(0,l.c)(function*(){let Te=X.topOutlet;for(;Te;){if(yield Te.pop())return!0;Te=Te.parentOutlet}return!1})()}setDirection(X,Te,gt,jt){this.direction=X,this.animated=br(X,Te,gt),this.animationBuilder=jt}setTopOutlet(X){this.topOutlet=X}consumeTransition(){let Te,X="root";const gt=this.animationBuilder;return"auto"===this.direction?(X=this.guessDirection,Te=this.guessAnimation):(Te=this.animated,X=this.direction),this.direction=mr,this.animated=Cr,this.animationBuilder=void 0,{direction:X,animation:Te,animationBuilder:gt}}navigate(X,Te){if(Array.isArray(X))return this.router.navigate(X,Te);{const gt=this.serializer.parse(X.toString());return void 0!==Te.queryParams&&(gt.queryParams={...Te.queryParams}),void 0!==Te.fragment&&(gt.fragment=Te.fragment),this.router.navigateByUrl(gt,Te)}}}return Pe.\u0275fac=function(X){return new(X||Pe)(K.CoB(Ft),K.CoB(ee.oB),K.CoB(Z.qd),K.CoB(Z.E5,8))},Pe.\u0275prov=K.wxM({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})();const br=(Pe,Me,X)=>{if(!1!==Me){if(void 0!==X)return X;if("forward"===Pe||"back"===Pe)return Pe;if("root"===Pe&&!0===Me)return"forward"}},mr="auto",Cr=void 0;let Tn=(()=>{class Pe{get(X,Te){const gt=Sr();return gt?gt.get(X,Te):null}getBoolean(X,Te){const gt=Sr();return!!gt&&gt.getBoolean(X,Te)}getNumber(X,Te){const gt=Sr();return gt?gt.getNumber(X,Te):0}}return Pe.\u0275fac=function(X){return new(X||Pe)},Pe.\u0275prov=K.wxM({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})();const Wn=new K.UbH("USERCONFIG"),Sr=()=>{if(typeof window<"u"){const Pe=window.Ionic;if(null!=Pe&&Pe.config)return Pe.config}return null};class ri{constructor(Me={}){this.data=Me}get(Me){return this.data[Me]}}let sr=(()=>{class Pe{constructor(){this.zone=(0,K.uUt)(K.WW2),this.applicationRef=(0,K.uUt)(K.Swk)}create(X,Te,gt){return new Et(X,Te,this.applicationRef,this.zone,gt)}}return Pe.\u0275fac=function(X){return new(X||Pe)},Pe.\u0275prov=K.wxM({token:Pe,factory:Pe.\u0275fac}),Pe})();class Et{constructor(Me,X,Te,gt,jt){this.environmentInjector=Me,this.injector=X,this.applicationRef=Te,this.zone=gt,this.elementReferenceKey=jt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(Me,X,Te,gt){return this.zone.run(()=>new Promise(jt=>{const Dn={...Te};void 0!==this.elementReferenceKey&&(Dn[this.elementReferenceKey]=Me),jt(Xt(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,Me,X,Dn,gt,this.elementReferenceKey))}))}removeViewFromDom(Me,X){return this.zone.run(()=>new Promise(Te=>{const gt=this.elRefMap.get(X);if(gt){gt.destroy(),this.elRefMap.delete(X);const jt=this.elEventsMap.get(X);jt&&(jt(),this.elEventsMap.delete(X))}Te()}))}}const Xt=(Pe,Me,X,Te,gt,jt,Dn,An,Gn,Jn,gi)=>{const Ct=K.zZn.create({providers:hn(Gn),parent:X}),Y=(0,K.kdu)(An,{environmentInjector:Me,elementInjector:Ct}),ne=Y.instance,qe=Y.location.nativeElement;if(Gn&&(gi&&void 0!==ne[gi]&&console.error(`[Ionic Error]: ${gi} is a reserved property when using ${Dn.tagName.toLowerCase()}. Rename or remove the "${gi}" property from ${An.name}.`),Object.assign(ne,Gn)),Jn)for(const _t of Jn)qe.classList.add(_t);const ct=bt(Pe,ne,qe);return Dn.appendChild(qe),Te.attachView(Y.hostView),gt.set(qe,Y),jt.set(qe,ct),qe},Yt=[ye.L,ye.a,ye.b,ye.c,ye.d],bt=(Pe,Me,X)=>Pe.run(()=>{const Te=Yt.filter(gt=>"function"==typeof Me[gt]).map(gt=>{const jt=Dn=>Me[gt](Dn.detail);return X.addEventListener(gt,jt),()=>X.removeEventListener(gt,jt)});return()=>Te.forEach(gt=>gt())}),yn=new K.UbH("NavParamsToken"),hn=Pe=>[{provide:yn,useValue:Pe},{provide:ri,useFactory:nr,deps:[yn]}],nr=Pe=>new ri(Pe),jr=(Pe,Me)=>{const X=Pe.prototype;Me.forEach(Te=>{Object.defineProperty(X,Te,{get(){return this.el[Te]},set(gt){this.z.runOutsideAngular(()=>this.el[Te]=gt)}})})},po=(Pe,Me)=>{const X=Pe.prototype;Me.forEach(Te=>{X[Te]=function(){const gt=arguments;return this.z.runOutsideAngular(()=>this.el[Te].apply(this.el,gt))}})},Xr=(Pe,Me,X)=>{X.forEach(Te=>Pe[Te]=(0,De.w)(Me,Te))};function Rr(Pe){return function(X){const{defineCustomElementFn:Te,inputs:gt,methods:jt}=Pe;return void 0!==Te&&Te(),gt&&jr(X,gt),jt&&po(X,jt),X}}const Li=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],Yi=["present","dismiss","onDidDismiss","onWillDismiss"];let St=(()=>{let Pe=class{constructor(X,Te,gt){this.z=gt,this.isCmpOpen=!1,this.el=Te.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,X.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,X.detectChanges()}),Xr(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}};return Pe.\u0275fac=function(X){return new(X||Pe)(K.GI1(K.kD9),K.GI1(K.GMv),K.GI1(K.WW2))},Pe.\u0275dir=K.Sc5({type:Pe,selectors:[["ion-popover"]],contentQueries:function(X,Te,gt){if(1&X&&K.szK(gt,K.Yw2,5),2&X){let jt;K.wto(jt=K.Gqi())&&(Te.template=jt.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"}}),Pe=(0,Lt.UN)([Rr({inputs:Li,methods:Yi})],Pe),Pe})();const dt=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],Rt=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let lt=(()=>{let Pe=class{constructor(X,Te,gt){this.z=gt,this.isCmpOpen=!1,this.el=Te.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,X.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,X.detectChanges()}),Xr(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}};return Pe.\u0275fac=function(X){return new(X||Pe)(K.GI1(K.kD9),K.GI1(K.GMv),K.GI1(K.WW2))},Pe.\u0275dir=K.Sc5({type:Pe,selectors:[["ion-modal"]],contentQueries:function(X,Te,gt){if(1&X&&K.szK(gt,K.Yw2,5),2&X){let jt;K.wto(jt=K.Gqi())&&(Te.template=jt.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"}}),Pe=(0,Lt.UN)([Rr({inputs:dt,methods:Rt})],Pe),Pe})();const Ie=(Pe,Me)=>((Pe=Pe.filter(X=>X.stackId!==Me.stackId)).push(Me),Pe),ut=(Pe,Me)=>{const X=Pe.createUrlTree(["."],{relativeTo:Me});return Pe.serializeUrl(X)},pn=(Pe,Me)=>!Me||Pe.stackId!==Me.stackId,$n=(Pe,Me)=>{if(!Pe)return;const X=qn(Me);for(let Te=0;Te<X.length;Te++){if(Te>=Pe.length)return X[Te];if(X[Te]!==Pe[Te])return}},qn=Pe=>Pe.split("/").map(Me=>Me.trim()).filter(Me=>""!==Me),Nr=Pe=>{Pe&&(Pe.ref.destroy(),Pe.unlistenEvents())};class Ar{constructor(Me,X,Te,gt,jt,Dn){this.containerEl=X,this.router=Te,this.navCtrl=gt,this.zone=jt,this.location=Dn,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==Me?qn(Me):void 0}createView(Me,X){var Te;const gt=ut(this.router,X),jt=null==Me||null===(Te=Me.location)||void 0===Te?void 0:Te.nativeElement,Dn=bt(this.zone,Me.instance,jt);return{id:this.nextId++,stackId:$n(this.tabsPrefix,gt),unlistenEvents:Dn,element:jt,ref:Me,url:gt}}getExistingView(Me){const X=ut(this.router,Me),Te=this.views.find(gt=>gt.url===X);return Te&&Te.ref.changeDetectorRef.reattach(),Te}setActive(Me){var X,Te;const gt=this.navCtrl.consumeTransition();let{direction:jt,animation:Dn,animationBuilder:An}=gt;const Gn=this.activeView,Jn=pn(Me,Gn);Jn&&(jt="back",Dn=void 0);const gi=this.views.slice();let Ct;const Y=this.router;Y.getCurrentNavigation?Ct=Y.getCurrentNavigation():null!==(X=Y.navigations)&&void 0!==X&&X.value&&(Ct=Y.navigations.value),null!==(Te=Ct)&&void 0!==Te&&null!==(Te=Te.extras)&&void 0!==Te&&Te.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ne=this.views.includes(Me),qe=this.insertView(Me,jt);ne||Me.ref.changeDetectorRef.detectChanges();const ct=Me.animationBuilder;return void 0===An&&"back"===jt&&!Jn&&void 0!==ct&&(An=ct),Gn&&(Gn.animationBuilder=An),this.zone.runOutsideAngular(()=>this.wait(()=>(Gn&&Gn.ref.changeDetectorRef.detach(),Me.ref.changeDetectorRef.reattach(),this.transition(Me,Gn,Dn,this.canGoBack(1),!1,An).then(()=>Br(Me,qe,gi,this.location,this.zone)).then(()=>({enteringView:Me,direction:jt,animation:Dn,tabSwitch:Jn})))))}canGoBack(Me,X=this.getActiveStackId()){return this.getStack(X).length>Me}pop(Me,X=this.getActiveStackId()){return this.zone.run(()=>{const Te=this.getStack(X);if(Te.length<=Me)return Promise.resolve(!1);const gt=Te[Te.length-Me-1];let jt=gt.url;const Dn=gt.savedData;if(Dn){var An;const Jn=Dn.get("primary");null!=Jn&&null!==(An=Jn.route)&&void 0!==An&&null!==(An=An._routerState)&&void 0!==An&&An.snapshot.url&&(jt=Jn.route._routerState.snapshot.url)}const{animationBuilder:Gn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(jt,{...gt.savedExtras,animation:Gn}).then(()=>!0)})}startBackTransition(){const Me=this.activeView;if(Me){const X=this.getStack(Me.stackId),Te=X[X.length-2],gt=Te.animationBuilder;return this.wait(()=>this.transition(Te,Me,"back",this.canGoBack(2),!0,gt))}return Promise.resolve()}endBackTransition(Me){Me?(this.skipTransition=!0,this.pop(1)):this.activeView&&bn(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(Me){const X=this.getStack(Me);return X.length>0?X[X.length-1]:void 0}getRootUrl(Me){const X=this.getStack(Me);return X.length>0?X[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Nr),this.activeView=void 0,this.views=[]}getStack(Me){return this.views.filter(X=>X.stackId===Me)}insertView(Me,X){return this.activeView=Me,this.views=((Pe,Me,X)=>"root"===X?Ie(Pe,Me):"forward"===X?((Pe,Me)=>(Pe.indexOf(Me)>=0?Pe=Pe.filter(Te=>Te.stackId!==Me.stackId||Te.id<=Me.id):Pe.push(Me),Pe))(Pe,Me):((Pe,Me)=>Pe.indexOf(Me)>=0?Pe.filter(Te=>Te.stackId!==Me.stackId||Te.id<=Me.id):Ie(Pe,Me))(Pe,Me))(this.views,Me,X),this.views.slice()}transition(Me,X,Te,gt,jt,Dn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(X===Me)return Promise.resolve(!1);const An=Me?Me.element:void 0,Gn=X?X.element:void 0,Jn=this.containerEl;return An&&An!==Gn&&(An.classList.add("ion-page"),An.classList.add("ion-page-invisible"),An.parentElement!==Jn&&Jn.appendChild(An),Jn.commit)?Jn.commit(An,Gn,{duration:void 0===Te?0:void 0,direction:Te,showGoBack:gt,progressAnimation:jt,animationBuilder:Dn}):Promise.resolve(!1)}wait(Me){var X=this;return(0,l.c)(function*(){void 0!==X.runningTask&&(yield X.runningTask,X.runningTask=void 0);const Te=X.runningTask=Me();return Te.finally(()=>X.runningTask=void 0),Te})()}}const Br=(Pe,Me,X,Te,gt)=>"function"==typeof requestAnimationFrame?new Promise(jt=>{requestAnimationFrame(()=>{bn(Pe,Me,X,Te,gt),jt()})}):Promise.resolve(),bn=(Pe,Me,X,Te,gt)=>{gt.run(()=>X.filter(jt=>!Me.includes(jt)).forEach(Nr)),Me.forEach(jt=>{const An=Te.path().split("?")[0].split("#")[0];if(jt!==Pe&&jt.url!==An){const Gn=jt.element;Gn.setAttribute("aria-hidden","true"),Gn.classList.add("ion-page-hidden"),jt.ref.changeDetectorRef.detach()}})};let Mr=(()=>{class Pe{constructor(X,Te,gt,jt,Dn,An,Gn,Jn){this.parentOutlet=Jn,this.activatedView=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new $t.g(null),this.activated=null,this._activatedRoute=null,this.name=Z.gf,this.stackWillChange=new K._w7,this.stackDidChange=new K._w7,this.activateEvents=new K._w7,this.deactivateEvents=new K._w7,this.parentContexts=(0,K.uUt)(Z.O4),this.location=(0,K.uUt)(K.y8U),this.environmentInjector=(0,K.uUt)(K.SIe),this.inputBinder=(0,K.uUt)(Or,{optional:!0}),this.supportsBindingToComponentInputs=!0,this.config=(0,K.uUt)(Tn),this.navCtrl=(0,K.uUt)(xn),this.nativeEl=jt.nativeElement,this.name=X||Z.gf,this.tabsPrefix="true"===Te?ut(Dn,Gn):void 0,this.stackCtrl=new Ar(this.tabsPrefix,this.nativeEl,Dn,this.navCtrl,An,gt),this.parentContexts.onChildOutletCreated(this.name,this)}get activatedComponentRef(){return this.activated}set animation(X){this.nativeEl.animation=X}set animated(X){this.nativeEl.animated=X}set swipeGesture(X){this._swipeGesture=X,this.nativeEl.swipeHandler=X?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:Te=>this.stackCtrl.endBackTransition(Te)}:void 0}ngOnDestroy(){var X;this.stackCtrl.destroy(),null===(X=this.inputBinder)||void 0===X||X.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const X=this.getContext();null!=X&&X.route&&this.activateWith(X.route,X.injector)}new Promise(X=>(0,Fe.c)(this.nativeEl,X)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(X,Te){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const Te=this.getContext();this.activatedView.savedData=new Map(Te.children.contexts);const gt=this.activatedView.savedData.get("primary");if(gt&&Te.route&&(gt.route={...Te.route}),this.activatedView.savedExtras={},Te.route){const jt=Te.route.snapshot;this.activatedView.savedExtras.queryParams=jt.queryParams,this.activatedView.savedExtras.fragment=jt.fragment}}const X=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(X)}}activateWith(X,Te){var gt;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=X;let jt,Dn=this.stackCtrl.getExistingView(X);if(Dn){jt=this.activated=Dn.ref;const Jn=Dn.savedData;Jn&&(this.getContext().children.contexts=Jn),this.updateActivatedRouteProxy(jt.instance,X)}else{var An;const Jn=X._futureSnapshot,gi=this.parentContexts.getOrCreateContext(this.name).children,Ct=new $t.g(null),Y=this.createActivatedRouteProxy(Ct,X),ne=new so(Y,gi,this.location.injector),qe=null!==(An=Jn.routeConfig.component)&&void 0!==An?An:Jn.component;jt=this.activated=this.location.createComponent(qe,{index:this.location.length,injector:ne,environmentInjector:null!=Te?Te:this.environmentInjector}),Ct.next(jt.instance),Dn=this.stackCtrl.createView(this.activated,X),this.proxyMap.set(jt.instance,Y),this.currentActivatedRoute$.next({component:jt.instance,activatedRoute:X})}null===(gt=this.inputBinder)||void 0===gt||gt.bindActivatedRouteToOutletComponent(this),this.activatedView=Dn,this.navCtrl.setTopOutlet(this);const Gn=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:Dn,tabSwitch:pn(Dn,Gn)}),this.stackCtrl.setActive(Dn).then(Jn=>{this.activateEvents.emit(jt.instance),this.stackDidChange.emit(Jn)})}canGoBack(X=1,Te){return this.stackCtrl.canGoBack(X,Te)}pop(X=1,Te){return this.stackCtrl.pop(X,Te)}getLastUrl(X){const Te=this.stackCtrl.getLastUrl(X);return Te?Te.url:void 0}getLastRouteView(X){return this.stackCtrl.getLastUrl(X)}getRootView(X){return this.stackCtrl.getRootUrl(X)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(X,Te){const gt=new Z.gV;return gt._futureSnapshot=Te._futureSnapshot,gt._routerState=Te._routerState,gt.snapshot=Te.snapshot,gt.outlet=Te.outlet,gt.component=Te.component,gt._paramMap=this.proxyObservable(X,"paramMap"),gt._queryParamMap=this.proxyObservable(X,"queryParamMap"),gt.url=this.proxyObservable(X,"url"),gt.params=this.proxyObservable(X,"params"),gt.queryParams=this.proxyObservable(X,"queryParams"),gt.fragment=this.proxyObservable(X,"fragment"),gt.data=this.proxyObservable(X,"data"),gt}proxyObservable(X,Te){return X.pipe((0,an.I)(gt=>!!gt),(0,Qn.G)(gt=>this.currentActivatedRoute$.pipe((0,an.I)(jt=>null!==jt&&jt.component===gt),(0,Qn.G)(jt=>jt&&jt.activatedRoute[Te]),(0,jn.a)())))}updateActivatedRouteProxy(X,Te){const gt=this.proxyMap.get(X);if(!gt)throw new Error("Could not find activated route proxy for view");gt._futureSnapshot=Te._futureSnapshot,gt._routerState=Te._routerState,gt.snapshot=Te.snapshot,gt.outlet=Te.outlet,gt.component=Te.component,this.currentActivatedRoute$.next({component:X,activatedRoute:Te})}}return Pe.\u0275fac=function(X){return new(X||Pe)(K.gJ8("name"),K.gJ8("tabs"),K.GI1(ee.oB),K.GI1(K.GMv),K.GI1(Z.E5),K.GI1(K.WW2),K.GI1(Z.gV),K.GI1(Pe,12))},Pe.\u0275dir=K.Sc5({type:Pe,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Pe})();class so{constructor(Me,X,Te){this.route=Me,this.childContexts=X,this.parent=Te}get(Me,X){return Me===Z.gV?this.route:Me===Z.O4?this.childContexts:this.parent.get(Me,X)}}const Or=new K.UbH("");let hr=(()=>{class Pe{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(X){this.unsubscribeFromRouteData(X),this.subscribeToRouteData(X)}unsubscribeFromRouteData(X){var Te;null===(Te=this.outletDataSubscriptions.get(X))||void 0===Te||Te.unsubscribe(),this.outletDataSubscriptions.delete(X)}subscribeToRouteData(X){const{activatedRoute:Te}=X,gt=(0,Jt.E)([Te.queryParams,Te.params,Te.data]).pipe((0,Qn.G)(([jt,Dn,An],Gn)=>(An={...jt,...Dn,...An},0===Gn?(0,dn.of)(An):Promise.resolve(An)))).subscribe(jt=>{if(!X.isActivated||!X.activatedComponentRef||X.activatedRoute!==Te||null===Te.component)return void this.unsubscribeFromRouteData(X);const Dn=(0,K.o9M)(Te.component);if(Dn)for(const{templateName:An}of Dn.inputs)X.activatedComponentRef.setInput(An,jt[An]);else this.unsubscribeFromRouteData(X)});this.outletDataSubscriptions.set(X,gt)}}return Pe.\u0275fac=function(X){return new(X||Pe)},Pe.\u0275prov=K.wxM({token:Pe,factory:Pe.\u0275fac}),Pe})();const yt=()=>({provide:Or,useFactory:vt,deps:[Z.E5]});function vt(Pe){return null!=Pe&&Pe.componentInputBindingEnabled?new hr:null}const Ht=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let Mn=(()=>{let Pe=class{constructor(X,Te,gt,jt,Dn,An){this.routerOutlet=X,this.navCtrl=Te,this.config=gt,this.r=jt,this.z=Dn,An.detach(),this.el=this.r.nativeElement}onClick(X){var Te;const gt=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(Te=this.routerOutlet)&&void 0!==Te&&Te.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),X.preventDefault()):null!=gt&&(this.navCtrl.navigateBack(gt,{animation:this.routerAnimation}),X.preventDefault())}};return Pe.\u0275fac=function(X){return new(X||Pe)(K.GI1(Mr,8),K.GI1(xn),K.GI1(Tn),K.GI1(K.GMv),K.GI1(K.WW2),K.GI1(K.kD9))},Pe.\u0275dir=K.Sc5({type:Pe,hostBindings:function(X,Te){1&X&&K.qCj("click",function(jt){return Te.onClick(jt)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"}}),Pe=(0,Lt.UN)([Rr({inputs:Ht})],Pe),Pe})(),Xn=(()=>{class Pe{constructor(X,Te,gt,jt,Dn){this.locationStrategy=X,this.navCtrl=Te,this.elementRef=gt,this.router=jt,this.routerLink=Dn,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var X;if(null!==(X=this.routerLink)&&void 0!==X&&X.urlTree){const Te=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=Te}}onClick(X){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),X.preventDefault()}}return Pe.\u0275fac=function(X){return new(X||Pe)(K.GI1(ee.Qd),K.GI1(xn),K.GI1(K.GMv),K.GI1(Z.E5),K.GI1(Z.ER,8))},Pe.\u0275dir=K.Sc5({type:Pe,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(X,Te){1&X&&K.qCj("click",function(jt){return Te.onClick(jt)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[K.SYr]}),Pe})(),Kn=(()=>{class Pe{constructor(X,Te,gt,jt,Dn){this.locationStrategy=X,this.navCtrl=Te,this.elementRef=gt,this.router=jt,this.routerLink=Dn,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var X;if(null!==(X=this.routerLink)&&void 0!==X&&X.urlTree){const Te=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=Te}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return Pe.\u0275fac=function(X){return new(X||Pe)(K.GI1(ee.Qd),K.GI1(xn),K.GI1(K.GMv),K.GI1(Z.E5),K.GI1(Z.ER,8))},Pe.\u0275dir=K.Sc5({type:Pe,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(X,Te){1&X&&K.qCj("click",function(){return Te.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[K.SYr]}),Pe})();const Zn=["animated","animation","root","rootParams","swipeGesture"],$r=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let Vr=(()=>{let Pe=class{constructor(X,Te,gt,jt,Dn,An){this.z=Dn,An.detach(),this.el=X.nativeElement,X.nativeElement.delegate=jt.create(Te,gt),Xr(this,this.el,["ionNavDidChange","ionNavWillChange"])}};return Pe.\u0275fac=function(X){return new(X||Pe)(K.GI1(K.GMv),K.GI1(K.SIe),K.GI1(K.zZn),K.GI1(sr),K.GI1(K.WW2),K.GI1(K.kD9))},Pe.\u0275dir=K.Sc5({type:Pe,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"}}),Pe=(0,Lt.UN)([Rr({inputs:Zn,methods:$r})],Pe),Pe})(),Gr=(()=>{class Pe{constructor(X){this.navCtrl=X,this.ionTabsWillChange=new K._w7,this.ionTabsDidChange=new K._w7,this.tabBarSlot="bottom"}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:X,tabSwitch:Te}){const gt=X.stackId;Te&&void 0!==gt&&this.ionTabsWillChange.emit({tab:gt})}onStackDidChange({enteringView:X,tabSwitch:Te}){const gt=X.stackId;Te&&void 0!==gt&&(this.tabBar&&(this.tabBar.selectedTab=gt),this.ionTabsDidChange.emit({tab:gt}))}select(X){const Te="string"==typeof X,gt=Te?X:X.detail.tab,jt=this.outlet.getActiveStackId()===gt,Dn=`${this.outlet.tabsPrefix}/${gt}`;if(Te||X.stopPropagation(),jt){const An=this.outlet.getActiveStackId(),Gn=this.outlet.getLastRouteView(An);if((null==Gn?void 0:Gn.url)===Dn)return;const Jn=this.outlet.getRootView(gt);return this.navCtrl.navigateRoot(Dn,{...Jn&&Dn===Jn.url&&Jn.savedExtras,animated:!0,animationDirection:"back"})}{const An=this.outlet.getLastRouteView(gt);return this.navCtrl.navigateRoot((null==An?void 0:An.url)||Dn,{...null==An?void 0:An.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(X=>{const Te=X.el.getAttribute("slot");Te!==this.tabBarSlot&&(this.tabBarSlot=Te,this.relocateTabBar())})}relocateTabBar(){const X=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(X):this.tabsInner.nativeElement.after(X)}}return Pe.\u0275fac=function(X){return new(X||Pe)(K.GI1(xn))},Pe.\u0275dir=K.Sc5({type:Pe,selectors:[["ion-tabs"]],viewQuery:function(X,Te){if(1&X&&K.CC$(ft,7,K.GMv),2&X){let gt;K.wto(gt=K.Gqi())&&(Te.tabsInner=gt.first)}},hostBindings:function(X,Te){1&X&&K.qCj("ionTabButtonClick",function(jt){return Te.select(jt)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"}}),Pe})();const go=Pe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Pe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Pe):setTimeout(Pe);let ao=(()=>{class Pe{constructor(X,Te){this.injector=X,this.elementRef=Te,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(X){this.elementRef.nativeElement.value=this.lastValue=X,Hr(this.elementRef)}handleValueChange(X,Te){X===this.elementRef.nativeElement&&(Te!==this.lastValue&&(this.lastValue=Te,this.onChange(Te)),Hr(this.elementRef))}_handleBlurEvent(X){X===this.elementRef.nativeElement&&(this.onTouched(),Hr(this.elementRef))}registerOnChange(X){this.onChange=X}registerOnTouched(X){this.onTouched=X}setDisabledState(X){this.elementRef.nativeElement.disabled=X}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let X;try{X=this.injector.get(xt.eq)}catch{}if(!X)return;X.statusChanges&&(this.statusChanges=X.statusChanges.subscribe(()=>Hr(this.elementRef)));const Te=X.control;Te&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(jt=>{if(typeof Te[jt]<"u"){const Dn=Te[jt].bind(Te);Te[jt]=(...An)=>{Dn(...An),Hr(this.elementRef)}}})}}return Pe.\u0275fac=function(X){return new(X||Pe)(K.GI1(K.zZn),K.GI1(K.GMv))},Pe.\u0275dir=K.Sc5({type:Pe,hostBindings:function(X,Te){1&X&&K.qCj("ionBlur",function(jt){return Te._handleBlurEvent(jt.target)})}}),Pe})();const Hr=Pe=>{go(()=>{const Me=Pe.nativeElement,X=null!=Me.value&&Me.value.toString().length>0,Te=lo(Me);pi(Me,Te);const gt=Me.closest("ion-item");gt&&pi(gt,X?[...Te,"item-has-value"]:Te)})},lo=Pe=>{const Me=Pe.classList,X=[];for(let Te=0;Te<Me.length;Te++){const gt=Me.item(Te);null!==gt&&Kr(gt,"ng-")&&X.push(`ion-${gt.substring(3)}`)}return X},pi=(Pe,Me)=>{const X=Pe.classList;X.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),X.add(...Me)},Kr=(Pe,Me)=>Pe.substring(0,Me.length)===Me;class Ir{shouldDetach(Me){return!1}shouldAttach(Me){return!1}store(Me,X){}retrieve(Me){return null}shouldReuseRoute(Me,X){if(Me.routeConfig!==X.routeConfig)return!1;const Te=Me.params,gt=X.params,jt=Object.keys(Te),Dn=Object.keys(gt);if(jt.length!==Dn.length)return!1;for(const An of jt)if(gt[An]!==Te[An])return!1;return!0}}class qr{constructor(Me){this.ctrl=Me}create(Me){return this.ctrl.create(Me||{})}dismiss(Me,X,Te){return this.ctrl.dismiss(Me,X,Te)}getTop(){return this.ctrl.getTop()}}},2112:(mn,st,N)=>{"use strict";N.d(st,{iW:()=>qe,qk:()=>an,sn:()=>kt,KC:()=>Ft,Gg:()=>Qt,YY:()=>Sn,I7:()=>br,Kk:()=>Tn,_i:()=>Wn,wB:()=>yn,Ko:()=>hn,A5:()=>Xr,Yb:()=>Rr,QR:()=>lt,Cg:()=>X,qo:()=>Ht,KQ:()=>Mn,mx:()=>ao,ej:()=>Hr,CE:()=>Te,tM:()=>Ir,Md:()=>Me,wZ:()=>tr,qG:()=>me});var l=N(4496),K=N(4716),Z=N(304),ee=N(1316),Ne=N(800),ge=N(1368),_e=N(9148),He=(N(388),N(6256),N(8512),N(6556),N(2528),N(8523)),We=N(9637),it=(N(3452),N(3816)),Ve=(N(4829),N(2992));N(6560),N(2784);var et=N(1528);const at=He.i,ae=function(){var A=(0,et.c)(function*(fe,F){if(!(typeof window>"u"))return yield at(),(0,Ve.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"placeholder":["placeholderChanged"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"],"counterFormatter":["counterFormatterChanged"]}],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"],"checked":["styleChanged"],"color":["styleChanged"],"disabled":["styleChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"disabled":[4],"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]},null,{"value":["valueChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"legacy":[4]},null,{"checked":["styleChanged"],"disabled":["styleChanged"]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),F)});return function(F,le){return A.apply(this,arguments)}}(),te=["*"],se=["outlet"],L=[[["","slot","top"]],"*"],Le=["[slot=top]","*"];let me=(()=>{class A extends Z.uU{constructor(F,le){super(F,le)}_handleInputEvent(F){this.handleValueChange(F,F.value)}}return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.zZn),l.GI1(l.GMv))},A.\u0275dir=l.Sc5({type:A,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"],["ion-range"]],hostBindings:function(F,le){1&F&&l.qCj("ionInput",function(Bt){return le._handleInputEvent(Bt.target)})},features:[l.M5G([{provide:K.Y6,useExisting:A,multi:!0}]),l.eg9]}),A})();const he=(A,fe)=>{const F=A.prototype;fe.forEach(le=>{Object.defineProperty(F,le,{get(){return this.el[le]},set(Ae){this.z.runOutsideAngular(()=>this.el[le]=Ae)},configurable:!0})})},ye=(A,fe)=>{const F=A.prototype;fe.forEach(le=>{F[le]=function(){const Ae=arguments;return this.z.runOutsideAngular(()=>this.el[le].apply(this.el,Ae))}})},Fe=(A,fe,F)=>{F.forEach(le=>A[le]=(0,Ne.w)(fe,le))};function De(A){return function(F){const{defineCustomElementFn:le,inputs:Ae,methods:Bt}=A;return void 0!==le&&le(),Ae&&he(F,Ae),Bt&&ye(F,Bt),F}}let an=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-app"]],ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({})],A),A})(),kt=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement,Fe(this,this.el,["ionFocus","ionBlur"])}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],A),A})(),Ft=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],A),A})(),Qt=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["mode"]})],A),A})(),Sn=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["color","mode","translucent"]})],A),A})(),br=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["color","mode"]})],A),A})(),Tn=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],A),A})(),Wn=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement,Fe(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],A),A})(),yn=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["collapse","mode","translucent"]})],A),A})(),hn=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],A),A})(),Xr=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement,Fe(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],A),A})(),Rr=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],A),A})(),lt=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["color","mode","position"]})],A),A})(),Ht=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-row"]],ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({})],A),A})(),Mn=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement,Fe(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",name:"name",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","name","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],A),A})(),ao=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["color","mode","selectedTab","translucent"]})],A),A})(),Hr=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],A),A})(),Ir=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["color","size"]})],A),A})(),Me=(()=>{let A=class{constructor(F,le,Ae){this.z=Ae,F.detach(),this.el=le.nativeElement}};return A.\u0275fac=function(F){return new(F||A)(l.GI1(l.kD9),l.GI1(l.GMv),l.GI1(l.WW2))},A.\u0275cmp=l.In1({type:A,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:te,decls:1,vars:0,template:function(F,le){1&F&&(l.kPM(),l._Xx(0))},encapsulation:2,changeDetection:0}),A=(0,ee.UN)([De({inputs:["color","mode"]})],A),A})(),X=(()=>{class A extends Z.Cg{constructor(F,le,Ae,Bt,rr,Si,ii,Zr){super(F,le,Ae,Bt,rr,Si,ii,Zr),this.parentOutlet=Zr}}return A.\u0275fac=function(F){return new(F||A)(l.gJ8("name"),l.gJ8("tabs"),l.GI1(ge.oB),l.GI1(l.GMv),l.GI1(_e.E5),l.GI1(l.WW2),l.GI1(_e.gV),l.GI1(A,12))},A.\u0275dir=l.Sc5({type:A,selectors:[["ion-router-outlet"]],features:[l.eg9]}),A})(),Te=(()=>{class A extends Z.CE{}return A.\u0275fac=(()=>{let fe;return function(le){return(fe||(fe=l.otF(A)))(le||A)}})(),A.\u0275cmp=l.In1({type:A,selectors:[["ion-tabs"]],contentQueries:function(F,le,Ae){if(1&F&&(l.szK(Ae,ao,5),l.szK(Ae,ao,4)),2&F){let Bt;l.wto(Bt=l.Gqi())&&(le.tabBar=Bt.first),l.wto(Bt=l.Gqi())&&(le.tabBars=Bt)}},viewQuery:function(F,le){if(1&F&&l.CC$(se,5,X),2&F){let Ae;l.wto(Ae=l.Gqi())&&(le.outlet=Ae.first)}},features:[l.eg9],ngContentSelectors:Le,decls:6,vars:0,consts:[[1,"tabs-inner"],["tabsInner",""],["tabs","true",3,"stackWillChange","stackDidChange"],["outlet",""]],template:function(F,le){1&F&&(l.kPM(L),l._Xx(0),l.I0R(1,"div",0,1)(3,"ion-router-outlet",2,3),l.qCj("stackWillChange",function(Bt){return le.onStackWillChange(Bt)})("stackDidChange",function(Bt){return le.onStackDidChange(Bt)}),l.C$Y()(),l._Xx(5,1))},dependencies:[X],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]}),A})();const gi={provide:K.WM,useExisting:(0,l.wd)(()=>Ct),multi:!0};let Ct=(()=>{class A extends K._t{}return A.\u0275fac=(()=>{let fe;return function(le){return(fe||(fe=l.otF(A)))(le||A)}})(),A.\u0275dir=l.Sc5({type:A,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(F,le){2&F&&l.e48("max",le._enabled?le.max:null)},features:[l.M5G([gi]),l.eg9]}),A})();const Y={provide:K.WM,useExisting:(0,l.wd)(()=>ne),multi:!0};let ne=(()=>{class A extends K.Gu{}return A.\u0275fac=(()=>{let fe;return function(le){return(fe||(fe=l.otF(A)))(le||A)}})(),A.\u0275dir=l.Sc5({type:A,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(F,le){2&F&&l.e48("min",le._enabled?le.min:null)},features:[l.M5G([Y]),l.eg9]}),A})(),qe=(()=>{class A extends Z.gk{constructor(){super(it.a)}}return A.\u0275fac=function(F){return new(F||A)},A.\u0275prov=l.wxM({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),tn=(()=>{class A extends Z.gk{constructor(){super(it.m),this.angularDelegate=(0,l.uUt)(Z.kh),this.injector=(0,l.uUt)(l.zZn),this.environmentInjector=(0,l.uUt)(l.SIe)}create(F){return super.create({...F,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return A.\u0275fac=function(F){return new(F||A)},A.\u0275prov=l.wxM({token:A,factory:A.\u0275fac}),A})();class on extends Z.gk{constructor(){super(it.c),this.angularDelegate=(0,l.uUt)(Z.kh),this.injector=(0,l.uUt)(l.zZn),this.environmentInjector=(0,l.uUt)(l.SIe)}create(fe){return super.create({...fe,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const ln=(A,fe,F)=>()=>{const le=fe.defaultView;if(le&&typeof window<"u"){(0,We.s)({...A,_zoneGate:Bt=>F.run(Bt)});const Ae="__zone_symbol__addEventListener"in fe.body?"__zone_symbol__addEventListener":"addEventListener";return function Xe(){var A=[];if(typeof window<"u"){var fe=window;(!fe.customElements||fe.Element&&(!fe.Element.prototype.closest||!fe.Element.prototype.matches||!fe.Element.prototype.remove||!fe.Element.prototype.getRootNode))&&A.push(N.e(4448).then(N.t.bind(N,812,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||fe.NodeList&&!fe.NodeList.prototype.forEach||!fe.fetch||!function(){try{var le=new URL("b","http://a");return le.pathname="c%20d","http://a/c%20d"===le.href&&le.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&A.push(N.e(488).then(N.t.bind(N,6304,23)))}return Promise.all(A)}().then(()=>ae(le,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Z.cl,jmp:Bt=>F.runOutsideAngular(Bt),ael(Bt,rr,Si,ii){Bt[Ae](rr,Si,ii)},rel(Bt,rr,Si,ii){Bt.removeEventListener(rr,Si,ii)}}))}};let tr=(()=>{class A{static forRoot(F){return{ngModule:A,providers:[{provide:Z.m2,useValue:F},{provide:l.kZF,useFactory:ln,multi:!0,deps:[Z.m2,ge.Ud,l.WW2]},(0,Z.Al)()]}}}return A.\u0275fac=function(F){return new(F||A)},A.\u0275mod=l.a4G({type:A}),A.\u0275inj=l.s3X({providers:[Z.kh,tn,on],imports:[ge.MD]}),A})()},9252:(mn,st,N)=>{"use strict";N.d(st,{c:()=>l.c});var l=N(8368);l.c.registerVersion("firebase","10.8.0","app-compat")},864:(mn,st,N)=>{"use strict";N.r(st);var l=N(1528),K=N(8368),Z=N(7144),ee=N(9360),Ne=N(5976),ge=N(1316),_e=N(4920);const Qe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Oe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},it=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new Z.UR("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$e=new Ne.YJ("@firebase/auth");function ve(E,...m){$e.logLevel<=Ne.Ge.ERROR&&$e.error(`Auth (${ee.SDK_VERSION}): ${E}`,...m)}function Xe(E,...m){throw te(E,...m)}function et(E,...m){return te(E,...m)}function at(E,m,_){const D=Object.assign(Object.assign({},it()),{[m]:_});return new Z.UR("auth","Firebase",D).create(m,{appName:E.name})}function ae(E,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Xe(E,"argument-error"),at(E,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function te(E,...m){if("string"!=typeof E){const _=m[0],D=[...m.slice(1)];return D[0]&&(D[0].appName=E.name),E._errorFactory.create(_,...D)}return Ge.create(E,...m)}function se(E,m,..._){if(!E)throw te(m,..._)}function L(E){const m="INTERNAL ASSERTION FAILED: "+E;throw ve(m),new Error(m)}function Le(E,m){E||L(m)}function Ce(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Ye(){return"http:"===It()||"https:"===It()}function It(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class nt{constructor(m,_){this.shortDelay=m,this.longDelay=_,Le(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,Z.AV)()||(0,Z.AL)()}get(){return function Wt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ye()||(0,Z.Cc)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function me(E,m){Le(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class he{static initialize(m,_,D){this.fetchImpl=m,_&&(this.headersImpl=_),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void L("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void L("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void L("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fe=new nt(3e4,6e4);function Je(E,m){return E.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:E.tenantId}):m}function De(E,m,_,D){return $t.apply(this,arguments)}function $t(){return($t=(0,l.c)(function*(E,m,_,D,W={}){return Jt(E,W,(0,l.c)(function*(){let ie={},rt={};D&&("GET"===m?rt=D:ie={body:JSON.stringify(D)});const Dt=(0,Z.ik)(Object.assign({key:E.config.apiKey},rt)).slice(1),en=yield E._getAdditionalHeaders();return en["Content-Type"]="application/json",E.languageCode&&(en["X-Firebase-Locale"]=E.languageCode),he.fetch()(Qn(E,E.config.apiHost,_,Dt),Object.assign({method:m,headers:en,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Jt(E,m,_){return dn.apply(this,arguments)}function dn(){return(dn=(0,l.c)(function*(E,m,_){E._canInitEmulator=!1;const D=Object.assign(Object.assign({},ye),m);try{const W=new xt(E),ie=yield Promise.race([_(),W.promise]);W.clearNetworkTimeout();const rt=yield ie.json();if("needConfirmation"in rt)throw ft(E,"account-exists-with-different-credential",rt);if(ie.ok&&!("errorMessage"in rt))return rt;{const Dt=ie.ok?rt.errorMessage:rt.error.message,[en,On]=Dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===en)throw ft(E,"credential-already-in-use",rt);if("EMAIL_EXISTS"===en)throw ft(E,"email-already-in-use",rt);if("USER_DISABLED"===en)throw ft(E,"user-disabled",rt);const Un=D[en]||en.toLowerCase().replace(/[_\s]+/g,"-");if(On)throw at(E,Un,On);Xe(E,Un)}}catch(W){if(W instanceof Z.kx)throw W;Xe(E,"network-request-failed",{message:String(W)})}})).apply(this,arguments)}function Lt(E,m,_,D){return an.apply(this,arguments)}function an(){return(an=(0,l.c)(function*(E,m,_,D,W={}){const ie=yield De(E,m,_,D,W);return"mfaPendingCredential"in ie&&Xe(E,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function Qn(E,m,_,D){const W=`${m}${_}?${D}`;return E.config.emulator?me(E.config,W):`${E.config.apiScheme}://${W}`}function jn(E){switch(E){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xt{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,D)=>{this.timer=setTimeout(()=>D(et(this.auth,"network-request-failed")),Fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ft(E,m,_){const D={appName:E.name};_.email&&(D.email=_.email),_.phoneNumber&&(D.phoneNumber=_.phoneNumber);const W=et(E,m,D);return W.customData._tokenResponse=_,W}function Tt(E){return void 0!==E&&void 0!==E.getResponse}function kt(E){return void 0!==E&&void 0!==E.enterprise}class vn{constructor(m){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=m.recaptchaEnforcementState}getProviderEnforcementState(m){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const _ of this.recaptchaEnforcementState)if(_.provider&&_.provider===m)return jn(_.enforcementState);return null}isProviderEnabled(m){return"ENFORCE"===this.getProviderEnforcementState(m)||"AUDIT"===this.getProviderEnforcementState(m)}}function Qt(){return(Qt=(0,l.c)(function*(E){return(yield De(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Sn(E,m){return xn.apply(this,arguments)}function xn(){return(xn=(0,l.c)(function*(E,m){return De(E,"GET","/v2/recaptchaConfig",Je(E,m))})).apply(this,arguments)}function mr(){return(mr=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Tn(){return(Tn=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Sr(){return(Sr=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function ri(E){if(E)try{const m=new Date(Number(E));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Xt(){return(Xt=(0,l.c)(function*(E,m=!1){const _=(0,Z.Yj)(E),D=yield _.getIdToken(m),W=bt(D);se(W&&W.exp&&W.auth_time&&W.iat,_.auth,"internal-error");const ie="object"==typeof W.firebase?W.firebase:void 0,rt=null==ie?void 0:ie.sign_in_provider;return{claims:W,token:D,authTime:ri(Yt(W.auth_time)),issuedAtTime:ri(Yt(W.iat)),expirationTime:ri(Yt(W.exp)),signInProvider:rt||null,signInSecondFactor:(null==ie?void 0:ie.sign_in_second_factor)||null}})).apply(this,arguments)}function Yt(E){return 1e3*Number(E)}function bt(E){const[m,_,D]=E.split(".");if(void 0===m||void 0===_||void 0===D)return ve("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,Z.WW)(_);return W?JSON.parse(W):(ve("Failed to decode base64 JWT payload"),null)}catch(W){return ve("Caught error parsing JWT payload as JSON",null==W?void 0:W.toString()),null}}function hn(E,m){return nr.apply(this,arguments)}function nr(){return(nr=(0,l.c)(function*(E,m,_=!1){if(_)return m;try{return yield m}catch(D){throw D instanceof Z.kx&&function jr({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(D)&&E.auth.currentUser===E&&(yield E.auth.signOut()),D}})).apply(this,arguments)}class po{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const W=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const D=this.getInterval(m);this.timerId=setTimeout((0,l.c)(function*(){yield _.iteration()}),D)}iteration(){var m=this;return(0,l.c)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null==_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class Xr{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rr(E){return Li.apply(this,arguments)}function Li(){return Li=(0,l.c)(function*(E){var m;const _=E.auth,D=yield E.getIdToken(),W=yield hn(E,function Wn(E,m){return Sr.apply(this,arguments)}(_,{idToken:D}));se(null==W?void 0:W.users.length,_,"internal-error");const ie=W.users[0];E._notifyReloadListener(ie);const rt=null!==(m=ie.providerUserInfo)&&void 0!==m&&m.length?function Rt(E){return E.map(m=>{var{providerId:_}=m,D=(0,ge.sX)(m,["providerId"]);return{providerId:_,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(ie.providerUserInfo):[],Dt=function dt(E,m){return[...E.filter(D=>!m.some(W=>W.providerId===D.providerId)),...m]}(E.providerData,rt),Un=!!E.isAnonymous&&!(E.email&&ie.passwordHash||null!=Dt&&Dt.length),Hn={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:Dt,metadata:new Xr(ie.createdAt,ie.lastLoginAt),isAnonymous:Un};Object.assign(E,Hn)}),Li.apply(this,arguments)}function St(){return(St=(0,l.c)(function*(E){const m=(0,Z.Yj)(E);yield Rr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function ue(){return(ue=(0,l.c)(function*(E,m){const _=yield Jt(E,{},(0,l.c)(function*(){const D=(0,Z.ik)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:W,apiKey:ie}=E.config,rt=Qn(E,W,"/v1/token",`key=${ie}`),Dt=yield E._getAdditionalHeaders();return Dt["Content-Type"]="application/x-www-form-urlencoded",he.fetch()(rt,{method:"POST",headers:Dt,body:D})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}function Ue(){return(Ue=(0,l.c)(function*(E,m){return De(E,"POST","/v2/accounts:revokeToken",Je(E,m))})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){se(m.idToken,"internal-error"),se(typeof m.idToken<"u","internal-error"),se(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function yn(E){const m=bt(E);return se(m,"internal-error"),se(typeof m.exp<"u","internal-error"),se(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var D=this;return(0,l.c)(function*(){return se(!D.accessToken||D.refreshToken,m,"user-token-expired"),_||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(m,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var D=this;return(0,l.c)(function*(){const{accessToken:W,refreshToken:ie,expiresIn:rt}=yield function lt(E,m){return ue.apply(this,arguments)}(m,_);D.updateTokensAndExpiration(W,ie,Number(rt))})()}updateTokensAndExpiration(m,_,D){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(m,_){const{refreshToken:D,accessToken:W,expirationTime:ie}=_,rt=new tt;return D&&(se("string"==typeof D,"internal-error",{appName:m}),rt.refreshToken=D),W&&(se("string"==typeof W,"internal-error",{appName:m}),rt.accessToken=W),ie&&(se("number"==typeof ie,"internal-error",{appName:m}),rt.expirationTime=ie),rt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return L("not implemented")}}function ut(E,m){se("string"==typeof E||typeof E>"u","internal-error",{appName:m})}class pn{constructor(m){var{uid:_,auth:D,stsTokenManager:W}=m,ie=(0,ge.sX)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new po(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=D,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new Xr(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,l.c)(function*(){const D=yield hn(_,_.stsTokenManager.getToken(_.auth,m));return se(D,_.auth,"internal-error"),_.accessToken!==D&&(_.accessToken=D,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),D})()}getIdTokenResult(m){return function Et(E){return Xt.apply(this,arguments)}(this,m)}reload(){return function Yi(E){return St.apply(this,arguments)}(this)}_assign(m){this!==m&&(se(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new pn(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var D=this;return(0,l.c)(function*(){let W=!1;m.idToken&&m.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(m),W=!0),_&&(yield Rr(D)),yield D.auth._persistUserIfCurrent(D),W&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var m=this;return(0,l.c)(function*(){const _=yield m.getIdToken();return yield hn(m,function br(E,m){return mr.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var D,W,ie,rt,Dt,en,On,Un;const Hn=null!==(D=_.displayName)&&void 0!==D?D:void 0,_o=null!==(W=_.email)&&void 0!==W?W:void 0,Ni=null!==(ie=_.phoneNumber)&&void 0!==ie?ie:void 0,Ta=null!==(rt=_.photoURL)&&void 0!==rt?rt:void 0,sl=null!==(Dt=_.tenantId)&&void 0!==Dt?Dt:void 0,Do=null!==(en=_._redirectEventId)&&void 0!==en?en:void 0,Rc=null!==(On=_.createdAt)&&void 0!==On?On:void 0,ca=null!==(Un=_.lastLoginAt)&&void 0!==Un?Un:void 0,{uid:Mc,emailVerified:kd,isAnonymous:Du,providerData:Qc,stsTokenManager:ed}=_;se(Mc&&ed,m,"internal-error");const Ld=tt.fromJSON(this.name,ed);se("string"==typeof Mc,m,"internal-error"),ut(Hn,m.name),ut(_o,m.name),se("boolean"==typeof kd,m,"internal-error"),se("boolean"==typeof Du,m,"internal-error"),ut(Ni,m.name),ut(Ta,m.name),ut(sl,m.name),ut(Do,m.name),ut(Rc,m.name),ut(ca,m.name);const Tu=new pn({uid:Mc,auth:m,email:_o,emailVerified:kd,displayName:Hn,isAnonymous:Du,photoURL:Ta,phoneNumber:Ni,tenantId:sl,stsTokenManager:Ld,createdAt:Rc,lastLoginAt:ca});return Qc&&Array.isArray(Qc)&&(Tu.providerData=Qc.map(bu=>Object.assign({},bu))),Do&&(Tu._redirectEventId=Do),Tu}static _fromIdTokenResponse(m,_,D=!1){return(0,l.c)(function*(){const W=new tt;W.updateFromServerResponse(_);const ie=new pn({uid:_.localId,auth:m,stsTokenManager:W,isAnonymous:D});return yield Rr(ie),ie})()}}const $n=new Map;function qn(E){Le(E instanceof Function,"Expected a class definition");let m=$n.get(E);return m?(Le(m instanceof E,"Instance stored in cache mismatched with class"),m):(m=new E,$n.set(E,m),m)}const Ar=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.c)(function*(){return!0})()}_set(_,D){var W=this;return(0,l.c)(function*(){W.storage[_]=D})()}_get(_){var D=this;return(0,l.c)(function*(){const W=D.storage[_];return void 0===W?null:W})()}_remove(_){var D=this;return(0,l.c)(function*(){delete D.storage[_]})()}_addListener(_,D){}_removeListener(_,D){}}return E.type="NONE",E})();function Br(E,m,_){return`firebase:${E}:${m}:${_}`}class bn{constructor(m,_,D){this.persistence=m,this.auth=_,this.userKey=D;const{config:W,name:ie}=this.auth;this.fullUserKey=Br(this.userKey,W.apiKey,ie),this.fullPersistenceKey=Br("persistence",W.apiKey,ie),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,l.c)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?pn._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,l.c)(function*(){if(_.persistence===m)return;const D=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,D?_.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,D="authUser"){return(0,l.c)(function*(){if(!_.length)return new bn(qn(Ar),m,D);const W=(yield Promise.all(_.map(function(){var On=(0,l.c)(function*(Un){if(yield Un._isAvailable())return Un});return function(Un){return On.apply(this,arguments)}}()))).filter(On=>On);let ie=W[0]||qn(Ar);const rt=Br(D,m.config.apiKey,m.name);let Dt=null;for(const On of _)try{const Un=yield On._get(rt);if(Un){const Hn=pn._fromJSON(m,Un);On!==ie&&(Dt=Hn),ie=On;break}}catch{}const en=W.filter(On=>On._shouldAllowMigration);return ie._shouldAllowMigration&&en.length?(ie=en[0],Dt&&(yield ie._set(rt,Dt.toJSON())),yield Promise.all(_.map(function(){var On=(0,l.c)(function*(Un){if(Un!==ie)try{yield Un._remove(rt)}catch{}});return function(Un){return On.apply(this,arguments)}}())),new bn(ie,m,D)):new bn(ie,m,D)})()}}function Mr(E){const m=E.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(yt(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(so(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Ht(m))return"Blackberry";if(Mn(m))return"Webos";if(Or(m))return"Safari";if((m.includes("chrome/")||hr(m))&&!m.includes("edge/"))return"Chrome";if(vt(m))return"Android";{const D=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function so(E=(0,Z.Su)()){return/firefox\//i.test(E)}function Or(E=(0,Z.Su)()){const m=E.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function hr(E=(0,Z.Su)()){return/crios\//i.test(E)}function yt(E=(0,Z.Su)()){return/iemobile/i.test(E)}function vt(E=(0,Z.Su)()){return/android/i.test(E)}function Ht(E=(0,Z.Su)()){return/blackberry/i.test(E)}function Mn(E=(0,Z.Su)()){return/webos/i.test(E)}function Xn(E=(0,Z.Su)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Vr(E=(0,Z.Su)()){return Xn(E)||vt(E)||Mn(E)||Ht(E)||/windows phone/i.test(E)||yt(E)}function go(E,m=[]){let _;switch(E){case"Browser":_=Mr((0,Z.Su)());break;case"Worker":_=`${Mr((0,Z.Su)())}-${E}`;break;default:_=E}const D=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${ee.SDK_VERSION}/${D}`}class ao{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const D=ie=>new Promise((rt,Dt)=>{try{rt(m(ie))}catch(en){Dt(en)}});D.onAbort=_,this.queue.push(D);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,l.c)(function*(){if(_.auth.currentUser===m)return;const D=[];try{for(const W of _.queue)yield W(m),W.onAbort&&D.push(W.onAbort)}catch(W){D.reverse();for(const ie of D)try{ie()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null==W?void 0:W.message})}})()}}function lo(){return(lo=(0,l.c)(function*(E,m={}){return De(E,"GET","/v2/passwordPolicy",Je(E,m))})).apply(this,arguments)}class Kr{constructor(m){var _,D,W,ie;const rt=m.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(_=rt.minPasswordLength)&&void 0!==_?_:6,rt.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=rt.maxPasswordLength),void 0!==rt.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=rt.containsLowercaseCharacter),void 0!==rt.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=rt.containsUppercaseCharacter),void 0!==rt.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=rt.containsNumericCharacter),void 0!==rt.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=rt.containsNonAlphanumericCharacter),this.enforcementState=m.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(W=null===(D=m.allowedNonAlphanumericCharacters)||void 0===D?void 0:D.join(""))&&void 0!==W?W:"",this.forceUpgradeOnSignin=null!==(ie=m.forceUpgradeOnSignin)&&void 0!==ie&&ie,this.schemaVersion=m.schemaVersion}validatePassword(m){var _,D,W,ie,rt,Dt;const en={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(m,en),this.validatePasswordCharacterOptions(m,en),en.isValid&&(en.isValid=null===(_=en.meetsMinPasswordLength)||void 0===_||_),en.isValid&&(en.isValid=null===(D=en.meetsMaxPasswordLength)||void 0===D||D),en.isValid&&(en.isValid=null===(W=en.containsLowercaseLetter)||void 0===W||W),en.isValid&&(en.isValid=null===(ie=en.containsUppercaseLetter)||void 0===ie||ie),en.isValid&&(en.isValid=null===(rt=en.containsNumericCharacter)||void 0===rt||rt),en.isValid&&(en.isValid=null===(Dt=en.containsNonAlphanumericCharacter)||void 0===Dt||Dt),en}validatePasswordLengthOptions(m,_){const D=this.customStrengthOptions.minPasswordLength,W=this.customStrengthOptions.maxPasswordLength;D&&(_.meetsMinPasswordLength=m.length>=D),W&&(_.meetsMaxPasswordLength=m.length<=W)}validatePasswordCharacterOptions(m,_){let D;this.updatePasswordCharacterOptionsStatuses(_,!1,!1,!1,!1);for(let W=0;W<m.length;W++)D=m.charAt(W),this.updatePasswordCharacterOptionsStatuses(_,D>="a"&&D<="z",D>="A"&&D<="Z",D>="0"&&D<="9",this.allowedNonAlphanumericCharacters.includes(D))}updatePasswordCharacterOptionsStatuses(m,_,D,W,ie){this.customStrengthOptions.containsLowercaseLetter&&(m.containsLowercaseLetter||(m.containsLowercaseLetter=_)),this.customStrengthOptions.containsUppercaseLetter&&(m.containsUppercaseLetter||(m.containsUppercaseLetter=D)),this.customStrengthOptions.containsNumericCharacter&&(m.containsNumericCharacter||(m.containsNumericCharacter=W)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(m.containsNonAlphanumericCharacter||(m.containsNonAlphanumericCharacter=ie))}}class Ir{constructor(m,_,D,W){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=D,this.config=W,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pe(this),this.idTokenSubscription=new Pe(this),this.beforeStateQueue=new ao(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=W.sdkClientVersion}_initializeWithPersistence(m,_){var D=this;return _&&(this._popupRedirectResolver=qn(_)),this._initializationPromise=this.queue((0,l.c)(function*(){var W,ie;if(!D._deleted&&(D.persistenceManager=yield bn.create(D,m),!D._deleted)){if(null!==(W=D._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(_),D.lastNotifiedUid=(null===(ie=D.currentUser)||void 0===ie?void 0:ie.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,l.c)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,l.c)(function*(){var D;const W=yield _.assertedPersistence.getCurrentUser();let ie=W,rt=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Dt=null===(D=_.redirectUser)||void 0===D?void 0:D._redirectEventId,en=null==ie?void 0:ie._redirectEventId,On=yield _.tryRedirectSignIn(m);(!Dt||Dt===en)&&null!=On&&On.user&&(ie=On.user,rt=!0)}if(!ie)return _.directlySetCurrentUser(null);if(!ie._redirectEventId){if(rt)try{yield _.beforeStateQueue.runMiddleware(ie)}catch(Dt){ie=W,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Dt))}return ie?_.reloadAndSetCurrentUserOrClear(ie):_.directlySetCurrentUser(null)}return se(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ie._redirectEventId?_.directlySetCurrentUser(ie):_.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(m){var _=this;return(0,l.c)(function*(){let D=null;try{D=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,l.c)(function*(){try{yield Rr(m)}catch(D){if("auth/network-request-failed"!==(null==D?void 0:D.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function un(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var m=this;return(0,l.c)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,l.c)(function*(){const D=m?(0,Z.Yj)(m):null;return D&&se(D.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(D&&D._clone(_))})()}_updateCurrentUser(m,_=!1){var D=this;return(0,l.c)(function*(){if(!D._deleted)return m&&se(D.tenantId===m.tenantId,D,"tenant-id-mismatch"),_||(yield D.beforeStateQueue.runMiddleware(m)),D.queue((0,l.c)(function*(){yield D.directlySetCurrentUser(m),D.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,l.c)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,l.c)(function*(){yield _.assertedPersistence.setPersistence(qn(m))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(m){var _=this;return(0,l.c)(function*(){_._getPasswordPolicyInternal()||(yield _._updatePasswordPolicy());const D=_._getPasswordPolicyInternal();return D.schemaVersion!==_.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(_._errorFactory.create("unsupported-password-policy-schema-version",{})):D.validatePassword(m)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var m=this;return(0,l.c)(function*(){const _=yield function Hr(E){return lo.apply(this,arguments)}(m),D=new Kr(_);null===m.tenantId?m._projectPasswordPolicy=D:m._tenantPasswordPolicies[m.tenantId]=D})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new Z.UR("auth","Firebase",m())}onAuthStateChanged(m,_,D){return this.registerStateListener(this.authStateSubscription,m,_,D)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,D){return this.registerStateListener(this.idTokenSubscription,m,_,D)}authStateReady(){return new Promise((m,_)=>{if(this.currentUser)m();else{const D=this.onAuthStateChanged(()=>{D(),m()},_)}})}revokeAccessToken(m){var _=this;return(0,l.c)(function*(){if(_.currentUser){const D=yield _.currentUser.getIdToken(),W={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:m,idToken:D};null!=_.tenantId&&(W.tenantId=_.tenantId),yield function Ie(E,m){return Ue.apply(this,arguments)}(_,W)}})()}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var D=this;return(0,l.c)(function*(){const W=yield D.getOrInitRedirectPersistenceManager(_);return null===m?W.removeCurrentUser():W.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,l.c)(function*(){if(!_.redirectPersistenceManager){const D=m&&qn(m)||_._popupRedirectResolver;se(D,_,"argument-error"),_.redirectPersistenceManager=yield bn.create(_,[qn(D._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,l.c)(function*(){var D,W;return _._isInitialized&&(yield _.queue((0,l.c)(function*(){}))),(null===(D=_._currentUser)||void 0===D?void 0:D._redirectEventId)===m?_._currentUser:(null===(W=_.redirectUser)||void 0===W?void 0:W._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,l.c)(function*(){if(m===_.currentUser)return _.queue((0,l.c)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,D,W){if(this._deleted)return()=>{};const ie="function"==typeof _?_:_.next.bind(_);let rt=!1;const Dt=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(Dt,this,"internal-error"),Dt.then(()=>{rt||ie(this.currentUser)}),"function"==typeof _){const en=m.addObserver(_,D,W);return()=>{rt=!0,en()}}{const en=m.addObserver(_);return()=>{rt=!0,en()}}}directlySetCurrentUser(m){var _=this;return(0,l.c)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=go(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,l.c)(function*(){var _;const D={"X-Client-Version":m.clientVersion};m.app.options.appId&&(D["X-Firebase-gmpid"]=m.app.options.appId);const W=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();W&&(D["X-Firebase-Client"]=W);const ie=yield m._getAppCheckToken();return ie&&(D["X-Firebase-AppCheck"]=ie),D})()}_getAppCheckToken(){var m=this;return(0,l.c)(function*(){var _;const D=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return null!=D&&D.error&&function pt(E,...m){$e.logLevel<=Ne.Ge.WARN&&$e.warn(`Auth (${ee.SDK_VERSION}): ${E}`,...m)}(`Error while retrieving App Check token: ${D.error}`),null==D?void 0:D.token})()}}function qr(E){return(0,Z.Yj)(E)}class Pe{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,Z.my)(_=>this.observer=_)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Me={loadJS:()=>(0,l.c)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Te(E){return Me.loadJS(E)}function An(E){return`__${E}${Math.floor(1e6*Math.random())}`}class gi{constructor(m){this.type="recaptcha-enterprise",this.auth=qr(m)}verify(m="verify",_=!1){var D=this;return(0,l.c)(function*(){function ie(){return ie=(0,l.c)(function*(Dt){if(!_){if(null==Dt.tenantId&&null!=Dt._agentRecaptchaConfig)return Dt._agentRecaptchaConfig.siteKey;if(null!=Dt.tenantId&&void 0!==Dt._tenantRecaptchaConfigs[Dt.tenantId])return Dt._tenantRecaptchaConfigs[Dt.tenantId].siteKey}return new Promise(function(){var en=(0,l.c)(function*(On,Un){Sn(Dt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Hn=>{if(void 0!==Hn.recaptchaKey){const _o=new vn(Hn);return null==Dt.tenantId?Dt._agentRecaptchaConfig=_o:Dt._tenantRecaptchaConfigs[Dt.tenantId]=_o,On(_o.siteKey)}Un(new Error("recaptcha Enterprise site key undefined"))}).catch(Hn=>{Un(Hn)})});return function(On,Un){return en.apply(this,arguments)}}())}),ie.apply(this,arguments)}function rt(Dt,en,On){const Un=window.grecaptcha;kt(Un)?Un.enterprise.ready(()=>{Un.enterprise.execute(Dt,{action:m}).then(Hn=>{en(Hn)}).catch(()=>{en("NO_RECAPTCHA")})}):On(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Dt,en)=>{(function W(Dt){return ie.apply(this,arguments)})(D.auth).then(On=>{if(!_&&kt(window.grecaptcha))rt(On,Dt,en);else{if(typeof window>"u")return void en(new Error("RecaptchaVerifier is only supported in browser"));let Un=function jt(){return Me.recaptchaEnterpriseScript}();0!==Un.length&&(Un+=On),Te(Un).then(()=>{rt(On,Dt,en)}).catch(Hn=>{en(Hn)})}}).catch(On=>{en(On)})})})()}}function Ct(E,m,_){return Y.apply(this,arguments)}function Y(){return(Y=(0,l.c)(function*(E,m,_,D=!1){const W=new gi(E);let ie;try{ie=yield W.verify(_)}catch{ie=yield W.verify(_,!0)}const rt=Object.assign({},m);return Object.assign(rt,D?{captchaResp:ie}:{captchaResponse:ie}),Object.assign(rt,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(rt,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),rt})).apply(this,arguments)}function ne(E,m,_,D){return qe.apply(this,arguments)}function qe(){return qe=(0,l.c)(function*(E,m,_,D){var W;if(null!==(W=E._getRecaptchaConfig())&&void 0!==W&&W.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ie=yield Ct(E,m,_,"getOobCode"===_);return D(E,ie)}return D(E,m).catch(function(){var ie=(0,l.c)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log(`${_} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Dt=yield Ct(E,m,_,"getOobCode"===_);return D(E,Dt)}return Promise.reject(rt)});return function(rt){return ie.apply(this,arguments)}}())}),qe.apply(this,arguments)}function tn(E){const m=E.indexOf(":");return m<0?"":E.substr(0,m+1)}function on(E){if(!E)return null;const m=Number(E);return isNaN(m)?null:m}class ln{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return L("not implemented")}_getIdTokenResponse(m){return L("not implemented")}_linkToIdToken(m,_){return L("not implemented")}_getReauthenticationResolver(m){return L("not implemented")}}function En(E,m){return kr.apply(this,arguments)}function kr(){return(kr=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:resetPassword",Je(E,m))})).apply(this,arguments)}function A(){return(A=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function fe(E,m){return F.apply(this,arguments)}function F(){return(F=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:signUp",m)})).apply(this,arguments)}function Ae(){return(Ae=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:update",Je(E,m))})).apply(this,arguments)}function Bt(E,m){return rr.apply(this,arguments)}function rr(){return(rr=(0,l.c)(function*(E,m){return Lt(E,"POST","/v1/accounts:signInWithPassword",Je(E,m))})).apply(this,arguments)}function Si(E,m){return ii.apply(this,arguments)}function ii(){return(ii=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:sendOobCode",Je(E,m))})).apply(this,arguments)}function Yo(){return(Yo=(0,l.c)(function*(E,m){return Si(E,m)})).apply(this,arguments)}function oi(E,m){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,l.c)(function*(E,m){return Si(E,m)})).apply(this,arguments)}function co(E,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,l.c)(function*(E,m){return Si(E,m)})).apply(this,arguments)}function vs(){return(vs=(0,l.c)(function*(E,m){return Si(E,m)})).apply(this,arguments)}function yi(){return(yi=(0,l.c)(function*(E,m){return Lt(E,"POST","/v1/accounts:signInWithEmailLink",Je(E,m))})).apply(this,arguments)}function vo(){return(vo=(0,l.c)(function*(E,m){return Lt(E,"POST","/v1/accounts:signInWithEmailLink",Je(E,m))})).apply(this,arguments)}class $i extends ln{constructor(m,_,D,W=null){super("password",D),this._email=m,this._password=_,this._tenantId=W}static _fromEmailAndPassword(m,_){return new $i(m,_,"password")}static _fromEmailAndCode(m,_,D=null){return new $i(m,_,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(null!=_&&_.email&&null!=_&&_.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,l.c)(function*(){switch(_.signInMethod){case"password":return ne(m,{returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bt);case"emailLink":return function zs(E,m){return yi.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Xe(m,"internal-error")}})()}_linkToIdToken(m,_){var D=this;return(0,l.c)(function*(){switch(D.signInMethod){case"password":return ne(m,{idToken:_,returnSecureToken:!0,email:D._email,password:D._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fe);case"emailLink":return function ys(E,m){return vo.apply(this,arguments)}(m,{idToken:_,email:D._email,oobCode:D._password});default:Xe(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Qi(E,m){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,l.c)(function*(E,m){return Lt(E,"POST","/v1/accounts:signInWithIdp",Je(E,m))})).apply(this,arguments)}class Lr extends ln{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Lr(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:W}=_,ie=(0,ge.sX)(_,["providerId","signInMethod"]);if(!D||!W)return null;const rt=new Lr(D,W);return rt.idToken=ie.idToken||void 0,rt.accessToken=ie.accessToken||void 0,rt.secret=ie.secret,rt.nonce=ie.nonce,rt.pendingToken=ie.pendingToken||null,rt}_getIdTokenResponse(m){return Qi(m,this.buildRequest())}_linkToIdToken(m,_){const D=this.buildRequest();return D.idToken=_,Qi(m,D)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Qi(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,Z.ik)(_)}return m}}function cr(){return(cr=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:sendVerificationCode",Je(E,m))})).apply(this,arguments)}function Qo(){return(Qo=(0,l.c)(function*(E,m){return Lt(E,"POST","/v1/accounts:signInWithPhoneNumber",Je(E,m))})).apply(this,arguments)}function pa(){return(pa=(0,l.c)(function*(E,m){const _=yield Lt(E,"POST","/v1/accounts:signInWithPhoneNumber",Je(E,m));if(_.temporaryProof)throw ft(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const eo={USER_NOT_FOUND:"user-not-found"};function os(){return(os=(0,l.c)(function*(E,m){return Lt(E,"POST","/v1/accounts:signInWithPhoneNumber",Je(E,Object.assign(Object.assign({},m),{operation:"REAUTH"})),eo)})).apply(this,arguments)}class Ai extends ln{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Ai({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Ai({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function yo(E,m){return Qo.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Ii(E,m){return pa.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function uo(E,m){return os.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:D,verificationCode:W}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:D,code:W}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:D,phoneNumber:W,temporaryProof:ie}=m;return D||_||W||ie?new Ai({verificationId:_,verificationCode:D,phoneNumber:W,temporaryProof:ie}):null}}class Lo{constructor(m){var _,D,W,ie,rt,Dt;const en=(0,Z.aw)((0,Z.kF)(m)),On=null!==(_=en.apiKey)&&void 0!==_?_:null,Un=null!==(D=en.oobCode)&&void 0!==D?D:null,Hn=function Vi(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=en.mode)&&void 0!==W?W:null);se(On&&Un&&Hn,"argument-error"),this.apiKey=On,this.operation=Hn,this.code=Un,this.continueUrl=null!==(ie=en.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(rt=en.languageCode)&&void 0!==rt?rt:null,this.tenantId=null!==(Dt=en.tenantId)&&void 0!==Dt?Dt:null}static parseLink(m){const _=function ga(E){const m=(0,Z.aw)((0,Z.kF)(E)).link,_=m?(0,Z.aw)((0,Z.kF)(m)).deep_link_id:null,D=(0,Z.aw)((0,Z.kF)(E)).deep_link_id;return(D?(0,Z.aw)((0,Z.kF)(D)).link:null)||D||_||m||E}(m);try{return new Lo(_)}catch{return null}}}let Ei=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,D){return $i._fromEmailAndPassword(_,D)}static credentialWithLink(_,D){const W=Lo.parseLink(D);return se(W,"argument-error"),$i._fromEmailAndCode(_,W.code,W.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class to{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ls extends to{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ss extends Ls{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return se("providerId"in _&&"signInMethod"in _,"argument-error"),Lr._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return se(m.idToken||m.accessToken,"argument-error"),Lr._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ss.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ss.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:D,oauthTokenSecret:W,pendingToken:ie,nonce:rt,providerId:Dt}=m;if(!D&&!W&&!_&&!ie||!Dt)return null;try{return new ss(Dt)._credential({idToken:_,accessToken:D,nonce:rt,pendingToken:ie})}catch{return null}}}let hl=(()=>{class E extends Ls{constructor(){super("facebook.com")}static credential(_){return Lr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),fl=(()=>{class E extends Ls{constructor(){super("google.com"),this.addScope("profile")}static credential(_,D){return Lr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:D})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:D,oauthAccessToken:W}=_;if(!D&&!W)return null;try{return E.credential(D,W)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),mi=(()=>{class E extends Ls{constructor(){super("github.com")}static credential(_){return Lr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Es extends ln{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Qi(m,this.buildRequest())}_linkToIdToken(m,_){const D=this.buildRequest();return D.idToken=_,Qi(m,D)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Qi(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:W,pendingToken:ie}=_;return D&&W&&ie&&D===W?new Es(D,ie):null}static _create(m,_){return new Es(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ra extends to{constructor(m){se(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Ra.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Ra.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Es.fromJSON(m);return se(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:D}=m;if(!_||!D)return null;try{return Es._create(D,_)}catch{return null}}}let as=(()=>{class E extends Ls{constructor(){super("twitter.com")}static credential(_,D){return Lr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:D})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:D,oauthTokenSecret:W}=_;if(!D||!W)return null;try{return E.credential(D,W)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Xo(E,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,l.c)(function*(E,m){return Lt(E,"POST","/v1/accounts:signUp",Je(E,m))})).apply(this,arguments)}class dr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,D,W=!1){return(0,l.c)(function*(){const ie=yield pn._fromIdTokenResponse(m,D,W),rt=ma(D);return new dr({user:ie,providerId:rt,_tokenResponse:D,operationType:_})})()}static _forOperation(m,_,D){return(0,l.c)(function*(){yield m._updateTokensIfNecessary(D,!0);const W=ma(D);return new dr({user:m,providerId:W,_tokenResponse:D,operationType:_})})()}}function ma(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function qa(){return(qa=(0,l.c)(function*(E){var m;const _=qr(E);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new dr({user:_.currentUser,providerId:null,operationType:"signIn"});const D=yield Xo(_,{returnSecureToken:!0}),W=yield dr._fromIdTokenResponse(_,"signIn",D,!0);return yield _._updateCurrentUser(W.user),W})).apply(this,arguments)}class Ri extends Z.kx{constructor(m,_,D,W){var ie;super(_.code,_.message),this.operationType=D,this.user=W,Object.setPrototypeOf(this,Ri.prototype),this.customData={appName:m.name,tenantId:null!==(ie=m.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:_.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(m,_,D,W){return new Ri(m,_,D,W)}}function pl(E,m,_,D){return("reauthenticate"===m?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?Ri._fromErrorAndOperation(E,ie,m,D):ie})}function Pa(E){return new Set(E.map(({providerId:m})=>m).filter(m=>!!m))}function V(){return V=(0,l.c)(function*(E,m){const _=(0,Z.Yj)(E);yield Se(!0,_,m);const{providerUserInfo:D}=yield function Cr(E,m){return Tn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),W=Pa(D||[]);return _.providerData=_.providerData.filter(ie=>W.has(ie.providerId)),W.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),V.apply(this,arguments)}function ce(E,m){return H.apply(this,arguments)}function H(){return(H=(0,l.c)(function*(E,m,_=!1){const D=yield hn(E,m._linkToIdToken(E.auth,yield E.getIdToken()),_);return dr._forOperation(E,"link",D)})).apply(this,arguments)}function Se(E,m,_){return _n.apply(this,arguments)}function _n(){return(_n=(0,l.c)(function*(E,m,_){yield Rr(m);const W=!1===E?"provider-already-linked":"no-such-provider";se(Pa(m.providerData).has(_)===E,m.auth,W)})).apply(this,arguments)}function Pn(E,m){return _i.apply(this,arguments)}function _i(){return(_i=(0,l.c)(function*(E,m,_=!1){const{auth:D}=E,W="reauthenticate";try{const ie=yield hn(E,pl(D,W,m,E),_);se(ie.idToken,D,"internal-error");const rt=bt(ie.idToken);se(rt,D,"internal-error");const{sub:Dt}=rt;return se(E.uid===Dt,D,"user-mismatch"),dr._forOperation(E,W,ie)}catch(ie){throw"auth/user-not-found"===(null==ie?void 0:ie.code)&&Xe(D,"user-mismatch"),ie}})).apply(this,arguments)}function zo(E,m){return cs.apply(this,arguments)}function cs(){return(cs=(0,l.c)(function*(E,m,_=!1){const D="signIn",W=yield pl(E,D,m),ie=yield dr._fromIdTokenResponse(E,D,W);return _||(yield E._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function Fr(E,m){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,l.c)(function*(E,m){return zo(qr(E),m)})).apply(this,arguments)}function Fo(E,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,l.c)(function*(E,m){const _=(0,Z.Yj)(E);return yield Se(!1,_,m.providerId),ce(_,m)})).apply(this,arguments)}function cc(E,m){return qs.apply(this,arguments)}function qs(){return(qs=(0,l.c)(function*(E,m){return Pn((0,Z.Yj)(E),m)})).apply(this,arguments)}function Xi(){return(Xi=(0,l.c)(function*(E,m){return Lt(E,"POST","/v1/accounts:signInWithCustomToken",Je(E,m))})).apply(this,arguments)}function xa(){return xa=(0,l.c)(function*(E,m){const _=qr(E),D=yield function Ys(E,m){return Xi.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),W=yield dr._fromIdTokenResponse(_,"signIn",D);return yield _._updateCurrentUser(W.user),W}),xa.apply(this,arguments)}class Cs{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ko._fromServerResponse(m,_):"totpInfo"in _?Zo._fromServerResponse(m,_):Xe(m,"internal-error")}}class Ko extends Cs{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ko(_)}}class Zo extends Cs{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new Zo(_)}}function Fs(E,m,_){var D;se((null===(D=_.url)||void 0===D?void 0:D.length)>0,E,"invalid-continue-uri"),se(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(se(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(se(_.android.packageName.length>0,E,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Ya(E){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,l.c)(function*(E){const m=qr(E);m._getPasswordPolicyInternal()&&(yield m._updatePasswordPolicy())})).apply(this,arguments)}function _a(){return(_a=(0,l.c)(function*(E,m,_){const D=qr(E),W={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};_&&Fs(D,W,_),yield ne(D,W,"getOobCode",oi)})).apply(this,arguments)}function Xa(){return Xa=(0,l.c)(function*(E,m,_){yield En((0,Z.Yj)(E),{oobCode:m,newPassword:_}).catch(function(){var D=(0,l.c)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&Ya(E),W});return function(W){return D.apply(this,arguments)}}())}),Xa.apply(this,arguments)}function ur(){return ur=(0,l.c)(function*(E,m){yield function le(E,m){return Ae.apply(this,arguments)}((0,Z.Yj)(E),{oobCode:m})}),ur.apply(this,arguments)}function Vo(E,m){return zl.apply(this,arguments)}function zl(){return(zl=(0,l.c)(function*(E,m){const _=(0,Z.Yj)(E),D=yield En(_,{oobCode:m}),W=D.requestType;switch(se(W,_,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(D.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(D.mfaInfo,_,"internal-error");default:se(D.email,_,"internal-error")}let ie=null;return D.mfaInfo&&(ie=Cs._fromServerResponse(qr(_),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:ie},operation:W}})).apply(this,arguments)}function ml(){return(ml=(0,l.c)(function*(E,m){const{data:_}=yield Vo((0,Z.Yj)(E),m);return _.email})).apply(this,arguments)}function ya(){return(ya=(0,l.c)(function*(E,m,_){const D=qr(E),rt=yield ne(D,{returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xo).catch(en=>{throw"auth/password-does-not-meet-requirements"===en.code&&Ya(E),en}),Dt=yield dr._fromIdTokenResponse(D,"signIn",rt);return yield D._updateCurrentUser(Dt.user),Dt})).apply(this,arguments)}function no(){return(no=(0,l.c)(function*(E,m,_){const D=qr(E),W={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};(function ie(rt,Dt){se(Dt.handleCodeInApp,D,"argument-error"),Dt&&Fs(D,rt,Dt)})(W,_),yield ne(D,W,"getOobCode",co)})).apply(this,arguments)}function ws(){return(ws=(0,l.c)(function*(E,m,_){const D=(0,Z.Yj)(E),W=Ei.credentialWithLink(m,_||Ce());return se(W._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Fr(D,W)})).apply(this,arguments)}function vr(){return(vr=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:createAuthUri",Je(E,m))})).apply(this,arguments)}function zr(){return zr=(0,l.c)(function*(E,m){const D={identifier:m,continueUri:Ye()?Ce():"http://localhost"},{signinMethods:W}=yield function zt(E,m){return vr.apply(this,arguments)}((0,Z.Yj)(E),D);return W||[]}),zr.apply(this,arguments)}function Ea(){return Ea=(0,l.c)(function*(E,m){const _=(0,Z.Yj)(E),W={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};m&&Fs(_.auth,W,m);const{email:ie}=yield function Zr(E,m){return Yo.apply(this,arguments)}(_.auth,W);ie!==E.email&&(yield E.reload())}),Ea.apply(this,arguments)}function Uo(){return Uo=(0,l.c)(function*(E,m,_){const D=(0,Z.Yj)(E),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:m};_&&Fs(D.auth,ie,_);const{email:rt}=yield function is(E,m){return vs.apply(this,arguments)}(D.auth,ie);rt!==E.email&&(yield E.reload())}),Uo.apply(this,arguments)}function si(){return(si=(0,l.c)(function*(E,m){return De(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ds(){return Ds=(0,l.c)(function*(E,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const D=(0,Z.Yj)(E),ie={idToken:yield D.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},rt=yield hn(D,function _l(E,m){return si.apply(this,arguments)}(D.auth,ie));D.displayName=rt.displayName||null,D.photoURL=rt.photoUrl||null;const Dt=D.providerData.find(({providerId:en})=>"password"===en);Dt&&(Dt.displayName=D.displayName,Dt.photoURL=D.photoURL),yield D._updateTokensIfNecessary(rt)}),Ds.apply(this,arguments)}function vi(E,m,_){return ds.apply(this,arguments)}function ds(){return ds=(0,l.c)(function*(E,m,_){const{auth:D}=E,ie={idToken:yield E.getIdToken(),returnSecureToken:!0};m&&(ie.email=m),_&&(ie.password=_);const rt=yield hn(E,function tr(E,m){return A.apply(this,arguments)}(D,ie));yield E._updateTokensIfNecessary(rt,!0)}),ds.apply(this,arguments)}class b{constructor(m,_,D={}){this.isNewUser=m,this.providerId=_,this.profile=D}}class G extends b{constructor(m,_,D,W){super(m,_,D),this.username=W}}class Re extends b{constructor(m,_){super(m,"facebook.com",_)}}class $ extends G{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class pe extends b{constructor(m,_){super(m,"google.com",_)}}class ze extends G{constructor(m,_,D){super(m,"twitter.com",_,D)}}function Ut(E){const{user:m,_tokenResponse:_}=E;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Bo(E){var m,_;if(!E)return null;const{providerId:D}=E,W=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},ie=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!D&&null!=E&&E.idToken){const rt=null===(_=null===(m=bt(E.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(rt)return new b(ie,"anonymous"!==rt&&"custom"!==rt?rt:null)}if(!D)return null;switch(D){case"facebook.com":return new Re(ie,W);case"github.com":return new $(ie,W);case"google.com":return new pe(ie,W);case"twitter.com":return new ze(ie,W,E.screenName||null);case"custom":case"anonymous":return new b(ie,null);default:return new b(ie,D,W)}}(_)}class wr{constructor(m,_,D){this.type=m,this.credential=_,this.user=D}static _fromIdtoken(m,_){return new wr("enroll",m,_)}static _fromMfaPendingCredential(m){return new wr("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,D;if(null!=m&&m.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return wr._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(D=m.multiFactorSession)&&void 0!==D&&D.idToken)return wr._fromIdtoken(m.multiFactorSession.idToken)}return null}}class sn{constructor(m,_,D){this.session=m,this.hints=_,this.signInResolver=D}static _fromError(m,_){const D=qr(m),W=_.customData._serverResponse,ie=(W.mfaInfo||[]).map(Dt=>Cs._fromServerResponse(D,Dt));se(W.mfaPendingCredential,D,"internal-error");const rt=wr._fromMfaPendingCredential(W.mfaPendingCredential);return new sn(rt,ie,function(){var Dt=(0,l.c)(function*(en){const On=yield en._process(D,rt);delete W.mfaInfo,delete W.mfaPendingCredential;const Un=Object.assign(Object.assign({},W),{idToken:On.idToken,refreshToken:On.refreshToken});switch(_.operationType){case"signIn":const Hn=yield dr._fromIdTokenResponse(D,_.operationType,Un);return yield D._updateCurrentUser(Hn.user),Hn;case"reauthenticate":return se(_.user,D,"internal-error"),dr._forOperation(_.user,_.operationType,Un);default:Xe(D,"internal-error")}});return function(en){return Dt.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,l.c)(function*(){return _.signInResolver(m)})()}}class Rn{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(D=>Cs._fromServerResponse(m.auth,D)))})}static _fromUser(m){return new Rn(m)}getSession(){var m=this;return(0,l.c)(function*(){return wr._fromIdtoken(yield m.user.getIdToken(),m.user)})()}enroll(m,_){var D=this;return(0,l.c)(function*(){const W=m,ie=yield D.getSession(),rt=yield hn(D.user,W._process(D.user.auth,ie,_));return yield D.user._updateTokensIfNecessary(rt),D.user.reload()})()}unenroll(m){var _=this;return(0,l.c)(function*(){const D="string"==typeof m?m:m.uid,W=yield _.user.getIdToken();try{const ie=yield hn(_.user,function vl(E,m){return De(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Je(E,m))}(_.user.auth,{idToken:W,mfaEnrollmentId:D}));_.enrolledFactors=_.enrolledFactors.filter(({uid:rt})=>rt!==D),yield _.user._updateTokensIfNecessary(ie),yield _.user.reload()}catch(ie){throw ie}})()}}const Ot=new WeakMap,ei="__sak";class kc{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ei,"1"),this.storage.removeItem(ei),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Js=(()=>{class E extends kc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,D)=>this.onStorageEvent(_,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ah(){const E=(0,Z.Su)();return Or(E)||Xn(E)}()&&function Gr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const D of Object.keys(this.listeners)){const W=this.storage.getItem(D),ie=this.localCache[D];W!==ie&&_(D,ie,W)}}onStorageEvent(_,D=!1){if(!_.key)return void this.forAllChangedKeys((Dt,en,On)=>{this.notifyListeners(Dt,On)});const W=_.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Dt=this.storage.getItem(W);if(_.newValue!==Dt)null!==_.newValue?this.storage.setItem(W,_.newValue):this.storage.removeItem(W);else if(this.localCache[W]===_.newValue&&!D)return}const ie=()=>{const Dt=this.storage.getItem(W);!D&&this.localCache[W]===Dt||this.notifyListeners(W,Dt)},rt=this.storage.getItem(W);!function $r(){return(0,Z.Uv)()&&10===document.documentMode}()||rt===_.newValue||_.newValue===_.oldValue?ie():setTimeout(ie,10)}notifyListeners(_,D){this.localCache[_]=D;const W=this.listeners[_];if(W)for(const ie of Array.from(W))ie(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,D,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:D,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,D){var W=()=>super._set,ie=this;return(0,l.c)(function*(){yield W().call(ie,_,D),ie.localCache[_]=JSON.stringify(D)})()}_get(_){var D=()=>super._get,W=this;return(0,l.c)(function*(){const ie=yield D().call(W,_);return W.localCache[_]=JSON.stringify(ie),ie})()}_remove(_){var D=()=>super._remove,W=this;return(0,l.c)(function*(){yield D().call(W,_),delete W.localCache[_]})()}}return E.type="LOCAL",E})(),ea=(()=>{class E extends kc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,D){}_removeListener(_,D){}}return E.type="SESSION",E})();let xu=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const D=this.receivers.find(ie=>ie.isListeningto(_));if(D)return D;const W=new E(_);return this.receivers.push(W),W}isListeningto(_){return this.eventTarget===_}handleEvent(_){var D=this;return(0,l.c)(function*(){const W=_,{eventId:ie,eventType:rt,data:Dt}=W.data,en=D.handlersMap[rt];if(null==en||!en.size)return;W.ports[0].postMessage({status:"ack",eventId:ie,eventType:rt});const On=Array.from(en).map(function(){var Hn=(0,l.c)(function*(_o){return _o(W.origin,Dt)});return function(_o){return Hn.apply(this,arguments)}}()),Un=yield function zh(E){return Promise.all(E.map(function(){var m=(0,l.c)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(D){return{fulfilled:!1,reason:D}}});return function(_){return m.apply(this,arguments)}}()))}(On);W.ports[0].postMessage({status:"done",eventId:ie,eventType:rt,response:Un})})()}_subscribe(_,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(D)}_unsubscribe(_,D){this.handlersMap[_]&&D&&this.handlersMap[_].delete(D),(!D||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Ja(E="",m=10){let _="";for(let D=0;D<m;D++)_+=Math.floor(10*Math.random());return E+_}class or{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,D=50){var W=this;return(0,l.c)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let rt,Dt;return new Promise((en,On)=>{const Un=Ja("",20);ie.port1.start();const Hn=setTimeout(()=>{On(new Error("unsupported_event"))},D);Dt={messageChannel:ie,onMessage(_o){const Ni=_o;if(Ni.data.eventId===Un)switch(Ni.data.status){case"ack":clearTimeout(Hn),rt=setTimeout(()=>{On(new Error("timeout"))},3e3);break;case"done":clearTimeout(rt),en(Ni.data.response);break;default:clearTimeout(Hn),clearTimeout(rt),On(new Error("invalid_response"))}}},W.handlers.add(Dt),ie.port1.addEventListener("message",Dt.onMessage),W.target.postMessage({eventType:m,eventId:Un,data:_},[ie.port2])}).finally(()=>{Dt&&W.removeMessageHandler(Dt)})})()}}function ji(){return window}function ro(){return typeof ji().WorkerGlobalScope<"u"&&"function"==typeof ji().importScripts}function yl(){return(yl=(0,l.c)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wi="firebaseLocalStorageDb",ta="firebaseLocalStorage",El="fbase_key";class hs{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Oa(E,m){return E.transaction([ta],m?"readwrite":"readonly").objectStore(ta)}function na(){const E=indexedDB.open(Wi,1);return new Promise((m,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const D=E.result;try{D.createObjectStore(ta,{keyPath:El})}catch(W){_(W)}}),E.addEventListener("success",(0,l.c)(function*(){const D=E.result;D.objectStoreNames.contains(ta)?m(D):(D.close(),yield function el(){const E=indexedDB.deleteDatabase(Wi);return new hs(E).toPromise()}(),m(yield na()))}))})}function Di(E,m,_){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,l.c)(function*(E,m,_){const D=Oa(E,!0).put({[El]:m,value:_});return new hs(D).toPromise()})).apply(this,arguments)}function Go(){return(Go=(0,l.c)(function*(E,m){const _=Oa(E,!1).get(m),D=yield new hs(_).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function cu(E,m){const _=Oa(E,!0).delete(m);return new hs(_).toPromise()}const P=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,l.c)(function*(){return _.db||(_.db=yield na()),_.db})()}_withRetries(_){var D=this;return(0,l.c)(function*(){let W=0;for(;;)try{const ie=yield D._openDb();return yield _(ie)}catch(ie){if(W++>3)throw ie;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,l.c)(function*(){return ro()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,l.c)(function*(){_.receiver=xu._getInstance(function Il(){return ro()?self:null}()),_.receiver._subscribe("keyChanged",function(){var D=(0,l.c)(function*(W,ie){return{keyProcessed:(yield _._poll()).includes(ie.key)}});return function(W,ie){return D.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var D=(0,l.c)(function*(W,ie){return["keyChanged"]});return function(W,ie){return D.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,l.c)(function*(){var D,W;if(_.activeServiceWorker=yield function ir(){return yl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new or(_.activeServiceWorker);const ie=yield _.sender._send("ping",{},800);ie&&null!==(D=ie[0])&&void 0!==D&&D.fulfilled&&null!==(W=ie[0])&&void 0!==W&&W.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var D=this;return(0,l.c)(function*(){if(D.sender&&D.activeServiceWorker&&function ti(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:_},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.c)(function*(){try{if(!indexedDB)return!1;const _=yield na();return yield Di(_,ei,"1"),yield cu(_,ei),!0}catch{}return!1})()}_withPendingWrite(_){var D=this;return(0,l.c)(function*(){D.pendingWrites++;try{yield _()}finally{D.pendingWrites--}})()}_set(_,D){var W=this;return(0,l.c)(function*(){return W._withPendingWrite((0,l.c)(function*(){return yield W._withRetries(ie=>Di(ie,_,D)),W.localCache[_]=D,W.notifyServiceWorker(_)}))})()}_get(_){var D=this;return(0,l.c)(function*(){const W=yield D._withRetries(ie=>function Yl(E,m){return Go.apply(this,arguments)}(ie,_));return D.localCache[_]=W,W})()}_remove(_){var D=this;return(0,l.c)(function*(){return D._withPendingWrite((0,l.c)(function*(){return yield D._withRetries(W=>cu(W,_)),delete D.localCache[_],D.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,l.c)(function*(){const D=yield _._withRetries(rt=>{const Dt=Oa(rt,!1).getAll();return new hs(Dt).toPromise()});if(!D)return[];if(0!==_.pendingWrites)return[];const W=[],ie=new Set;if(0!==D.length)for(const{fbase_key:rt,value:Dt}of D)ie.add(rt),JSON.stringify(_.localCache[rt])!==JSON.stringify(Dt)&&(_.notifyListeners(rt,Dt),W.push(rt));for(const rt of Object.keys(_.localCache))_.localCache[rt]&&!ie.has(rt)&&(_.notifyListeners(rt,null),W.push(rt));return W})()}notifyListeners(_,D){this.localCache[_]=D;const W=this.listeners[_];if(W)for(const ie of Array.from(W))ie(D)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,l.c)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),mt=1e12;class fn{constructor(m){this.auth=m,this.counter=mt,this._widgets=new Map}render(m,_){const D=this.counter;return this._widgets.set(D,new wt(m,this.auth.name,_||{})),this.counter++,D}reset(m){var _;const D=m||mt;null===(_=this._widgets.get(D))||void 0===_||_.delete(),this._widgets.delete(D)}getResponse(m){var _;return(null===(_=this._widgets.get(m||mt))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,l.c)(function*(){var D;return null===(D=_._widgets.get(m||mt))||void 0===D||D.execute(),""})()}}class wt{constructor(m,_,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof m?document.getElementById(m):m;se(W,"argument-error",{appName:_}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ln(E){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<E;D++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yr=An("rcb"),Ti=new nt(3e4,6e4);class ci{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=ji().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return se(function Bi(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Tt(ji().grecaptcha)?Promise.resolve(ji().grecaptcha):new Promise((D,W)=>{const ie=ji().setTimeout(()=>{W(et(m,"network-request-failed"))},Ti.get());ji()[yr]=()=>{ji().clearTimeout(ie),delete ji()[yr];const Dt=ji().grecaptcha;if(!Dt||!Tt(Dt))return void W(et(m,"internal-error"));const en=Dt.render;Dt.render=(On,Un)=>{const Hn=en(On,Un);return this.counter++,Hn},this.hostLanguage=_,D(Dt)},Te(`${function gt(){return Me.recaptchaV2Script}()}?${(0,Z.ik)({onload:yr,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ie),W(et(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=ji().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ra{load(m){return(0,l.c)(function*(){return new fn(m)})()}clearedOneInstance(){}}const bs="recaptcha",ar={theme:"light",type:"image"};class io{constructor(m,_,D=Object.assign({},ar)){this.parameters=D,this.type=bs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qr(m),this.isInvisible="invisible"===this.parameters.size,se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof _?document.getElementById(_):_;se(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ra:new ci,this.validateStartingState()}verify(){var m=this;return(0,l.c)(function*(){m.assertNotDestroyed();const _=yield m.render(),D=m.getAssertedRecaptcha();return D.getResponse(_)||new Promise(ie=>{const rt=Dt=>{Dt&&(m.tokenChangeListeners.delete(rt),ie(Dt))};m.tokenChangeListeners.add(rt),m.isInvisible&&D.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(D=>D(_)),"function"==typeof m)m(_);else if("string"==typeof m){const D=ji()[m];"function"==typeof D&&D(_)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,l.c)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const D=document.createElement("div");_.appendChild(D),_=D}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,l.c)(function*(){se(Ye()&&!ro(),m.auth,"internal-error"),yield function Cl(){let E=null;return new Promise(m=>{"complete"!==document.readyState?(E=()=>m(),window.addEventListener("load",E)):m()}).catch(m=>{throw E&&window.removeEventListener("load",E),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ft(E){return Qt.apply(this,arguments)}(m.auth);se(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tl{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Ai._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Lc(){return(Lc=(0,l.c)(function*(E,m,_){const D=qr(E),W=yield fc(D,m,(0,Z.Yj)(_));return new tl(W,ie=>Fr(D,ie))})).apply(this,arguments)}function hc(){return(hc=(0,l.c)(function*(E,m,_){const D=(0,Z.Yj)(E);yield Se(!1,D,"phone");const W=yield fc(D.auth,m,(0,Z.Yj)(_));return new tl(W,ie=>Fo(D,ie))})).apply(this,arguments)}function Dd(){return(Dd=(0,l.c)(function*(E,m,_){const D=(0,Z.Yj)(E),W=yield fc(D.auth,m,(0,Z.Yj)(_));return new tl(W,ie=>cc(D,ie))})).apply(this,arguments)}function fc(E,m,_){return uu.apply(this,arguments)}function uu(){return uu=(0,l.c)(function*(E,m,_){var D;const W=yield _.verify();try{let ie;if(se("string"==typeof W,E,"argument-error"),se(_.type===bs,E,"argument-error"),ie="string"==typeof m?{phoneNumber:m}:m,"session"in ie){const rt=ie.session;if("phoneNumber"in ie)return se("enroll"===rt.type,E,"internal-error"),(yield function $o(E,m){return De(E,"POST","/v2/accounts/mfaEnrollment:start",Je(E,m))}(E,{idToken:rt.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{se("signin"===rt.type,E,"internal-error");const Dt=(null===(D=ie.multiFactorHint)||void 0===D?void 0:D.uid)||ie.multiFactorUid;return se(Dt,E,"missing-multi-factor-info"),(yield function M(E,m){return De(E,"POST","/v2/accounts/mfaSignIn:start",Je(E,m))}(E,{mfaPendingCredential:rt.credential,mfaEnrollmentId:Dt,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:rt}=yield function Ro(E,m){return cr.apply(this,arguments)}(E,{phoneNumber:ie.phoneNumber,recaptchaToken:W});return rt}}finally{_._reset()}}),uu.apply(this,arguments)}function Dr(){return(Dr=(0,l.c)(function*(E,m){yield ce((0,Z.Yj)(E),m)})).apply(this,arguments)}let ui=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=qr(_)}verifyPhoneNumber(_,D){return fc(this.auth,_,(0,Z.Yj)(D))}static credential(_,D){return Ai._fromVerification(_,D)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:D,temporaryProof:W}=_;return D&&W?Ai._fromTokenResponse(D,W):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Fc(E,m){return m?qn(m):(se(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class pc extends ln{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Qi(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Qi(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Qi(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function qh(E){return zo(E.auth,new pc(E),E.bypassAuthState)}function ap(E){const{auth:m,user:_}=E;return se(_,m,"internal-error"),Pn(_,new pc(E),E.bypassAuthState)}function Yh(E){return gc.apply(this,arguments)}function gc(){return(gc=(0,l.c)(function*(E){const{auth:m,user:_}=E;return se(_,m,"internal-error"),ce(_,new pc(E),E.bypassAuthState)})).apply(this,arguments)}class Vc{constructor(m,_,D,W,ie=!1){this.auth=m,this.resolver=D,this.user=W,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,l.c)(function*(D,W){m.pendingPromise={resolve:D,reject:W};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(ie){m.reject(ie)}});return function(D,W){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,l.c)(function*(){const{urlResponse:D,sessionId:W,postBody:ie,tenantId:rt,error:Dt,type:en}=m;if(Dt)return void _.reject(Dt);const On={auth:_.auth,requestUri:D,sessionId:W,tenantId:rt||void 0,postBody:ie||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(en)(On))}catch(Un){_.reject(Un)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return qh;case"linkViaPopup":case"linkViaRedirect":return Yh;case"reauthViaPopup":case"reauthViaRedirect":return ap;default:Xe(this.auth,"internal-error")}}resolve(m){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lh=new nt(2e3,1e4);function Lu(){return(Lu=(0,l.c)(function*(E,m,_){const D=qr(E);ae(E,m,to);const W=Fc(D,_);return new fo(D,"signInViaPopup",m,W).executeNotNull()})).apply(this,arguments)}function Fu(){return(Fu=(0,l.c)(function*(E,m,_){const D=(0,Z.Yj)(E);ae(D.auth,m,to);const W=Fc(D.auth,_);return new fo(D.auth,"reauthViaPopup",m,W,D).executeNotNull()})).apply(this,arguments)}function Dl(){return(Dl=(0,l.c)(function*(E,m,_){const D=(0,Z.Yj)(E);ae(D.auth,m,to);const W=Fc(D.auth,_);return new fo(D.auth,"linkViaPopup",m,W,D).executeNotNull()})).apply(this,arguments)}let fo=(()=>{class E extends Vc{constructor(_,D,W,ie,rt){super(_,D,ie,rt),this.provider=W,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,l.c)(function*(){const D=yield _.execute();return se(D,_.auth,"internal-error"),D})()}onExecution(){var _=this;return(0,l.c)(function*(){Le(1===_.filter.length,"Popup operations only handle one event");const D=Ja();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],D),_.authWindow.associatedEvent=D,_.resolver._originValidation(_.auth).catch(W=>{_.reject(W)}),_.resolver._isIframeWebStorageSupported(_.auth,W=>{W||_.reject(et(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var D,W;this.pollId=null!==(W=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(et(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,lh.get())};_()}}return E.currentPopupAction=null,E})();const hu="pendingRedirect",es=new Map;class Vu extends Vc{constructor(m,_,D=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,D),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,l.c)(function*(){let D=es.get(_.auth._key());if(!D){try{const ie=(yield function Hi(E,m){return ka.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;D=()=>Promise.resolve(ie)}catch(W){D=()=>Promise.reject(W)}es.set(_.auth._key(),D)}return _.bypassAuthState||es.set(_.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,D=this;return(0,l.c)(function*(){if("signInViaRedirect"===m.type)return _().call(D,m);if("unknown"!==m.type){if(m.eventId){const W=yield D.auth._redirectUserForId(m.eventId);if(W)return D.user=W,_().call(D,m);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,l.c)(function*(){})()}cleanUp(){}}function ka(){return(ka=(0,l.c)(function*(E,m){const _=di(m),D=ts(E);if(!(yield D._isAvailable()))return!1;const W="true"===(yield D._get(_));return yield D._remove(_),W})).apply(this,arguments)}function bo(E,m){return li.apply(this,arguments)}function li(){return(li=(0,l.c)(function*(E,m){return ts(E)._set(di(m),"true")})).apply(this,arguments)}function Ji(E,m){es.set(E._key(),m)}function ts(E){return qn(E._redirectPersistence)}function di(E){return Br(hu,E.config.apiKey,E.name)}function Uu(E,m,_){return function Po(E,m,_){return Tl.apply(this,arguments)}(E,m,_)}function Tl(){return(Tl=(0,l.c)(function*(E,m,_){const D=qr(E);ae(E,m,to),yield D._initializationPromise;const W=Fc(D,_);return yield bo(W,D),W._openRedirect(D,m,"signInViaRedirect")})).apply(this,arguments)}function La(E,m,_){return function Co(E,m,_){return Fa.apply(this,arguments)}(E,m,_)}function Fa(){return(Fa=(0,l.c)(function*(E,m,_){const D=(0,Z.Yj)(E);ae(D.auth,m,to),yield D.auth._initializationPromise;const W=Fc(D.auth,_);yield bo(W,D.auth);const ie=yield gs(D);return W._openRedirect(D.auth,m,"reauthViaRedirect",ie)})).apply(this,arguments)}function _c(E,m,_){return function Ca(E,m,_){return Vs.apply(this,arguments)}(E,m,_)}function Vs(){return(Vs=(0,l.c)(function*(E,m,_){const D=(0,Z.Yj)(E);ae(D.auth,m,to),yield D.auth._initializationPromise;const W=Fc(D.auth,_);yield Se(!1,D,m.providerId),yield bo(W,D.auth);const ie=yield gs(D);return W._openRedirect(D.auth,m,"linkViaRedirect",ie)})).apply(this,arguments)}function ia(){return(ia=(0,l.c)(function*(E,m){return yield qr(E)._initializationPromise,Ss(E,m,!1)})).apply(this,arguments)}function Ss(E,m){return As.apply(this,arguments)}function As(){return(As=(0,l.c)(function*(E,m,_=!1){const D=qr(E),W=Fc(D,m),rt=yield new Vu(D,W,_).execute();return rt&&!_&&(delete rt.user._redirectEventId,yield D._persistUserIfCurrent(rt.user),yield D._setRedirectUser(null,m)),rt})).apply(this,arguments)}function gs(E){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,l.c)(function*(E){const m=Ja(`${E.uid}:::`);return E._redirectEventId=m,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),m})).apply(this,arguments)}class Us{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(m,D)&&(_=!0,this.sendToConsumer(m,D),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function vc(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wa(E);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var D;if(m.error&&!wa(m)){const W=(null===(D=m.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";_.onError(et(this.auth,W))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const D=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&D}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ql(m))}saveEventToCache(m){this.cachedEventUids.add(Ql(m)),this.lastProcessedEventTime=Date.now()}}function Ql(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(m=>m).join("-")}function wa({type:E,error:m}){return"unknown"===E&&"auth/no-auth-event"===(null==m?void 0:m.code)}function No(E){return bl.apply(this,arguments)}function bl(){return(bl=(0,l.c)(function*(E,m={}){return De(E,"GET","/v1/projects",m)})).apply(this,arguments)}const fu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nl=/^https?/;function pu(){return(pu=(0,l.c)(function*(E){if(E.config.emulator)return;const{authorizedDomains:m}=yield No(E);for(const _ of m)try{if(Bu(_))return}catch{}Xe(E,"unauthorized-domain")})).apply(this,arguments)}function Bu(E){const m=Ce(),{protocol:_,hostname:D}=new URL(m);if(E.startsWith("chrome-extension://")){const rt=new URL(E);return""===rt.hostname&&""===D?"chrome-extension:"===_&&E.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&rt.hostname===D}if(!nl.test(_))return!1;if(fu.test(E))return D===E;const W=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(D)}const Uc=new nt(3e4,6e4);function Sl(){const E=ji().___jsl;if(null!=E&&E.H)for(const m of Object.keys(E.H))if(E.H[m].r=E.H[m].r||[],E.H[m].L=E.H[m].L||[],E.H[m].r=[...E.H[m].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let gu=null;const Al=new nt(5e3,15e3),Oo="__/auth/iframe",$u="emulator/auth/iframe",zi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zh(E){const m=E.config;se(m.authDomain,E,"auth-domain-config-required");const _=m.emulator?me(m,$u):`https://${E.config.authDomain}/${Oo}`,D={apiKey:m.apiKey,appName:E.name,v:ee.SDK_VERSION},W=yc.get(E.config.apiHost);W&&(D.eid=W);const ie=E._getFrameworks();return ie.length&&(D.fw=ie.join(",")),`${_}?${(0,Z.ik)(D).slice(1)}`}function Xl(){return Xl=(0,l.c)(function*(E){const m=yield function dh(E){return gu=gu||function Td(E){return new Promise((m,_)=>{var D,W,ie;function rt(){Sl(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Sl(),_(et(E,"network-request-failed"))},timeout:Uc.get()})}if(null!==(W=null===(D=ji().gapi)||void 0===D?void 0:D.iframes)&&void 0!==W&&W.Iframe)m(gapi.iframes.getContext());else{if(null===(ie=ji().gapi)||void 0===ie||!ie.load){const Dt=An("iframefcb");return ji()[Dt]=()=>{gapi.load?rt():_(et(E,"network-request-failed"))},Te(`${function Dn(){return Me.gapiScript}()}?onload=${Dt}`).catch(en=>_(en))}rt()}}).catch(m=>{throw gu=null,m})}(E),gu}(E),_=ji().gapi;return se(_,E,"internal-error"),m.open({where:document.body,url:Zh(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zi,dontclear:!0},D=>new Promise(function(){var W=(0,l.c)(function*(ie,rt){yield D.restyle({setHideOnLeave:!1});const Dt=et(E,"network-request-failed"),en=ji().setTimeout(()=>{rt(Dt)},Al.get());function On(){ji().clearTimeout(en),ie(D)}D.ping(On).then(On,()=>{rt(Dt)})});return function(ie,rt){return W.apply(this,arguments)}}()))}),Xl.apply(this,arguments)}const Gu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ic{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Zl="__/auth/handler",mu="emulator/auth/handler",Ec=encodeURIComponent("fac");function Ml(E,m,_,D,W,ie){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,l.c)(function*(E,m,_,D,W,ie){se(E.config.authDomain,E,"auth-domain-config-required"),se(E.config.apiKey,E,"invalid-api-key");const rt={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:D,v:ee.SDK_VERSION,eventId:W};if(m instanceof to){m.setDefaultLanguage(E.languageCode),rt.providerId=m.providerId||"",(0,Z.t7)(m.getCustomParameters())||(rt.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Un,Hn]of Object.entries(ie||{}))rt[Un]=Hn}if(m instanceof Ls){const Un=m.getScopes().filter(Hn=>""!==Hn);Un.length>0&&(rt.scopes=Un.join(","))}E.tenantId&&(rt.tid=E.tenantId);const Dt=rt;for(const Un of Object.keys(Dt))void 0===Dt[Un]&&delete Dt[Un];const en=yield E._getAppCheckToken(),On=en?`#${Ec}=${encodeURIComponent(en)}`:"";return`${function Jh({config:E}){return E.emulator?me(E,mu):`https://${E.authDomain}/${Zl}`}(E)}?${(0,Z.ik)(Dt).slice(1)}${On}`})).apply(this,arguments)}const wc="webStorageSupport",$c=class bd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ea,this._completeRedirectFn=Ss,this._overrideRedirectResult=Ji}_openPopup(m,_,D,W){var ie=this;return(0,l.c)(function*(){var rt;Le(null===(rt=ie.eventManagers[m._key()])||void 0===rt?void 0:rt.manager,"_initialize() not called before _openPopup()");const Dt=yield Ml(m,_,D,Ce(),W);return function oa(E,m,_,D=500,W=600){const ie=Math.max((window.screen.availHeight-W)/2,0).toString(),rt=Math.max((window.screen.availWidth-D)/2,0).toString();let Dt="";const en=Object.assign(Object.assign({},Gu),{width:D.toString(),height:W.toString(),top:ie,left:rt}),On=(0,Z.Su)().toLowerCase();_&&(Dt=hr(On)?"_blank":_),so(On)&&(m=m||"http://localhost",en.scrollbars="yes");const Un=Object.entries(en).reduce((_o,[Ni,Ta])=>`${_o}${Ni}=${Ta},`,"");if(function Zn(E=(0,Z.Su)()){var m;return Xn(E)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(On)&&"_self"!==Dt)return function Bs(E,m){const _=document.createElement("a");_.href=E,_.target=m;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(D)}(m||"",Dt),new Ic(null);const Hn=window.open(m||"",Dt,Un);se(Hn,E,"popup-blocked");try{Hn.focus()}catch{}return new Ic(Hn)}(m,Dt,Ja())})()}_openRedirect(m,_,D,W){var ie=this;return(0,l.c)(function*(){return yield ie._originValidation(m),function ql(E){ji().location.href=E}(yield Ml(m,_,D,Ce(),W)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:W,promise:ie}=this.eventManagers[_];return W?Promise.resolve(W):(Le(ie,"If manager is not set, promise should be"),ie)}const D=this.initAndGetManager(m);return this.eventManagers[_]={promise:D},D.catch(()=>{delete this.eventManagers[_]}),D}initAndGetManager(m){var _=this;return(0,l.c)(function*(){const D=yield function Bc(E){return Xl.apply(this,arguments)}(m),W=new Us(m);return D.register("authEvent",ie=>(se(null==ie?void 0:ie.authEvent,m,"invalid-auth-event"),{status:W.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:W},_.iframes[m._key()]=D,W})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(wc,{type:wc},W=>{var ie;const rt=null===(ie=null==W?void 0:W[0])||void 0===ie?void 0:ie[wc];void 0!==rt&&_(!!rt),Xe(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function uh(E){return pu.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return Vr()||Or()||Xn()}};class Gc{constructor(m){this.factorId=m}_process(m,_,D){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,D);case"signin":return this._finalizeSignIn(m,_.credential);default:return L("unexpected MultiFactorSessionType")}}}class Va extends Gc{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Va(m)}_finalizeEnroll(m,_,D){return function au(E,m){return De(E,"POST","/v2/accounts/mfaEnrollment:finalize",Je(E,m))}(m,{idToken:_,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function R(E,m){return De(E,"POST","/v2/accounts/mfaSignIn:finalize",Je(E,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pl=(()=>{class E{constructor(){}static assertion(_){return Va._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var jc="@firebase/auth";class Wu{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,l.c)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(D=>{m((null==D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $s(){return window}(0,Z.sX)("authIdTokenMaxAge"),function X(E){Me=E}({loadJS:E=>new Promise((m,_)=>{const D=document.createElement("script");D.setAttribute("src",E),D.onload=m,D.onerror=W=>{const ie=et("internal-error");ie.customData=W,_(ie)},D.type="text/javascript",D.charset="UTF-8",function xi(){var E,m;return null!==(m=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==m?m:document}().appendChild(D)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function rl(E){(0,ee._registerComponent)(new _e.Yl("auth",(m,{options:_})=>{const D=m.getProvider("app").getImmediate(),W=m.getProvider("heartbeat"),ie=m.getProvider("app-check-internal"),{apiKey:rt,authDomain:Dt}=D.options;se(rt&&!rt.includes(":"),"invalid-api-key",{appName:D.name});const en={apiKey:rt,authDomain:Dt,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:go(E)},On=new Ir(D,W,ie,en);return function Kt(E,m){const _=(null==m?void 0:m.persistence)||[],D=(Array.isArray(_)?_:[_]).map(qn);null!=m&&m.errorMap&&E._updateErrorMap(m.errorMap),E._initializeWithPersistence(D,null==m?void 0:m.popupRedirectResolver)}(On,_),On},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,D)=>{m.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new _e.Yl("auth-internal",m=>{const _=qr(m.getProvider("auth").getImmediate());return new Wu(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(jc,"1.6.0",function Hc(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(E)),(0,ee.registerVersion)(jc,"1.6.0","esm2017")}("Browser");function aa(){return aa=(0,l.c)(function*(E,m,_){var D;const{BuildInfo:W}=$s();Le(m.sessionId,"AuthEvent did not contain a session ID");const ie=yield function Ol(E){return Hu.apply(this,arguments)}(m.sessionId),rt={};return Xn()?rt.ibi=W.packageName:vt()?rt.apn=W.packageName:Xe(E,"operation-not-supported-in-this-environment"),W.displayName&&(rt.appDisplayName=W.displayName),rt.sessionId=ie,Ml(E,_,m.type,void 0,null!==(D=m.eventId)&&void 0!==D?D:void 0,rt)}),aa.apply(this,arguments)}function $a(){return($a=(0,l.c)(function*(E){const{BuildInfo:m}=$s(),_={};Xn()?_.iosBundleId=m.packageName:vt()?_.androidPackageName=m.packageName:Xe(E,"operation-not-supported-in-this-environment"),yield No(E,_)})).apply(this,arguments)}function Kc(){return(Kc=(0,l.c)(function*(E,m,_){const{cordova:D}=$s();let W=()=>{};try{yield new Promise((ie,rt)=>{let Dt=null;function en(){var Hn;ie();const _o=null===(Hn=D.plugins.browsertab)||void 0===Hn?void 0:Hn.close;"function"==typeof _o&&_o(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function On(){Dt||(Dt=window.setTimeout(()=>{rt(et(E,"redirect-cancelled-by-user"))},2e3))}function Un(){"visible"===(null==document?void 0:document.visibilityState)&&On()}m.addPassiveListener(en),document.addEventListener("resume",On,!1),vt()&&document.addEventListener("visibilitychange",Un,!1),W=()=>{m.removePassiveListener(en),document.removeEventListener("resume",On,!1),document.removeEventListener("visibilitychange",Un,!1),Dt&&window.clearTimeout(Dt)}})}finally{W()}})).apply(this,arguments)}function Hu(){return(Hu=(0,l.c)(function*(E){const m=function wo(E){if(Le(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(E);const m=new ArrayBuffer(E.length),_=new Uint8Array(m);for(let D=0;D<E.length;D++)_[D]=E.charCodeAt(D);return _}(E),_=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(_)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class kl extends Us{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(m)),super.onEvent(m)}initialized(){var m=this;return(0,l.c)(function*(){yield m.initPromise})()}}function Ku(E){return il.apply(this,arguments)}function il(){return(il=(0,l.c)(function*(E){const m=yield fr()._get(So(E));return m&&(yield fr()._remove(So(E))),m})).apply(this,arguments)}function hh(){const E=[];for(let _=0;_<20;_++){const D=Math.floor(62*Math.random());E.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(D))}return E.join("")}function fr(){return qn(Js)}function So(E){return Br("authEvent",E.config.apiKey,E.name)}function Ll(E){if(null==E||!E.includes("?"))return{};const[m,..._]=E.split("?");return(0,Z.aw)(_.join("?"))}const nf=class Yu{constructor(){this._redirectPersistence=ea,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ss,this._overrideRedirectResult=Ji}_initialize(m){var _=this;return(0,l.c)(function*(){const D=m._key();let W=_.eventManagers.get(D);return W||(W=new kl(m),_.eventManagers.set(D,W),_.attachCallbackListeners(m,W)),W})()}_openPopup(m){Xe(m,"operation-not-supported-in-this-environment")}_openRedirect(m,_,D,W){var ie=this;return(0,l.c)(function*(){!function tf(E){var m,_,D,W,ie,rt,Dt,en,On,Un;const Hn=$s();se("function"==typeof(null===(m=null==Hn?void 0:Hn.universalLinks)||void 0===m?void 0:m.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),se(typeof(null===(_=null==Hn?void 0:Hn.BuildInfo)||void 0===_?void 0:_.packageName)<"u",E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),se("function"==typeof(null===(ie=null===(W=null===(D=null==Hn?void 0:Hn.cordova)||void 0===D?void 0:D.plugins)||void 0===W?void 0:W.browsertab)||void 0===ie?void 0:ie.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(en=null===(Dt=null===(rt=null==Hn?void 0:Hn.cordova)||void 0===rt?void 0:rt.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===en?void 0:en.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(Un=null===(On=null==Hn?void 0:Hn.cordova)||void 0===On?void 0:On.InAppBrowser)||void 0===Un?void 0:Un.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const rt=yield ie._initialize(m);yield rt.initialized(),rt.resetRedirect(),function ch(){es.clear()}(),yield ie._originValidation(m);const Dt=function zu(E,m,_=null){return{type:m,eventId:_,urlResponse:null,sessionId:hh(),postBody:null,tenantId:E.tenantId,error:et(E,"no-auth-event")}}(m,D,W);yield function la(E,m){return fr()._set(So(E),m)}(m,Dt);const en=yield function ec(E,m,_){return aa.apply(this,arguments)}(m,Dt,_),On=yield function Gs(E){const{cordova:m}=$s();return new Promise(_=>{m.plugins.browsertab.isAvailable(D=>{let W=null;D?m.plugins.browsertab.openUrl(E):W=m.InAppBrowser.open(E,function Kn(E=(0,Z.Su)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),_(W)})})}(en);return function Nl(E,m,_){return Kc.apply(this,arguments)}(m,rt,On)})()}_isIframeWebStorageSupported(m,_){throw new Error("Method not implemented.")}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Sd(E){return $a.apply(this,arguments)}(m)),this.originValidationPromises[_]}attachCallbackListeners(m,_){const{universalLinks:D,handleOpenURL:W,BuildInfo:ie}=$s(),rt=setTimeout((0,l.c)(function*(){yield Ku(m),_.onEvent(ph())}),500),Dt=function(){var Un=(0,l.c)(function*(Hn){clearTimeout(rt);const _o=yield Ku(m);let Ni=null;_o&&null!=Hn&&Hn.url&&(Ni=function Tc(E,m){var _,D;const W=function fh(E){const m=Ll(E),_=m.link?decodeURIComponent(m.link):void 0,D=Ll(_).link,W=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Ll(W).link||W||D||_||E}(m);if(W.includes("/__/auth/callback")){const ie=Ll(W),rt=ie.firebaseError?function qu(E){try{return JSON.parse(E)}catch{return null}}(decodeURIComponent(ie.firebaseError)):null,Dt=null===(D=null===(_=null==rt?void 0:rt.code)||void 0===_?void 0:_.split("auth/"))||void 0===D?void 0:D[1],en=Dt?et(Dt):null;return en?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:en,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:W,postBody:null}}return null}(_o,Hn.url)),_.onEvent(Ni||ph())});return function(_o){return Un.apply(this,arguments)}}();typeof D<"u"&&"function"==typeof D.subscribe&&D.subscribe(null,Dt);const en=W,On=`${ie.packageName.toLowerCase()}://`;$s().handleOpenURL=function(){var Un=(0,l.c)(function*(Hn){if(Hn.toLowerCase().startsWith(On)&&Dt({url:Hn}),"function"==typeof en)try{en(Hn)}catch(_o){console.error(_o)}});return function(Hn){return Un.apply(this,arguments)}}()}};function ph(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:et("no-auth-event")}}function Ga(){var E;return(null===(E=null==self?void 0:self.location)||void 0===E?void 0:E.protocol)||null}function Vl(E=(0,Z.Su)()){return!("file:"!==Ga()&&"ionic:"!==Ga()&&"capacitor:"!==Ga()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pd(){try{const E=self.localStorage,m=Ja();if(E)return E.setItem(m,"1"),E.removeItem(m),!function _h(E=(0,Z.Su)()){return function mh(){return(0,Z.Uv)()&&11===(null==document?void 0:document.documentMode)}()||function Iu(E=(0,Z.Su)()){return/Edge\/\d+/.test(E)}(E)}()||(0,Z.yy)()}catch{return oo()&&(0,Z.yy)()}return!1}function oo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tc(){return(function Rd(){return"http:"===Ga()||"https:"===Ga()}()||(0,Z.Cc)()||Vl())&&!function Md(){return(0,Z.AL)()||(0,Z.yW)()}()&&Pd()&&!oo()}function Ms(){return Vl()&&typeof document<"u"}function Eu(){return(Eu=(0,l.c)(function*(){return!!Ms()&&new Promise(E=>{const m=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),E(!0)})})})).apply(this,arguments)}const ms={LOCAL:"local",NONE:"none",SESSION:"session"},Wa=se,Bl="persistence";function Cu(E){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,l.c)(function*(E){yield E._initializationPromise;const m=Ha(),_=Br(Bl,E.config.apiKey,E.name);m&&m.setItem(_,E._getPersistence())})).apply(this,arguments)}function Ha(){var E;try{return(null===(E=function Ul(){return typeof window<"u"?window:null}())||void 0===E?void 0:E.sessionStorage)||null}catch{return null}}const xd=se;class za{constructor(){this.browserResolver=qn($c),this.cordovaResolver=qn(nf),this.underlyingResolver=null,this._redirectPersistence=ea,this._completeRedirectFn=Ss,this._overrideRedirectResult=Ji}_initialize(m){var _=this;return(0,l.c)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,_,D,W){var ie=this;return(0,l.c)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openPopup(m,_,D,W)})()}_openRedirect(m,_,D,W){var ie=this;return(0,l.c)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openRedirect(m,_,D,W)})()}_isIframeWebStorageSupported(m,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,_)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return Ms()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,l.c)(function*(){if(m.underlyingResolver)return;const _=yield function ja(){return Eu.apply(this,arguments)}();m.underlyingResolver=_?m.cordovaResolver:m.browserResolver})()}}function wu(E){return E.unwrap()}function rf(E){return Wo(E)}function Wo(E){const{_tokenResponse:m}=E instanceof Z.kx?E.customData:E;if(!m)return null;if(!(E instanceof Z.kx)&&"temporaryProof"in m&&"phoneNumber"in m)return ui.credentialFromResult(E);const _=m.providerId;if(!_||_===Qe.PASSWORD)return null;let D;switch(_){case Qe.GOOGLE:D=fl;break;case Qe.FACEBOOK:D=hl;break;case Qe.GITHUB:D=mi;break;case Qe.TWITTER:D=as;break;default:const{oauthIdToken:W,oauthAccessToken:ie,oauthTokenSecret:rt,pendingToken:Dt,nonce:en}=m;return ie||rt||W||Dt?Dt?_.startsWith("saml.")?Es._create(_,Dt):Lr._fromParams({providerId:_,signInMethod:_,pendingToken:Dt,idToken:W,accessToken:ie}):new ss(_).credential({idToken:W,accessToken:ie,rawNonce:en}):null}return E instanceof Z.kx?D.credentialFromError(E):D.credentialFromResult(E)}function Tr(E,m){return m.catch(_=>{throw _ instanceof Z.kx&&function lp(E,m){var _;const D=null===(_=m.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null==m?void 0:m.code))m.resolver=new ic(E,function Gi(E,m){var _;const D=(0,Z.Yj)(E),W=m;return se(m.customData.operationType,D,"argument-error"),se(null===(_=W.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,D,"argument-error"),sn._fromError(D,W)}(E,m));else if(D){const W=Wo(m),ie=m;W&&(ie.credential=W,ie.tenantId=D.tenantId||void 0,ie.email=D.email||void 0,ie.phoneNumber=D.phoneNumber||void 0)}}(E,_),_}).then(_=>{const W=_.user;return{operationType:_.operationType,credential:rf(_),additionalUserInfo:Ut(_),user:Da.getOrCreate(W)}})}function rc(E,m){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,l.c)(function*(E,m){const _=yield m;return{verificationId:_.verificationId,confirm:D=>Tr(E,_.confirm(D))}})).apply(this,arguments)}class ic{constructor(m,_){this.resolver=_,this.auth=function Nd(E){return E.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Tr(wu(this.auth),this.resolver.resolveSignIn(m))}}class Da{constructor(m){this._delegate=m,this.multiFactor=function rn(E){const m=(0,Z.Yj)(E);return Ot.has(m)||Ot.set(m,Rn._fromUser(m)),Ot.get(m)}(m)}static getOrCreate(m){return Da.USER_MAP.has(m)||Da.USER_MAP.set(m,new Da(m)),Da.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var _=this;return(0,l.c)(function*(){return Tr(_.auth,Fo(_._delegate,m))})()}linkWithPhoneNumber(m,_){var D=this;return(0,l.c)(function*(){return rc(D.auth,function wl(E,m,_){return hc.apply(this,arguments)}(D._delegate,m,_))})()}linkWithPopup(m){var _=this;return(0,l.c)(function*(){return Tr(_.auth,function mc(E,m,_){return Dl.apply(this,arguments)}(_._delegate,m,za))})()}linkWithRedirect(m){var _=this;return(0,l.c)(function*(){return yield Cu(qr(_.auth)),_c(_._delegate,m,za)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var _=this;return(0,l.c)(function*(){return Tr(_.auth,cc(_._delegate,m))})()}reauthenticateWithPhoneNumber(m,_){return rc(this.auth,function Kh(E,m,_){return Dd.apply(this,arguments)}(this._delegate,m,_))}reauthenticateWithPopup(m){return Tr(this.auth,function Qh(E,m,_){return Fu.apply(this,arguments)}(this._delegate,m,za))}reauthenticateWithRedirect(m){var _=this;return(0,l.c)(function*(){return yield Cu(qr(_.auth)),La(_._delegate,m,za)})()}sendEmailVerification(m){return function Ci(E,m){return Ea.apply(this,arguments)}(this._delegate,m)}unlink(m){var _=this;return(0,l.c)(function*(){return yield function z(E,m){return V.apply(this,arguments)}(_._delegate,m),_})()}updateEmail(m){return function us(E,m){return vi((0,Z.Yj)(E),m,null)}(this._delegate,m)}updatePassword(m){return function Ui(E,m){return vi((0,Z.Yj)(E),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function du(E,m){return Dr.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function Mo(E,m){return Ds.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,_){return function Eo(E,m,_){return Uo.apply(this,arguments)}(this._delegate,m,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Da.USER_MAP=new WeakMap;const bc=se;let sf=(()=>{class E{constructor(_,D){if(this.app=_,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=_.options;bc(W,"invalid-api-key",{appName:_.name}),bc(W,"invalid-api-key",{appName:_.name});const ie=typeof window<"u"?za:void 0;this._delegate=D.initialize({options:{persistence:Zu(W,_.name),popupRedirectResolver:ie}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Da.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,D){!function gn(E,m,_){const D=qr(E);se(D._canInitEmulator,D,"emulator-config-failed"),se(/^https?:\/\//.test(m),D,"invalid-emulator-scheme");const W=!(null==_||!_.disableWarnings),ie=tn(m),{host:rt,port:Dt}=function Nt(E){const m=tn(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(m.length));if(!_)return{host:"",port:null};const D=_[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(D);if(W){const ie=W[1];return{host:ie,port:on(D.substr(ie.length+1))}}{const[ie,rt]=D.split(":");return{host:ie,port:on(rt)}}}(m);D.config.emulator={url:`${ie}//${rt}${null===Dt?"":`:${Dt}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:rt,port:Dt,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function qt(){function E(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}(this._delegate,_,D)}applyActionCode(_){return function Xs(E,m){return ur.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Vo(this._delegate,_)}confirmPasswordReset(_,D){return function Qa(E,m,_){return Xa.apply(this,arguments)}(this._delegate,_,D)}createUserWithEmailAndPassword(_,D){var W=this;return(0,l.c)(function*(){return Tr(W._delegate,function Kl(E,m,_){return ya.apply(this,arguments)}(W._delegate,_,D))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Na(E,m){return zr.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function uc(E,m){const _=Lo.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,l.c)(function*(){bc(tc(),_._delegate,"operation-not-supported-in-this-environment");const D=yield function Xh(E,m){return ia.apply(this,arguments)}(_._delegate,za);return D?Tr(_._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function gh(E,m){qr(E)._logFramework(m)}(this._delegate,_)}onAuthStateChanged(_,D,W){const{next:ie,error:rt,complete:Dt}=Od(_,D,W);return this._delegate.onAuthStateChanged(ie,rt,Dt)}onIdTokenChanged(_,D,W){const{next:ie,error:rt,complete:Dt}=Od(_,D,W);return this._delegate.onIdTokenChanged(ie,rt,Dt)}sendSignInLinkToEmail(_,D){return function Ia(E,m,_){return no.apply(this,arguments)}(this._delegate,_,D)}sendPasswordResetEmail(_,D){return function gl(E,m,_){return _a.apply(this,arguments)}(this._delegate,_,D||void 0)}setPersistence(_){var D=this;return(0,l.c)(function*(){let W;switch(function ol(E,m){Wa(Object.values(ms).includes(m),E,"invalid-persistence-type"),(0,Z.AL)()?Wa(m!==ms.SESSION,E,"unsupported-persistence-type"):(0,Z.yW)()?Wa(m===ms.NONE,E,"unsupported-persistence-type"):oo()?Wa(m===ms.NONE||m===ms.LOCAL&&(0,Z.yy)(),E,"unsupported-persistence-type"):Wa(m===ms.NONE||Pd(),E,"unsupported-persistence-type")}(D._delegate,_),_){case ms.SESSION:W=ea;break;case ms.LOCAL:W=(yield qn(P)._isAvailable())?P:Js;break;case ms.NONE:W=Ar;break;default:return Xe("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Tr(this._delegate,function ls(E){return qa.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Tr(this._delegate,Fr(this._delegate,_))}signInWithCustomToken(_){return Tr(this._delegate,function Qs(E,m){return xa.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,D){return Tr(this._delegate,function fs(E,m,_){return Fr((0,Z.Yj)(E),Ei.credential(m,_)).catch(function(){var D=(0,l.c)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&Ya(E),W});return function(W){return D.apply(this,arguments)}}())}(this._delegate,_,D))}signInWithEmailLink(_,D){return Tr(this._delegate,function su(E,m,_){return ws.apply(this,arguments)}(this._delegate,_,D))}signInWithPhoneNumber(_,D){return rc(this._delegate,function jo(E,m,_){return Lc.apply(this,arguments)}(this._delegate,_,D))}signInWithPopup(_){var D=this;return(0,l.c)(function*(){return bc(tc(),D._delegate,"operation-not-supported-in-this-environment"),Tr(D._delegate,function ps(E,m,_){return Lu.apply(this,arguments)}(D._delegate,_,za))})()}signInWithRedirect(_){var D=this;return(0,l.c)(function*(){return bc(tc(),D._delegate,"operation-not-supported-in-this-environment"),yield Cu(D._delegate),Uu(D._delegate,_,za)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function va(E,m){return ml.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=ms,E})();function Od(E,m,_){let D=E;"function"!=typeof E&&({next:D,error:m,complete:_}=E);const W=D;return{next:rt=>W(rt&&Da.getOrCreate(rt)),error:m,complete:_}}function Zu(E,m){const _=function nc(E,m){const _=Ha();if(!_)return[];const D=Br(Bl,E,m);switch(_.getItem(D)){case ms.NONE:return[Ar];case ms.LOCAL:return[P,ea];case ms.SESSION:return[ea];default:return[]}}(E,m);if(typeof self<"u"&&!_.includes(P)&&_.push(P),typeof window<"u")for(const D of[Js,ea])_.includes(D)||_.push(D);return _.includes(Ar)||_.push(Ar),_}class Sc{constructor(){this.providerId="phone",this._delegate=new ui(wu(K.c.auth()))}static credential(m,_){return ui.credential(m,_)}verifyPhoneNumber(m,_){return this._delegate.verifyPhoneNumber(m,_)}unwrap(){return this._delegate}}Sc.PHONE_SIGN_IN_METHOD=ui.PHONE_SIGN_IN_METHOD,Sc.PROVIDER_ID=ui.PROVIDER_ID;const js=se;class Yc{constructor(m,_,D=K.c.app()){var W;js(null===(W=D.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new io(D.auth(),m,_),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ju(E){E.INTERNAL.registerComponent(new _e.Yl("auth-compat",m=>{const _=m.getProvider("app-compat").getImmediate(),D=m.getProvider("auth");return new sf(_,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ei,FacebookAuthProvider:hl,GithubAuthProvider:mi,GoogleAuthProvider:fl,OAuthProvider:ss,SAMLAuthProvider:Ra,PhoneAuthProvider:Sc,PhoneMultiFactorGenerator:Pl,RecaptchaVerifier:Yc,TwitterAuthProvider:as,Auth:sf,AuthCredential:ln,Error:Z.kx}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.5.2")}(K.c)},1528:(mn,st,N)=>{"use strict";function l(Z,ee,Ne,ge,_e,je,Qe){try{var be=Z[je](Qe),Ee=be.value}catch(Ke){return void Ne(Ke)}be.done?ee(Ee):Promise.resolve(Ee).then(ge,_e)}function K(Z){return function(){var ee=this,Ne=arguments;return new Promise(function(ge,_e){var je=Z.apply(ee,Ne);function Qe(Ee){l(je,ge,_e,Qe,be,"next",Ee)}function be(Ee){l(je,ge,_e,Qe,be,"throw",Ee)}Qe(void 0)})}}N.d(st,{c:()=>K})},4580:(mn,st,N)=>{"use strict";function l(Ne){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ge){return typeof ge}:function(ge){return ge&&"function"==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge})(Ne)}function ee(Ne,ge,_e){return(ge=function Z(Ne){var ge=function K(Ne,ge){if("object"!=l(Ne)||!Ne)return Ne;var _e=Ne[Symbol.toPrimitive];if(void 0!==_e){var je=_e.call(Ne,ge||"default");if("object"!=l(je))return je;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===ge?String:Number)(Ne)}(Ne,"string");return"symbol"==l(ge)?ge:String(ge)}(ge))in Ne?Object.defineProperty(Ne,ge,{value:_e,enumerable:!0,configurable:!0,writable:!0}):Ne[ge]=_e,Ne}N.d(st,{c:()=>ee})},1316:(mn,st,N)=>{"use strict";function ee(me,he){var ye={};for(var Fe in me)Object.prototype.hasOwnProperty.call(me,Fe)&&he.indexOf(Fe)<0&&(ye[Fe]=me[Fe]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(Fe=Object.getOwnPropertySymbols(me);Je<Fe.length;Je++)he.indexOf(Fe[Je])<0&&Object.prototype.propertyIsEnumerable.call(me,Fe[Je])&&(ye[Fe[Je]]=me[Fe[Je]])}return ye}function Ne(me,he,ye,Fe){var $t,Je=arguments.length,De=Je<3?he:null===Fe?Fe=Object.getOwnPropertyDescriptor(he,ye):Fe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)De=Reflect.decorate(me,he,ye,Fe);else for(var Jt=me.length-1;Jt>=0;Jt--)($t=me[Jt])&&(De=(Je<3?$t(De):Je>3?$t(he,ye,De):$t(he,ye))||De);return Je>3&&De&&Object.defineProperty(he,ye,De),De}function Ke(me,he,ye,Fe){return new(ye||(ye=Promise))(function(De,$t){function Jt(an){try{Lt(Fe.next(an))}catch(Qn){$t(Qn)}}function dn(an){try{Lt(Fe.throw(an))}catch(Qn){$t(Qn)}}function Lt(an){an.done?De(an.value):function Je(De){return De instanceof ye?De:new ye(function($t){$t(De)})}(an.value).then(Jt,dn)}Lt((Fe=Fe.apply(me,he||[])).next())})}function ve(me){return this instanceof ve?(this.v=me,this):new ve(me)}function Xe(me,he,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,Fe=ye.apply(me,he||[]),De=[];return Je={},$t("next"),$t("throw"),$t("return"),Je[Symbol.asyncIterator]=function(){return this},Je;function $t(jn){Fe[jn]&&(Je[jn]=function(xt){return new Promise(function(ft,Tt){De.push([jn,xt,ft,Tt])>1||Jt(jn,xt)})})}function Jt(jn,xt){try{!function dn(jn){jn.value instanceof ve?Promise.resolve(jn.value.v).then(Lt,an):Qn(De[0][2],jn)}(Fe[jn](xt))}catch(ft){Qn(De[0][3],ft)}}function Lt(jn){Jt("next",jn)}function an(jn){Jt("throw",jn)}function Qn(jn,xt){jn(xt),De.shift(),De.length&&Jt(De[0][0],De[0][1])}}function at(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,he=me[Symbol.asyncIterator];return he?he.call(me):(me=function it(me){var he="function"==typeof Symbol&&Symbol.iterator,ye=he&&me[he],Fe=0;if(ye)return ye.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&Fe>=me.length&&(me=void 0),{value:me&&me[Fe++],done:!me}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),ye={},Fe("next"),Fe("throw"),Fe("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function Fe(De){ye[De]=me[De]&&function($t){return new Promise(function(Jt,dn){!function Je(De,$t,Jt,dn){Promise.resolve(dn).then(function(Lt){De({value:Lt,done:Jt})},$t)}(Jt,dn,($t=me[De]($t)).done,$t.value)})}}}N.d(st,{U1:()=>ve,UN:()=>Ne,kH:()=>Ke,mA:()=>at,o7:()=>Xe,sX:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},mn=>{mn(mn.s=1536)}]);